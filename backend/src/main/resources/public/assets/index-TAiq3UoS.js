function cV(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Mw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g2={exports:{}},xf={},x2={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=Symbol.for("react.element"),dV=Symbol.for("react.portal"),uV=Symbol.for("react.fragment"),hV=Symbol.for("react.strict_mode"),mV=Symbol.for("react.profiler"),pV=Symbol.for("react.provider"),fV=Symbol.for("react.context"),gV=Symbol.for("react.forward_ref"),xV=Symbol.for("react.suspense"),vV=Symbol.for("react.memo"),yV=Symbol.for("react.lazy"),DS=Symbol.iterator;function jV(e){return e===null||typeof e!="object"?null:(e=DS&&e[DS]||e["@@iterator"],typeof e=="function"?e:null)}var v2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y2=Object.assign,j2={};function oc(e,t,n){this.props=e,this.context=t,this.refs=j2,this.updater=n||v2}oc.prototype.isReactComponent={};oc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function w2(){}w2.prototype=oc.prototype;function Rw(e,t,n){this.props=e,this.context=t,this.refs=j2,this.updater=n||v2}var Fw=Rw.prototype=new w2;Fw.constructor=Rw;y2(Fw,oc.prototype);Fw.isPureReactComponent=!0;var kS=Array.isArray,N2=Object.prototype.hasOwnProperty,Ow={current:null},b2={key:!0,ref:!0,__self:!0,__source:!0};function S2(e,t,n){var r,a={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)N2.call(t,r)&&!b2.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Pu,type:e,key:o,ref:i,props:a,_owner:Ow.current}}function wV(e,t){return{$$typeof:Pu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Iw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pu}function NV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var MS=/\/+/g;function Xg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NV(""+e.key):t.toString(36)}function xm(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Pu:case dV:i=!0}}if(i)return i=e,a=a(i),e=r===""?"."+Xg(i,0):r,kS(a)?(n="",e!=null&&(n=e.replace(MS,"$&/")+"/"),xm(a,t,n,"",function(d){return d})):a!=null&&(Iw(a)&&(a=wV(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(MS,"$&/")+"/")+e)),t.push(a)),1;if(i=0,r=r===""?".":r+":",kS(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+Xg(o,l);i+=xm(o,t,n,c,a)}else if(c=jV(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+Xg(o,l++),i+=xm(o,t,n,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function bh(e,t,n){if(e==null)return e;var r=[],a=0;return xm(e,r,"","",function(o){return t.call(n,o,a++)}),r}function bV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Us={current:null},vm={transition:null},SV={ReactCurrentDispatcher:Us,ReactCurrentBatchConfig:vm,ReactCurrentOwner:Ow};function C2(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:bh,forEach:function(e,t,n){bh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bh(e,function(){t++}),t},toArray:function(e){return bh(e,function(t){return t})||[]},only:function(e){if(!Iw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rt.Component=oc;rt.Fragment=uV;rt.Profiler=mV;rt.PureComponent=Rw;rt.StrictMode=hV;rt.Suspense=xV;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SV;rt.act=C2;rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=y2({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ow.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N2.call(t,c)&&!b2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Pu,type:e.type,key:a,ref:o,props:r,_owner:i}};rt.createContext=function(e){return e={$$typeof:fV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pV,_context:e},e.Consumer=e};rt.createElement=S2;rt.createFactory=function(e){var t=S2.bind(null,e);return t.type=e,t};rt.createRef=function(){return{current:null}};rt.forwardRef=function(e){return{$$typeof:gV,render:e}};rt.isValidElement=Iw;rt.lazy=function(e){return{$$typeof:yV,_payload:{_status:-1,_result:e},_init:bV}};rt.memo=function(e,t){return{$$typeof:vV,type:e,compare:t===void 0?null:t}};rt.startTransition=function(e){var t=vm.transition;vm.transition={};try{e()}finally{vm.transition=t}};rt.unstable_act=C2;rt.useCallback=function(e,t){return Us.current.useCallback(e,t)};rt.useContext=function(e){return Us.current.useContext(e)};rt.useDebugValue=function(){};rt.useDeferredValue=function(e){return Us.current.useDeferredValue(e)};rt.useEffect=function(e,t){return Us.current.useEffect(e,t)};rt.useId=function(){return Us.current.useId()};rt.useImperativeHandle=function(e,t,n){return Us.current.useImperativeHandle(e,t,n)};rt.useInsertionEffect=function(e,t){return Us.current.useInsertionEffect(e,t)};rt.useLayoutEffect=function(e,t){return Us.current.useLayoutEffect(e,t)};rt.useMemo=function(e,t){return Us.current.useMemo(e,t)};rt.useReducer=function(e,t,n){return Us.current.useReducer(e,t,n)};rt.useRef=function(e){return Us.current.useRef(e)};rt.useState=function(e){return Us.current.useState(e)};rt.useSyncExternalStore=function(e,t,n){return Us.current.useSyncExternalStore(e,t,n)};rt.useTransition=function(){return Us.current.useTransition()};rt.version="18.3.1";x2.exports=rt;var h=x2.exports;const Nt=Mw(h),Au=cV({__proto__:null,default:Nt},[h]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CV=h,EV=Symbol.for("react.element"),TV=Symbol.for("react.fragment"),PV=Object.prototype.hasOwnProperty,AV=CV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DV={key:!0,ref:!0,__self:!0,__source:!0};function E2(e,t,n){var r,a={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)PV.call(t,r)&&!DV.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:EV,type:e,key:o,ref:i,props:a,_owner:AV.current}}xf.Fragment=TV;xf.jsx=E2;xf.jsxs=E2;g2.exports=xf;var s=g2.exports,T2={exports:{}},Tn={},P2={exports:{}},A2={};(function(e){/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function t(M,_){var H=M.length;M.push(_);e:for(;0<H;){var $=H-1>>>1,B=M[$];if(0<a(B,_))M[$]=_,M[H]=B,H=$;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var _=M[0],H=M.pop();if(H!==_){M[0]=H;e:for(var $=0,B=M.length,W=B>>>1;$<W;){var q=2*($+1)-1,Y=M[q],pe=q+1,J=M[pe];if(0>a(Y,H))pe<B&&0>a(J,Y)?(M[$]=J,M[pe]=H,$=pe):(M[$]=Y,M[q]=H,$=q);else if(pe<B&&0>a(J,H))M[$]=J,M[pe]=H,$=pe;else break e}}return _}function a(M,_){var H=M.sortIndex-_.sortIndex;return H!==0?H:M.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,m=null,p=3,g=!1,x=!1,f=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(M){for(var _=n(d);_!==null;){if(_.callback===null)r(d);else if(_.startTime<=M)r(d),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(d)}}function N(M){if(f=!1,j(M),!x)if(n(c)!==null)x=!0,T(b);else{var _=n(d);_!==null&&D(N,_.startTime-M)}}function b(M,_){x=!1,f&&(f=!1,y(P),P=-1),g=!0;var H=p;try{for(j(_),m=n(c);m!==null&&(!(m.expirationTime>_)||M&&!R());){var $=m.callback;if(typeof $=="function"){m.callback=null,p=m.priorityLevel;var B=$(m.expirationTime<=_);_=e.unstable_now(),typeof B=="function"?m.callback=B:m===n(c)&&r(c),j(_)}else r(c);m=n(c)}if(m!==null)var W=!0;else{var q=n(d);q!==null&&D(N,q.startTime-_),W=!1}return W}finally{m=null,p=H,g=!1}}var E=!1,S=null,P=-1,A=5,L=-1;function R(){return!(e.unstable_now()-L<A)}function I(){if(S!==null){var M=e.unstable_now();L=M;var _=!0;try{_=S(!0,M)}finally{_?V():(E=!1,S=null)}}else E=!1}var V;if(typeof v=="function")V=function(){v(I)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,k=O.port2;O.port1.onmessage=I,V=function(){k.postMessage(null)}}else V=function(){w(I,0)};function T(M){S=M,E||(E=!0,V())}function D(M,_){P=w(function(){M(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,T(b))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(p){case 1:case 2:case 3:var _=3;break;default:_=p}var H=p;p=_;try{return M()}finally{p=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,_){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=p;p=M;try{return _()}finally{p=H}},e.unstable_scheduleCallback=function(M,_,H){var $=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?$+H:$):H=$,M){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=H+B,M={id:u++,callback:_,priorityLevel:M,startTime:H,expirationTime:B,sortIndex:-1},H>$?(M.sortIndex=H,t(d,M),n(c)===null&&M===n(d)&&(f?(y(P),P=-1):f=!0,D(N,H-$))):(M.sortIndex=B,t(c,M),x||g||(x=!0,T(b))),M},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(M){var _=p;return function(){var H=p;p=_;try{return M.apply(this,arguments)}finally{p=H}}}})(A2);P2.exports=A2;var kV=P2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MV=h,bn=kV;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D2=new Set,Md={};function Ni(e,t){Ml(e,t),Ml(e+"Capture",t)}function Ml(e,t){for(Md[e]=t,e=0;e<t.length;e++)D2.add(t[e])}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zv=Object.prototype.hasOwnProperty,RV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RS={},FS={};function FV(e){return zv.call(FS,e)?!0:zv.call(RS,e)?!1:RV.test(e)?FS[e]=!0:(RS[e]=!0,!1)}function OV(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IV(e,t,n,r){if(t===null||typeof t>"u"||OV(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bs(e,t,n,r,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var ys={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ys[e]=new Bs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ys[t]=new Bs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ys[e]=new Bs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ys[e]=new Bs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ys[e]=new Bs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ys[e]=new Bs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ys[e]=new Bs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ys[e]=new Bs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ys[e]=new Bs(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lw=/[\-:]([a-z])/g;function $w(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lw,$w);ys[t]=new Bs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lw,$w);ys[t]=new Bs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lw,$w);ys[t]=new Bs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ys[e]=new Bs(e,1,!1,e.toLowerCase(),null,!1,!1)});ys.xlinkHref=new Bs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ys[e]=new Bs(e,1,!1,e.toLowerCase(),null,!0,!0)});function _w(e,t,n,r){var a=ys.hasOwnProperty(t)?ys[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IV(t,n,a,r)&&(n=null),r||a===null?FV(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ba=MV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),Xi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),Xv=Symbol.for("react.profiler"),k2=Symbol.for("react.provider"),M2=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Yv=Symbol.for("react.suspense"),Kv=Symbol.for("react.suspense_list"),Bw=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),R2=Symbol.for("react.offscreen"),OS=Symbol.iterator;function $c(e){return e===null||typeof e!="object"?null:(e=OS&&e[OS]||e["@@iterator"],typeof e=="function"?e:null)}var Ht=Object.assign,Yg;function nd(e){if(Yg===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yg=t&&t[1]||""}return`
`+Yg+e}var Kg=!1;function Gg(e,t){if(!e||Kg)return"";Kg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=r.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Kg=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nd(e):""}function LV(e){switch(e.tag){case 5:return nd(e.type);case 16:return nd("Lazy");case 13:return nd("Suspense");case 19:return nd("SuspenseList");case 0:case 2:case 15:return e=Gg(e.type,!1),e;case 11:return e=Gg(e.type.render,!1),e;case 1:return e=Gg(e.type,!0),e;default:return""}}function Gv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yi:return"Fragment";case Xi:return"Portal";case Xv:return"Profiler";case Vw:return"StrictMode";case Yv:return"Suspense";case Kv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case M2:return(e.displayName||"Context")+".Consumer";case k2:return(e._context.displayName||"Context")+".Provider";case Uw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bw:return t=e.displayName||null,t!==null?t:Gv(e.type)||"Memo";case Ba:t=e._payload,e=e._init;try{return Gv(e(t))}catch{}}return null}function $V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gv(t);case 8:return t===Vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function co(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function F2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _V(e){var t=F2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ch(e){e._valueTracker||(e._valueTracker=_V(e))}function O2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=F2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jv(e,t){var n=t.checked;return Ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function IS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=co(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function I2(e,t){t=t.checked,t!=null&&_w(e,"checked",t,!1)}function Qv(e,t){I2(e,t);var n=co(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Zv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Zv(e,t.type,co(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function LS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Zv(e,t,n){(t!=="number"||Gm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rd=Array.isArray;function fl(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+co(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ey(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $S(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(rd(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:co(n)}}function L2(e,t){var n=co(t.value),r=co(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _S(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ty(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Eh,_2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Eh=Eh||document.createElement("div"),Eh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Eh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var md={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VV=["Webkit","ms","Moz","O"];Object.keys(md).forEach(function(e){VV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),md[t]=md[e]})});function V2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||md.hasOwnProperty(e)&&md[e]?(""+t).trim():t+"px"}function U2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=V2(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var UV=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sy(e,t){if(t){if(UV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function ny(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ry=null;function Hw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ay=null,gl=null,xl=null;function VS(e){if(e=Mu(e)){if(typeof ay!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=Nf(t),ay(e.stateNode,e.type,t))}}function B2(e){gl?xl?xl.push(e):xl=[e]:gl=e}function H2(){if(gl){var e=gl,t=xl;if(xl=gl=null,VS(e),t)for(e=0;e<t.length;e++)VS(t[e])}}function q2(e,t){return e(t)}function W2(){}var Jg=!1;function z2(e,t,n){if(Jg)return e(t,n);Jg=!0;try{return q2(e,t,n)}finally{Jg=!1,(gl!==null||xl!==null)&&(W2(),H2())}}function Fd(e,t){var n=e.stateNode;if(n===null)return null;var r=Nf(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var oy=!1;if(ua)try{var _c={};Object.defineProperty(_c,"passive",{get:function(){oy=!0}}),window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{oy=!1}function BV(e,t,n,r,a,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var pd=!1,Jm=null,Qm=!1,iy=null,HV={onError:function(e){pd=!0,Jm=e}};function qV(e,t,n,r,a,o,i,l,c){pd=!1,Jm=null,BV.apply(HV,arguments)}function WV(e,t,n,r,a,o,i,l,c){if(qV.apply(this,arguments),pd){if(pd){var d=Jm;pd=!1,Jm=null}else throw Error(Ce(198));Qm||(Qm=!0,iy=d)}}function bi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function X2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function US(e){if(bi(e)!==e)throw Error(Ce(188))}function zV(e){var t=e.alternate;if(!t){if(t=bi(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return US(a),e;if(o===r)return US(a),t;o=o.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function Y2(e){return e=zV(e),e!==null?K2(e):null}function K2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=K2(e);if(t!==null)return t;e=e.sibling}return null}var G2=bn.unstable_scheduleCallback,BS=bn.unstable_cancelCallback,XV=bn.unstable_shouldYield,YV=bn.unstable_requestPaint,Jt=bn.unstable_now,KV=bn.unstable_getCurrentPriorityLevel,qw=bn.unstable_ImmediatePriority,J2=bn.unstable_UserBlockingPriority,Zm=bn.unstable_NormalPriority,GV=bn.unstable_LowPriority,Q2=bn.unstable_IdlePriority,vf=null,Ir=null;function JV(e){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(vf,e,void 0,(e.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:e6,QV=Math.log,ZV=Math.LN2;function e6(e){return e>>>=0,e===0?32:31-(QV(e)/ZV|0)|0}var Th=64,Ph=4194304;function ad(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ep(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~a;l!==0?r=ad(l):(o&=i,o!==0&&(r=ad(o)))}else i=n&~a,i!==0?r=ad(i):o!==0&&(r=ad(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-lr(t),a=1<<n,r|=e[n],t&=~a;return r}function t6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s6(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-lr(o),l=1<<i,c=a[i];c===-1?(!(l&n)||l&r)&&(a[i]=t6(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function ly(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z2(){var e=Th;return Th<<=1,!(Th&4194240)&&(Th=64),e}function Qg(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Du(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lr(t),e[t]=n}function n6(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-lr(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Ww(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-lr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var St=0;function eA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tA,zw,sA,nA,rA,cy=!1,Ah=[],Ga=null,Ja=null,Qa=null,Od=new Map,Id=new Map,qa=[],r6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HS(e,t){switch(e){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ja=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Od.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(t.pointerId)}}function Vc(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Mu(t),t!==null&&zw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function a6(e,t,n,r,a){switch(t){case"focusin":return Ga=Vc(Ga,e,t,n,r,a),!0;case"dragenter":return Ja=Vc(Ja,e,t,n,r,a),!0;case"mouseover":return Qa=Vc(Qa,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Od.set(o,Vc(Od.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Id.set(o,Vc(Id.get(o)||null,e,t,n,r,a)),!0}return!1}function aA(e){var t=_o(e.target);if(t!==null){var n=bi(t);if(n!==null){if(t=n.tag,t===13){if(t=X2(n),t!==null){e.blockedOn=t,rA(e.priority,function(){sA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ym(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=dy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ry=r,n.target.dispatchEvent(r),ry=null}else return t=Mu(n),t!==null&&zw(t),e.blockedOn=n,!1;t.shift()}return!0}function qS(e,t,n){ym(e)&&n.delete(t)}function o6(){cy=!1,Ga!==null&&ym(Ga)&&(Ga=null),Ja!==null&&ym(Ja)&&(Ja=null),Qa!==null&&ym(Qa)&&(Qa=null),Od.forEach(qS),Id.forEach(qS)}function Uc(e,t){e.blockedOn===t&&(e.blockedOn=null,cy||(cy=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,o6)))}function Ld(e){function t(a){return Uc(a,e)}if(0<Ah.length){Uc(Ah[0],e);for(var n=1;n<Ah.length;n++){var r=Ah[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ga!==null&&Uc(Ga,e),Ja!==null&&Uc(Ja,e),Qa!==null&&Uc(Qa,e),Od.forEach(t),Id.forEach(t),n=0;n<qa.length;n++)r=qa[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qa.length&&(n=qa[0],n.blockedOn===null);)aA(n),n.blockedOn===null&&qa.shift()}var vl=ba.ReactCurrentBatchConfig,tp=!0;function i6(e,t,n,r){var a=St,o=vl.transition;vl.transition=null;try{St=1,Xw(e,t,n,r)}finally{St=a,vl.transition=o}}function l6(e,t,n,r){var a=St,o=vl.transition;vl.transition=null;try{St=4,Xw(e,t,n,r)}finally{St=a,vl.transition=o}}function Xw(e,t,n,r){if(tp){var a=dy(e,t,n,r);if(a===null)lx(e,t,r,sp,n),HS(e,r);else if(a6(a,e,t,n,r))r.stopPropagation();else if(HS(e,r),t&4&&-1<r6.indexOf(e)){for(;a!==null;){var o=Mu(a);if(o!==null&&tA(o),o=dy(e,t,n,r),o===null&&lx(e,t,r,sp,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else lx(e,t,r,null,n)}}var sp=null;function dy(e,t,n,r){if(sp=null,e=Hw(r),e=_o(e),e!==null)if(t=bi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=X2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sp=e,null}function oA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KV()){case qw:return 1;case J2:return 4;case Zm:case GV:return 16;case Q2:return 536870912;default:return 16}default:return 16}}var Xa=null,Yw=null,jm=null;function iA(){if(jm)return jm;var e,t=Yw,n=t.length,r,a="value"in Xa?Xa.value:Xa.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===a[o-r];r++);return jm=a.slice(e,1<r?1-r:void 0)}function wm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dh(){return!0}function WS(){return!1}function Pn(e){function t(n,r,a,o,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Dh:WS,this.isPropagationStopped=WS,this}return Ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),t}var ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kw=Pn(ic),ku=Ht({},ic,{view:0,detail:0}),c6=Pn(ku),Zg,ex,Bc,yf=Ht({},ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bc&&(Bc&&e.type==="mousemove"?(Zg=e.screenX-Bc.screenX,ex=e.screenY-Bc.screenY):ex=Zg=0,Bc=e),Zg)},movementY:function(e){return"movementY"in e?e.movementY:ex}}),zS=Pn(yf),d6=Ht({},yf,{dataTransfer:0}),u6=Pn(d6),h6=Ht({},ku,{relatedTarget:0}),tx=Pn(h6),m6=Ht({},ic,{animationName:0,elapsedTime:0,pseudoElement:0}),p6=Pn(m6),f6=Ht({},ic,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),g6=Pn(f6),x6=Ht({},ic,{data:0}),XS=Pn(x6),v6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j6[e])?!!t[e]:!1}function Gw(){return w6}var N6=Ht({},ku,{key:function(e){if(e.key){var t=v6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gw,charCode:function(e){return e.type==="keypress"?wm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b6=Pn(N6),S6=Ht({},yf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YS=Pn(S6),C6=Ht({},ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gw}),E6=Pn(C6),T6=Ht({},ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),P6=Pn(T6),A6=Ht({},yf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D6=Pn(A6),k6=[9,13,27,32],Jw=ua&&"CompositionEvent"in window,fd=null;ua&&"documentMode"in document&&(fd=document.documentMode);var M6=ua&&"TextEvent"in window&&!fd,lA=ua&&(!Jw||fd&&8<fd&&11>=fd),KS=" ",GS=!1;function cA(e,t){switch(e){case"keyup":return k6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function R6(e,t){switch(e){case"compositionend":return dA(t);case"keypress":return t.which!==32?null:(GS=!0,KS);case"textInput":return e=t.data,e===KS&&GS?null:e;default:return null}}function F6(e,t){if(Ki)return e==="compositionend"||!Jw&&cA(e,t)?(e=iA(),jm=Yw=Xa=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lA&&t.locale!=="ko"?null:t.data;default:return null}}var O6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O6[e.type]:t==="textarea"}function uA(e,t,n,r){B2(r),t=np(t,"onChange"),0<t.length&&(n=new Kw("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gd=null,$d=null;function I6(e){NA(e,0)}function jf(e){var t=Qi(e);if(O2(t))return e}function L6(e,t){if(e==="change")return t}var hA=!1;if(ua){var sx;if(ua){var nx="oninput"in document;if(!nx){var QS=document.createElement("div");QS.setAttribute("oninput","return;"),nx=typeof QS.oninput=="function"}sx=nx}else sx=!1;hA=sx&&(!document.documentMode||9<document.documentMode)}function ZS(){gd&&(gd.detachEvent("onpropertychange",mA),$d=gd=null)}function mA(e){if(e.propertyName==="value"&&jf($d)){var t=[];uA(t,$d,e,Hw(e)),z2(I6,t)}}function $6(e,t,n){e==="focusin"?(ZS(),gd=t,$d=n,gd.attachEvent("onpropertychange",mA)):e==="focusout"&&ZS()}function _6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jf($d)}function V6(e,t){if(e==="click")return jf(t)}function U6(e,t){if(e==="input"||e==="change")return jf(t)}function B6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dr=typeof Object.is=="function"?Object.is:B6;function _d(e,t){if(dr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!zv.call(t,a)||!dr(e[a],t[a]))return!1}return!0}function eC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tC(e,t){var n=eC(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eC(n)}}function pA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fA(){for(var e=window,t=Gm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gm(e.document)}return t}function Qw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function H6(e){var t=fA(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pA(n.ownerDocument.documentElement,n)){if(r!==null&&Qw(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=tC(n,o);var i=tC(n,r);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var q6=ua&&"documentMode"in document&&11>=document.documentMode,Gi=null,uy=null,xd=null,hy=!1;function sC(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hy||Gi==null||Gi!==Gm(r)||(r=Gi,"selectionStart"in r&&Qw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xd&&_d(xd,r)||(xd=r,r=np(uy,"onSelect"),0<r.length&&(t=new Kw("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gi)))}function kh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ji={animationend:kh("Animation","AnimationEnd"),animationiteration:kh("Animation","AnimationIteration"),animationstart:kh("Animation","AnimationStart"),transitionend:kh("Transition","TransitionEnd")},rx={},gA={};ua&&(gA=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function wf(e){if(rx[e])return rx[e];if(!Ji[e])return e;var t=Ji[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in gA)return rx[e]=t[n];return e}var xA=wf("animationend"),vA=wf("animationiteration"),yA=wf("animationstart"),jA=wf("transitionend"),wA=new Map,nC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(e,t){wA.set(e,t),Ni(t,[e])}for(var ax=0;ax<nC.length;ax++){var ox=nC[ax],W6=ox.toLowerCase(),z6=ox[0].toUpperCase()+ox.slice(1);wo(W6,"on"+z6)}wo(xA,"onAnimationEnd");wo(vA,"onAnimationIteration");wo(yA,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(jA,"onTransitionEnd");Ml("onMouseEnter",["mouseout","mouseover"]);Ml("onMouseLeave",["mouseout","mouseover"]);Ml("onPointerEnter",["pointerout","pointerover"]);Ml("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X6=new Set("cancel close invalid load scroll toggle".split(" ").concat(od));function rC(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,WV(r,t,void 0,e),e.currentTarget=null}function NA(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;rC(a,l,d),o=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;rC(a,l,d),o=c}}}if(Qm)throw e=iy,Qm=!1,iy=null,e}function Mt(e,t){var n=t[xy];n===void 0&&(n=t[xy]=new Set);var r=e+"__bubble";n.has(r)||(bA(t,e,2,!1),n.add(r))}function ix(e,t,n){var r=0;t&&(r|=4),bA(n,e,r,t)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function Vd(e){if(!e[Mh]){e[Mh]=!0,D2.forEach(function(n){n!=="selectionchange"&&(X6.has(n)||ix(n,!1,e),ix(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mh]||(t[Mh]=!0,ix("selectionchange",!1,t))}}function bA(e,t,n,r){switch(oA(t)){case 1:var a=i6;break;case 4:a=l6;break;default:a=Xw}n=a.bind(null,t,n,e),a=void 0,!oy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function lx(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=_o(l),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}l=l.parentNode}}r=r.return}z2(function(){var d=o,u=Hw(n),m=[];e:{var p=wA.get(e);if(p!==void 0){var g=Kw,x=e;switch(e){case"keypress":if(wm(n)===0)break e;case"keydown":case"keyup":g=b6;break;case"focusin":x="focus",g=tx;break;case"focusout":x="blur",g=tx;break;case"beforeblur":case"afterblur":g=tx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=zS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=u6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=E6;break;case xA:case vA:case yA:g=p6;break;case jA:g=P6;break;case"scroll":g=c6;break;case"wheel":g=D6;break;case"copy":case"cut":case"paste":g=g6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=YS}var f=(t&4)!==0,w=!f&&e==="scroll",y=f?p!==null?p+"Capture":null:p;f=[];for(var v=d,j;v!==null;){j=v;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,y!==null&&(N=Fd(v,y),N!=null&&f.push(Ud(v,N,j)))),w)break;v=v.return}0<f.length&&(p=new g(p,x,null,n,u),m.push({event:p,listeners:f}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==ry&&(x=n.relatedTarget||n.fromElement)&&(_o(x)||x[ha]))break e;if((g||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=d,x=x?_o(x):null,x!==null&&(w=bi(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(f=zS,N="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(f=YS,N="onPointerLeave",y="onPointerEnter",v="pointer"),w=g==null?p:Qi(g),j=x==null?p:Qi(x),p=new f(N,v+"leave",g,n,u),p.target=w,p.relatedTarget=j,N=null,_o(u)===d&&(f=new f(y,v+"enter",x,n,u),f.target=j,f.relatedTarget=w,N=f),w=N,g&&x)t:{for(f=g,y=x,v=0,j=f;j;j=Ri(j))v++;for(j=0,N=y;N;N=Ri(N))j++;for(;0<v-j;)f=Ri(f),v--;for(;0<j-v;)y=Ri(y),j--;for(;v--;){if(f===y||y!==null&&f===y.alternate)break t;f=Ri(f),y=Ri(y)}f=null}else f=null;g!==null&&aC(m,p,g,f,!1),x!==null&&w!==null&&aC(m,w,x,f,!0)}}e:{if(p=d?Qi(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var b=L6;else if(JS(p))if(hA)b=U6;else{b=_6;var E=$6}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=V6);if(b&&(b=b(e,d))){uA(m,b,n,u);break e}E&&E(e,p,d),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&Zv(p,"number",p.value)}switch(E=d?Qi(d):window,e){case"focusin":(JS(E)||E.contentEditable==="true")&&(Gi=E,uy=d,xd=null);break;case"focusout":xd=uy=Gi=null;break;case"mousedown":hy=!0;break;case"contextmenu":case"mouseup":case"dragend":hy=!1,sC(m,n,u);break;case"selectionchange":if(q6)break;case"keydown":case"keyup":sC(m,n,u)}var S;if(Jw)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ki?cA(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(lA&&n.locale!=="ko"&&(Ki||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ki&&(S=iA()):(Xa=u,Yw="value"in Xa?Xa.value:Xa.textContent,Ki=!0)),E=np(d,P),0<E.length&&(P=new XS(P,e,null,n,u),m.push({event:P,listeners:E}),S?P.data=S:(S=dA(n),S!==null&&(P.data=S)))),(S=M6?R6(e,n):F6(e,n))&&(d=np(d,"onBeforeInput"),0<d.length&&(u=new XS("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=S))}NA(m,t)})}function Ud(e,t,n){return{instance:e,listener:t,currentTarget:n}}function np(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Fd(e,n),o!=null&&r.unshift(Ud(e,o,a)),o=Fd(e,t),o!=null&&r.push(Ud(e,o,a))),e=e.return}return r}function Ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aC(e,t,n,r,a){for(var o=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=Fd(n,o),c!=null&&i.unshift(Ud(n,c,l))):a||(c=Fd(n,o),c!=null&&i.push(Ud(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Y6=/\r\n?/g,K6=/\u0000|\uFFFD/g;function oC(e){return(typeof e=="string"?e:""+e).replace(Y6,`
`).replace(K6,"")}function Rh(e,t,n){if(t=oC(t),oC(e)!==t&&n)throw Error(Ce(425))}function rp(){}var my=null,py=null;function fy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gy=typeof setTimeout=="function"?setTimeout:void 0,G6=typeof clearTimeout=="function"?clearTimeout:void 0,iC=typeof Promise=="function"?Promise:void 0,J6=typeof queueMicrotask=="function"?queueMicrotask:typeof iC<"u"?function(e){return iC.resolve(null).then(e).catch(Q6)}:gy;function Q6(e){setTimeout(function(){throw e})}function cx(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ld(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ld(t)}function Za(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lc=Math.random().toString(36).slice(2),Pr="__reactFiber$"+lc,Bd="__reactProps$"+lc,ha="__reactContainer$"+lc,xy="__reactEvents$"+lc,Z6="__reactListeners$"+lc,eU="__reactHandles$"+lc;function _o(e){var t=e[Pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[Pr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lC(e);e!==null;){if(n=e[Pr])return n;e=lC(e)}return t}e=n,n=e.parentNode}return null}function Mu(e){return e=e[Pr]||e[ha],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function Nf(e){return e[Bd]||null}var vy=[],Zi=-1;function No(e){return{current:e}}function Ft(e){0>Zi||(e.current=vy[Zi],vy[Zi]=null,Zi--)}function At(e,t){Zi++,vy[Zi]=e.current,e.current=t}var uo={},As=No(uo),Js=No(!1),ti=uo;function Rl(e,t){var n=e.type.contextTypes;if(!n)return uo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Qs(e){return e=e.childContextTypes,e!=null}function ap(){Ft(Js),Ft(As)}function cC(e,t,n){if(As.current!==uo)throw Error(Ce(168));At(As,t),At(Js,n)}function SA(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ce(108,$V(e)||"Unknown",a));return Ht({},n,r)}function op(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||uo,ti=As.current,At(As,e),At(Js,Js.current),!0}function dC(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=SA(e,t,ti),r.__reactInternalMemoizedMergedChildContext=e,Ft(Js),Ft(As),At(As,e)):Ft(Js),At(Js,n)}var aa=null,bf=!1,dx=!1;function CA(e){aa===null?aa=[e]:aa.push(e)}function tU(e){bf=!0,CA(e)}function bo(){if(!dx&&aa!==null){dx=!0;var e=0,t=St;try{var n=aa;for(St=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}aa=null,bf=!1}catch(a){throw aa!==null&&(aa=aa.slice(e+1)),G2(qw,bo),a}finally{St=t,dx=!1}}return null}var el=[],tl=0,ip=null,lp=0,Fn=[],On=0,si=null,oa=1,ia="";function Mo(e,t){el[tl++]=lp,el[tl++]=ip,ip=e,lp=t}function EA(e,t,n){Fn[On++]=oa,Fn[On++]=ia,Fn[On++]=si,si=e;var r=oa;e=ia;var a=32-lr(r)-1;r&=~(1<<a),n+=1;var o=32-lr(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,oa=1<<32-lr(t)+a|n<<a|r,ia=o+e}else oa=1<<o|n<<a|r,ia=e}function Zw(e){e.return!==null&&(Mo(e,1),EA(e,1,0))}function e0(e){for(;e===ip;)ip=el[--tl],el[tl]=null,lp=el[--tl],el[tl]=null;for(;e===si;)si=Fn[--On],Fn[On]=null,ia=Fn[--On],Fn[On]=null,oa=Fn[--On],Fn[On]=null}var wn=null,jn=null,Ot=!1,sr=null;function TA(e,t){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function uC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wn=e,jn=Za(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wn=e,jn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=si!==null?{id:oa,overflow:ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wn=e,jn=null,!0):!1;default:return!1}}function yy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jy(e){if(Ot){var t=jn;if(t){var n=t;if(!uC(e,t)){if(yy(e))throw Error(Ce(418));t=Za(n.nextSibling);var r=wn;t&&uC(e,t)?TA(r,n):(e.flags=e.flags&-4097|2,Ot=!1,wn=e)}}else{if(yy(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,Ot=!1,wn=e}}}function hC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wn=e}function Fh(e){if(e!==wn)return!1;if(!Ot)return hC(e),Ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fy(e.type,e.memoizedProps)),t&&(t=jn)){if(yy(e))throw PA(),Error(Ce(418));for(;t;)TA(e,t),t=Za(t.nextSibling)}if(hC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jn=Za(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jn=null}}else jn=wn?Za(e.stateNode.nextSibling):null;return!0}function PA(){for(var e=jn;e;)e=Za(e.nextSibling)}function Fl(){jn=wn=null,Ot=!1}function t0(e){sr===null?sr=[e]:sr.push(e)}var sU=ba.ReactCurrentBatchConfig;function Hc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function Oh(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mC(e){var t=e._init;return t(e._payload)}function AA(e){function t(y,v){if(e){var j=y.deletions;j===null?(y.deletions=[v],y.flags|=16):j.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function a(y,v){return y=no(y,v),y.index=0,y.sibling=null,y}function o(y,v,j){return y.index=j,e?(j=y.alternate,j!==null?(j=j.index,j<v?(y.flags|=2,v):j):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,v,j,N){return v===null||v.tag!==6?(v=xx(j,y.mode,N),v.return=y,v):(v=a(v,j),v.return=y,v)}function c(y,v,j,N){var b=j.type;return b===Yi?u(y,v,j.props.children,N,j.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ba&&mC(b)===v.type)?(N=a(v,j.props),N.ref=Hc(y,v,j),N.return=y,N):(N=Pm(j.type,j.key,j.props,null,y.mode,N),N.ref=Hc(y,v,j),N.return=y,N)}function d(y,v,j,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==j.containerInfo||v.stateNode.implementation!==j.implementation?(v=vx(j,y.mode,N),v.return=y,v):(v=a(v,j.children||[]),v.return=y,v)}function u(y,v,j,N,b){return v===null||v.tag!==7?(v=Yo(j,y.mode,N,b),v.return=y,v):(v=a(v,j),v.return=y,v)}function m(y,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xx(""+v,y.mode,j),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sh:return j=Pm(v.type,v.key,v.props,null,y.mode,j),j.ref=Hc(y,null,v),j.return=y,j;case Xi:return v=vx(v,y.mode,j),v.return=y,v;case Ba:var N=v._init;return m(y,N(v._payload),j)}if(rd(v)||$c(v))return v=Yo(v,y.mode,j,null),v.return=y,v;Oh(y,v)}return null}function p(y,v,j,N){var b=v!==null?v.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return b!==null?null:l(y,v,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Sh:return j.key===b?c(y,v,j,N):null;case Xi:return j.key===b?d(y,v,j,N):null;case Ba:return b=j._init,p(y,v,b(j._payload),N)}if(rd(j)||$c(j))return b!==null?null:u(y,v,j,N,null);Oh(y,j)}return null}function g(y,v,j,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(j)||null,l(v,y,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sh:return y=y.get(N.key===null?j:N.key)||null,c(v,y,N,b);case Xi:return y=y.get(N.key===null?j:N.key)||null,d(v,y,N,b);case Ba:var E=N._init;return g(y,v,j,E(N._payload),b)}if(rd(N)||$c(N))return y=y.get(j)||null,u(v,y,N,b,null);Oh(v,N)}return null}function x(y,v,j,N){for(var b=null,E=null,S=v,P=v=0,A=null;S!==null&&P<j.length;P++){S.index>P?(A=S,S=null):A=S.sibling;var L=p(y,S,j[P],N);if(L===null){S===null&&(S=A);break}e&&S&&L.alternate===null&&t(y,S),v=o(L,v,P),E===null?b=L:E.sibling=L,E=L,S=A}if(P===j.length)return n(y,S),Ot&&Mo(y,P),b;if(S===null){for(;P<j.length;P++)S=m(y,j[P],N),S!==null&&(v=o(S,v,P),E===null?b=S:E.sibling=S,E=S);return Ot&&Mo(y,P),b}for(S=r(y,S);P<j.length;P++)A=g(S,y,P,j[P],N),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?P:A.key),v=o(A,v,P),E===null?b=A:E.sibling=A,E=A);return e&&S.forEach(function(R){return t(y,R)}),Ot&&Mo(y,P),b}function f(y,v,j,N){var b=$c(j);if(typeof b!="function")throw Error(Ce(150));if(j=b.call(j),j==null)throw Error(Ce(151));for(var E=b=null,S=v,P=v=0,A=null,L=j.next();S!==null&&!L.done;P++,L=j.next()){S.index>P?(A=S,S=null):A=S.sibling;var R=p(y,S,L.value,N);if(R===null){S===null&&(S=A);break}e&&S&&R.alternate===null&&t(y,S),v=o(R,v,P),E===null?b=R:E.sibling=R,E=R,S=A}if(L.done)return n(y,S),Ot&&Mo(y,P),b;if(S===null){for(;!L.done;P++,L=j.next())L=m(y,L.value,N),L!==null&&(v=o(L,v,P),E===null?b=L:E.sibling=L,E=L);return Ot&&Mo(y,P),b}for(S=r(y,S);!L.done;P++,L=j.next())L=g(S,y,P,L.value,N),L!==null&&(e&&L.alternate!==null&&S.delete(L.key===null?P:L.key),v=o(L,v,P),E===null?b=L:E.sibling=L,E=L);return e&&S.forEach(function(I){return t(y,I)}),Ot&&Mo(y,P),b}function w(y,v,j,N){if(typeof j=="object"&&j!==null&&j.type===Yi&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Sh:e:{for(var b=j.key,E=v;E!==null;){if(E.key===b){if(b=j.type,b===Yi){if(E.tag===7){n(y,E.sibling),v=a(E,j.props.children),v.return=y,y=v;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ba&&mC(b)===E.type){n(y,E.sibling),v=a(E,j.props),v.ref=Hc(y,E,j),v.return=y,y=v;break e}n(y,E);break}else t(y,E);E=E.sibling}j.type===Yi?(v=Yo(j.props.children,y.mode,N,j.key),v.return=y,y=v):(N=Pm(j.type,j.key,j.props,null,y.mode,N),N.ref=Hc(y,v,j),N.return=y,y=N)}return i(y);case Xi:e:{for(E=j.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===j.containerInfo&&v.stateNode.implementation===j.implementation){n(y,v.sibling),v=a(v,j.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=vx(j,y.mode,N),v.return=y,y=v}return i(y);case Ba:return E=j._init,w(y,v,E(j._payload),N)}if(rd(j))return x(y,v,j,N);if($c(j))return f(y,v,j,N);Oh(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,v!==null&&v.tag===6?(n(y,v.sibling),v=a(v,j),v.return=y,y=v):(n(y,v),v=xx(j,y.mode,N),v.return=y,y=v),i(y)):n(y,v)}return w}var Ol=AA(!0),DA=AA(!1),cp=No(null),dp=null,sl=null,s0=null;function n0(){s0=sl=dp=null}function r0(e){var t=cp.current;Ft(cp),e._currentValue=t}function wy(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yl(e,t){dp=e,s0=sl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zs=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(s0!==e)if(e={context:e,memoizedValue:t,next:null},sl===null){if(dp===null)throw Error(Ce(308));sl=e,dp.dependencies={lanes:0,firstContext:e}}else sl=sl.next=e;return t}var Vo=null;function a0(e){Vo===null?Vo=[e]:Vo.push(e)}function kA(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,a0(t)):(n.next=a.next,a.next=n),t.interleaved=n,ma(e,r)}function ma(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ha=!1;function o0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function eo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ht&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,ma(e,n)}return a=r.interleaved,a===null?(t.next=t,a0(r)):(t.next=a.next,a.next=t),r.interleaved=t,ma(e,n)}function Nm(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ww(e,n)}}function pC(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function up(e,t,n,r){var a=e.updateQueue;Ha=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;i=0,u=d=c=null,l=o;do{var p=l.lane,g=l.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,f=l;switch(p=t,g=n,f.tag){case 1:if(x=f.payload,typeof x=="function"){m=x.call(g,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=f.payload,p=typeof x=="function"?x.call(g,m,p):x,p==null)break e;m=Ht({},m,p);break e;case 2:Ha=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,i|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);ri|=i,e.lanes=i,e.memoizedState=m}}function fC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ce(191,a));a.call(r)}}}var Ru={},Lr=No(Ru),Hd=No(Ru),qd=No(Ru);function Uo(e){if(e===Ru)throw Error(Ce(174));return e}function i0(e,t){switch(At(qd,t),At(Hd,e),At(Lr,Ru),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ty(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ty(t,e)}Ft(Lr),At(Lr,t)}function Il(){Ft(Lr),Ft(Hd),Ft(qd)}function RA(e){Uo(qd.current);var t=Uo(Lr.current),n=ty(t,e.type);t!==n&&(At(Hd,e),At(Lr,n))}function l0(e){Hd.current===e&&(Ft(Lr),Ft(Hd))}var $t=No(0);function hp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ux=[];function c0(){for(var e=0;e<ux.length;e++)ux[e]._workInProgressVersionPrimary=null;ux.length=0}var bm=ba.ReactCurrentDispatcher,hx=ba.ReactCurrentBatchConfig,ni=0,Ut=null,is=null,us=null,mp=!1,vd=!1,Wd=0,nU=0;function ws(){throw Error(Ce(321))}function d0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dr(e[n],t[n]))return!1;return!0}function u0(e,t,n,r,a,o){if(ni=o,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bm.current=e===null||e.memoizedState===null?iU:lU,e=n(r,a),vd){o=0;do{if(vd=!1,Wd=0,25<=o)throw Error(Ce(301));o+=1,us=is=null,t.updateQueue=null,bm.current=cU,e=n(r,a)}while(vd)}if(bm.current=pp,t=is!==null&&is.next!==null,ni=0,us=is=Ut=null,mp=!1,t)throw Error(Ce(300));return e}function h0(){var e=Wd!==0;return Wd=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?Ut.memoizedState=us=e:us=us.next=e,us}function Hn(){if(is===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=is.next;var t=us===null?Ut.memoizedState:us.next;if(t!==null)us=t,is=e;else{if(e===null)throw Error(Ce(310));is=e,e={memoizedState:is.memoizedState,baseState:is.baseState,baseQueue:is.baseQueue,queue:is.queue,next:null},us===null?Ut.memoizedState=us=e:us=us.next=e}return us}function zd(e,t){return typeof t=="function"?t(e):t}function mx(e){var t=Hn(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=is,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((ni&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=r):c=c.next=m,Ut.lanes|=u,ri|=u}d=d.next}while(d!==null&&d!==o);c===null?i=r:c.next=l,dr(r,t.memoizedState)||(zs=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Ut.lanes|=o,ri|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function px(e){var t=Hn(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);dr(o,t.memoizedState)||(zs=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function FA(){}function OA(e,t){var n=Ut,r=Hn(),a=t(),o=!dr(r.memoizedState,a);if(o&&(r.memoizedState=a,zs=!0),r=r.queue,m0($A.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||us!==null&&us.memoizedState.tag&1){if(n.flags|=2048,Xd(9,LA.bind(null,n,r,a,t),void 0,null),hs===null)throw Error(Ce(349));ni&30||IA(n,t,a)}return a}function IA(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function LA(e,t,n,r){t.value=n,t.getSnapshot=r,_A(t)&&VA(e)}function $A(e,t,n){return n(function(){_A(t)&&VA(e)})}function _A(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dr(e,n)}catch{return!0}}function VA(e){var t=ma(e,1);t!==null&&cr(t,e,1,-1)}function gC(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:e},t.queue=e,e=e.dispatch=oU.bind(null,Ut,e),[t.memoizedState,e]}function Xd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function UA(){return Hn().memoizedState}function Sm(e,t,n,r){var a=Er();Ut.flags|=e,a.memoizedState=Xd(1|t,n,void 0,r===void 0?null:r)}function Sf(e,t,n,r){var a=Hn();r=r===void 0?null:r;var o=void 0;if(is!==null){var i=is.memoizedState;if(o=i.destroy,r!==null&&d0(r,i.deps)){a.memoizedState=Xd(t,n,o,r);return}}Ut.flags|=e,a.memoizedState=Xd(1|t,n,o,r)}function xC(e,t){return Sm(8390656,8,e,t)}function m0(e,t){return Sf(2048,8,e,t)}function BA(e,t){return Sf(4,2,e,t)}function HA(e,t){return Sf(4,4,e,t)}function qA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WA(e,t,n){return n=n!=null?n.concat([e]):null,Sf(4,4,qA.bind(null,t,e),n)}function p0(){}function zA(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&d0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function XA(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&d0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function YA(e,t,n){return ni&21?(dr(n,t)||(n=Z2(),Ut.lanes|=n,ri|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zs=!0),e.memoizedState=n)}function rU(e,t){var n=St;St=n!==0&&4>n?n:4,e(!0);var r=hx.transition;hx.transition={};try{e(!1),t()}finally{St=n,hx.transition=r}}function KA(){return Hn().memoizedState}function aU(e,t,n){var r=so(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GA(e))JA(t,n);else if(n=kA(e,t,n,r),n!==null){var a=$s();cr(n,e,r,a),QA(n,t,r)}}function oU(e,t,n){var r=so(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GA(e))JA(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,dr(l,i)){var c=t.interleaved;c===null?(a.next=a,a0(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=kA(e,t,a,r),n!==null&&(a=$s(),cr(n,e,r,a),QA(n,t,r))}}function GA(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function JA(e,t){vd=mp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function QA(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ww(e,n)}}var pp={readContext:Bn,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},iU={readContext:Bn,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:xC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Sm(4194308,4,qA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sm(4,2,e,t)},useMemo:function(e,t){var n=Er();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Er();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=aU.bind(null,Ut,e),[r.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:gC,useDebugValue:p0,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=gC(!1),t=e[0];return e=rU.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ut,a=Er();if(Ot){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),hs===null)throw Error(Ce(349));ni&30||IA(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,xC($A.bind(null,r,o,e),[e]),r.flags|=2048,Xd(9,LA.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Er(),t=hs.identifierPrefix;if(Ot){var n=ia,r=oa;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lU={readContext:Bn,useCallback:zA,useContext:Bn,useEffect:m0,useImperativeHandle:WA,useInsertionEffect:BA,useLayoutEffect:HA,useMemo:XA,useReducer:mx,useRef:UA,useState:function(){return mx(zd)},useDebugValue:p0,useDeferredValue:function(e){var t=Hn();return YA(t,is.memoizedState,e)},useTransition:function(){var e=mx(zd)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:FA,useSyncExternalStore:OA,useId:KA,unstable_isNewReconciler:!1},cU={readContext:Bn,useCallback:zA,useContext:Bn,useEffect:m0,useImperativeHandle:WA,useInsertionEffect:BA,useLayoutEffect:HA,useMemo:XA,useReducer:px,useRef:UA,useState:function(){return px(zd)},useDebugValue:p0,useDeferredValue:function(e){var t=Hn();return is===null?t.memoizedState=e:YA(t,is.memoizedState,e)},useTransition:function(){var e=px(zd)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:FA,useSyncExternalStore:OA,useId:KA,unstable_isNewReconciler:!1};function Zn(e,t){if(e&&e.defaultProps){t=Ht({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ny(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Cf={isMounted:function(e){return(e=e._reactInternals)?bi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$s(),a=so(e),o=ca(r,a);o.payload=t,n!=null&&(o.callback=n),t=eo(e,o,a),t!==null&&(cr(t,e,a,r),Nm(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$s(),a=so(e),o=ca(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=eo(e,o,a),t!==null&&(cr(t,e,a,r),Nm(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$s(),r=so(e),a=ca(n,r);a.tag=2,t!=null&&(a.callback=t),t=eo(e,a,r),t!==null&&(cr(t,e,r,n),Nm(t,e,r))}};function vC(e,t,n,r,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!_d(n,r)||!_d(a,o):!0}function ZA(e,t,n){var r=!1,a=uo,o=t.contextType;return typeof o=="object"&&o!==null?o=Bn(o):(a=Qs(t)?ti:As.current,r=t.contextTypes,o=(r=r!=null)?Rl(e,a):uo),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function yC(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Cf.enqueueReplaceState(t,t.state,null)}function by(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},o0(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Bn(o):(o=Qs(t)?ti:As.current,a.context=Rl(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ny(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Cf.enqueueReplaceState(a,a.state,null),up(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ll(e,t){try{var n="",r=t;do n+=LV(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function fx(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dU=typeof WeakMap=="function"?WeakMap:Map;function eD(e,t,n){n=ca(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gp||(gp=!0,Fy=r),Sy(e,t)},n}function tD(e,t,n){n=ca(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Sy(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Sy(e,t),typeof r!="function"&&(to===null?to=new Set([this]):to.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function jC(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dU;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=SU.bind(null,e,t,n),t.then(e,e))}function wC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function NC(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ca(-1,1),t.tag=2,eo(n,t,1))),n.lanes|=1),e)}var uU=ba.ReactCurrentOwner,zs=!1;function Fs(e,t,n,r){t.child=e===null?DA(t,null,n,r):Ol(t,e.child,n,r)}function bC(e,t,n,r,a){n=n.render;var o=t.ref;return yl(t,a),r=u0(e,t,n,r,o,a),n=h0(),e!==null&&!zs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Ot&&n&&Zw(t),t.flags|=1,Fs(e,t,r,a),t.child)}function SC(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!N0(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,sD(e,t,o,r,a)):(e=Pm(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:_d,n(i,r)&&e.ref===t.ref)return pa(e,t,a)}return t.flags|=1,e=no(o,r),e.ref=t.ref,e.return=t,t.child=e}function sD(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(_d(o,r)&&e.ref===t.ref)if(zs=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(zs=!0);else return t.lanes=e.lanes,pa(e,t,a)}return Cy(e,t,n,r,a)}function nD(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(rl,fn),fn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,At(rl,fn),fn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,At(rl,fn),fn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,At(rl,fn),fn|=r;return Fs(e,t,a,n),t.child}function rD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cy(e,t,n,r,a){var o=Qs(n)?ti:As.current;return o=Rl(t,o),yl(t,a),n=u0(e,t,n,r,o,a),r=h0(),e!==null&&!zs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pa(e,t,a)):(Ot&&r&&Zw(t),t.flags|=1,Fs(e,t,n,a),t.child)}function CC(e,t,n,r,a){if(Qs(n)){var o=!0;op(t)}else o=!1;if(yl(t,a),t.stateNode===null)Cm(e,t),ZA(t,n,r),by(t,n,r,a),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=Bn(d):(d=Qs(n)?ti:As.current,d=Rl(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==d)&&yC(t,i,r,d),Ha=!1;var p=t.memoizedState;i.state=p,up(t,r,i,a),c=t.memoizedState,l!==r||p!==c||Js.current||Ha?(typeof u=="function"&&(Ny(t,n,u,r),c=t.memoizedState),(l=Ha||vC(t,n,l,r,p,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,MA(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Zn(t.type,l),i.props=d,m=t.pendingProps,p=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=Qs(n)?ti:As.current,c=Rl(t,c));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||p!==c)&&yC(t,i,r,c),Ha=!1,p=t.memoizedState,i.state=p,up(t,r,i,a);var x=t.memoizedState;l!==m||p!==x||Js.current||Ha?(typeof g=="function"&&(Ny(t,n,g,r),x=t.memoizedState),(d=Ha||vC(t,n,d,r,p,x,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),i.props=r,i.state=x,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ey(e,t,n,r,o,a)}function Ey(e,t,n,r,a,o){rD(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return a&&dC(t,n,!1),pa(e,t,o);r=t.stateNode,uU.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Ol(t,e.child,null,o),t.child=Ol(t,null,l,o)):Fs(e,t,l,o),t.memoizedState=r.state,a&&dC(t,n,!0),t.child}function aD(e){var t=e.stateNode;t.pendingContext?cC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cC(e,t.context,!1),i0(e,t.containerInfo)}function EC(e,t,n,r,a){return Fl(),t0(a),t.flags|=256,Fs(e,t,n,r),t.child}var Ty={dehydrated:null,treeContext:null,retryLane:0};function Py(e){return{baseLanes:e,cachePool:null,transitions:null}}function oD(e,t,n){var r=t.pendingProps,a=$t.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),At($t,a&1),e===null)return jy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Pf(i,r,0,null),e=Yo(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Py(n),t.memoizedState=Ty,e):f0(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return hU(e,t,i,r,l,a,n);if(o){o=r.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=no(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=no(l,o):(o=Yo(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Py(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Ty,r}return o=e.child,e=o.sibling,r=no(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function f0(e,t){return t=Pf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ih(e,t,n,r){return r!==null&&t0(r),Ol(t,e.child,null,n),e=f0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hU(e,t,n,r,a,o,i){if(n)return t.flags&256?(t.flags&=-257,r=fx(Error(Ce(422))),Ih(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Pf({mode:"visible",children:r.children},a,0,null),o=Yo(o,a,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ol(t,e.child,null,i),t.child.memoizedState=Py(i),t.memoizedState=Ty,o);if(!(t.mode&1))return Ih(e,t,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(Ce(419)),r=fx(o,r,void 0),Ih(e,t,i,r)}if(l=(i&e.childLanes)!==0,zs||l){if(r=hs,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ma(e,a),cr(r,e,a,-1))}return w0(),r=fx(Error(Ce(421))),Ih(e,t,i,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=CU.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,jn=Za(a.nextSibling),wn=t,Ot=!0,sr=null,e!==null&&(Fn[On++]=oa,Fn[On++]=ia,Fn[On++]=si,oa=e.id,ia=e.overflow,si=t),t=f0(t,r.children),t.flags|=4096,t)}function TC(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wy(e.return,t,n)}function gx(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function iD(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Fs(e,t,r.children,n),r=$t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&TC(e,n,t);else if(e.tag===19)TC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(At($t,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&hp(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),gx(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&hp(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}gx(t,!0,n,null,o);break;case"together":gx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ri|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=no(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=no(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mU(e,t,n){switch(t.tag){case 3:aD(t),Fl();break;case 5:RA(t);break;case 1:Qs(t.type)&&op(t);break;case 4:i0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;At(cp,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(At($t,$t.current&1),t.flags|=128,null):n&t.child.childLanes?oD(e,t,n):(At($t,$t.current&1),e=pa(e,t,n),e!==null?e.sibling:null);At($t,$t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iD(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),At($t,$t.current),r)break;return null;case 22:case 23:return t.lanes=0,nD(e,t,n)}return pa(e,t,n)}var lD,Ay,cD,dD;lD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ay=function(){};cD=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Uo(Lr.current);var o=null;switch(n){case"input":a=Jv(e,a),r=Jv(e,r),o=[];break;case"select":a=Ht({},a,{value:void 0}),r=Ht({},r,{value:void 0}),o=[];break;case"textarea":a=ey(e,a),r=ey(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rp)}sy(n,r);var i;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Md.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=a?.[d],r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Md.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Mt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};dD=function(e,t,n,r){n!==r&&(t.flags|=4)};function qc(e,t){if(!Ot)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ns(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pU(e,t,n){var r=t.pendingProps;switch(e0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(t),null;case 1:return Qs(t.type)&&ap(),Ns(t),null;case 3:return r=t.stateNode,Il(),Ft(Js),Ft(As),c0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sr!==null&&(Ly(sr),sr=null))),Ay(e,t),Ns(t),null;case 5:l0(t);var a=Uo(qd.current);if(n=t.type,e!==null&&t.stateNode!=null)cD(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return Ns(t),null}if(e=Uo(Lr.current),Fh(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Pr]=t,r[Bd]=o,e=(t.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(a=0;a<od.length;a++)Mt(od[a],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":IS(r,o),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Mt("invalid",r);break;case"textarea":$S(r,o),Mt("invalid",r)}sy(n,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Rh(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Rh(r.textContent,l,e),a=["children",""+l]):Md.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Ch(r),LS(r,o,!0);break;case"textarea":Ch(r),_S(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rp)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Pr]=t,e[Bd]=r,lD(e,t,!1,!1),t.stateNode=e;e:{switch(i=ny(n,r),n){case"dialog":Mt("cancel",e),Mt("close",e),a=r;break;case"iframe":case"object":case"embed":Mt("load",e),a=r;break;case"video":case"audio":for(a=0;a<od.length;a++)Mt(od[a],e);a=r;break;case"source":Mt("error",e),a=r;break;case"img":case"image":case"link":Mt("error",e),Mt("load",e),a=r;break;case"details":Mt("toggle",e),a=r;break;case"input":IS(e,r),a=Jv(e,r),Mt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ht({},r,{value:void 0}),Mt("invalid",e);break;case"textarea":$S(e,r),a=ey(e,r),Mt("invalid",e);break;default:a=r}sy(n,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?U2(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_2(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rd(e,c):typeof c=="number"&&Rd(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Md.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Mt("scroll",e):c!=null&&_w(e,o,c,i))}switch(n){case"input":Ch(e),LS(e,r,!1);break;case"textarea":Ch(e),_S(e);break;case"option":r.value!=null&&e.setAttribute("value",""+co(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?fl(e,!!r.multiple,o,!1):r.defaultValue!=null&&fl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=rp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ns(t),null;case 6:if(e&&t.stateNode!=null)dD(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=Uo(qd.current),Uo(Lr.current),Fh(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pr]=t,(o=r.nodeValue!==n)&&(e=wn,e!==null))switch(e.tag){case 3:Rh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rh(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pr]=t,t.stateNode=r}return Ns(t),null;case 13:if(Ft($t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ot&&jn!==null&&t.mode&1&&!(t.flags&128))PA(),Fl(),t.flags|=98560,o=!1;else if(o=Fh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Ce(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ce(317));o[Pr]=t}else Fl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ns(t),o=!1}else sr!==null&&(Ly(sr),sr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$t.current&1?cs===0&&(cs=3):w0())),t.updateQueue!==null&&(t.flags|=4),Ns(t),null);case 4:return Il(),Ay(e,t),e===null&&Vd(t.stateNode.containerInfo),Ns(t),null;case 10:return r0(t.type._context),Ns(t),null;case 17:return Qs(t.type)&&ap(),Ns(t),null;case 19:if(Ft($t),o=t.memoizedState,o===null)return Ns(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)qc(o,!1);else{if(cs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=hp(e),i!==null){for(t.flags|=128,qc(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return At($t,$t.current&1|2),t.child}e=e.sibling}o.tail!==null&&Jt()>$l&&(t.flags|=128,r=!0,qc(o,!1),t.lanes=4194304)}else{if(!r)if(e=hp(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ot)return Ns(t),null}else 2*Jt()-o.renderingStartTime>$l&&n!==1073741824&&(t.flags|=128,r=!0,qc(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Jt(),t.sibling=null,n=$t.current,At($t,r?n&1|2:n&1),t):(Ns(t),null);case 22:case 23:return j0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?fn&1073741824&&(Ns(t),t.subtreeFlags&6&&(t.flags|=8192)):Ns(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function fU(e,t){switch(e0(t),t.tag){case 1:return Qs(t.type)&&ap(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Il(),Ft(Js),Ft(As),c0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return l0(t),null;case 13:if(Ft($t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));Fl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ft($t),null;case 4:return Il(),null;case 10:return r0(t.type._context),null;case 22:case 23:return j0(),null;case 24:return null;default:return null}}var Lh=!1,Ss=!1,gU=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function nl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yt(e,t,r)}else n.current=null}function Dy(e,t,n){try{n()}catch(r){Yt(e,t,r)}}var PC=!1;function xU(e,t){if(my=tp,e=fA(),Qw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var g;m!==n||a!==0&&m.nodeType!==3||(l=i+a),m!==o||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===e)break t;if(p===n&&++d===a&&(l=i),p===o&&++u===r&&(c=i),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(py={focusedElem:e,selectionRange:n},tp=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var f=x.memoizedProps,w=x.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:Zn(t.type,f),w);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(N){Yt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return x=PC,PC=!1,x}function yd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Dy(t,n,o)}a=a.next}while(a!==r)}}function Ef(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ky(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uD(e){var t=e.alternate;t!==null&&(e.alternate=null,uD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pr],delete t[Bd],delete t[xy],delete t[Z6],delete t[eU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hD(e){return e.tag===5||e.tag===3||e.tag===4}function AC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function My(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rp));else if(r!==4&&(e=e.child,e!==null))for(My(e,t,n),e=e.sibling;e!==null;)My(e,t,n),e=e.sibling}function Ry(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ry(e,t,n),e=e.sibling;e!==null;)Ry(e,t,n),e=e.sibling}var fs=null,er=!1;function ka(e,t,n){for(n=n.child;n!==null;)mD(e,t,n),n=n.sibling}function mD(e,t,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(vf,n)}catch{}switch(n.tag){case 5:Ss||nl(n,t);case 6:var r=fs,a=er;fs=null,ka(e,t,n),fs=r,er=a,fs!==null&&(er?(e=fs,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:fs!==null&&(er?(e=fs,n=n.stateNode,e.nodeType===8?cx(e.parentNode,n):e.nodeType===1&&cx(e,n),Ld(e)):cx(fs,n.stateNode));break;case 4:r=fs,a=er,fs=n.stateNode.containerInfo,er=!0,ka(e,t,n),fs=r,er=a;break;case 0:case 11:case 14:case 15:if(!Ss&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Dy(n,t,i),a=a.next}while(a!==r)}ka(e,t,n);break;case 1:if(!Ss&&(nl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Yt(n,t,l)}ka(e,t,n);break;case 21:ka(e,t,n);break;case 22:n.mode&1?(Ss=(r=Ss)||n.memoizedState!==null,ka(e,t,n),Ss=r):ka(e,t,n);break;default:ka(e,t,n)}}function DC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gU),t.forEach(function(r){var a=EU.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:fs=l.stateNode,er=!1;break e;case 3:fs=l.stateNode.containerInfo,er=!0;break e;case 4:fs=l.stateNode.containerInfo,er=!0;break e}l=l.return}if(fs===null)throw Error(Ce(160));mD(o,i,a),fs=null,er=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Yt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pD(t,e),t=t.sibling}function pD(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gn(t,e),Sr(e),r&4){try{yd(3,e,e.return),Ef(3,e)}catch(f){Yt(e,e.return,f)}try{yd(5,e,e.return)}catch(f){Yt(e,e.return,f)}}break;case 1:Gn(t,e),Sr(e),r&512&&n!==null&&nl(n,n.return);break;case 5:if(Gn(t,e),Sr(e),r&512&&n!==null&&nl(n,n.return),e.flags&32){var a=e.stateNode;try{Rd(a,"")}catch(f){Yt(e,e.return,f)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&I2(a,o),ny(l,i);var d=ny(l,o);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?U2(a,m):u==="dangerouslySetInnerHTML"?_2(a,m):u==="children"?Rd(a,m):_w(a,u,m,d)}switch(l){case"input":Qv(a,o);break;case"textarea":L2(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?fl(a,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?fl(a,!!o.multiple,o.defaultValue,!0):fl(a,!!o.multiple,o.multiple?[]:"",!1))}a[Bd]=o}catch(f){Yt(e,e.return,f)}}break;case 6:if(Gn(t,e),Sr(e),r&4){if(e.stateNode===null)throw Error(Ce(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(f){Yt(e,e.return,f)}}break;case 3:if(Gn(t,e),Sr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ld(t.containerInfo)}catch(f){Yt(e,e.return,f)}break;case 4:Gn(t,e),Sr(e);break;case 13:Gn(t,e),Sr(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(v0=Jt())),r&4&&DC(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Ss=(d=Ss)||u,Gn(t,e),Ss=d):Gn(t,e),Sr(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ae=e,u=e.child;u!==null;){for(m=Ae=u;Ae!==null;){switch(p=Ae,g=p.child,p.tag){case 0:case 11:case 14:case 15:yd(4,p,p.return);break;case 1:nl(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){Yt(r,n,f)}}break;case 5:nl(p,p.return);break;case 22:if(p.memoizedState!==null){MC(m);continue}}g!==null?(g.return=p,Ae=g):MC(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=V2("display",i))}catch(f){Yt(e,e.return,f)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){Yt(e,e.return,f)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gn(t,e),Sr(e),r&4&&DC(e);break;case 21:break;default:Gn(t,e),Sr(e)}}function Sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hD(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Rd(a,""),r.flags&=-33);var o=AC(e);Ry(e,o,a);break;case 3:case 4:var i=r.stateNode.containerInfo,l=AC(e);My(e,l,i);break;default:throw Error(Ce(161))}}catch(c){Yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vU(e,t,n){Ae=e,fD(e)}function fD(e,t,n){for(var r=(e.mode&1)!==0;Ae!==null;){var a=Ae,o=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||Lh;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ss;l=Lh;var d=Ss;if(Lh=i,(Ss=c)&&!d)for(Ae=a;Ae!==null;)i=Ae,c=i.child,i.tag===22&&i.memoizedState!==null?RC(a):c!==null?(c.return=i,Ae=c):RC(a);for(;o!==null;)Ae=o,fD(o),o=o.sibling;Ae=a,Lh=l,Ss=d}kC(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Ae=o):kC(e)}}function kC(e){for(;Ae!==null;){var t=Ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ss||Ef(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ss)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Zn(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&fC(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fC(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ld(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Ss||t.flags&512&&ky(t)}catch(p){Yt(t,t.return,p)}}if(t===e){Ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function MC(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ae=n;break}Ae=t.return}}function RC(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ef(4,t)}catch(c){Yt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Yt(t,a,c)}}var o=t.return;try{ky(t)}catch(c){Yt(t,o,c)}break;case 5:var i=t.return;try{ky(t)}catch(c){Yt(t,i,c)}}}catch(c){Yt(t,t.return,c)}if(t===e){Ae=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ae=l;break}Ae=t.return}}var yU=Math.ceil,fp=ba.ReactCurrentDispatcher,g0=ba.ReactCurrentOwner,$n=ba.ReactCurrentBatchConfig,ht=0,hs=null,ns=null,vs=0,fn=0,rl=No(0),cs=0,Yd=null,ri=0,Tf=0,x0=0,jd=null,Ws=null,v0=0,$l=1/0,ra=null,gp=!1,Fy=null,to=null,$h=!1,Ya=null,xp=0,wd=0,Oy=null,Em=-1,Tm=0;function $s(){return ht&6?Jt():Em!==-1?Em:Em=Jt()}function so(e){return e.mode&1?ht&2&&vs!==0?vs&-vs:sU.transition!==null?(Tm===0&&(Tm=Z2()),Tm):(e=St,e!==0||(e=window.event,e=e===void 0?16:oA(e.type)),e):1}function cr(e,t,n,r){if(50<wd)throw wd=0,Oy=null,Error(Ce(185));Du(e,n,r),(!(ht&2)||e!==hs)&&(e===hs&&(!(ht&2)&&(Tf|=n),cs===4&&Wa(e,vs)),Zs(e,r),n===1&&ht===0&&!(t.mode&1)&&($l=Jt()+500,bf&&bo()))}function Zs(e,t){var n=e.callbackNode;s6(e,t);var r=ep(e,e===hs?vs:0);if(r===0)n!==null&&BS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&BS(n),t===1)e.tag===0?tU(FC.bind(null,e)):CA(FC.bind(null,e)),J6(function(){!(ht&6)&&bo()}),n=null;else{switch(eA(r)){case 1:n=qw;break;case 4:n=J2;break;case 16:n=Zm;break;case 536870912:n=Q2;break;default:n=Zm}n=bD(n,gD.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gD(e,t){if(Em=-1,Tm=0,ht&6)throw Error(Ce(327));var n=e.callbackNode;if(jl()&&e.callbackNode!==n)return null;var r=ep(e,e===hs?vs:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vp(e,r);else{t=r;var a=ht;ht|=2;var o=vD();(hs!==e||vs!==t)&&(ra=null,$l=Jt()+500,Xo(e,t));do try{NU();break}catch(l){xD(e,l)}while(!0);n0(),fp.current=o,ht=a,ns!==null?t=0:(hs=null,vs=0,t=cs)}if(t!==0){if(t===2&&(a=ly(e),a!==0&&(r=a,t=Iy(e,a))),t===1)throw n=Yd,Xo(e,0),Wa(e,r),Zs(e,Jt()),n;if(t===6)Wa(e,r);else{if(a=e.current.alternate,!(r&30)&&!jU(a)&&(t=vp(e,r),t===2&&(o=ly(e),o!==0&&(r=o,t=Iy(e,o))),t===1))throw n=Yd,Xo(e,0),Wa(e,r),Zs(e,Jt()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:Ro(e,Ws,ra);break;case 3:if(Wa(e,r),(r&130023424)===r&&(t=v0+500-Jt(),10<t)){if(ep(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){$s(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=gy(Ro.bind(null,e,Ws,ra),t);break}Ro(e,Ws,ra);break;case 4:if(Wa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var i=31-lr(r);o=1<<i,i=t[i],i>a&&(a=i),r&=~o}if(r=a,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yU(r/1960))-r,10<r){e.timeoutHandle=gy(Ro.bind(null,e,Ws,ra),r);break}Ro(e,Ws,ra);break;case 5:Ro(e,Ws,ra);break;default:throw Error(Ce(329))}}}return Zs(e,Jt()),e.callbackNode===n?gD.bind(null,e):null}function Iy(e,t){var n=jd;return e.current.memoizedState.isDehydrated&&(Xo(e,t).flags|=256),e=vp(e,t),e!==2&&(t=Ws,Ws=n,t!==null&&Ly(t)),e}function Ly(e){Ws===null?Ws=e:Ws.push.apply(Ws,e)}function jU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!dr(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wa(e,t){for(t&=~x0,t&=~Tf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-lr(t),r=1<<n;e[n]=-1,t&=~r}}function FC(e){if(ht&6)throw Error(Ce(327));jl();var t=ep(e,0);if(!(t&1))return Zs(e,Jt()),null;var n=vp(e,t);if(e.tag!==0&&n===2){var r=ly(e);r!==0&&(t=r,n=Iy(e,r))}if(n===1)throw n=Yd,Xo(e,0),Wa(e,t),Zs(e,Jt()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ro(e,Ws,ra),Zs(e,Jt()),null}function y0(e,t){var n=ht;ht|=1;try{return e(t)}finally{ht=n,ht===0&&($l=Jt()+500,bf&&bo())}}function ai(e){Ya!==null&&Ya.tag===0&&!(ht&6)&&jl();var t=ht;ht|=1;var n=$n.transition,r=St;try{if($n.transition=null,St=1,e)return e()}finally{St=r,$n.transition=n,ht=t,!(ht&6)&&bo()}}function j0(){fn=rl.current,Ft(rl)}function Xo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G6(n)),ns!==null)for(n=ns.return;n!==null;){var r=n;switch(e0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ap();break;case 3:Il(),Ft(Js),Ft(As),c0();break;case 5:l0(r);break;case 4:Il();break;case 13:Ft($t);break;case 19:Ft($t);break;case 10:r0(r.type._context);break;case 22:case 23:j0()}n=n.return}if(hs=e,ns=e=no(e.current,null),vs=fn=t,cs=0,Yd=null,x0=Tf=ri=0,Ws=jd=null,Vo!==null){for(t=0;t<Vo.length;t++)if(n=Vo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=a,r.next=i}n.pending=r}Vo=null}return e}function xD(e,t){do{var n=ns;try{if(n0(),bm.current=pp,mp){for(var r=Ut.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}mp=!1}if(ni=0,us=is=Ut=null,vd=!1,Wd=0,g0.current=null,n===null||n.return===null){cs=1,Yd=t,ns=null;break}e:{var o=e,i=n.return,l=n,c=t;if(t=vs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=wC(i);if(g!==null){g.flags&=-257,NC(g,i,l,o,t),g.mode&1&&jC(o,d,t),t=g,c=d;var x=t.updateQueue;if(x===null){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}else{if(!(t&1)){jC(o,d,t),w0();break e}c=Error(Ce(426))}}else if(Ot&&l.mode&1){var w=wC(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),NC(w,i,l,o,t),t0(Ll(c,l));break e}}o=c=Ll(c,l),cs!==4&&(cs=2),jd===null?jd=[o]:jd.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=eD(o,c,t);pC(o,y);break e;case 1:l=c;var v=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(to===null||!to.has(j)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=tD(o,l,t);pC(o,N);break e}}o=o.return}while(o!==null)}jD(n)}catch(b){t=b,ns===n&&n!==null&&(ns=n=n.return);continue}break}while(!0)}function vD(){var e=fp.current;return fp.current=pp,e===null?pp:e}function w0(){(cs===0||cs===3||cs===2)&&(cs=4),hs===null||!(ri&268435455)&&!(Tf&268435455)||Wa(hs,vs)}function vp(e,t){var n=ht;ht|=2;var r=vD();(hs!==e||vs!==t)&&(ra=null,Xo(e,t));do try{wU();break}catch(a){xD(e,a)}while(!0);if(n0(),ht=n,fp.current=r,ns!==null)throw Error(Ce(261));return hs=null,vs=0,cs}function wU(){for(;ns!==null;)yD(ns)}function NU(){for(;ns!==null&&!XV();)yD(ns)}function yD(e){var t=ND(e.alternate,e,fn);e.memoizedProps=e.pendingProps,t===null?jD(e):ns=t,g0.current=null}function jD(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fU(n,t),n!==null){n.flags&=32767,ns=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{cs=6,ns=null;return}}else if(n=pU(n,t,fn),n!==null){ns=n;return}if(t=t.sibling,t!==null){ns=t;return}ns=t=e}while(t!==null);cs===0&&(cs=5)}function Ro(e,t,n){var r=St,a=$n.transition;try{$n.transition=null,St=1,bU(e,t,n,r)}finally{$n.transition=a,St=r}return null}function bU(e,t,n,r){do jl();while(Ya!==null);if(ht&6)throw Error(Ce(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(n6(e,o),e===hs&&(ns=hs=null,vs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$h||($h=!0,bD(Zm,function(){return jl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$n.transition,$n.transition=null;var i=St;St=1;var l=ht;ht|=4,g0.current=null,xU(e,n),pD(n,e),H6(py),tp=!!my,py=my=null,e.current=n,vU(n),YV(),ht=l,St=i,$n.transition=o}else e.current=n;if($h&&($h=!1,Ya=e,xp=a),o=e.pendingLanes,o===0&&(to=null),JV(n.stateNode),Zs(e,Jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(gp)throw gp=!1,e=Fy,Fy=null,e;return xp&1&&e.tag!==0&&jl(),o=e.pendingLanes,o&1?e===Oy?wd++:(wd=0,Oy=e):wd=0,bo(),null}function jl(){if(Ya!==null){var e=eA(xp),t=$n.transition,n=St;try{if($n.transition=null,St=16>e?16:e,Ya===null)var r=!1;else{if(e=Ya,Ya=null,xp=0,ht&6)throw Error(Ce(331));var a=ht;for(ht|=4,Ae=e.current;Ae!==null;){var o=Ae,i=o.child;if(Ae.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ae=d;Ae!==null;){var u=Ae;switch(u.tag){case 0:case 11:case 15:yd(8,u,o)}var m=u.child;if(m!==null)m.return=u,Ae=m;else for(;Ae!==null;){u=Ae;var p=u.sibling,g=u.return;if(uD(u),u===d){Ae=null;break}if(p!==null){p.return=g,Ae=p;break}Ae=g}}}var x=o.alternate;if(x!==null){var f=x.child;if(f!==null){x.child=null;do{var w=f.sibling;f.sibling=null,f=w}while(f!==null)}}Ae=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Ae=i;else e:for(;Ae!==null;){if(o=Ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:yd(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Ae=y;break e}Ae=o.return}}var v=e.current;for(Ae=v;Ae!==null;){i=Ae;var j=i.child;if(i.subtreeFlags&2064&&j!==null)j.return=i,Ae=j;else e:for(i=v;Ae!==null;){if(l=Ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ef(9,l)}}catch(b){Yt(l,l.return,b)}if(l===i){Ae=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Ae=N;break e}Ae=l.return}}if(ht=a,bo(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(vf,e)}catch{}r=!0}return r}finally{St=n,$n.transition=t}}return!1}function OC(e,t,n){t=Ll(n,t),t=eD(e,t,1),e=eo(e,t,1),t=$s(),e!==null&&(Du(e,1,t),Zs(e,t))}function Yt(e,t,n){if(e.tag===3)OC(e,e,n);else for(;t!==null;){if(t.tag===3){OC(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(to===null||!to.has(r))){e=Ll(n,e),e=tD(t,e,1),t=eo(t,e,1),e=$s(),t!==null&&(Du(t,1,e),Zs(t,e));break}}t=t.return}}function SU(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$s(),e.pingedLanes|=e.suspendedLanes&n,hs===e&&(vs&n)===n&&(cs===4||cs===3&&(vs&130023424)===vs&&500>Jt()-v0?Xo(e,0):x0|=n),Zs(e,t)}function wD(e,t){t===0&&(e.mode&1?(t=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):t=1);var n=$s();e=ma(e,t),e!==null&&(Du(e,t,n),Zs(e,n))}function CU(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wD(e,n)}function EU(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),wD(e,n)}var ND;ND=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Js.current)zs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zs=!1,mU(e,t,n);zs=!!(e.flags&131072)}else zs=!1,Ot&&t.flags&1048576&&EA(t,lp,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cm(e,t),e=t.pendingProps;var a=Rl(t,As.current);yl(t,n),a=u0(null,t,r,e,a,n);var o=h0();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qs(r)?(o=!0,op(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,o0(t),a.updater=Cf,t.stateNode=a,a._reactInternals=t,by(t,r,e,n),t=Ey(null,t,r,!0,o,n)):(t.tag=0,Ot&&o&&Zw(t),Fs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cm(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=PU(r),e=Zn(r,e),a){case 0:t=Cy(null,t,r,e,n);break e;case 1:t=CC(null,t,r,e,n);break e;case 11:t=bC(null,t,r,e,n);break e;case 14:t=SC(null,t,r,Zn(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zn(r,a),Cy(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zn(r,a),CC(e,t,r,a,n);case 3:e:{if(aD(t),e===null)throw Error(Ce(387));r=t.pendingProps,o=t.memoizedState,a=o.element,MA(e,t),up(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Ll(Error(Ce(423)),t),t=EC(e,t,r,n,a);break e}else if(r!==a){a=Ll(Error(Ce(424)),t),t=EC(e,t,r,n,a);break e}else for(jn=Za(t.stateNode.containerInfo.firstChild),wn=t,Ot=!0,sr=null,n=DA(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fl(),r===a){t=pa(e,t,n);break e}Fs(e,t,r,n)}t=t.child}return t;case 5:return RA(t),e===null&&jy(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,fy(r,a)?i=null:o!==null&&fy(r,o)&&(t.flags|=32),rD(e,t),Fs(e,t,i,n),t.child;case 6:return e===null&&jy(t),null;case 13:return oD(e,t,n);case 4:return i0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ol(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zn(r,a),bC(e,t,r,a,n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:return Fs(e,t,t.pendingProps.children,n),t.child;case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,At(cp,r._currentValue),r._currentValue=i,o!==null)if(dr(o.value,i)){if(o.children===a.children&&!Js.current){t=pa(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=ca(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),wy(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Ce(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),wy(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Fs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,yl(t,n),a=Bn(a),r=r(a),t.flags|=1,Fs(e,t,r,n),t.child;case 14:return r=t.type,a=Zn(r,t.pendingProps),a=Zn(r.type,a),SC(e,t,r,a,n);case 15:return sD(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zn(r,a),Cm(e,t),t.tag=1,Qs(r)?(e=!0,op(t)):e=!1,yl(t,n),ZA(t,r,a),by(t,r,a,n),Ey(null,t,r,!0,e,n);case 19:return iD(e,t,n);case 22:return nD(e,t,n)}throw Error(Ce(156,t.tag))};function bD(e,t){return G2(e,t)}function TU(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,n,r){return new TU(e,t,n,r)}function N0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PU(e){if(typeof e=="function")return N0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Uw)return 11;if(e===Bw)return 14}return 2}function no(e,t){var n=e.alternate;return n===null?(n=In(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pm(e,t,n,r,a,o){var i=2;if(r=e,typeof e=="function")N0(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yi:return Yo(n.children,a,o,t);case Vw:i=8,a|=8;break;case Xv:return e=In(12,n,t,a|2),e.elementType=Xv,e.lanes=o,e;case Yv:return e=In(13,n,t,a),e.elementType=Yv,e.lanes=o,e;case Kv:return e=In(19,n,t,a),e.elementType=Kv,e.lanes=o,e;case R2:return Pf(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k2:i=10;break e;case M2:i=9;break e;case Uw:i=11;break e;case Bw:i=14;break e;case Ba:i=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=In(i,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Yo(e,t,n,r){return e=In(7,e,r,t),e.lanes=n,e}function Pf(e,t,n,r){return e=In(22,e,r,t),e.elementType=R2,e.lanes=n,e.stateNode={isHidden:!1},e}function xx(e,t,n){return e=In(6,e,null,t),e.lanes=n,e}function vx(e,t,n){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function AU(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qg(0),this.expirationTimes=Qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qg(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function b0(e,t,n,r,a,o,i,l,c){return e=new AU(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=In(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o0(o),e}function DU(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function SD(e){if(!e)return uo;e=e._reactInternals;e:{if(bi(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Qs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(Qs(n))return SA(e,n,t)}return t}function CD(e,t,n,r,a,o,i,l,c){return e=b0(n,r,!0,e,a,o,i,l,c),e.context=SD(null),n=e.current,r=$s(),a=so(n),o=ca(r,a),o.callback=t??null,eo(n,o,a),e.current.lanes=a,Du(e,a,r),Zs(e,r),e}function Af(e,t,n,r){var a=t.current,o=$s(),i=so(a);return n=SD(n),t.context===null?t.context=n:t.pendingContext=n,t=ca(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=eo(a,t,i),e!==null&&(cr(e,a,i,o),Nm(e,a,i)),i}function yp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function IC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function S0(e,t){IC(e,t),(e=e.alternate)&&IC(e,t)}function kU(){return null}var ED=typeof reportError=="function"?reportError:function(e){console.error(e)};function C0(e){this._internalRoot=e}Df.prototype.render=C0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));Af(e,t,null,null)};Df.prototype.unmount=C0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ai(function(){Af(null,e,null,null)}),t[ha]=null}};function Df(e){this._internalRoot=e}Df.prototype.unstable_scheduleHydration=function(e){if(e){var t=nA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qa.length&&t!==0&&t<qa[n].priority;n++);qa.splice(n,0,e),n===0&&aA(e)}};function E0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function LC(){}function MU(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var d=yp(i);o.call(d)}}var i=CD(t,r,e,0,null,!1,!1,"",LC);return e._reactRootContainer=i,e[ha]=i.current,Vd(e.nodeType===8?e.parentNode:e),ai(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=yp(c);l.call(d)}}var c=b0(e,0,!1,null,null,!1,!1,"",LC);return e._reactRootContainer=c,e[ha]=c.current,Vd(e.nodeType===8?e.parentNode:e),ai(function(){Af(t,c,n,r)}),c}function Mf(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=yp(i);l.call(c)}}Af(t,i,e,a)}else i=MU(n,t,e,a,r);return yp(i)}tA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ad(t.pendingLanes);n!==0&&(Ww(t,n|1),Zs(t,Jt()),!(ht&6)&&($l=Jt()+500,bo()))}break;case 13:ai(function(){var r=ma(e,1);if(r!==null){var a=$s();cr(r,e,1,a)}}),S0(e,1)}};zw=function(e){if(e.tag===13){var t=ma(e,134217728);if(t!==null){var n=$s();cr(t,e,134217728,n)}S0(e,134217728)}};sA=function(e){if(e.tag===13){var t=so(e),n=ma(e,t);if(n!==null){var r=$s();cr(n,e,t,r)}S0(e,t)}};nA=function(){return St};rA=function(e,t){var n=St;try{return St=e,t()}finally{St=n}};ay=function(e,t,n){switch(t){case"input":if(Qv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Nf(r);if(!a)throw Error(Ce(90));O2(r),Qv(r,a)}}}break;case"textarea":L2(e,n);break;case"select":t=n.value,t!=null&&fl(e,!!n.multiple,t,!1)}};q2=y0;W2=ai;var RU={usingClientEntryPoint:!1,Events:[Mu,Qi,Nf,B2,H2,y0]},Wc={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FU={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Y2(e),e===null?null:e.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||kU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_h.isDisabled&&_h.supportsFiber)try{vf=_h.inject(FU),Ir=_h}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RU;Tn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E0(t))throw Error(Ce(200));return DU(e,t,null,n)};Tn.createRoot=function(e,t){if(!E0(e))throw Error(Ce(299));var n=!1,r="",a=ED;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=b0(e,1,!1,null,null,n,!1,r,a),e[ha]=t.current,Vd(e.nodeType===8?e.parentNode:e),new C0(t)};Tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=Y2(t),e=e===null?null:e.stateNode,e};Tn.flushSync=function(e){return ai(e)};Tn.hydrate=function(e,t,n){if(!kf(t))throw Error(Ce(200));return Mf(null,e,t,!0,n)};Tn.hydrateRoot=function(e,t,n){if(!E0(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",i=ED;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=CD(t,null,e,1,n??null,a,!1,o,i),e[ha]=t.current,Vd(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Df(t)};Tn.render=function(e,t,n){if(!kf(t))throw Error(Ce(200));return Mf(null,e,t,!1,n)};Tn.unmountComponentAtNode=function(e){if(!kf(e))throw Error(Ce(40));return e._reactRootContainer?(ai(function(){Mf(null,null,e,!1,function(){e._reactRootContainer=null,e[ha]=null})}),!0):!1};Tn.unstable_batchedUpdates=y0;Tn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kf(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return Mf(e,t,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function TD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TD)}catch(e){console.error(e)}}TD(),T2.exports=Tn;var jr=T2.exports;const T0=Mw(jr);var PD,$C=jr;PD=$C.createRoot,$C.hydrateRoot;const OU=1,IU=1e6;let yx=0;function LU(){return yx=(yx+1)%Number.MAX_SAFE_INTEGER,yx.toString()}const jx=new Map,_C=e=>{if(jx.has(e))return;const t=setTimeout(()=>{jx.delete(e),Nd({type:"REMOVE_TOAST",toastId:e})},IU);jx.set(e,t)},$U=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OU)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?_C(n):e.toasts.forEach(r=>{_C(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Am=[];let Dm={toasts:[]};function Nd(e){Dm=$U(Dm,e),Am.forEach(t=>{t(Dm)})}function Ar({...e}){const t=LU(),n=a=>Nd({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Nd({type:"DISMISS_TOAST",toastId:t});return Nd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function _e(){const[e,t]=h.useState(Dm);return h.useEffect(()=>(Am.push(t),()=>{const n=Am.indexOf(t);n>-1&&Am.splice(n,1)}),[e]),{...e,toast:Ar,dismiss:n=>Nd({type:"DISMISS_TOAST",toastId:n})}}function Ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function _U(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Rf(...e){return t=>e.forEach(n=>_U(n,t))}function Xe(...e){return h.useCallback(Rf(...e),e)}function VU(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:p,children:g,...x}=m,f=p?.[e][c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})}function u(m,p){const g=p?.[e][c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,UU(a,...t)]}function UU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Sn=h.forwardRef((e,t)=>{const{children:n,...r}=e,a=h.Children.toArray(n),o=a.find(BU);if(o){const i=o.props.children,l=a.map(c=>c===o?h.Children.count(i)>1?h.Children.only(null):h.isValidElement(i)?i.props.children:null:c);return s.jsx($y,{...r,ref:t,children:h.isValidElement(i)?h.cloneElement(i,void 0,l):null})}return s.jsx($y,{...r,ref:t,children:n})});Sn.displayName="Slot";var $y=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const a=qU(n);return h.cloneElement(n,{...HU(r,n.props),ref:t?Rf(t,a):a})}return h.Children.count(n)>1?h.Children.only(null):null});$y.displayName="SlotClone";var P0=({children:e})=>s.jsx(s.Fragment,{children:e});function BU(e){return h.isValidElement(e)&&e.type===P0}function HU(e,t){const n={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...l)=>{o(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function qU(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ff(e){const t=e+"CollectionProvider",[n,r]=VU(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:x,children:f}=g,w=Nt.useRef(null),y=Nt.useRef(new Map).current;return s.jsx(a,{scope:x,itemMap:y,collectionRef:w,children:f})};i.displayName=t;const l=e+"CollectionSlot",c=Nt.forwardRef((g,x)=>{const{scope:f,children:w}=g,y=o(l,f),v=Xe(x,y.collectionRef);return s.jsx(Sn,{ref:v,children:w})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=Nt.forwardRef((g,x)=>{const{scope:f,children:w,...y}=g,v=Nt.useRef(null),j=Xe(x,v),N=o(d,f);return Nt.useEffect(()=>(N.itemMap.set(v,{ref:v,...y}),()=>void N.itemMap.delete(v))),s.jsx(Sn,{[u]:"",ref:j,children:w})});m.displayName=d;function p(g){const x=o(e+"CollectionConsumer",g);return Nt.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const y=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((N,b)=>y.indexOf(N.ref.current)-y.indexOf(b.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:c,ItemSlot:m},p,r]}function WU(e,t){const n=h.createContext(t),r=o=>{const{children:i,...l}=o,c=h.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function a(o){const i=h.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,a]}function ln(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];const d=m=>{const{scope:p,children:g,...x}=m,f=p?.[e]?.[c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})};d.displayName=o+"Provider";function u(m,p){const g=p?.[e]?.[c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,zU(a,...t)]}function zU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var XU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Fe=XU.reduce((e,t)=>{const n=h.forwardRef((r,a)=>{const{asChild:o,...i}=r,l=o?Sn:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function A0(e,t){e&&jr.flushSync(()=>e.dispatchEvent(t))}function _t(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>t.current?.(...n),[])}function YU(e,t=globalThis?.document){const n=_t(e);h.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var KU="DismissableLayer",_y="dismissableLayer.update",GU="dismissableLayer.pointerDownOutside",JU="dismissableLayer.focusOutside",VC,AD=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cc=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=h.useContext(AD),[u,m]=h.useState(null),p=u?.ownerDocument??globalThis?.document,[,g]=h.useState({}),x=Xe(t,S=>m(S)),f=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=f.indexOf(w),v=u?f.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=v>=y,b=ZU(S=>{const P=S.target,A=[...d.branches].some(L=>L.contains(P));!N||A||(a?.(S),i?.(S),S.defaultPrevented||l?.())},p),E=eB(S=>{const P=S.target;[...d.branches].some(L=>L.contains(P))||(o?.(S),i?.(S),S.defaultPrevented||l?.())},p);return YU(S=>{v===d.layers.size-1&&(r?.(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),h.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(VC=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),UC(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=VC)}},[u,p,n,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),UC())},[u,d]),h.useEffect(()=>{const S=()=>g({});return document.addEventListener(_y,S),()=>document.removeEventListener(_y,S)},[]),s.jsx(Fe.div,{...c,ref:x,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:Ee(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ee(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ee(e.onPointerDownCapture,b.onPointerDownCapture)})});cc.displayName=KU;var QU="DismissableLayerBranch",DD=h.forwardRef((e,t)=>{const n=h.useContext(AD),r=h.useRef(null),a=Xe(t,r);return h.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Fe.div,{...e,ref:a})});DD.displayName=QU;function ZU(e,t=globalThis?.document){const n=_t(e),r=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){kD(GU,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function eB(e,t=globalThis?.document){const n=_t(e),r=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!r.current&&kD(JU,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function UC(){const e=new CustomEvent(_y);document.dispatchEvent(e)}function kD(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?A0(a,o):a.dispatchEvent(o)}var tB=cc,sB=DD,ms=globalThis?.document?h.useLayoutEffect:()=>{},nB="Portal",Fu=h.forwardRef((e,t)=>{const{container:n,...r}=e,[a,o]=h.useState(!1);ms(()=>o(!0),[]);const i=n||a&&globalThis?.document?.body;return i?T0.createPortal(s.jsx(Fe.div,{...r,ref:t}),i):null});Fu.displayName=nB;function rB(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var ps=e=>{const{present:t,children:n}=e,r=aB(t),a=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),o=Xe(r.ref,oB(a));return typeof n=="function"||r.isPresent?h.cloneElement(a,{ref:o}):null};ps.displayName="Presence";function aB(e){const[t,n]=h.useState(),r=h.useRef({}),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=rB(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=Vh(r.current);o.current=l==="mounted"?d:"none"},[l]),ms(()=>{const d=r.current,u=a.current;if(u!==e){const p=o.current,g=Vh(d);e?c("MOUNT"):g==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ms(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=g=>{const f=Vh(r.current).includes(g.animationName);if(g.target===t&&f&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=g=>{g.target===t&&(o.current=Vh(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Vh(e){return e?.animationName||"none"}function oB(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function qn({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=iB({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,l=_t(n),c=h.useCallback(d=>{if(o){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[o,e,a,l]);return[i,c]}function iB({defaultProp:e,onChange:t}){const n=h.useState(e),[r]=n,a=h.useRef(r),o=_t(t);return h.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}var lB="VisuallyHidden",Ou=h.forwardRef((e,t)=>s.jsx(Fe.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Ou.displayName=lB;var cB=Ou,D0="ToastProvider",[k0,dB,uB]=Ff("Toast"),[MD,Wve]=ln("Toast",[uB]),[hB,Of]=MD(D0),RD=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=e,[l,c]=h.useState(null),[d,u]=h.useState(0),m=h.useRef(!1),p=h.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${D0}\`. Expected non-empty \`string\`.`),s.jsx(k0.Provider,{scope:t,children:s.jsx(hB,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:h.useCallback(()=>u(g=>g+1),[]),onToastRemove:h.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:i})})};RD.displayName=D0;var FD="ToastViewport",mB=["F8"],Vy="toast.viewportPause",Uy="toast.viewportResume",OD=h.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=mB,label:a="Notifications ({hotkey})",...o}=e,i=Of(FD,n),l=dB(n),c=h.useRef(null),d=h.useRef(null),u=h.useRef(null),m=h.useRef(null),p=Xe(t,m,i.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=i.toastCount>0;h.useEffect(()=>{const w=y=>{r.length!==0&&r.every(j=>y[j]||y.code===j)&&m.current?.focus()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),h.useEffect(()=>{const w=c.current,y=m.current;if(x&&w&&y){const v=()=>{if(!i.isClosePausedRef.current){const E=new CustomEvent(Vy);y.dispatchEvent(E),i.isClosePausedRef.current=!0}},j=()=>{if(i.isClosePausedRef.current){const E=new CustomEvent(Uy);y.dispatchEvent(E),i.isClosePausedRef.current=!1}},N=E=>{!w.contains(E.relatedTarget)&&j()},b=()=>{w.contains(document.activeElement)||j()};return w.addEventListener("focusin",v),w.addEventListener("focusout",N),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",b),window.addEventListener("blur",v),window.addEventListener("focus",j),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",b),window.removeEventListener("blur",v),window.removeEventListener("focus",j)}}},[x,i.isClosePausedRef]);const f=h.useCallback(({tabbingDirection:w})=>{const v=l().map(j=>{const N=j.ref.current,b=[N,...EB(N)];return w==="forwards"?b:b.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return h.useEffect(()=>{const w=m.current;if(w){const y=v=>{const j=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!j){const b=document.activeElement,E=v.shiftKey;if(v.target===w&&E){d.current?.focus();return}const A=f({tabbingDirection:E?"backwards":"forwards"}),L=A.findIndex(R=>R===b);wx(A.slice(L+1))?v.preventDefault():E?d.current?.focus():u.current?.focus()}};return w.addEventListener("keydown",y),()=>w.removeEventListener("keydown",y)}},[l,f]),s.jsxs(sB,{ref:c,role:"region","aria-label":a.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(By,{ref:d,onFocusFromOutsideViewport:()=>{const w=f({tabbingDirection:"forwards"});wx(w)}}),s.jsx(k0.Slot,{scope:n,children:s.jsx(Fe.ol,{tabIndex:-1,...o,ref:p})}),x&&s.jsx(By,{ref:u,onFocusFromOutsideViewport:()=>{const w=f({tabbingDirection:"backwards"});wx(w)}})]})});OD.displayName=FD;var ID="ToastFocusProxy",By=h.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,o=Of(ID,n);return s.jsx(Ou,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:i=>{const l=i.relatedTarget;!o.viewport?.contains(l)&&r()}})});By.displayName=ID;var If="Toast",pB="toast.swipeStart",fB="toast.swipeMove",gB="toast.swipeCancel",xB="toast.swipeEnd",LD=h.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:o,...i}=e,[l=!0,c]=qn({prop:r,defaultProp:a,onChange:o});return s.jsx(ps,{present:n||l,children:s.jsx(jB,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:_t(e.onPause),onResume:_t(e.onResume),onSwipeStart:Ee(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:Ee(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});LD.displayName=If;var[vB,yB]=MD(If,{onClose(){}}),jB=h.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:g,...x}=e,f=Of(If,n),[w,y]=h.useState(null),v=Xe(t,O=>y(O)),j=h.useRef(null),N=h.useRef(null),b=a||f.duration,E=h.useRef(0),S=h.useRef(b),P=h.useRef(0),{onToastAdd:A,onToastRemove:L}=f,R=_t(()=>{w?.contains(document.activeElement)&&f.viewport?.focus(),i()}),I=h.useCallback(O=>{!O||O===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(R,O))},[R]);h.useEffect(()=>{const O=f.viewport;if(O){const k=()=>{I(S.current),d?.()},T=()=>{const D=new Date().getTime()-E.current;S.current=S.current-D,window.clearTimeout(P.current),c?.()};return O.addEventListener(Vy,T),O.addEventListener(Uy,k),()=>{O.removeEventListener(Vy,T),O.removeEventListener(Uy,k)}}},[f.viewport,b,c,d,I]),h.useEffect(()=>{o&&!f.isClosePausedRef.current&&I(b)},[o,b,f.isClosePausedRef,I]),h.useEffect(()=>(A(),()=>L()),[A,L]);const V=h.useMemo(()=>w?qD(w):null,[w]);return f.viewport?s.jsxs(s.Fragment,{children:[V&&s.jsx(wB,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),s.jsx(vB,{scope:n,onClose:R,children:jr.createPortal(s.jsx(k0.ItemSlot,{scope:n,children:s.jsx(tB,{asChild:!0,onEscapeKeyDown:Ee(l,()=>{f.isFocusedToastEscapeKeyDownRef.current||R(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Fe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":f.swipeDirection,...x,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ee(e.onKeyDown,O=>{O.key==="Escape"&&(l?.(O.nativeEvent),O.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Ee(e.onPointerDown,O=>{O.button===0&&(j.current={x:O.clientX,y:O.clientY})}),onPointerMove:Ee(e.onPointerMove,O=>{if(!j.current)return;const k=O.clientX-j.current.x,T=O.clientY-j.current.y,D=!!N.current,M=["left","right"].includes(f.swipeDirection),_=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,H=M?_(0,k):0,$=M?0:_(0,T),B=O.pointerType==="touch"?10:2,W={x:H,y:$},q={originalEvent:O,delta:W};D?(N.current=W,Uh(fB,m,q,{discrete:!1})):BC(W,f.swipeDirection,B)?(N.current=W,Uh(pB,u,q,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(k)>B||Math.abs(T)>B)&&(j.current=null)}),onPointerUp:Ee(e.onPointerUp,O=>{const k=N.current,T=O.target;if(T.hasPointerCapture(O.pointerId)&&T.releasePointerCapture(O.pointerId),N.current=null,j.current=null,k){const D=O.currentTarget,M={originalEvent:O,delta:k};BC(k,f.swipeDirection,f.swipeThreshold)?Uh(xB,g,M,{discrete:!0}):Uh(gB,p,M,{discrete:!0}),D.addEventListener("click",_=>_.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),wB=e=>{const{__scopeToast:t,children:n,...r}=e,a=Of(If,t),[o,i]=h.useState(!1),[l,c]=h.useState(!1);return SB(()=>i(!0)),h.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Fu,{asChild:!0,children:s.jsx(Ou,{...r,children:o&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},NB="ToastTitle",$D=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Fe.div,{...r,ref:t})});$D.displayName=NB;var bB="ToastDescription",_D=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Fe.div,{...r,ref:t})});_D.displayName=bB;var VD="ToastAction",UD=h.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(HD,{altText:n,asChild:!0,children:s.jsx(M0,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${VD}\`. Expected non-empty \`string\`.`),null)});UD.displayName=VD;var BD="ToastClose",M0=h.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=yB(BD,n);return s.jsx(HD,{asChild:!0,children:s.jsx(Fe.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,a.onClose)})})});M0.displayName=BD;var HD=h.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(Fe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function qD(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),CB(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...qD(r))}}),t}function Uh(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?A0(a,o):a.dispatchEvent(o)}var BC=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),o=r>a;return t==="left"||t==="right"?o&&r>n:!o&&a>n};function SB(e=()=>{}){const t=_t(e);ms(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function CB(e){return e.nodeType===e.ELEMENT_NODE}function EB(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wx(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var TB=RD,WD=OD,zD=LD,XD=$D,YD=_D,KD=UD,GD=M0;function JD(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=JD(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function QD(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=JD(e))&&(r&&(r+=" "),r+=t);return r}const HC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qC=QD,Si=(e,t)=>n=>{var r;if(t?.variants==null)return qC(e,n?.class,n?.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const u=n?.[d],m=o?.[d];if(u===null)return null;const p=HC(u)||HC(m);return a[d][p]}),l=n&&Object.entries(n).reduce((d,u)=>{let[m,p]=u;return p===void 0||(d[m]=p),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:m,className:p,...g}=u;return Object.entries(g).every(x=>{let[f,w]=x;return Array.isArray(w)?w.includes({...o,...l}[f]):{...o,...l}[f]===w})?[...d,m,p]:d},[]);return qC(e,i,c,n?.class,n?.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZD=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:i,...l},c)=>h.createElement("svg",{ref:c,...AB,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:ZD("lucide",a),...l},[...i.map(([d,u])=>h.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(e,t)=>{const n=h.forwardRef(({className:r,...a},o)=>h.createElement(DB,{ref:o,iconNode:t,className:ZD(`lucide-${PB(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=je("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=je("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=je("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=je("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=je("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=je("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=je("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=je("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=je("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=je("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=je("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=je("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=je("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=je("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=je("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=je("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=je("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=je("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=je("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=je("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=je("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=je("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=je("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=je("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=je("FileCode2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m5 12-3 3 3 3",key:"oke12k"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=je("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=je("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=je("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=je("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=je("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=je("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=je("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=je("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=je("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=je("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=je("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=je("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=je("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=je("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=je("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=je("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=je("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=je("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=je("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=je("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=je("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=je("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=je("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=je("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=je("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=je("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=je("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=je("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=je("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=je("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=je("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=je("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=je("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=je("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=je("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=je("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=je("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=je("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=je("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=je("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=je("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=je("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),L0="-",a8=e=>{const t=i8(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(L0);return l[0]===""&&l.length!==1&&l.shift(),pk(l,t)||o8(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},pk=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?pk(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(L0);return t.validators.find(({validator:i})=>i(o))?.classGroupId},QC=/^\[(.+)\]$/,o8=e=>{if(QC.test(e)){const t=QC.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},i8=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return c8(Object.entries(e.classGroups),n).forEach(([o,i])=>{Xy(i,r,o,t)}),r},Xy=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:ZC(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(l8(a)){Xy(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,i])=>{Xy(i,ZC(t,o),n,r)})})},ZC=(e,t)=>{let n=e;return t.split(L0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},l8=e=>e.isThemeGetter,c8=(e,t)=>t?e.map(([n,r])=>{const a=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[t+i,l])):o);return[n,a]}):e,d8=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return a(o,i),i},set(o,i){n.has(o)?n.set(o,i):a(o,i)}}},fk="!",u8=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],o=t.length,i=l=>{const c=[];let d=0,u=0,m;for(let w=0;w<l.length;w++){let y=l[w];if(d===0){if(y===a&&(r||l.slice(w,w+o)===t)){c.push(l.slice(u,w)),u=w+o;continue}if(y==="/"){m=w;continue}}y==="["?d++:y==="]"&&d--}const p=c.length===0?l:l.substring(u),g=p.startsWith(fk),x=g?p.substring(1):p,f=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:f}};return n?l=>n({className:l,parseClassName:i}):i},h8=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},m8=e=>({cache:d8(e.cacheSize),parseClassName:u8(e),...a8(e)}),p8=/\s+/,f8=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(p8);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);let x=!!g,f=r(x?p.substring(0,g):p);if(!f){if(!x){l=d+(l.length>0?" "+l:l);continue}if(f=r(p),!f){l=d+(l.length>0?" "+l:l);continue}x=!1}const w=h8(u).join(":"),y=m?w+fk:w,v=y+f;if(o.includes(v))continue;o.push(v);const j=a(f,x);for(let N=0;N<j.length;++N){const b=j[N];o.push(y+b)}l=d+(l.length>0?" "+l:l)}return l};function g8(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=gk(t))&&(r&&(r+=" "),r+=n);return r}const gk=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=gk(e[r]))&&(n&&(n+=" "),n+=t);return n};function x8(e,...t){let n,r,a,o=i;function i(c){const d=t.reduce((u,m)=>m(u),e());return n=m8(d),r=n.cache.get,a=n.cache.set,o=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=f8(c,n);return a(c,u),u}return function(){return o(g8.apply(null,arguments))}}const kt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},xk=/^\[(?:([a-z-]+):)?(.+)\]$/i,v8=/^\d+\/\d+$/,y8=new Set(["px","full","screen"]),j8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,w8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,N8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,b8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,S8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ea=e=>Nl(e)||y8.has(e)||v8.test(e),Ma=e=>hc(e,"length",M8),Nl=e=>!!e&&!Number.isNaN(Number(e)),Sx=e=>hc(e,"number",Nl),zc=e=>!!e&&Number.isInteger(Number(e)),C8=e=>e.endsWith("%")&&Nl(e.slice(0,-1)),Ze=e=>xk.test(e),Ra=e=>j8.test(e),E8=new Set(["length","size","percentage"]),T8=e=>hc(e,E8,vk),P8=e=>hc(e,"position",vk),A8=new Set(["image","url"]),D8=e=>hc(e,A8,F8),k8=e=>hc(e,"",R8),Xc=()=>!0,hc=(e,t,n)=>{const r=xk.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},M8=e=>w8.test(e)&&!N8.test(e),vk=()=>!1,R8=e=>b8.test(e),F8=e=>S8.test(e),O8=()=>{const e=kt("colors"),t=kt("spacing"),n=kt("blur"),r=kt("brightness"),a=kt("borderColor"),o=kt("borderRadius"),i=kt("borderSpacing"),l=kt("borderWidth"),c=kt("contrast"),d=kt("grayscale"),u=kt("hueRotate"),m=kt("invert"),p=kt("gap"),g=kt("gradientColorStops"),x=kt("gradientColorStopPositions"),f=kt("inset"),w=kt("margin"),y=kt("opacity"),v=kt("padding"),j=kt("saturate"),N=kt("scale"),b=kt("sepia"),E=kt("skew"),S=kt("space"),P=kt("translate"),A=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ze,t],I=()=>[Ze,t],V=()=>["",ea,Ma],O=()=>["auto",Nl,Ze],k=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],T=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],_=()=>["","0",Ze],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Nl,Ze];return{cacheSize:500,separator:":",theme:{colors:[Xc],spacing:[ea,Ma],blur:["none","",Ra,Ze],brightness:$(),borderColor:[e],borderRadius:["none","","full",Ra,Ze],borderSpacing:I(),borderWidth:V(),contrast:$(),grayscale:_(),hueRotate:$(),invert:_(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[C8,Ma],inset:R(),margin:R(),opacity:$(),padding:I(),saturate:$(),scale:$(),sepia:_(),skew:$(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ze]}],container:["container"],columns:[{columns:[Ra]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...k(),Ze]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zc,Ze]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ze]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",zc,Ze]}],"grid-cols":[{"grid-cols":[Xc]}],"col-start-end":[{col:["auto",{span:["full",zc,Ze]},Ze]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Xc]}],"row-start-end":[{row:["auto",{span:[zc,Ze]},Ze]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ze]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ze,t]}],"min-w":[{"min-w":[Ze,t,"min","max","fit"]}],"max-w":[{"max-w":[Ze,t,"none","full","min","max","fit","prose",{screen:[Ra]},Ra]}],h:[{h:[Ze,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ze,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ze,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ra,Ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sx]}],"font-family":[{font:[Xc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ze]}],"line-clamp":[{"line-clamp":["none",Nl,Sx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ea,Ze]}],"list-image":[{"list-image":["none",Ze]}],"list-style-type":[{list:["none","disc","decimal",Ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ea,Ma]}],"underline-offset":[{"underline-offset":["auto",ea,Ze]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...k(),P8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D8]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...T(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:T()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...T()]}],"outline-offset":[{"outline-offset":[ea,Ze]}],"outline-w":[{outline:[ea,Ma]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ea,Ma]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ra,k8]}],"shadow-color":[{shadow:[Xc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ra,Ze]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[j]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ze]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",Ze]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[zc,Ze]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ze]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ea,Ma,Sx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},I8=x8(O8);function ce(...e){return I8(QD(e))}const L8=TB,yk=h.forwardRef(({className:e,...t},n)=>s.jsx(WD,{ref:n,className:ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));yk.displayName=WD.displayName;const $8=Si("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jk=h.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(zD,{ref:r,className:ce($8({variant:t}),e),...n}));jk.displayName=zD.displayName;const _8=h.forwardRef(({className:e,...t},n)=>s.jsx(KD,{ref:n,className:ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));_8.displayName=KD.displayName;const wk=h.forwardRef(({className:e,...t},n)=>s.jsx(GD,{ref:n,className:ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(jt,{className:"h-4 w-4"})}));wk.displayName=GD.displayName;const Nk=h.forwardRef(({className:e,...t},n)=>s.jsx(XD,{ref:n,className:ce("text-sm font-semibold",e),...t}));Nk.displayName=XD.displayName;const bk=h.forwardRef(({className:e,...t},n)=>s.jsx(YD,{ref:n,className:ce("text-sm opacity-90",e),...t}));bk.displayName=YD.displayName;function V8(){const{toasts:e}=_e();return s.jsxs(L8,{children:[e.map(function({id:t,title:n,description:r,action:a,...o}){return s.jsxs(jk,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(Nk,{children:n}),r&&s.jsx(bk,{children:r})]}),a,s.jsx(wk,{})]},t)}),s.jsx(yk,{})]})}var U8=Au.useId||(()=>{}),B8=0;function _n(e){const[t,n]=h.useState(U8());return ms(()=>{n(r=>r??String(B8++))},[e]),t?`radix-${t}`:""}const H8=["top","right","bottom","left"],po=Math.min,xn=Math.max,Np=Math.round,Bh=Math.floor,fo=e=>({x:e,y:e}),q8={left:"right",right:"left",bottom:"top",top:"bottom"},W8={start:"end",end:"start"};function Yy(e,t,n){return xn(e,po(t,n))}function xa(e,t){return typeof e=="function"?e(t):e}function va(e){return e.split("-")[0]}function mc(e){return e.split("-")[1]}function $0(e){return e==="x"?"y":"x"}function _0(e){return e==="y"?"height":"width"}function go(e){return["top","bottom"].includes(va(e))?"y":"x"}function V0(e){return $0(go(e))}function z8(e,t,n){n===void 0&&(n=!1);const r=mc(e),a=V0(e),o=_0(a);let i=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=bp(i)),[i,bp(i)]}function X8(e){const t=bp(e);return[Ky(e),t,Ky(t)]}function Ky(e){return e.replace(/start|end/g,t=>W8[t])}function Y8(e,t,n){const r=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?o:i;default:return[]}}function K8(e,t,n,r){const a=mc(e);let o=Y8(va(e),n==="start",r);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(Ky)))),o}function bp(e){return e.replace(/left|right|bottom|top/g,t=>q8[t])}function G8(e){return{top:0,right:0,bottom:0,left:0,...e}}function Sk(e){return typeof e!="number"?G8(e):{top:e,right:e,bottom:e,left:e}}function Sp(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function e1(e,t,n){let{reference:r,floating:a}=e;const o=go(t),i=V0(t),l=_0(i),c=va(t),d=o==="y",u=r.x+r.width/2-a.width/2,m=r.y+r.height/2-a.height/2,p=r[l]/2-a[l]/2;let g;switch(c){case"top":g={x:u,y:r.y-a.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-a.width,y:m};break;default:g={x:r.x,y:r.y}}switch(mc(t)){case"start":g[i]-=p*(n&&d?-1:1);break;case"end":g[i]+=p*(n&&d?-1:1);break}return g}const J8=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=e1(d,r,c),p=r,g={},x=0;for(let f=0;f<l.length;f++){const{name:w,fn:y}=l[f],{x:v,y:j,data:N,reset:b}=await y({x:u,y:m,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:d,platform:i,elements:{reference:e,floating:t}});u=v??u,m=j??m,g={...g,[w]:{...g[w],...N}},b&&x<=50&&(x++,typeof b=="object"&&(b.placement&&(p=b.placement),b.rects&&(d=b.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):b.rects),{x:u,y:m}=e1(d,p,c)),f=-1)}return{x:u,y:m,placement:p,strategy:a,middlewareData:g}};async function Zd(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:p=!1,padding:g=0}=xa(t,e),x=Sk(g),w=l[p?m==="floating"?"reference":"floating":m],y=Sp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=m==="floating"?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),N=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},b=Sp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:j,strategy:c}):v);return{top:(y.top-b.top+x.top)/N.y,bottom:(b.bottom-y.bottom+x.bottom)/N.y,left:(y.left-b.left+x.left)/N.x,right:(b.right-y.right+x.right)/N.x}}const Q8=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=xa(e,t)||{};if(d==null)return{};const m=Sk(u),p={x:n,y:r},g=V0(a),x=_0(g),f=await i.getDimensions(d),w=g==="y",y=w?"top":"left",v=w?"bottom":"right",j=w?"clientHeight":"clientWidth",N=o.reference[x]+o.reference[g]-p[g]-o.floating[x],b=p[g]-o.reference[g],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let S=E?E[j]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=l.floating[j]||o.floating[x]);const P=N/2-b/2,A=S/2-f[x]/2-1,L=po(m[y],A),R=po(m[v],A),I=L,V=S-f[x]-R,O=S/2-f[x]/2+P,k=Yy(I,O,V),T=!c.arrow&&mc(a)!=null&&O!==k&&o.reference[x]/2-(O<I?L:R)-f[x]/2<0,D=T?O<I?O-I:O-V:0;return{[g]:p[g]+D,data:{[g]:k,centerOffset:O-k-D,...T&&{alignmentOffset:D}},reset:T}}}),Z8=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:f=!0,...w}=xa(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=va(a),v=go(l),j=va(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),b=p||(j||!f?[bp(l)]:X8(l)),E=x!=="none";!p&&E&&b.push(...K8(l,f,x,N));const S=[l,...b],P=await Zd(t,w),A=[];let L=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&A.push(P[y]),m){const O=z8(a,i,N);A.push(P[O[0]],P[O[1]])}if(L=[...L,{placement:a,overflows:A}],!A.every(O=>O<=0)){var R,I;const O=(((R=o.flip)==null?void 0:R.index)||0)+1,k=S[O];if(k)return{data:{index:O,overflows:L},reset:{placement:k}};let T=(I=L.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:I.placement;if(!T)switch(g){case"bestFit":{var V;const D=(V=L.filter(M=>{if(E){const _=go(M.placement);return _===v||_==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(_=>_>0).reduce((_,H)=>_+H,0)]).sort((M,_)=>M[1]-_[1])[0])==null?void 0:V[0];D&&(T=D);break}case"initialPlacement":T=l;break}if(a!==T)return{reset:{placement:T}}}return{}}}};function t1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function s1(e){return H8.some(t=>e[t]>=0)}const eH=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=xa(e,t);switch(r){case"referenceHidden":{const o=await Zd(t,{...a,elementContext:"reference"}),i=t1(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:s1(i)}}}case"escaped":{const o=await Zd(t,{...a,altBoundary:!0}),i=t1(o,n.floating);return{data:{escapedOffsets:i,escaped:s1(i)}}}default:return{}}}}};async function tH(e,t){const{placement:n,platform:r,elements:a}=e,o=await(r.isRTL==null?void 0:r.isRTL(a.floating)),i=va(n),l=mc(n),c=go(n)==="y",d=["left","top"].includes(i)?-1:1,u=o&&c?-1:1,m=xa(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*u,y:p*d}:{x:p*d,y:g*u}}const sH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await tH(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},nH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:y,y:v}=w;return{x:y,y:v}}},...c}=xa(e,t),d={x:n,y:r},u=await Zd(t,c),m=go(va(a)),p=$0(m);let g=d[p],x=d[m];if(o){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",v=g+u[w],j=g-u[y];g=Yy(v,g,j)}if(i){const w=m==="y"?"top":"left",y=m==="y"?"bottom":"right",v=x+u[w],j=x-u[y];x=Yy(v,x,j)}const f=l.fn({...t,[p]:g,[m]:x});return{...f,data:{x:f.x-n,y:f.y-r,enabled:{[p]:o,[m]:i}}}}}},rH=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=xa(e,t),u={x:n,y:r},m=go(a),p=$0(m);let g=u[p],x=u[m];const f=xa(l,t),w=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(c){const j=p==="y"?"height":"width",N=o.reference[p]-o.floating[j]+w.mainAxis,b=o.reference[p]+o.reference[j]-w.mainAxis;g<N?g=N:g>b&&(g=b)}if(d){var y,v;const j=p==="y"?"width":"height",N=["top","left"].includes(va(a)),b=o.reference[m]-o.floating[j]+(N&&((y=i.offset)==null?void 0:y[m])||0)+(N?0:w.crossAxis),E=o.reference[m]+o.reference[j]+(N?0:((v=i.offset)==null?void 0:v[m])||0)-(N?w.crossAxis:0);x<b?x=b:x>E&&(x=E)}return{[p]:g,[m]:x}}}},aH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=xa(e,t),u=await Zd(t,d),m=va(a),p=mc(a),g=go(a)==="y",{width:x,height:f}=o.floating;let w,y;m==="top"||m==="bottom"?(w=m,y=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=m,w=p==="end"?"top":"bottom");const v=f-u.top-u.bottom,j=x-u.left-u.right,N=po(f-u[w],v),b=po(x-u[y],j),E=!t.middlewareData.shift;let S=N,P=b;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=v),E&&!p){const L=xn(u.left,0),R=xn(u.right,0),I=xn(u.top,0),V=xn(u.bottom,0);g?P=x-2*(L!==0||R!==0?L+R:xn(u.left,u.right)):S=f-2*(I!==0||V!==0?I+V:xn(u.top,u.bottom))}await c({...t,availableWidth:P,availableHeight:S});const A=await i.getDimensions(l.floating);return x!==A.width||f!==A.height?{reset:{rects:!0}}:{}}}};function $f(){return typeof window<"u"}function pc(e){return Ck(e)?(e.nodeName||"").toLowerCase():"#document"}function Nn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xr(e){var t;return(t=(Ck(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ck(e){return $f()?e instanceof Node||e instanceof Nn(e).Node:!1}function mr(e){return $f()?e instanceof Element||e instanceof Nn(e).Element:!1}function qr(e){return $f()?e instanceof HTMLElement||e instanceof Nn(e).HTMLElement:!1}function n1(e){return!$f()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nn(e).ShadowRoot}function $u(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=pr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function oH(e){return["table","td","th"].includes(pc(e))}function _f(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function U0(e){const t=B0(),n=mr(e)?pr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function iH(e){let t=xo(e);for(;qr(t)&&!_l(t);){if(U0(t))return t;if(_f(t))return null;t=xo(t)}return null}function B0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _l(e){return["html","body","#document"].includes(pc(e))}function pr(e){return Nn(e).getComputedStyle(e)}function Vf(e){return mr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function xo(e){if(pc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||n1(e)&&e.host||Xr(e);return n1(t)?t.host:t}function Ek(e){const t=xo(e);return _l(t)?e.ownerDocument?e.ownerDocument.body:e.body:qr(t)&&$u(t)?t:Ek(t)}function eu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Ek(e),o=a===((r=e.ownerDocument)==null?void 0:r.body),i=Nn(a);if(o){const l=Gy(i);return t.concat(i,i.visualViewport||[],$u(a)?a:[],l&&n?eu(l):[])}return t.concat(a,eu(a,[],n))}function Gy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Tk(e){const t=pr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=qr(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,l=Np(n)!==o||Np(r)!==i;return l&&(n=o,r=i),{width:n,height:r,$:l}}function H0(e){return mr(e)?e:e.contextElement}function bl(e){const t=H0(e);if(!qr(t))return fo(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=Tk(t);let i=(o?Np(n.width):n.width)/r,l=(o?Np(n.height):n.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const lH=fo(0);function Pk(e){const t=Nn(e);return!B0()||!t.visualViewport?lH:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cH(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nn(e)?!1:t}function li(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=H0(e);let i=fo(1);t&&(r?mr(r)&&(i=bl(r)):i=bl(e));const l=cH(o,n,r)?Pk(o):fo(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,m=a.height/i.y;if(o){const p=Nn(o),g=r&&mr(r)?Nn(r):r;let x=p,f=Gy(x);for(;f&&r&&g!==x;){const w=bl(f),y=f.getBoundingClientRect(),v=pr(f),j=y.left+(f.clientLeft+parseFloat(v.paddingLeft))*w.x,N=y.top+(f.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,m*=w.y,c+=j,d+=N,x=Nn(f),f=Gy(x)}}return Sp({width:u,height:m,x:c,y:d})}function dH(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o=a==="fixed",i=Xr(r),l=t?_f(t.floating):!1;if(r===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=fo(1);const u=fo(0),m=qr(r);if((m||!m&&!o)&&((pc(r)!=="body"||$u(i))&&(c=Vf(r)),qr(r))){const p=li(r);d=bl(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x,y:n.y*d.y-c.scrollTop*d.y+u.y}}function uH(e){return Array.from(e.getClientRects())}function Jy(e,t){const n=Vf(e).scrollLeft;return t?t.left+n:li(Xr(e)).left+n}function hH(e){const t=Xr(e),n=Vf(e),r=e.ownerDocument.body,a=xn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=xn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Jy(e);const l=-n.scrollTop;return pr(r).direction==="rtl"&&(i+=xn(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:i,y:l}}function mH(e,t){const n=Nn(e),r=Xr(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=B0();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}function pH(e,t){const n=li(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=qr(e)?bl(e):fo(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=r*o.y;return{width:i,height:l,x:c,y:d}}function r1(e,t,n){let r;if(t==="viewport")r=mH(e,n);else if(t==="document")r=hH(Xr(e));else if(mr(t))r=pH(t,n);else{const a=Pk(e);r={...t,x:t.x-a.x,y:t.y-a.y}}return Sp(r)}function Ak(e,t){const n=xo(e);return n===t||!mr(n)||_l(n)?!1:pr(n).position==="fixed"||Ak(n,t)}function fH(e,t){const n=t.get(e);if(n)return n;let r=eu(e,[],!1).filter(l=>mr(l)&&pc(l)!=="body"),a=null;const o=pr(e).position==="fixed";let i=o?xo(e):e;for(;mr(i)&&!_l(i);){const l=pr(i),c=U0(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||$u(i)&&!c&&Ak(e,i))?r=r.filter(u=>u!==i):a=l,i=xo(i)}return t.set(e,r),r}function gH(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const i=[...n==="clippingAncestors"?_f(t)?[]:fH(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((d,u)=>{const m=r1(t,u,a);return d.top=xn(m.top,d.top),d.right=po(m.right,d.right),d.bottom=po(m.bottom,d.bottom),d.left=xn(m.left,d.left),d},r1(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xH(e){const{width:t,height:n}=Tk(e);return{width:t,height:n}}function vH(e,t,n){const r=qr(t),a=Xr(t),o=n==="fixed",i=li(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=fo(0);if(r||!r&&!o)if((pc(t)!=="body"||$u(a))&&(l=Vf(t)),r){const g=li(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&(c.x=Jy(a));let d=0,u=0;if(a&&!r&&!o){const g=a.getBoundingClientRect();u=g.top+l.scrollTop,d=g.left+l.scrollLeft-Jy(a,g)}const m=i.left+l.scrollLeft-c.x-d,p=i.top+l.scrollTop-c.y-u;return{x:m,y:p,width:i.width,height:i.height}}function Cx(e){return pr(e).position==="static"}function a1(e,t){if(!qr(e)||pr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Xr(e)===n&&(n=n.ownerDocument.body),n}function Dk(e,t){const n=Nn(e);if(_f(e))return n;if(!qr(e)){let a=xo(e);for(;a&&!_l(a);){if(mr(a)&&!Cx(a))return a;a=xo(a)}return n}let r=a1(e,t);for(;r&&oH(r)&&Cx(r);)r=a1(r,t);return r&&_l(r)&&Cx(r)&&!U0(r)?n:r||iH(e)||n}const yH=async function(e){const t=this.getOffsetParent||Dk,n=this.getDimensions,r=await n(e.floating);return{reference:vH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jH(e){return pr(e).direction==="rtl"}const wH={convertOffsetParentRelativeRectToViewportRelativeRect:dH,getDocumentElement:Xr,getClippingRect:gH,getOffsetParent:Dk,getElementRects:yH,getClientRects:uH,getDimensions:xH,getScale:bl,isElement:mr,isRTL:jH};function NH(e,t){let n=null,r;const a=Xr(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:u,width:m,height:p}=e.getBoundingClientRect();if(l||t(),!m||!p)return;const g=Bh(u),x=Bh(a.clientWidth-(d+m)),f=Bh(a.clientHeight-(u+p)),w=Bh(d),v={rootMargin:-g+"px "+-x+"px "+-f+"px "+-w+"px",threshold:xn(0,po(1,c))||1};let j=!0;function N(b){const E=b[0].intersectionRatio;if(E!==c){if(!j)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}j=!1}try{n=new IntersectionObserver(N,{...v,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,v)}n.observe(e)}return i(!0),o}function kk(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=H0(e),u=a||o?[...d?eu(d):[],...eu(t)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const m=d&&l?NH(d,n):null;let p=-1,g=null;i&&(g=new ResizeObserver(y=>{let[v]=y;v&&v.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var j;(j=g)==null||j.observe(t)})),n()}),d&&!c&&g.observe(d),g.observe(t));let x,f=c?li(e):null;c&&w();function w(){const y=li(e);f&&(y.x!==f.x||y.y!==f.y||y.width!==f.width||y.height!==f.height)&&n(),f=y,x=requestAnimationFrame(w)}return n(),()=>{var y;u.forEach(v=>{a&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),m?.(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const bH=sH,SH=nH,CH=Z8,EH=aH,TH=eH,o1=Q8,PH=rH,AH=(e,t,n)=>{const r=new Map,a={platform:wH,...n},o={...a.platform,_c:r};return J8(e,t,{...a,platform:o})};var Rm=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Cp(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Cp(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const o=a[r];if(!(o==="_owner"&&e.$$typeof)&&!Cp(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Mk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function i1(e,t){const n=Mk(e);return Math.round(t*n)/n}function Ex(e){const t=h.useRef(e);return Rm(()=>{t.current=e}),t}function Rk(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=h.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=h.useState(r);Cp(p,r)||g(r);const[x,f]=h.useState(null),[w,y]=h.useState(null),v=h.useCallback(M=>{M!==E.current&&(E.current=M,f(M))},[]),j=h.useCallback(M=>{M!==S.current&&(S.current=M,y(M))},[]),N=o||x,b=i||w,E=h.useRef(null),S=h.useRef(null),P=h.useRef(u),A=c!=null,L=Ex(c),R=Ex(a),I=Ex(d),V=h.useCallback(()=>{if(!E.current||!S.current)return;const M={placement:t,strategy:n,middleware:p};R.current&&(M.platform=R.current),AH(E.current,S.current,M).then(_=>{const H={..._,isPositioned:I.current!==!1};O.current&&!Cp(P.current,H)&&(P.current=H,jr.flushSync(()=>{m(H)}))})},[p,t,n,R,I]);Rm(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m(M=>({...M,isPositioned:!1})))},[d]);const O=h.useRef(!1);Rm(()=>(O.current=!0,()=>{O.current=!1}),[]),Rm(()=>{if(N&&(E.current=N),b&&(S.current=b),N&&b){if(L.current)return L.current(N,b,V);V()}},[N,b,V,L,A]);const k=h.useMemo(()=>({reference:E,floating:S,setReference:v,setFloating:j}),[v,j]),T=h.useMemo(()=>({reference:N,floating:b}),[N,b]),D=h.useMemo(()=>{const M={position:n,left:0,top:0};if(!T.floating)return M;const _=i1(T.floating,u.x),H=i1(T.floating,u.y);return l?{...M,transform:"translate("+_+"px, "+H+"px)",...Mk(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:H}},[n,l,T.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:V,refs:k,elements:T,floatingStyles:D}),[u,V,k,T,D])}const DH=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?o1({element:r.current,padding:a}).fn(n):{}:r?o1({element:r,padding:a}).fn(n):{}}}},Fk=(e,t)=>({...bH(e),options:[e,t]}),Ok=(e,t)=>({...SH(e),options:[e,t]}),Ik=(e,t)=>({...PH(e),options:[e,t]}),Lk=(e,t)=>({...CH(e),options:[e,t]}),$k=(e,t)=>({...EH(e),options:[e,t]}),_k=(e,t)=>({...TH(e),options:[e,t]}),Vk=(e,t)=>({...DH(e),options:[e,t]});var kH="Arrow",Uk=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...o}=e;return s.jsx(Fe.svg,{...o,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Uk.displayName=kH;var MH=Uk;function RH(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:p,children:g,...x}=m,f=p?.[e][c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})}function u(m,p){const g=p?.[e][c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,FH(a,...t)]}function FH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Uf(e){const[t,n]=h.useState(void 0);return ms(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var q0="Popper",[Bk,fc]=RH(q0),[OH,Hk]=Bk(q0),qk=e=>{const{__scopePopper:t,children:n}=e,[r,a]=h.useState(null);return s.jsx(OH,{scope:t,anchor:r,onAnchorChange:a,children:n})};qk.displayName=q0;var Wk="PopperAnchor",zk=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,o=Hk(Wk,n),i=h.useRef(null),l=Xe(t,i);return h.useEffect(()=>{o.onAnchorChange(r?.current||i.current)}),r?null:s.jsx(Fe.div,{...a,ref:l})});zk.displayName=Wk;var W0="PopperContent",[IH,LH]=Bk(W0),Xk=h.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...f}=e,w=Hk(W0,n),[y,v]=h.useState(null),j=Xe(t,J=>v(J)),[N,b]=h.useState(null),E=Uf(N),S=E?.width??0,P=E?.height??0,A=r+(o!=="center"?"-"+o:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(d)?d:[d],I=R.length>0,V={padding:L,boundary:R.filter(_H),altBoundary:I},{refs:O,floatingStyles:k,placement:T,isPositioned:D,middlewareData:M}=Rk({strategy:"fixed",placement:A,whileElementsMounted:(...J)=>kk(...J,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[Fk({mainAxis:a+P,alignmentAxis:i}),c&&Ok({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Ik():void 0,...V}),c&&Lk({...V}),$k({...V,apply:({elements:J,rects:ge,availableWidth:Q,availableHeight:he})=>{const{width:le,height:me}=ge.reference,Z=J.floating.style;Z.setProperty("--radix-popper-available-width",`${Q}px`),Z.setProperty("--radix-popper-available-height",`${he}px`),Z.setProperty("--radix-popper-anchor-width",`${le}px`),Z.setProperty("--radix-popper-anchor-height",`${me}px`)}}),N&&Vk({element:N,padding:l}),VH({arrowWidth:S,arrowHeight:P}),p&&_k({strategy:"referenceHidden",...V})]}),[_,H]=Gk(T),$=_t(x);ms(()=>{D&&$?.()},[D,$]);const B=M.arrow?.x,W=M.arrow?.y,q=M.arrow?.centerOffset!==0,[Y,pe]=h.useState();return ms(()=>{y&&pe(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:D?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(IH,{scope:n,placedSide:_,onArrowChange:b,arrowX:B,arrowY:W,shouldHideArrow:q,children:s.jsx(Fe.div,{"data-side":_,"data-align":H,...f,ref:j,style:{...f.style,animation:D?void 0:"none"}})})})});Xk.displayName=W0;var Yk="PopperArrow",$H={top:"bottom",right:"left",bottom:"top",left:"right"},Kk=h.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,o=LH(Yk,r),i=$H[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(MH,{...a,ref:n,style:{...a.style,display:"block"}})})});Kk.displayName=Yk;function _H(e){return e!==null}var VH=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:a}=t,i=a.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=Gk(n),m={start:"0%",center:"50%",end:"100%"}[u],p=(a.arrow?.x??0)+l/2,g=(a.arrow?.y??0)+c/2;let x="",f="";return d==="bottom"?(x=i?m:`${p}px`,f=`${-c}px`):d==="top"?(x=i?m:`${p}px`,f=`${r.floating.height+c}px`):d==="right"?(x=`${-c}px`,f=i?m:`${g}px`):d==="left"&&(x=`${r.floating.width+c}px`,f=i?m:`${g}px`),{data:{x,y:f}}}});function Gk(e){const[t,n="center"]=e.split("-");return[t,n]}var z0=qk,X0=zk,Y0=Xk,K0=Kk,[Bf,zve]=ln("Tooltip",[fc]),Hf=fc(),Jk="TooltipProvider",UH=700,Qy="tooltip.open",[BH,G0]=Bf(Jk),Qk=e=>{const{__scopeTooltip:t,delayDuration:n=UH,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:o}=e,[i,l]=h.useState(!0),c=h.useRef(!1),d=h.useRef(0);return h.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(BH,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:h.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:h.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:h.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:o})};Qk.displayName=Jk;var qf="Tooltip",[HH,Wf]=Bf(qf),Zk=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a=!1,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=e,c=G0(qf,e.__scopeTooltip),d=Hf(t),[u,m]=h.useState(null),p=_n(),g=h.useRef(0),x=i??c.disableHoverableContent,f=l??c.delayDuration,w=h.useRef(!1),[y=!1,v]=qn({prop:r,defaultProp:a,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Qy))):c.onClose(),o?.(S)}}),j=h.useMemo(()=>y?w.current?"delayed-open":"instant-open":"closed",[y]),N=h.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,v(!0)},[v]),b=h.useCallback(()=>{window.clearTimeout(g.current),g.current=0,v(!1)},[v]),E=h.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,v(!0),g.current=0},f)},[f,v]);return h.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),s.jsx(z0,{...d,children:s.jsx(HH,{scope:t,contentId:p,open:y,stateAttribute:j,trigger:u,onTriggerChange:m,onTriggerEnter:h.useCallback(()=>{c.isOpenDelayed?E():N()},[c.isOpenDelayed,E,N]),onTriggerLeave:h.useCallback(()=>{x?b():(window.clearTimeout(g.current),g.current=0)},[b,x]),onOpen:N,onClose:b,disableHoverableContent:x,children:n})})};Zk.displayName=qf;var Zy="TooltipTrigger",eM=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Wf(Zy,n),o=G0(Zy,n),i=Hf(n),l=h.useRef(null),c=Xe(t,l,a.onTriggerChange),d=h.useRef(!1),u=h.useRef(!1),m=h.useCallback(()=>d.current=!1,[]);return h.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(X0,{asChild:!0,...i,children:s.jsx(Fe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ee(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ee(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Ee(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Ee(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:Ee(e.onBlur,a.onClose),onClick:Ee(e.onClick,a.onClose)})})});eM.displayName=Zy;var qH="TooltipPortal",[Xve,WH]=Bf(qH,{forceMount:void 0}),Vl="TooltipContent",tM=h.forwardRef((e,t)=>{const n=WH(Vl,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...o}=e,i=Wf(Vl,e.__scopeTooltip);return s.jsx(ps,{present:r||i.open,children:i.disableHoverableContent?s.jsx(sM,{side:a,...o,ref:t}):s.jsx(zH,{side:a,...o,ref:t})})}),zH=h.forwardRef((e,t)=>{const n=Wf(Vl,e.__scopeTooltip),r=G0(Vl,e.__scopeTooltip),a=h.useRef(null),o=Xe(t,a),[i,l]=h.useState(null),{trigger:c,onClose:d}=n,u=a.current,{onPointerInTransitChange:m}=r,p=h.useCallback(()=>{l(null),m(!1)},[m]),g=h.useCallback((x,f)=>{const w=x.currentTarget,y={x:x.clientX,y:x.clientY},v=GH(y,w.getBoundingClientRect()),j=JH(y,v),N=QH(f.getBoundingClientRect()),b=eq([...j,...N]);l(b),m(!0)},[m]);return h.useEffect(()=>()=>p(),[p]),h.useEffect(()=>{if(c&&u){const x=w=>g(w,u),f=w=>g(w,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",f),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",f)}}},[c,u,g,p]),h.useEffect(()=>{if(i){const x=f=>{const w=f.target,y={x:f.clientX,y:f.clientY},v=c?.contains(w)||u?.contains(w),j=!ZH(y,i);v?p():j&&(p(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,i,d,p]),s.jsx(sM,{...e,ref:o})}),[XH,YH]=Bf(qf,{isInside:!1}),sM=h.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Wf(Vl,n),d=Hf(n),{onClose:u}=c;return h.useEffect(()=>(document.addEventListener(Qy,u),()=>document.removeEventListener(Qy,u)),[u]),h.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),s.jsx(cc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(Y0,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(P0,{children:r}),s.jsx(XH,{scope:n,isInside:!0,children:s.jsx(cB,{id:c.contentId,role:"tooltip",children:a||r})})]})})});tM.displayName=Vl;var nM="TooltipArrow",KH=h.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Hf(n);return YH(nM,n).isInside?null:s.jsx(K0,{...a,...r,ref:t})});KH.displayName=nM;function GH(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,a,o)){case o:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function JH(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function QH(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function ZH(e,t){const{x:n,y:r}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,u=t[i].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}function eq(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),tq(t)}function tq(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var sq=Qk,nq=Zk,rq=eM,rM=tM;const aM=sq,aq=nq,oq=rq,oM=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(rM,{ref:r,sideOffset:t,className:ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));oM.displayName=rM.displayName;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tu(){return tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tu.apply(this,arguments)}var Ka;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ka||(Ka={}));const l1="popstate";function iq(e){e===void 0&&(e={});function t(r,a){let{pathname:o,search:i,hash:l}=r.location;return ej("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Ep(a)}return cq(t,n,null,e)}function Bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function iM(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lq(){return Math.random().toString(36).substr(2,8)}function c1(e,t){return{usr:e.state,key:e.key,idx:t}}function ej(e,t,n,r){return n===void 0&&(n=null),tu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gc(t):t,{state:n,key:t&&t.key||r||lq()})}function Ep(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function cq(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,i=a.history,l=Ka.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(tu({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){l=Ka.Pop;let w=u(),y=w==null?null:w-d;d=w,c&&c({action:l,location:f.location,delta:y})}function p(w,y){l=Ka.Push;let v=ej(f.location,w,y);d=u()+1;let j=c1(v,d),N=f.createHref(v);try{i.pushState(j,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(N)}o&&c&&c({action:l,location:f.location,delta:1})}function g(w,y){l=Ka.Replace;let v=ej(f.location,w,y);d=u();let j=c1(v,d),N=f.createHref(v);i.replaceState(j,"",N),o&&c&&c({action:l,location:f.location,delta:0})}function x(w){let y=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof w=="string"?w:Ep(w);return v=v.replace(/ $/,"%20"),Bt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let f={get action(){return l},get location(){return e(a,i)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(l1,m),c=w,()=>{a.removeEventListener(l1,m),c=null}},createHref(w){return t(a,w)},createURL:x,encodeLocation(w){let y=x(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:g,go(w){return i.go(w)}};return f}var d1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(d1||(d1={}));function dq(e,t,n){return n===void 0&&(n="/"),uq(e,t,n,!1)}function uq(e,t,n,r){let a=typeof t=="string"?gc(t):t,o=Ul(a.pathname||"/",n);if(o==null)return null;let i=lM(e);hq(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=bq(o);l=wq(i[c],d,r)}return l}function lM(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(Bt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=ro([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(Bt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),lM(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:yq(d,o.index),routesMeta:u})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of cM(o.path))a(o,i,c)}),t}function cM(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let i=cM(r.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function hq(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:jq(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mq=/^:[\w-]+$/,pq=3,fq=2,gq=1,xq=10,vq=-2,u1=e=>e==="*";function yq(e,t){let n=e.split("/"),r=n.length;return n.some(u1)&&(r+=vq),t&&(r+=fq),n.filter(a=>!u1(a)).reduce((a,o)=>a+(mq.test(o)?pq:o===""?gq:xq),r)}function jq(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function wq(e,t,n){let{routesMeta:r}=e,a={},o="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=Tp({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Tp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:ro([o,m.pathname]),pathnameBase:Tq(ro([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=ro([o,m.pathnameBase]))}return i}function Tp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Nq(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,u,m)=>{let{paramName:p,isOptional:g}=u;if(p==="*"){let f=l[m]||"";i=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}const x=l[m];return g&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function Nq(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),iM(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function bq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return iM(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ul(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Sq(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?gc(e):e;return{pathname:n?n.startsWith("/")?n:Cq(n,t):t,search:Pq(r),hash:Aq(a)}}function Cq(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Tx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Eq(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function J0(e,t){let n=Eq(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Q0(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=gc(e):(a=tu({},e),Bt(!a.pathname||!a.pathname.includes("?"),Tx("?","pathname","search",a)),Bt(!a.pathname||!a.pathname.includes("#"),Tx("#","pathname","hash",a)),Bt(!a.search||!a.search.includes("#"),Tx("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=n;else{let m=t.length-1;if(!r&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),m-=1;a.pathname=p.join("/")}l=m>=0?t[m]:"/"}let c=Sq(a,l),d=i&&i!=="/"&&i.endsWith("/"),u=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const ro=e=>e.join("/").replace(/\/\/+/g,"/"),Tq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Aq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Dq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dM=["post","put","patch","delete"];new Set(dM);const kq=["get",...dM];new Set(kq);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},su.apply(this,arguments)}const zf=h.createContext(null),uM=h.createContext(null),Ea=h.createContext(null),Xf=h.createContext(null),Yr=h.createContext({outlet:null,matches:[],isDataRoute:!1}),hM=h.createContext(null);function Mq(e,t){let{relative:n}=t===void 0?{}:t;xc()||Bt(!1);let{basename:r,navigator:a}=h.useContext(Ea),{hash:o,pathname:i,search:l}=Yf(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:ro([r,i])),a.createHref({pathname:c,search:l,hash:o})}function xc(){return h.useContext(Xf)!=null}function Ms(){return xc()||Bt(!1),h.useContext(Xf).location}function mM(e){h.useContext(Ea).static||h.useLayoutEffect(e)}function as(){let{isDataRoute:e}=h.useContext(Yr);return e?Xq():Rq()}function Rq(){xc()||Bt(!1);let e=h.useContext(zf),{basename:t,future:n,navigator:r}=h.useContext(Ea),{matches:a}=h.useContext(Yr),{pathname:o}=Ms(),i=JSON.stringify(J0(a,n.v7_relativeSplatPath)),l=h.useRef(!1);return mM(()=>{l.current=!0}),h.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Q0(d,JSON.parse(i),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ro([t,m.pathname])),(u.replace?r.replace:r.push)(m,u.state,u)},[t,r,i,o,e])}const Fq=h.createContext(null);function Oq(e){let t=h.useContext(Yr).outlet;return t&&h.createElement(Fq.Provider,{value:e},t)}function _u(){let{matches:e}=h.useContext(Yr),t=e[e.length-1];return t?t.params:{}}function Yf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=h.useContext(Ea),{matches:a}=h.useContext(Yr),{pathname:o}=Ms(),i=JSON.stringify(J0(a,r.v7_relativeSplatPath));return h.useMemo(()=>Q0(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function Iq(e,t){return Lq(e,t)}function Lq(e,t,n,r){xc()||Bt(!1);let{navigator:a}=h.useContext(Ea),{matches:o}=h.useContext(Yr),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Ms(),u;if(t){var m;let w=typeof t=="string"?gc(t):t;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||Bt(!1),u=w}else u=d;let p=u.pathname||"/",g=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=dq(e,{pathname:g}),f=Bq(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:ro([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:ro([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return t&&f?h.createElement(Xf.Provider,{value:{location:su({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ka.Pop}},f):f}function $q(){let e=zq(),t=Dq(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:a},n):null,null)}const _q=h.createElement($q,null);class Vq extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?h.createElement(Yr.Provider,{value:this.props.routeContext},h.createElement(hM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uq(e){let{routeContext:t,match:n,children:r}=e,a=h.useContext(zf);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),h.createElement(Yr.Provider,{value:t},r)}function Bq(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let u=i.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);u>=0||Bt(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:p,errors:g}=n,x=m.route.loader&&p[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||x){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,p)=>{let g,x=!1,f=null,w=null;n&&(g=l&&m.route.id?l[m.route.id]:void 0,f=m.route.errorElement||_q,c&&(d<0&&p===0?(x=!0,w=null):d===p&&(x=!0,w=m.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,p+1)),v=()=>{let j;return g?j=f:x?j=w:m.route.Component?j=h.createElement(m.route.Component,null):m.route.element?j=m.route.element:j=u,h.createElement(Uq,{match:m,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:j})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?h.createElement(Vq,{location:n.location,revalidation:n.revalidation,component:f,error:g,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var pM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pM||{}),Pp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pp||{});function Hq(e){let t=h.useContext(zf);return t||Bt(!1),t}function qq(e){let t=h.useContext(uM);return t||Bt(!1),t}function Wq(e){let t=h.useContext(Yr);return t||Bt(!1),t}function fM(e){let t=Wq(),n=t.matches[t.matches.length-1];return n.route.id||Bt(!1),n.route.id}function zq(){var e;let t=h.useContext(hM),n=qq(Pp.UseRouteError),r=fM(Pp.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Xq(){let{router:e}=Hq(pM.UseNavigateStable),t=fM(Pp.UseNavigateStable),n=h.useRef(!1);return mM(()=>{n.current=!0}),h.useCallback(function(a,o){o===void 0&&(o={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,su({fromRouteId:t},o)))},[e,t])}function Ap(e){let{to:t,replace:n,state:r,relative:a}=e;xc()||Bt(!1);let{future:o,static:i}=h.useContext(Ea),{matches:l}=h.useContext(Yr),{pathname:c}=Ms(),d=as(),u=Q0(t,J0(l,o.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return h.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:a}),[d,m,a,n,r]),null}function gM(e){return Oq(e.context)}function dt(e){Bt(!1)}function Yq(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ka.Pop,navigator:o,static:i=!1,future:l}=e;xc()&&Bt(!1);let c=t.replace(/^\/*/,"/"),d=h.useMemo(()=>({basename:c,navigator:o,static:i,future:su({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof r=="string"&&(r=gc(r));let{pathname:u="/",search:m="",hash:p="",state:g=null,key:x="default"}=r,f=h.useMemo(()=>{let w=Ul(u,c);return w==null?null:{location:{pathname:w,search:m,hash:p,state:g,key:x},navigationType:a}},[c,u,m,p,g,x,a]);return f==null?null:h.createElement(Ea.Provider,{value:d},h.createElement(Xf.Provider,{children:n,value:f}))}function Kq(e){let{children:t,location:n}=e;return Iq(tj(t),n)}new Promise(()=>{});function tj(e,t){t===void 0&&(t=[]);let n=[];return h.Children.forEach(e,(r,a)=>{if(!h.isValidElement(r))return;let o=[...t,a];if(r.type===h.Fragment){n.push.apply(n,tj(r.props.children,o));return}r.type!==dt&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=tj(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dp.apply(this,arguments)}function xM(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Gq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jq(e,t){return e.button===0&&(!t||t==="_self")&&!Gq(e)}const Qq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zq=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],eW="6";try{window.__reactRouterVersion=eW}catch{}const tW=h.createContext({isTransitioning:!1}),sW="startTransition",h1=Au[sW];function nW(e){let{basename:t,children:n,future:r,window:a}=e,o=h.useRef();o.current==null&&(o.current=iq({window:a,v5Compat:!0}));let i=o.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},u=h.useCallback(m=>{d&&h1?h1(()=>c(m)):c(m)},[c,d]);return h.useLayoutEffect(()=>i.listen(u),[i,u]),h.createElement(Yq,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const rW=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vM=h.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,p=xM(t,Qq),{basename:g}=h.useContext(Ea),x,f=!1;if(typeof d=="string"&&aW.test(d)&&(x=d,rW))try{let j=new URL(window.location.href),N=d.startsWith("//")?new URL(j.protocol+d):new URL(d),b=Ul(N.pathname,g);N.origin===j.origin&&b!=null?d=b+N.search+N.hash:f=!0}catch{}let w=Mq(d,{relative:a}),y=lW(d,{replace:i,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function v(j){r&&r(j),j.defaultPrevented||y(j)}return h.createElement("a",Dp({},p,{href:x||w,onClick:f||o?r:v,ref:n,target:c}))}),oW=h.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:o="",end:i=!1,style:l,to:c,viewTransition:d,children:u}=t,m=xM(t,Zq),p=Yf(c,{relative:m.relative}),g=Ms(),x=h.useContext(uM),{navigator:f,basename:w}=h.useContext(Ea),y=x!=null&&cW(p)&&d===!0,v=f.encodeLocation?f.encodeLocation(p).pathname:p.pathname,j=g.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(j=j.toLowerCase(),N=N?N.toLowerCase():null,v=v.toLowerCase()),N&&w&&(N=Ul(N,w)||N);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=j===v||!i&&j.startsWith(v)&&j.charAt(b)==="/",S=N!=null&&(N===v||!i&&N.startsWith(v)&&N.charAt(v.length)==="/"),P={isActive:E,isPending:S,isTransitioning:y},A=E?r:void 0,L;typeof o=="function"?L=o(P):L=[o,E?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let R=typeof l=="function"?l(P):l;return h.createElement(vM,Dp({},m,{"aria-current":A,className:L,ref:n,style:R,to:c,viewTransition:d}),typeof u=="function"?u(P):u)});var sj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(sj||(sj={}));var m1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(m1||(m1={}));function iW(e){let t=h.useContext(zf);return t||Bt(!1),t}function lW(e,t){let{target:n,replace:r,state:a,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=as(),d=Ms(),u=Yf(e,{relative:i});return h.useCallback(m=>{if(Jq(m,n)){m.preventDefault();let p=r!==void 0?r:Ep(d)===Ep(u);c(e,{replace:p,state:a,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,u,r,a,n,e,o,i,l])}function cW(e,t){t===void 0&&(t={});let n=h.useContext(tW);n==null&&Bt(!1);let{basename:r}=iW(sj.useViewTransitionState),a=Yf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Ul(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Ul(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Tp(a.pathname,i)!=null||Tp(a.pathname,o)!=null}function yM(e,t){return function(){return e.apply(t,arguments)}}const{toString:dW}=Object.prototype,{getPrototypeOf:Z0}=Object,{iterator:Kf,toStringTag:jM}=Symbol,Gf=(e=>t=>{const n=dW.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),wr=e=>(e=e.toLowerCase(),t=>Gf(t)===e),Jf=e=>t=>typeof t===e,{isArray:vc}=Array,nu=Jf("undefined");function Vu(e){return e!==null&&!nu(e)&&e.constructor!==null&&!nu(e.constructor)&&nn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const wM=wr("ArrayBuffer");function uW(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wM(e.buffer),t}const hW=Jf("string"),nn=Jf("function"),NM=Jf("number"),Uu=e=>e!==null&&typeof e=="object",mW=e=>e===!0||e===!1,Fm=e=>{if(Gf(e)!=="object")return!1;const t=Z0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(jM in e)&&!(Kf in e)},pW=e=>{if(!Uu(e)||Vu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},fW=wr("Date"),gW=wr("File"),xW=wr("Blob"),vW=wr("FileList"),yW=e=>Uu(e)&&nn(e.pipe),jW=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||nn(e.append)&&((t=Gf(e))==="formdata"||t==="object"&&nn(e.toString)&&e.toString()==="[object FormData]"))},wW=wr("URLSearchParams"),[NW,bW,SW,CW]=["ReadableStream","Request","Response","Headers"].map(wr),EW=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),vc(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if(Vu(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(r=0;r<i;r++)l=o[r],t.call(null,e[l],l,e)}}function bM(e,t){if(Vu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const Bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,SM=e=>!nu(e)&&e!==Bo;function nj(){const{caseless:e}=SM(this)&&this||{},t={},n=(r,a)=>{const o=e&&bM(t,a)||a;Fm(t[o])&&Fm(r)?t[o]=nj(t[o],r):Fm(r)?t[o]=nj({},r):vc(r)?t[o]=r.slice():t[o]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Bu(arguments[r],n);return t}const TW=(e,t,n,{allOwnKeys:r}={})=>(Bu(t,(a,o)=>{n&&nn(a)?e[o]=yM(a,n):e[o]=a},{allOwnKeys:r}),e),PW=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),AW=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},DW=(e,t,n,r)=>{let a,o,i;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],(!r||r(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=n!==!1&&Z0(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kW=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},MW=e=>{if(!e)return null;if(vc(e))return e;let t=e.length;if(!NM(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},RW=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Z0(Uint8Array)),FW=(e,t)=>{const r=(e&&e[Kf]).call(e);let a;for(;(a=r.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},OW=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},IW=wr("HTMLFormElement"),LW=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),p1=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),$W=wr("RegExp"),CM=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Bu(n,(a,o)=>{let i;(i=t(a,o,e))!==!1&&(r[o]=i||a)}),Object.defineProperties(e,r)},_W=e=>{CM(e,(t,n)=>{if(nn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(nn(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},VW=(e,t)=>{const n={},r=a=>{a.forEach(o=>{n[o]=!0})};return vc(e)?r(e):r(String(e).split(t)),n},UW=()=>{},BW=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function HW(e){return!!(e&&nn(e.append)&&e[jM]==="FormData"&&e[Kf])}const qW=e=>{const t=new Array(10),n=(r,a)=>{if(Uu(r)){if(t.indexOf(r)>=0)return;if(Vu(r))return r;if(!("toJSON"in r)){t[a]=r;const o=vc(r)?[]:{};return Bu(r,(i,l)=>{const c=n(i,a+1);!nu(c)&&(o[l]=c)}),t[a]=void 0,o}}return r};return n(e,0)},WW=wr("AsyncFunction"),zW=e=>e&&(Uu(e)||nn(e))&&nn(e.then)&&nn(e.catch),EM=((e,t)=>e?setImmediate:t?((n,r)=>(Bo.addEventListener("message",({source:a,data:o})=>{a===Bo&&o===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Bo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",nn(Bo.postMessage)),XW=typeof queueMicrotask<"u"?queueMicrotask.bind(Bo):typeof process<"u"&&process.nextTick||EM,YW=e=>e!=null&&nn(e[Kf]),ue={isArray:vc,isArrayBuffer:wM,isBuffer:Vu,isFormData:jW,isArrayBufferView:uW,isString:hW,isNumber:NM,isBoolean:mW,isObject:Uu,isPlainObject:Fm,isEmptyObject:pW,isReadableStream:NW,isRequest:bW,isResponse:SW,isHeaders:CW,isUndefined:nu,isDate:fW,isFile:gW,isBlob:xW,isRegExp:$W,isFunction:nn,isStream:yW,isURLSearchParams:wW,isTypedArray:RW,isFileList:vW,forEach:Bu,merge:nj,extend:TW,trim:EW,stripBOM:PW,inherits:AW,toFlatObject:DW,kindOf:Gf,kindOfTest:wr,endsWith:kW,toArray:MW,forEachEntry:FW,matchAll:OW,isHTMLForm:IW,hasOwnProperty:p1,hasOwnProp:p1,reduceDescriptors:CM,freezeMethods:_W,toObjectSet:VW,toCamelCase:LW,noop:UW,toFiniteNumber:BW,findKey:bM,global:Bo,isContextDefined:SM,isSpecCompliantForm:HW,toJSONObject:qW,isAsyncFn:WW,isThenable:zW,setImmediate:EM,asap:XW,isIterable:YW};function Ye(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}ue.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const TM=Ye.prototype,PM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{PM[e]={value:e}});Object.defineProperties(Ye,PM);Object.defineProperty(TM,"isAxiosError",{value:!0});Ye.from=(e,t,n,r,a,o)=>{const i=Object.create(TM);return ue.toFlatObject(e,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ye.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const KW=null;function rj(e){return ue.isPlainObject(e)||ue.isArray(e)}function AM(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function f1(e,t,n){return e?e.concat(t).map(function(a,o){return a=AM(a),!n&&o?"["+a+"]":a}).join(n?".":""):t}function GW(e){return ue.isArray(e)&&!e.some(rj)}const JW=ue.toFlatObject(ue,{},null,function(t){return/^is[A-Z]/.test(t)});function Qf(e,t,n){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,w){return!ue.isUndefined(w[f])});const r=n.metaTokens,a=n.visitor||u,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(a))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(ue.isDate(x))return x.toISOString();if(ue.isBoolean(x))return x.toString();if(!c&&ue.isBlob(x))throw new Ye("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(x)||ue.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,f,w){let y=x;if(x&&!w&&typeof x=="object"){if(ue.endsWith(f,"{}"))f=r?f:f.slice(0,-2),x=JSON.stringify(x);else if(ue.isArray(x)&&GW(x)||(ue.isFileList(x)||ue.endsWith(f,"[]"))&&(y=ue.toArray(x)))return f=AM(f),y.forEach(function(j,N){!(ue.isUndefined(j)||j===null)&&t.append(i===!0?f1([f],N,o):i===null?f:f+"[]",d(j))}),!1}return rj(x)?!0:(t.append(f1(w,f,o),d(x)),!1)}const m=[],p=Object.assign(JW,{defaultVisitor:u,convertValue:d,isVisitable:rj});function g(x,f){if(!ue.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+f.join("."));m.push(x),ue.forEach(x,function(y,v){(!(ue.isUndefined(y)||y===null)&&a.call(t,y,ue.isString(v)?v.trim():v,f,p))===!0&&g(y,f?f.concat(v):[v])}),m.pop()}}if(!ue.isObject(e))throw new TypeError("data must be an object");return g(e),t}function g1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function eN(e,t){this._pairs=[],e&&Qf(e,this,t)}const DM=eN.prototype;DM.append=function(t,n){this._pairs.push([t,n])};DM.toString=function(t){const n=t?function(r){return t.call(this,r,g1)}:g1;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function QW(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kM(e,t,n){if(!t)return e;const r=n&&n.encode||QW;ue.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(a?o=a(t,n):o=ue.isURLSearchParams(t)?t.toString():new eN(t,n).toString(r),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class x1{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ue.forEach(this.handlers,function(r){r!==null&&t(r)})}}const MM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZW=typeof URLSearchParams<"u"?URLSearchParams:eN,ez=typeof FormData<"u"?FormData:null,tz=typeof Blob<"u"?Blob:null,sz={isBrowser:!0,classes:{URLSearchParams:ZW,FormData:ez,Blob:tz},protocols:["http","https","file","blob","url","data"]},tN=typeof window<"u"&&typeof document<"u",aj=typeof navigator=="object"&&navigator||void 0,nz=tN&&(!aj||["ReactNative","NativeScript","NS"].indexOf(aj.product)<0),rz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",az=tN&&window.location.href||"http://localhost",oz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:tN,hasStandardBrowserEnv:nz,hasStandardBrowserWebWorkerEnv:rz,navigator:aj,origin:az},Symbol.toStringTag,{value:"Module"})),Cs={...oz,...sz};function iz(e,t){return Qf(e,new Cs.classes.URLSearchParams,{visitor:function(n,r,a,o){return Cs.isNode&&ue.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function lz(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cz(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}function RM(e){function t(n,r,a,o){let i=n[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=n.length;return i=!i&&ue.isArray(a)?a.length:i,c?(ue.hasOwnProp(a,i)?a[i]=[a[i],r]:a[i]=r,!l):((!a[i]||!ue.isObject(a[i]))&&(a[i]=[]),t(n,r,a[i],o)&&ue.isArray(a[i])&&(a[i]=cz(a[i])),!l)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){const n={};return ue.forEachEntry(e,(r,a)=>{t(lz(r),a,n,0)}),n}return null}function dz(e,t,n){if(ue.isString(e))try{return(t||JSON.parse)(e),ue.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Hu={transitional:MM,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,o=ue.isObject(t);if(o&&ue.isHTMLForm(t)&&(t=new FormData(t)),ue.isFormData(t))return a?JSON.stringify(RM(t)):t;if(ue.isArrayBuffer(t)||ue.isBuffer(t)||ue.isStream(t)||ue.isFile(t)||ue.isBlob(t)||ue.isReadableStream(t))return t;if(ue.isArrayBufferView(t))return t.buffer;if(ue.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return iz(t,this.formSerializer).toString();if((l=ue.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Qf(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||a?(n.setContentType("application/json",!1),dz(t)):t}],transformResponse:[function(t){const n=this.transitional||Hu.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ue.isResponse(t)||ue.isReadableStream(t))return t;if(t&&ue.isString(t)&&(r&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?Ye.from(l,Ye.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cs.classes.FormData,Blob:Cs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],e=>{Hu.headers[e]={}});const uz=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hz=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),r=i.substring(a+1).trim(),!(!n||t[n]&&uz[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},v1=Symbol("internals");function Yc(e){return e&&String(e).trim().toLowerCase()}function Om(e){return e===!1||e==null?e:ue.isArray(e)?e.map(Om):String(e)}function mz(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const pz=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Px(e,t,n,r,a){if(ue.isFunction(r))return r.call(this,t,n);if(a&&(t=n),!!ue.isString(t)){if(ue.isString(r))return t.indexOf(r)!==-1;if(ue.isRegExp(r))return r.test(t)}}function fz(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function gz(e,t){const n=ue.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,o,i){return this[r].call(this,t,a,o,i)},configurable:!0})})}class rn{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function o(l,c,d){const u=Yc(c);if(!u)throw new Error("header name must be a non-empty string");const m=ue.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Om(l))}const i=(l,c)=>ue.forEach(l,(d,u)=>o(d,u,c));if(ue.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(ue.isString(t)&&(t=t.trim())&&!pz(t))i(hz(t),n);else if(ue.isObject(t)&&ue.isIterable(t)){let l={},c,d;for(const u of t){if(!ue.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ue.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Yc(t),t){const r=ue.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return mz(a);if(ue.isFunction(n))return n.call(this,a,r);if(ue.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Yc(t),t){const r=ue.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Px(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function o(i){if(i=Yc(i),i){const l=ue.findKey(r,i);l&&(!n||Px(r,r[l],l,n))&&(delete r[l],a=!0)}}return ue.isArray(t)?t.forEach(o):o(t),a}clear(t){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const o=n[r];(!t||Px(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const n=this,r={};return ue.forEach(this,(a,o)=>{const i=ue.findKey(r,o);if(i){n[i]=Om(a),delete n[o];return}const l=t?fz(o):String(o).trim();l!==o&&delete n[o],n[l]=Om(a),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ue.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&ue.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[v1]=this[v1]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=Yc(i);r[l]||(gz(a,i),r[l]=!0)}return ue.isArray(t)?t.forEach(o):o(t),this}}rn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(rn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ue.freezeMethods(rn);function Ax(e,t){const n=this||Hu,r=t||n,a=rn.from(r.headers);let o=r.data;return ue.forEach(e,function(l){o=l.call(n,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function FM(e){return!!(e&&e.__CANCEL__)}function yc(e,t,n){Ye.call(this,e??"canceled",Ye.ERR_CANCELED,t,n),this.name="CanceledError"}ue.inherits(yc,Ye,{__CANCEL__:!0});function OM(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function xz(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vz(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=r[o];i||(i=d),n[a]=c,r[a]=d;let m=o,p=0;for(;m!==a;)p+=n[m++],m=m%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),d-i<t)return;const g=u&&d-u;return g?Math.round(p*1e3/g):void 0}}function yz(e,t){let n=0,r=1e3/t,a,o;const i=(d,u=Date.now())=>{n=u,a=null,o&&(clearTimeout(o),o=null),e(...d)};return[(...d)=>{const u=Date.now(),m=u-n;m>=r?i(d,u):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},r-m)))},()=>a&&i(a)]}const kp=(e,t,n=3)=>{let r=0;const a=vz(50,250);return yz(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-r,d=a(c),u=i<=l;r=i;const m={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},n)},y1=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},j1=e=>(...t)=>ue.asap(()=>e(...t)),jz=Cs.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Cs.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Cs.origin),Cs.navigator&&/(msie|trident)/i.test(Cs.navigator.userAgent)):()=>!0,wz=Cs.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const i=[e+"="+encodeURIComponent(t)];ue.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ue.isString(r)&&i.push("path="+r),ue.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nz(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bz(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function IM(e,t,n){let r=!Nz(t);return e&&(r||n==!1)?bz(e,t):t}const w1=e=>e instanceof rn?{...e}:e;function ci(e,t){t=t||{};const n={};function r(d,u,m,p){return ue.isPlainObject(d)&&ue.isPlainObject(u)?ue.merge.call({caseless:p},d,u):ue.isPlainObject(u)?ue.merge({},u):ue.isArray(u)?u.slice():u}function a(d,u,m,p){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return r(void 0,d,m,p)}else return r(d,u,m,p)}function o(d,u){if(!ue.isUndefined(u))return r(void 0,u)}function i(d,u){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return r(void 0,d)}else return r(void 0,u)}function l(d,u,m){if(m in t)return r(d,u);if(m in e)return r(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,m)=>a(w1(d),w1(u),m,!0)};return ue.forEach(Object.keys({...e,...t}),function(u){const m=c[u]||a,p=m(e[u],t[u],u);ue.isUndefined(p)&&m!==l||(n[u]=p)}),n}const LM=e=>{const t=ci({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=t;t.headers=i=rn.from(i),t.url=kM(IM(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ue.isFormData(n)){if(Cs.hasStandardBrowserEnv||Cs.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Cs.hasStandardBrowserEnv&&(r&&ue.isFunction(r)&&(r=r(t)),r||r!==!1&&jz(t.url))){const d=a&&o&&wz.read(o);d&&i.set(a,d)}return t},Sz=typeof XMLHttpRequest<"u",Cz=Sz&&function(e){return new Promise(function(n,r){const a=LM(e);let o=a.data;const i=rn.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,p,g,x;function f(){g&&g(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function y(){if(!w)return;const j=rn.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),b={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:j,config:e,request:w};OM(function(S){n(S),f()},function(S){r(S),f()},b),w=null}"onloadend"in w?w.onloadend=y:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(y)},w.onabort=function(){w&&(r(new Ye("Request aborted",Ye.ECONNABORTED,e,w)),w=null)},w.onerror=function(){r(new Ye("Network Error",Ye.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const b=a.transitional||MM;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),r(new Ye(N,b.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,e,w)),w=null},o===void 0&&i.setContentType(null),"setRequestHeader"in w&&ue.forEach(i.toJSON(),function(N,b){w.setRequestHeader(b,N)}),ue.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),d&&([p,x]=kp(d,!0),w.addEventListener("progress",p)),c&&w.upload&&([m,g]=kp(c),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=j=>{w&&(r(!j||j.type?new yc(null,e,w):j),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const v=xz(a.url);if(v&&Cs.protocols.indexOf(v)===-1){r(new Ye("Unsupported protocol "+v+":",Ye.ERR_BAD_REQUEST,e));return}w.send(o||null)})},Ez=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,a;const o=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;r.abort(u instanceof Ye?u:new yc(u instanceof Error?u.message:u))}};let i=t&&setTimeout(()=>{i=null,o(new Ye(`timeout ${t} of ms exceeded`,Ye.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>ue.asap(l),c}},Tz=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,a;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},Pz=async function*(e,t){for await(const n of Az(e))yield*Tz(n,t)},Az=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},N1=(e,t,n,r)=>{const a=Pz(e,t);let o=0,i,l=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(n){let p=o+=m;n(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Zf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$M=Zf&&typeof ReadableStream=="function",Dz=Zf&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),_M=(e,...t)=>{try{return!!e(...t)}catch{return!1}},kz=$M&&_M(()=>{let e=!1;const t=new Request(Cs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),b1=64*1024,oj=$M&&_M(()=>ue.isReadableStream(new Response("").body)),Mp={stream:oj&&(e=>e.body)};Zf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Mp[t]&&(Mp[t]=ue.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Ye(`Response type '${t}' is not supported`,Ye.ERR_NOT_SUPPORT,r)})})})(new Response);const Mz=async e=>{if(e==null)return 0;if(ue.isBlob(e))return e.size;if(ue.isSpecCompliantForm(e))return(await new Request(Cs.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(e)||ue.isArrayBuffer(e))return e.byteLength;if(ue.isURLSearchParams(e)&&(e=e+""),ue.isString(e))return(await Dz(e)).byteLength},Rz=async(e,t)=>{const n=ue.toFiniteNumber(e.getContentLength());return n??Mz(t)},Fz=Zf&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:p}=LM(e);d=d?(d+"").toLowerCase():"text";let g=Ez([a,o&&o.toAbortSignal()],i),x;const f=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(c&&kz&&n!=="get"&&n!=="head"&&(w=await Rz(u,r))!==0){let b=new Request(t,{method:"POST",body:r,duplex:"half"}),E;if(ue.isFormData(r)&&(E=b.headers.get("content-type"))&&u.setContentType(E),b.body){const[S,P]=y1(w,kp(j1(c)));r=N1(b.body,b1,S,P)}}ue.isString(m)||(m=m?"include":"omit");const y="credentials"in Request.prototype;x=new Request(t,{...p,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:y?m:void 0});let v=await fetch(x,p);const j=oj&&(d==="stream"||d==="response");if(oj&&(l||j&&f)){const b={};["status","statusText","headers"].forEach(A=>{b[A]=v[A]});const E=ue.toFiniteNumber(v.headers.get("content-length")),[S,P]=l&&y1(E,kp(j1(l),!0))||[];v=new Response(N1(v.body,b1,S,()=>{P&&P(),f&&f()}),b)}d=d||"text";let N=await Mp[ue.findKey(Mp,d)||"text"](v,e);return!j&&f&&f(),await new Promise((b,E)=>{OM(b,E,{data:N,headers:rn.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:x})})}catch(y){throw f&&f(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,e,x),{cause:y.cause||y}):Ye.from(y,y&&y.code,e,x)}}),ij={http:KW,xhr:Cz,fetch:Fz};ue.forEach(ij,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const S1=e=>`- ${e}`,Oz=e=>ue.isFunction(e)||e===null||e===!1,VM={getAdapter:e=>{e=ue.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let o=0;o<t;o++){n=e[o];let i;if(r=n,!Oz(n)&&(r=ij[(i=String(n)).toLowerCase()],r===void 0))throw new Ye(`Unknown adapter '${i}'`);if(r)break;a[i||"#"+o]=r}if(!r){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(S1).join(`
`):" "+S1(o[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:ij};function Dx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new yc(null,e)}function C1(e){return Dx(e),e.headers=rn.from(e.headers),e.data=Ax.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),VM.getAdapter(e.adapter||Hu.adapter)(e).then(function(r){return Dx(e),r.data=Ax.call(e,e.transformResponse,r),r.headers=rn.from(r.headers),r},function(r){return FM(r)||(Dx(e),r&&r.response&&(r.response.data=Ax.call(e,e.transformResponse,r.response),r.response.headers=rn.from(r.response.headers))),Promise.reject(r)})}const UM="1.11.0",eg={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{eg[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const E1={};eg.transitional=function(t,n,r){function a(o,i){return"[Axios v"+UM+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,l)=>{if(t===!1)throw new Ye(a(i," has been removed"+(n?" in "+n:"")),Ye.ERR_DEPRECATED);return n&&!E1[i]&&(E1[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,l):!0}};eg.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Iz(e,t,n){if(typeof e!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],i=t[o];if(i){const l=e[o],c=l===void 0||i(l,o,e);if(c!==!0)throw new Ye("option "+o+" must be "+c,Ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ye("Unknown option "+o,Ye.ERR_BAD_OPTION)}}const Im={assertOptions:Iz,validators:eg},Cr=Im.validators;class Go{constructor(t){this.defaults=t||{},this.interceptors={request:new x1,response:new x1}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ci(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:o}=n;r!==void 0&&Im.assertOptions(r,{silentJSONParsing:Cr.transitional(Cr.boolean),forcedJSONParsing:Cr.transitional(Cr.boolean),clarifyTimeoutError:Cr.transitional(Cr.boolean)},!1),a!=null&&(ue.isFunction(a)?n.paramsSerializer={serialize:a}:Im.assertOptions(a,{encode:Cr.function,serialize:Cr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Im.assertOptions(n,{baseUrl:Cr.spelling("baseURL"),withXsrfToken:Cr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&ue.merge(o.common,o[n.method]);o&&ue.forEach(["delete","get","head","post","put","patch","common"],x=>{delete o[x]}),n.headers=rn.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(c=c&&f.synchronous,l.unshift(f.fulfilled,f.rejected))});const d=[];this.interceptors.response.forEach(function(f){d.push(f.fulfilled,f.rejected)});let u,m=0,p;if(!c){const x=[C1.bind(this),void 0];for(x.unshift(...l),x.push(...d),p=x.length,u=Promise.resolve(n);m<p;)u=u.then(x[m++],x[m++]);return u}p=l.length;let g=n;for(m=0;m<p;){const x=l[m++],f=l[m++];try{g=x(g)}catch(w){f.call(this,w);break}}try{u=C1.call(this,g)}catch(x){return Promise.reject(x)}for(m=0,p=d.length;m<p;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=ci(this.defaults,t);const n=IM(t.baseURL,t.url,t.allowAbsoluteUrls);return kM(n,t.params,t.paramsSerializer)}}ue.forEach(["delete","get","head","options"],function(t){Go.prototype[t]=function(n,r){return this.request(ci(r||{},{method:t,url:n,data:(r||{}).data}))}});ue.forEach(["post","put","patch"],function(t){function n(r){return function(o,i,l){return this.request(ci(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Go.prototype[t]=n(),Go.prototype[t+"Form"]=n(!0)});class sN{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(a=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](a);r._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{r.subscribe(l),o=l}).then(a);return i.cancel=function(){r.unsubscribe(o)},i},t(function(o,i,l){r.reason||(r.reason=new yc(o,i,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new sN(function(a){t=a}),cancel:t}}}function Lz(e){return function(n){return e.apply(null,n)}}function $z(e){return ue.isObject(e)&&e.isAxiosError===!0}const lj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lj).forEach(([e,t])=>{lj[t]=e});function BM(e){const t=new Go(e),n=yM(Go.prototype.request,t);return ue.extend(n,Go.prototype,t,{allOwnKeys:!0}),ue.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return BM(ci(e,a))},n}const Pt=BM(Hu);Pt.Axios=Go;Pt.CanceledError=yc;Pt.CancelToken=sN;Pt.isCancel=FM;Pt.VERSION=UM;Pt.toFormData=Qf;Pt.AxiosError=Ye;Pt.Cancel=Pt.CanceledError;Pt.all=function(t){return Promise.all(t)};Pt.spread=Lz;Pt.isAxiosError=$z;Pt.mergeConfig=ci;Pt.AxiosHeaders=rn;Pt.formToJSON=e=>RM(ue.isHTMLForm(e)?new FormData(e):e);Pt.getAdapter=VM.getAdapter;Pt.HttpStatusCode=lj;Pt.default=Pt;class _z{client;baseURL;constructor(){this.baseURL="http://localhost:8080/api",this.client=Pt.create({baseURL:this.baseURL,timeout:3e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>{const n=localStorage.getItem("integration_platform_token");console.log("API Request - Token present:",!!n),n&&!t.skipAuth?(t.headers.Authorization=`Bearer ${n}`,console.log("API Request - Adding Authorization header")):console.log("API Request - No token or skipAuth=true");const r=this.generateCorrelationId();return t.headers["X-Correlation-ID"]=r,window.__currentCorrelationId=r,console.log(`API Call: ${t.method?.toUpperCase()||"GET"} ${t.url||""}`),console.log("Request headers:",t.headers),t},t=>Promise.reject(this.handleError(t))),this.client.interceptors.response.use(t=>(console.log(`API Response: ${t.config.method?.toUpperCase()} ${t.config.url} - ${t.status}`),t),async t=>{const n=t.config;if(t.response?.status===401&&!n.skipAuth){const r=localStorage.getItem("integration_platform_refresh_token");if(r&&!n.url?.includes("/refresh"))try{const o=(await this.client.post("/auth/refresh",{refreshToken:r},{skipAuth:!0})).data.token;return localStorage.setItem("integration_platform_token",o),n.headers&&(n.headers.Authorization=`Bearer ${o}`),this.client(n)}catch(a){console.error("Token refresh failed:",a),localStorage.removeItem("integration_platform_token"),localStorage.removeItem("integration_platform_refresh_token"),localStorage.removeItem("integration_platform_user"),window.location.href="/login"}else localStorage.removeItem("integration_platform_token"),localStorage.removeItem("integration_platform_refresh_token"),localStorage.removeItem("integration_platform_user"),window.location.href="/login"}return Promise.reject(this.handleError(t))})}generateCorrelationId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}handleError(t){return console.error(`API Error: ${t.config?.method?.toUpperCase()||"UNKNOWN"} ${t.config?.url||"unknown"}`,t),t.response?.data?{message:t.response.data.message||"An error occurred",code:t.response.data.code||t.response.status?.toString(),details:t.response.data.details,timestamp:t.response.data.timestamp||new Date().toISOString()}:t.request?{message:"No response from server. Please check your connection.",code:"NETWORK_ERROR",timestamp:new Date().toISOString()}:{message:t.message||"An unexpected error occurred",code:"UNKNOWN_ERROR",timestamp:new Date().toISOString()}}async get(t,n){return(await this.client.get(t,n)).data}async post(t,n,r){return(await this.client.post(t,n,r)).data}async put(t,n,r){return(await this.client.put(t,n,r)).data}async patch(t,n,r){return(await this.client.patch(t,n,r)).data}async delete(t,n){return(await this.client.delete(t,n)).data}async upload(t,n,r){return(await this.client.post(t,n,{...r,headers:{...r?.headers,"Content-Type":"multipart/form-data"}})).data}async download(t,n,r){const a=await this.client.get(t,{...r,responseType:"blob"}),o=new Blob([a.data]),i=document.createElement("a");i.href=window.URL.createObjectURL(o),i.download=n,i.click(),window.URL.revokeObjectURL(i.href)}}const ut=new _z;class Vz{listeners=[];pendingLogs=[];isProcessing=!1;retryCount=0;maxRetries=3;baseDelay=1e3;batchTimer=null;batchSize=10;batchDelay=500;constructor(){window.addEventListener("error",t=>{this.logError("System Error",{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,stack:t.error?.stack})}),window.addEventListener("unhandledrejection",t=>{this.logError("Unhandled Promise Rejection",{reason:t.reason,stack:t.reason?.stack})}),this.processPendingLogs()}async logError(t,n){const r={id:`sys-${Date.now()}`,timestamp:new Date().toISOString(),level:"error",message:t,details:n,source:"system",sourceId:"error-logger",sourceName:"System Error Logger"};this.queueLog(r),this.notifyListeners(r)}async logInfo(t,n,r="system",a,o){const i={id:`log-${Date.now()}`,timestamp:new Date().toISOString(),level:"info",message:t,details:n,source:r,sourceId:a||"general",sourceName:o||"System"};this.queueLog(i),this.notifyListeners(i)}async logWarning(t,n,r="system",a,o){const i={id:`warn-${Date.now()}`,timestamp:new Date().toISOString(),level:"warn",message:t,details:n,source:r,sourceId:a||"general",sourceName:o||"System"};this.queueLog(i),this.notifyListeners(i)}queueLog(t){this.pendingLogs.push(t),this.batchTimer&&clearTimeout(this.batchTimer),this.batchTimer=setTimeout(()=>{this.processPendingLogs()},this.batchDelay)}async processPendingLogs(){if(!(this.isProcessing||this.pendingLogs.length===0)){this.isProcessing=!0;try{const t=this.pendingLogs.splice(0,this.batchSize);t.length>0&&(await this.sendBatchToBackend(t),this.retryCount=0)}catch(t){if(console.error("Failed to process logs:",t),this.retryCount<this.maxRetries){this.retryCount++;const n=this.baseDelay*Math.pow(2,this.retryCount-1);setTimeout(()=>this.processPendingLogs(),n)}else console.error("Max retries reached, discarding log batch"),this.retryCount=0}finally{this.isProcessing=!1,this.pendingLogs.length>0&&setTimeout(()=>this.processPendingLogs(),this.batchDelay)}}}async sendBatchToBackend(t){try{const r={logs:t.map(a=>({level:a.level.toUpperCase(),category:a.source==="system"?"SYSTEM":"APPLICATION",message:a.message,details:a.details||{},error:a.details?.error||null,stackTrace:a.details?.stack||null,userAgent:navigator.userAgent,url:window.location.href,timestamp:a.timestamp,userId:localStorage.getItem("userId")||null,sessionId:localStorage.getItem("sessionId")||null,correlationId:a.id}))};await ut.post("/system/logs/batch",r)}catch(n){throw n}}async getAllLogs(){return console.warn("getAllLogs called directly on systemErrorLogger - use useSystemLogs hook instead"),[]}async getFilteredLogs(t){return console.warn("getFilteredLogs called directly on systemErrorLogger - use useSystemLogs hook instead"),[]}onLogUpdate(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}notifyListeners(t){this.listeners.forEach(n=>n(t))}}const HM=new Vz,qM="http://localhost:8080/api";class kx extends Error{constructor(t,n,r){super(t),this.status=n,this.response=r,this.name="ApiError"}}function T1(){return localStorage.getItem("integration_platform_token")}function Uz(){return localStorage.getItem("integration_platform_refresh_token")}function Bz(){localStorage.removeItem("integration_platform_token"),localStorage.removeItem("integration_platform_refresh_token"),localStorage.removeItem("integration_platform_user")}async function Hz(){const e=Uz();if(!e)return!1;try{const t=await fetch(`${qM}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(t.ok){const n=await t.json();return localStorage.setItem("integration_platform_token",n.token),!0}}catch(t){console.warn("Token refresh failed:",t)}return Bz(),!1}async function Kc(e,t={}){const n=`${qM}${e}`,r=T1(),a={};t.body instanceof FormData||(a["Content-Type"]="application/json"),r&&!e.includes("/auth/login")&&!e.includes("/auth/register")&&!e.includes("/auth/refresh")&&(a.Authorization=`Bearer ${r}`);const o={...a,...t.headers};o["Content-Type"]==="multipart/form-data"&&delete o["Content-Type"];const i={headers:o,...t};try{console.log("[API] Making request:",{method:i.method||"GET",url:n,body:i.body instanceof FormData?"FormData":i.body?JSON.parse(i.body):void 0});let l=await fetch(n,i);if(l.status===401&&!e.includes("/auth/login")&&!e.includes("/auth/register")&&!e.includes("/auth/refresh"))if(await Hz()){const m=T1();m&&(i.headers={...i.headers,Authorization:`Bearer ${m}`},l=await fetch(n,i))}else throw window.location.href="/login",new kx("Authentication failed",401);let c;const d=l.headers.get("content-type");if(d&&d.includes("application/json")?c=await l.json():c=await l.text(),!l.ok){const u={status:l.status,endpoint:e,data:c};console.log("[API] Error response from backend:",u),e.includes("/logs/system")||e.includes("/system-logs")||e.includes("/system/logs")||HM.logError(`API Error: ${e} - ${l.status}`,{...u,method:t.method||"GET",url:n,timestamp:new Date().toISOString()});let p=`HTTP ${l.status}: ${l.statusText}`;throw c&&(typeof c=="string"&&c.trim()?p=c:c.message?p=c.message:c.error?p=c.error:c.detail?p=c.detail:c.title&&(p=c.title)),l.status===400&&!c?p="Bad Request - The server rejected the request. Please check your input data.":l.status===409&&(p=c?.message||"Conflict - The requested operation conflicts with existing data."),new kx(p,l.status,c)}return typeof c=="string"&&c.includes("<!DOCTYPE html>")?(console.warn(`API endpoint ${e} returned HTML instead of JSON`),{success:!1,error:"API endpoint returned HTML instead of JSON",data:null}):{success:!0,data:c.data||c,message:c.message}}catch(l){if(l instanceof kx)throw l;return{success:!1,error:l instanceof Error?l.message:"Unknown error occurred"}}}const G={get:(e,t)=>Kc(e,{method:"GET",...t}),post:(e,t,n)=>Kc(e,{method:"POST",body:t instanceof FormData?t:JSON.stringify(t),...n}),put:(e,t,n)=>Kc(e,{method:"PUT",body:JSON.stringify(t),...n}),patch:(e,t,n)=>Kc(e,{method:"PATCH",body:JSON.stringify(t),...n}),delete:(e,t)=>Kc(e,{method:"DELETE",...t})};class qz{TOKEN_KEY="integration_platform_token";REFRESH_TOKEN_KEY="integration_platform_refresh_token";USER_KEY="integration_platform_user";async login(t){const n=await G.post("/auth/login",t);return n.success&&n.data&&this.setAuthData(n.data),n}async register(t){return G.post("/auth/register",t)}async logout(){try{const t=this.getRefreshToken();t&&await G.post("/auth/logout",{refreshToken:t})}catch(t){console.warn("Logout API call failed:",t)}finally{this.clearAuthData()}return{success:!0}}async refreshToken(){const t=this.getRefreshToken();if(!t)return{success:!1,error:"No refresh token available"};const n=await G.post("/auth/refresh",{refreshToken:t});return n.success&&n.data&&localStorage.setItem(this.TOKEN_KEY,n.data.token),n}async getProfile(){return G.get("/auth/profile")}async updateProfile(t){return G.put("/auth/profile",t)}async changePassword(t,n){return G.post("/auth/change-password",{currentPassword:t,newPassword:n})}async requestPasswordReset(t){return G.post("/auth/forgot-password",{email:t})}async resetPassword(t,n){return G.post("/auth/reset-password",{token:t,newPassword:n})}async verifyEmail(t){return G.post("/auth/verify-email",{token:t})}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{return JSON.parse(atob(t.split(".")[1])).exp>Date.now()/1e3}catch{return!1}}getCurrentUser(){try{const t=localStorage.getItem(this.USER_KEY);return t?JSON.parse(t):null}catch{return null}}getToken(){return localStorage.getItem(this.TOKEN_KEY)}getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}setToken(t){localStorage.setItem(this.TOKEN_KEY,t)}setAuthData(t){localStorage.setItem(this.TOKEN_KEY,t.token),localStorage.setItem(this.REFRESH_TOKEN_KEY,t.refreshToken),localStorage.setItem(this.USER_KEY,JSON.stringify(t.user))}clearAuthData(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.USER_KEY)}hasPermission(t){const n=this.getCurrentUser();if(!n?.permissions)return!1;let r=[];if(typeof n.permissions=="string")try{const a=JSON.parse(n.permissions);r=Array.isArray(a)?a:Object.keys(a)}catch{r=[]}else Array.isArray(n.permissions)&&(r=n.permissions);return r.includes(t)}hasRole(t){return this.getCurrentUser()?.role===t}isAdmin(){return this.hasRole("administrator")}}const pn=new qz,WM=h.createContext(void 0),Kr=()=>{const e=h.useContext(WM);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Wz=({children:e})=>{const[t,n]=h.useState(null),[r,a]=h.useState(!0),[o,i]=h.useState([]),[l,c]=h.useState(null),d=as(),{toast:u}=_e();h.useEffect(()=>{(async()=>{try{if(window.location.pathname==="/login"){console.log("AuthContext: On login page, skipping auth check"),a(!1);return}const b=pn.getToken();if(!b){console.log("AuthContext: No token found, skipping initialization"),a(!1);return}try{const S=JSON.parse(atob(b.split(".")[1])).exp*1e3;if(S<Date.now()){console.log("AuthContext: Token expired, clearing auth data"),localStorage.removeItem("integration_platform_token"),localStorage.removeItem("integration_platform_refresh_token"),localStorage.removeItem("integration_platform_user"),a(!1);return}c(S)}catch(E){console.warn("Failed to parse token:",E),a(!1);return}try{const E=await pn.getProfile();E.success&&E.data?n(E.data):console.warn("AuthContext: Profile fetch failed")}catch(E){console.warn("AuthContext: Profile fetch error:",E)}}catch(b){console.error("Auth initialization error:",b)}finally{a(!1)}})()},[]),h.useEffect(()=>{if(!l)return;const N=l-Date.now();if(N<=0){p();return}const b=setTimeout(()=>{p()},N);return()=>clearTimeout(b)},[l]);const m=async(N,b,E)=>{try{a(!0);const S=await pn.login({username:N,password:b});if(S.success&&S.data){n(S.data.user);const P=Date.now()+S.data.expiresIn*1e3;return c(P),u({title:"Success",description:"Login successful"}),setTimeout(()=>{d(E||"/dashboard")},100),!0}else return u({title:"Error",description:S.error||"Login failed",variant:"destructive"}),!1}catch(S){return console.error("Login error:",S),u({title:"Error",description:"Login failed. Please try again.",variant:"destructive"}),!1}finally{a(!1)}},p=async()=>{try{n(null),c(null),pn.logout().catch(N=>{console.warn("Logout API call failed:",N)}),d("/login"),u({title:"Success",description:"Logged out successfully"})}catch(N){console.error("Logout error:",N),d("/login")}},g=()=>!(!pn.isAuthenticated()||l&&Date.now()>=l||!t),x=async()=>{try{if(!g())return await p(),!1;const N=await pn.getProfile();if(N.success&&N.data){n(N.data);const b=pn.getToken();if(b)try{const E=JSON.parse(atob(b.split(".")[1]));c(E.exp*1e3)}catch(E){console.warn("Failed to parse token expiry:",E)}return!0}else return await p(),!1}catch(N){return console.error("Session check error:",N),await p(),!1}},f=()=>o,w=async N=>{try{const b=await pn.register({...N,password:"temp123"});b.success&&b.data?(i(E=>[...E,b.data]),u({title:"Success",description:"User created successfully"})):u({title:"Error",description:b.error||"Failed to create user",variant:"destructive"})}catch(b){console.error("Create user error:",b),u({title:"Error",description:"Failed to create user",variant:"destructive"})}},y=async(N,b)=>{try{i(E=>E.map(S=>S.id===N?{...S,...b}:S)),u({title:"Success",description:"User updated successfully"})}catch(E){console.error("Update user error:",E),u({title:"Error",description:"Failed to update user",variant:"destructive"})}},v=async N=>{try{i(b=>b.filter(E=>E.id!==N)),u({title:"Success",description:"User deleted successfully"})}catch(b){console.error("Delete user error:",b),u({title:"Error",description:"Failed to delete user",variant:"destructive"})}},j={user:t,login:m,logout:p,isAuthenticated:!!t&&pn.isAuthenticated(),isLoading:r,tokenExpiry:l,checkSession:x,isSessionValid:g,getAllUsers:f,createUser:w,updateUser:y,deleteUser:v};return s.jsx(WM.Provider,{value:j,children:e})},zM=h.createContext(void 0);function zz({children:e}){const{toast:t}=_e(),{isAuthenticated:n}=Kr(),[r,a]=h.useState(null),[o,i]=h.useState([]),[l,c]=h.useState(null),[d,u]=h.useState(null),[m,p]=h.useState(!0),g=async()=>{try{const L=await ut.get("/tenants/current");a(L),localStorage.setItem("currentTenantId",L.id)}catch(L){console.error("Failed to load current tenant:",L)}},x=async()=>{try{const L=await ut.get("/tenants/my-tenants");i(L)}catch(L){console.error("Failed to load user tenants:",L)}},f=async()=>{if(r)try{const L=await ut.get(`/tenants/${r.id}/subscription`);c(L)}catch(L){console.error("Failed to load subscription:",L)}},w=async()=>{if(r)try{const L=await ut.get(`/tenants/${r.id}/usage`);u(L)}catch(L){console.error("Failed to load usage:",L)}},y=async L=>{try{await ut.post(`/tenants/switch/${L}`),await g(),await f(),await w(),t({title:"Success",description:"Switched tenant successfully"}),window.location.reload()}catch(R){throw t({title:"Error",description:"Failed to switch tenant",variant:"destructive"}),R}},v=async()=>{await x()},j=async()=>{await f()},N=async()=>{await w()},b=L=>l?.features?.includes(L)??!1,E=L=>{if(!d||!d.quotas)return!1;const R=d.quotas[L];return!R||R===-1?!1:P(L)>R},S=L=>{if(!d||!d.quotas)return 0;const R=d.quotas[L];if(!R||R===-1)return 0;const I=P(L);return Math.min(I/R*100,100)},P=L=>{if(!d)return 0;switch(L){case"executions_per_month":return d.executions;case"messages_per_month":return d.messages;case"api_calls_per_month":return d.apiCalls;case"storage_gb":return d.storageGb;case"users":return d.users;case"flows":return d.flows;default:return 0}};h.useEffect(()=>{n&&(async()=>(p(!0),localStorage.getItem("currentTenantId"),await Promise.all([g(),x()]),p(!1)))()},[n]),h.useEffect(()=>{r&&(f(),w())},[r]);const A={currentTenant:r,userTenants:o,subscription:l,usage:d,loading:m,switchTenant:y,refreshTenants:v,refreshSubscription:j,refreshUsage:N,hasFeature:b,isOverQuota:E,getQuotaPercentage:S};return s.jsx(zM.Provider,{value:A,children:e})}function Xz(){const e=h.useContext(zM);if(e===void 0)throw new Error("useTenant must be used within a TenantProvider");return e}const Yz=()=>{const e=Ms(),t=Kr?.(),n=t?.isLoading??!1,r=t?.isAuthenticated??!!t?.user??pn.isAuthenticated();return n?s.jsx("div",{className:"p-6",children:"Checking session..."}):r?s.jsx(gM,{}):s.jsx(Ap,{to:"/login",replace:!0,state:{from:e}})},ru=Si("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 transition-colors",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-blue-600 text-blue-600 bg-transparent hover:bg-blue-600 hover:text-white transition-colors",secondary:"bg-blue-100 text-blue-900 hover:bg-blue-200 transition-colors",ghost:"text-blue-600 hover:bg-blue-100 hover:text-blue-700 transition-colors",link:"text-blue-600 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=h.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},o)=>{const i=r?Sn:"button";return s.jsx(i,{className:ce(ru({variant:t,size:n,className:e})),ref:o,...a})});z.displayName="Button";const Kz=Si("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-100/80 dark:bg-green-900/30 dark:text-green-400",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-100/80 dark:bg-yellow-900/30 dark:text-yellow-400",info:"border-transparent bg-blue-100 text-blue-800 hover:bg-blue-100/80 dark:bg-blue-900/30 dark:text-blue-400"}},defaultVariants:{variant:"default"}});function fe({className:e,variant:t,...n}){return s.jsx("div",{className:ce(Kz({variant:t}),e),...n})}var Gz=h.createContext(void 0);function jc(e){const t=h.useContext(Gz);return e||t||"ltr"}var Mx=0;function nN(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??P1()),document.body.insertAdjacentElement("beforeend",e[1]??P1()),Mx++,()=>{Mx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Mx--}},[])}function P1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rx="focusScope.autoFocusOnMount",Fx="focusScope.autoFocusOnUnmount",A1={bubbles:!1,cancelable:!0},Jz="FocusScope",tg=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=_t(a),u=_t(o),m=h.useRef(null),p=Xe(t,f=>c(f)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let f=function(j){if(g.paused||!l)return;const N=j.target;l.contains(N)?m.current=N:$a(m.current,{select:!0})},w=function(j){if(g.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||$a(m.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const b of j)b.removedNodes.length>0&&$a(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,g.paused]),h.useEffect(()=>{if(l){k1.add(g);const f=document.activeElement;if(!l.contains(f)){const y=new CustomEvent(Rx,A1);l.addEventListener(Rx,d),l.dispatchEvent(y),y.defaultPrevented||(Qz(n9(XM(l)),{select:!0}),document.activeElement===f&&$a(l))}return()=>{l.removeEventListener(Rx,d),setTimeout(()=>{const y=new CustomEvent(Fx,A1);l.addEventListener(Fx,u),l.dispatchEvent(y),y.defaultPrevented||$a(f??document.body,{select:!0}),l.removeEventListener(Fx,u),k1.remove(g)},0)}}},[l,d,u,g]);const x=h.useCallback(f=>{if(!n&&!r||g.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,y=document.activeElement;if(w&&y){const v=f.currentTarget,[j,N]=Zz(v);j&&N?!f.shiftKey&&y===N?(f.preventDefault(),n&&$a(j,{select:!0})):f.shiftKey&&y===j&&(f.preventDefault(),n&&$a(N,{select:!0})):y===v&&f.preventDefault()}},[n,r,g.paused]);return s.jsx(Fe.div,{tabIndex:-1,...i,ref:p,onKeyDown:x})});tg.displayName=Jz;function Qz(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if($a(r,{select:t}),document.activeElement!==n)return}function Zz(e){const t=XM(e),n=D1(t,e),r=D1(t.reverse(),e);return[n,r]}function XM(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function D1(e,t){for(const n of e)if(!e9(n,{upTo:t}))return n}function e9(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function t9(e){return e instanceof HTMLInputElement&&"select"in e}function $a(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&t9(e)&&t&&e.select()}}var k1=s9();function s9(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=M1(e,t),e.unshift(t)},remove(t){e=M1(e,t),e[0]?.resume()}}}function M1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function n9(e){return e.filter(t=>t.tagName!=="A")}function r9(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:p,children:g,...x}=m,f=p?.[e][c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})}function u(m,p){const g=p?.[e][c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,a9(a,...t)]}function a9(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Ox="rovingFocusGroup.onEntryFocus",o9={bubbles:!1,cancelable:!0},sg="RovingFocusGroup",[cj,YM,i9]=Ff(sg),[l9,wc]=r9(sg,[i9]),[c9,d9]=l9(sg),KM=h.forwardRef((e,t)=>s.jsx(cj.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(cj.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(u9,{...e,ref:t})})}));KM.displayName=sg;var u9=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,p=h.useRef(null),g=Xe(t,p),x=jc(o),[f=null,w]=qn({prop:i,defaultProp:l,onChange:c}),[y,v]=h.useState(!1),j=_t(d),N=YM(n),b=h.useRef(!1),[E,S]=h.useState(0);return h.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(Ox,j),()=>P.removeEventListener(Ox,j)},[j]),s.jsx(c9,{scope:n,orientation:r,dir:x,loop:a,currentTabStopId:f,onItemFocus:h.useCallback(P=>w(P),[w]),onItemShiftTab:h.useCallback(()=>v(!0),[]),onFocusableItemAdd:h.useCallback(()=>S(P=>P+1),[]),onFocusableItemRemove:h.useCallback(()=>S(P=>P-1),[]),children:s.jsx(Fe.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...m,ref:g,style:{outline:"none",...e.style},onMouseDown:Ee(e.onMouseDown,()=>{b.current=!0}),onFocus:Ee(e.onFocus,P=>{const A=!b.current;if(P.target===P.currentTarget&&A&&!y){const L=new CustomEvent(Ox,o9);if(P.currentTarget.dispatchEvent(L),!L.defaultPrevented){const R=N().filter(T=>T.focusable),I=R.find(T=>T.active),V=R.find(T=>T.id===f),k=[I,V,...R].filter(Boolean).map(T=>T.ref.current);QM(k,u)}}b.current=!1}),onBlur:Ee(e.onBlur,()=>v(!1))})})}),GM="RovingFocusGroupItem",JM=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:o,...i}=e,l=_n(),c=o||l,d=d9(GM,n),u=d.currentTabStopId===c,m=YM(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=d;return h.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),s.jsx(cj.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:s.jsx(Fe.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:Ee(e.onMouseDown,x=>{r?d.onItemFocus(c):x.preventDefault()}),onFocus:Ee(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Ee(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const f=p9(x,d.orientation,d.dir);if(f!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let y=m().filter(v=>v.focusable).map(v=>v.ref.current);if(f==="last")y.reverse();else if(f==="prev"||f==="next"){f==="prev"&&y.reverse();const v=y.indexOf(x.currentTarget);y=d.loop?f9(y,v+1):y.slice(v+1)}setTimeout(()=>QM(y))}})})})});JM.displayName=GM;var h9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function m9(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function p9(e,t,n){const r=m9(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return h9[r]}function QM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function f9(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var rN=KM,aN=JM,g9=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Oi=new WeakMap,Hh=new WeakMap,qh={},Ix=0,ZM=function(e){return e&&(e.host||ZM(e.parentNode))},x9=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ZM(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},v9=function(e,t,n,r){var a=x9(t,Array.isArray(e)?e:[e]);qh[n]||(qh[n]=new WeakMap);var o=qh[n],i=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))u(p);else try{var g=p.getAttribute(r),x=g!==null&&g!=="false",f=(Oi.get(p)||0)+1,w=(o.get(p)||0)+1;Oi.set(p,f),o.set(p,w),i.push(p),f===1&&x&&Hh.set(p,!0),w===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return u(t),l.clear(),Ix++,function(){i.forEach(function(m){var p=Oi.get(m)-1,g=o.get(m)-1;Oi.set(m,p),o.set(m,g),p||(Hh.has(m)||m.removeAttribute(r),Hh.delete(m)),g||m.removeAttribute(n)}),Ix--,Ix||(Oi=new WeakMap,Oi=new WeakMap,Hh=new WeakMap,qh={})}},qu=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=g9(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),v9(r,a,n,"aria-hidden")):function(){return null}},Kt=function(){return Kt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Kt.apply(this,arguments)};function ng(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function oN(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Sl="right-scroll-bar-position",Cl="width-before-scroll-bar",y9="with-scroll-bars-hidden",j9="--removed-body-scroll-bar-size";function Lx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function w9(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var N9=typeof window<"u"?h.useLayoutEffect:h.useEffect,R1=new WeakMap;function iN(e,t){var n=w9(null,function(r){return e.forEach(function(a){return Lx(a,r)})});return N9(function(){var r=R1.get(n);if(r){var a=new Set(r),o=new Set(e),i=n.current;a.forEach(function(l){o.has(l)||Lx(l,null)}),o.forEach(function(l){a.has(l)||Lx(l,i)})}R1.set(n,e)},[e]),n}function b9(e){return e}function S9(e,t){t===void 0&&(t=b9);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),n}}}};return a}function lN(e){e===void 0&&(e={});var t=S9(null);return t.options=Kt({async:!0,ssr:!1},e),t}var eR=function(e){var t=e.sideCar,n=ng(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,Kt({},n))};eR.isSideCarExport=!0;function cN(e,t){return e.useMedium(t),eR}var tR=lN(),$x=function(){},rg=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:$x,onWheelCapture:$x,onTouchMoveCapture:$x}),a=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,p=e.sideCar,g=e.noIsolation,x=e.inert,f=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,v=e.gapMode,j=ng(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=p,b=iN([n,t]),E=Kt(Kt({},j),a);return h.createElement(h.Fragment,null,u&&h.createElement(N,{sideCar:tR,removeScrollBar:d,shards:m,noIsolation:g,inert:x,setCallbacks:o,allowPinchZoom:!!f,lockRef:n,gapMode:v}),i?h.cloneElement(h.Children.only(l),Kt(Kt({},E),{ref:b})):h.createElement(y,Kt({},E,{className:c,ref:b}),l))});rg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rg.classNames={fullWidth:Cl,zeroRight:Sl};var C9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function E9(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=C9();return t&&e.setAttribute("nonce",t),e}function T9(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function P9(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var A9=function(){var e=0,t=null;return{add:function(n){e==0&&(t=E9())&&(T9(t,n),P9(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},D9=function(){var e=A9();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ag=function(){var e=D9(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},k9={left:0,top:0,right:0,gap:0},_x=function(e){return parseInt(e||"",10)||0},M9=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[_x(n),_x(r),_x(a)]},R9=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return k9;var t=M9(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},F9=ag(),El="data-scroll-locked",O9=function(e,t,n,r){var a=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(y9,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(El,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sl,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Cl,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Sl," .").concat(Sl,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cl," .").concat(Cl,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(El,`] {
    `).concat(j9,": ").concat(l,`px;
  }
`)},F1=function(){var e=parseInt(document.body.getAttribute(El)||"0",10);return isFinite(e)?e:0},I9=function(){h.useEffect(function(){return document.body.setAttribute(El,(F1()+1).toString()),function(){var e=F1()-1;e<=0?document.body.removeAttribute(El):document.body.setAttribute(El,e.toString())}},[])},dN=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;I9();var o=h.useMemo(function(){return R9(a)},[a]);return h.createElement(F9,{styles:O9(o,!t,a,n?"":"!important")})},dj=!1;if(typeof window<"u")try{var Wh=Object.defineProperty({},"passive",{get:function(){return dj=!0,!0}});window.addEventListener("test",Wh,Wh),window.removeEventListener("test",Wh,Wh)}catch{dj=!1}var Ii=dj?{passive:!1}:!1,L9=function(e){return e.tagName==="TEXTAREA"},sR=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!L9(e)&&n[t]==="visible")},$9=function(e){return sR(e,"overflowY")},_9=function(e){return sR(e,"overflowX")},O1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=nR(e,r);if(a){var o=rR(e,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},V9=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},U9=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nR=function(e,t){return e==="v"?$9(t):_9(t)},rR=function(e,t){return e==="v"?V9(t):U9(t)},B9=function(e,t){return e==="h"&&t==="rtl"?-1:1},H9=function(e,t,n,r,a){var o=B9(e,window.getComputedStyle(t).direction),i=o*r,l=n.target,c=t.contains(l),d=!1,u=i>0,m=0,p=0;do{var g=rR(e,l),x=g[0],f=g[1],w=g[2],y=f-w-o*x;(x||y)&&nR(e,l)&&(m+=y,p+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(p)<1||!a))&&(d=!0),d},zh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},I1=function(e){return[e.deltaX,e.deltaY]},L1=function(e){return e&&"current"in e?e.current:e},q9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},W9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},z9=0,Li=[];function X9(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),a=h.useState(z9++)[0],o=h.useState(ag)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=oN([e.lockRef.current],(e.shards||[]).map(L1),!0).filter(Boolean);return f.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(f,w){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!i.current.allowPinchZoom;var y=zh(f),v=n.current,j="deltaX"in f?f.deltaX:v[0]-y[0],N="deltaY"in f?f.deltaY:v[1]-y[1],b,E=f.target,S=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in f&&S==="h"&&E.type==="range")return!1;var P=O1(S,E);if(!P)return!0;if(P?b=S:(b=S==="v"?"h":"v",P=O1(S,E)),!P)return!1;if(!r.current&&"changedTouches"in f&&(j||N)&&(r.current=b),!b)return!0;var A=r.current||b;return H9(A,w,f,A==="h"?j:N,!0)},[]),c=h.useCallback(function(f){var w=f;if(!(!Li.length||Li[Li.length-1]!==o)){var y="deltaY"in w?I1(w):zh(w),v=t.current.filter(function(b){return b.name===w.type&&(b.target===w.target||w.target===b.shadowParent)&&q9(b.delta,y)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var j=(i.current.shards||[]).map(L1).filter(Boolean).filter(function(b){return b.contains(w.target)}),N=j.length>0?l(w,j[0]):!i.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(f,w,y,v){var j={name:f,delta:w,target:y,should:v,shadowParent:Y9(y)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),u=h.useCallback(function(f){n.current=zh(f),r.current=void 0},[]),m=h.useCallback(function(f){d(f.type,I1(f),f.target,l(f,e.lockRef.current))},[]),p=h.useCallback(function(f){d(f.type,zh(f),f.target,l(f,e.lockRef.current))},[]);h.useEffect(function(){return Li.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Ii),document.addEventListener("touchmove",c,Ii),document.addEventListener("touchstart",u,Ii),function(){Li=Li.filter(function(f){return f!==o}),document.removeEventListener("wheel",c,Ii),document.removeEventListener("touchmove",c,Ii),document.removeEventListener("touchstart",u,Ii)}},[]);var g=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(o,{styles:W9(a)}):null,g?h.createElement(dN,{gapMode:e.gapMode}):null)}function Y9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const K9=cN(tR,X9);var og=h.forwardRef(function(e,t){return h.createElement(rg,Kt({},e,{ref:t,sideCar:K9}))});og.classNames=rg.classNames;var uj=["Enter"," "],G9=["ArrowDown","PageUp","Home"],aR=["ArrowUp","PageDown","End"],J9=[...G9,...aR],Q9={ltr:[...uj,"ArrowRight"],rtl:[...uj,"ArrowLeft"]},Z9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wu="Menu",[au,e7,t7]=Ff(Wu),[Ei,oR]=ln(Wu,[t7,fc,wc]),ig=fc(),iR=wc(),[s7,Ti]=Ei(Wu),[n7,zu]=Ei(Wu),lR=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:o,modal:i=!0}=e,l=ig(t),[c,d]=h.useState(null),u=h.useRef(!1),m=_t(o),p=jc(a);return h.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(z0,{...l,children:s.jsx(s7,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:d,children:s.jsx(n7,{scope:t,onClose:h.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:p,modal:i,children:r})})})};lR.displayName=Wu;var r7="MenuAnchor",uN=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=ig(n);return s.jsx(X0,{...a,...r,ref:t})});uN.displayName=r7;var hN="MenuPortal",[a7,cR]=Ei(hN,{forceMount:void 0}),dR=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,o=Ti(hN,t);return s.jsx(a7,{scope:t,forceMount:n,children:s.jsx(ps,{present:n||o.open,children:s.jsx(Fu,{asChild:!0,container:a,children:r})})})};dR.displayName=hN;var Vn="MenuContent",[o7,mN]=Ei(Vn),uR=h.forwardRef((e,t)=>{const n=cR(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=Ti(Vn,e.__scopeMenu),i=zu(Vn,e.__scopeMenu);return s.jsx(au.Provider,{scope:e.__scopeMenu,children:s.jsx(ps,{present:r||o.open,children:s.jsx(au.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(i7,{...a,ref:t}):s.jsx(l7,{...a,ref:t})})})})}),i7=h.forwardRef((e,t)=>{const n=Ti(Vn,e.__scopeMenu),r=h.useRef(null),a=Xe(t,r);return h.useEffect(()=>{const o=r.current;if(o)return qu(o)},[]),s.jsx(pN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ee(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),l7=h.forwardRef((e,t)=>{const n=Ti(Vn,e.__scopeMenu);return s.jsx(pN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),pN=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:p,onDismiss:g,disableOutsideScroll:x,...f}=e,w=Ti(Vn,n),y=zu(Vn,n),v=ig(n),j=iR(n),N=e7(n),[b,E]=h.useState(null),S=h.useRef(null),P=Xe(t,S,w.onContentChange),A=h.useRef(0),L=h.useRef(""),R=h.useRef(0),I=h.useRef(null),V=h.useRef("right"),O=h.useRef(0),k=x?og:h.Fragment,T=x?{as:Sn,allowPinchZoom:!0}:void 0,D=_=>{const H=L.current+_,$=N().filter(J=>!J.disabled),B=document.activeElement,W=$.find(J=>J.ref.current===B)?.textValue,q=$.map(J=>J.textValue),Y=j7(q,H,W),pe=$.find(J=>J.textValue===Y)?.ref.current;(function J(ge){L.current=ge,window.clearTimeout(A.current),ge!==""&&(A.current=window.setTimeout(()=>J(""),1e3))})(H),pe&&setTimeout(()=>pe.focus())};h.useEffect(()=>()=>window.clearTimeout(A.current),[]),nN();const M=h.useCallback(_=>V.current===I.current?.side&&N7(_,I.current?.area),[]);return s.jsx(o7,{scope:n,searchRef:L,onItemEnter:h.useCallback(_=>{M(_)&&_.preventDefault()},[M]),onItemLeave:h.useCallback(_=>{M(_)||(S.current?.focus(),E(null))},[M]),onTriggerLeave:h.useCallback(_=>{M(_)&&_.preventDefault()},[M]),pointerGraceTimerRef:R,onPointerGraceIntentChange:h.useCallback(_=>{I.current=_},[]),children:s.jsx(k,{...T,children:s.jsx(tg,{asChild:!0,trapped:a,onMountAutoFocus:Ee(o,_=>{_.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(cc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:p,onDismiss:g,children:s.jsx(rN,{asChild:!0,...j,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:b,onCurrentTabStopIdChange:E,onEntryFocus:Ee(c,_=>{y.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Y0,{role:"menu","aria-orientation":"vertical","data-state":TR(w.open),"data-radix-menu-content":"",dir:y.dir,...v,...f,ref:P,style:{outline:"none",...f.style},onKeyDown:Ee(f.onKeyDown,_=>{const $=_.target.closest("[data-radix-menu-content]")===_.currentTarget,B=_.ctrlKey||_.altKey||_.metaKey,W=_.key.length===1;$&&(_.key==="Tab"&&_.preventDefault(),!B&&W&&D(_.key));const q=S.current;if(_.target!==q||!J9.includes(_.key))return;_.preventDefault();const pe=N().filter(J=>!J.disabled).map(J=>J.ref.current);aR.includes(_.key)&&pe.reverse(),v7(pe)}),onBlur:Ee(e.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(A.current),L.current="")}),onPointerMove:Ee(e.onPointerMove,ou(_=>{const H=_.target,$=O.current!==_.clientX;if(_.currentTarget.contains(H)&&$){const B=_.clientX>O.current?"right":"left";V.current=B,O.current=_.clientX}}))})})})})})})});uR.displayName=Vn;var c7="MenuGroup",fN=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Fe.div,{role:"group",...r,ref:t})});fN.displayName=c7;var d7="MenuLabel",hR=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Fe.div,{...r,ref:t})});hR.displayName=d7;var Rp="MenuItem",$1="menu.itemSelect",lg=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,o=h.useRef(null),i=zu(Rp,e.__scopeMenu),l=mN(Rp,e.__scopeMenu),c=Xe(t,o),d=h.useRef(!1),u=()=>{const m=o.current;if(!n&&m){const p=new CustomEvent($1,{bubbles:!0,cancelable:!0});m.addEventListener($1,g=>r?.(g),{once:!0}),A0(m,p),p.defaultPrevented?d.current=!1:i.onClose()}};return s.jsx(mR,{...a,ref:c,disabled:n,onClick:Ee(e.onClick,u),onPointerDown:m=>{e.onPointerDown?.(m),d.current=!0},onPointerUp:Ee(e.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:Ee(e.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||uj.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});lg.displayName=Rp;var mR=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...o}=e,i=mN(Rp,n),l=iR(n),c=h.useRef(null),d=Xe(t,c),[u,m]=h.useState(!1),[p,g]=h.useState("");return h.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[o.children]),s.jsx(au.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:s.jsx(aN,{asChild:!0,...l,focusable:!r,children:s.jsx(Fe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:d,onPointerMove:Ee(e.onPointerMove,ou(x=>{r?i.onItemLeave(x):(i.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(e.onPointerLeave,ou(x=>i.onItemLeave(x))),onFocus:Ee(e.onFocus,()=>m(!0)),onBlur:Ee(e.onBlur,()=>m(!1))})})})}),u7="MenuCheckboxItem",pR=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(yR,{scope:e.__scopeMenu,checked:n,children:s.jsx(lg,{role:"menuitemcheckbox","aria-checked":Fp(n)?"mixed":n,...a,ref:t,"data-state":xN(n),onSelect:Ee(a.onSelect,()=>r?.(Fp(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pR.displayName=u7;var fR="MenuRadioGroup",[h7,m7]=Ei(fR,{value:void 0,onValueChange:()=>{}}),gR=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,o=_t(r);return s.jsx(h7,{scope:e.__scopeMenu,value:n,onValueChange:o,children:s.jsx(fN,{...a,ref:t})})});gR.displayName=fR;var xR="MenuRadioItem",vR=h.forwardRef((e,t)=>{const{value:n,...r}=e,a=m7(xR,e.__scopeMenu),o=n===a.value;return s.jsx(yR,{scope:e.__scopeMenu,checked:o,children:s.jsx(lg,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":xN(o),onSelect:Ee(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});vR.displayName=xR;var gN="MenuItemIndicator",[yR,p7]=Ei(gN,{checked:!1}),jR=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,o=p7(gN,n);return s.jsx(ps,{present:r||Fp(o.checked)||o.checked===!0,children:s.jsx(Fe.span,{...a,ref:t,"data-state":xN(o.checked)})})});jR.displayName=gN;var f7="MenuSeparator",wR=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Fe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});wR.displayName=f7;var g7="MenuArrow",NR=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=ig(n);return s.jsx(K0,{...a,...r,ref:t})});NR.displayName=g7;var x7="MenuSub",[Yve,bR]=Ei(x7),id="MenuSubTrigger",SR=h.forwardRef((e,t)=>{const n=Ti(id,e.__scopeMenu),r=zu(id,e.__scopeMenu),a=bR(id,e.__scopeMenu),o=mN(id,e.__scopeMenu),i=h.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},u=h.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return h.useEffect(()=>u,[u]),h.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),s.jsx(uN,{asChild:!0,...d,children:s.jsx(mR,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":TR(n.open),...e,ref:Rf(t,a.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ee(e.onPointerMove,ou(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ee(e.onPointerLeave,ou(m=>{u();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,x=g==="right",f=x?-5:5,w=p[x?"left":"right"],y=p[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+f,y:m.clientY},{x:w,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:w,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(e.onKeyDown,m=>{const p=o.searchRef.current!=="";e.disabled||p&&m.key===" "||Q9[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});SR.displayName=id;var CR="MenuSubContent",ER=h.forwardRef((e,t)=>{const n=cR(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=Ti(Vn,e.__scopeMenu),i=zu(Vn,e.__scopeMenu),l=bR(CR,e.__scopeMenu),c=h.useRef(null),d=Xe(t,c);return s.jsx(au.Provider,{scope:e.__scopeMenu,children:s.jsx(ps,{present:r||o.open,children:s.jsx(au.Slot,{scope:e.__scopeMenu,children:s.jsx(pN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{i.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ee(e.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ee(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Ee(e.onKeyDown,u=>{const m=u.currentTarget.contains(u.target),p=Z9[i.dir].includes(u.key);m&&p&&(o.onOpenChange(!1),l.trigger?.focus(),u.preventDefault())})})})})})});ER.displayName=CR;function TR(e){return e?"open":"closed"}function Fp(e){return e==="indeterminate"}function xN(e){return Fp(e)?"indeterminate":e?"checked":"unchecked"}function v7(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function y7(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function j7(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=y7(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function w7(e,t){const{x:n,y:r}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,d=t[i].x,u=t[i].y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}function N7(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return w7(n,t)}function ou(e){return t=>t.pointerType==="mouse"?e(t):void 0}var b7=lR,S7=uN,C7=dR,E7=uR,T7=fN,P7=hR,A7=lg,D7=pR,k7=gR,M7=vR,R7=jR,F7=wR,O7=NR,I7=SR,L7=ER,vN="DropdownMenu",[$7,Kve]=ln(vN,[oR]),Hs=oR(),[_7,PR]=$7(vN),AR=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=Hs(t),d=h.useRef(null),[u=!1,m]=qn({prop:a,defaultProp:o,onChange:i});return s.jsx(_7,{scope:t,triggerId:_n(),triggerRef:d,contentId:_n(),open:u,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(p=>!p),[m]),modal:l,children:s.jsx(b7,{...c,open:u,onOpenChange:m,dir:r,modal:l,children:n})})};AR.displayName=vN;var DR="DropdownMenuTrigger",kR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,o=PR(DR,n),i=Hs(n);return s.jsx(S7,{asChild:!0,...i,children:s.jsx(Fe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Rf(t,o.triggerRef),onPointerDown:Ee(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Ee(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});kR.displayName=DR;var V7="DropdownMenuPortal",MR=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Hs(t);return s.jsx(C7,{...r,...n})};MR.displayName=V7;var RR="DropdownMenuContent",FR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=PR(RR,n),o=Hs(n),i=h.useRef(!1);return s.jsx(E7,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:t,onCloseAutoFocus:Ee(e.onCloseAutoFocus,l=>{i.current||a.triggerRef.current?.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Ee(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FR.displayName=RR;var U7="DropdownMenuGroup",B7=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(T7,{...a,...r,ref:t})});B7.displayName=U7;var H7="DropdownMenuLabel",OR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(P7,{...a,...r,ref:t})});OR.displayName=H7;var q7="DropdownMenuItem",IR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(A7,{...a,...r,ref:t})});IR.displayName=q7;var W7="DropdownMenuCheckboxItem",LR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(D7,{...a,...r,ref:t})});LR.displayName=W7;var z7="DropdownMenuRadioGroup",X7=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(k7,{...a,...r,ref:t})});X7.displayName=z7;var Y7="DropdownMenuRadioItem",$R=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(M7,{...a,...r,ref:t})});$R.displayName=Y7;var K7="DropdownMenuItemIndicator",_R=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(R7,{...a,...r,ref:t})});_R.displayName=K7;var G7="DropdownMenuSeparator",VR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(F7,{...a,...r,ref:t})});VR.displayName=G7;var J7="DropdownMenuArrow",Q7=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(O7,{...a,...r,ref:t})});Q7.displayName=J7;var Z7="DropdownMenuSubTrigger",UR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(I7,{...a,...r,ref:t})});UR.displayName=Z7;var eX="DropdownMenuSubContent",BR=h.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Hs(n);return s.jsx(L7,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BR.displayName=eX;var tX=AR,sX=kR,nX=MR,HR=FR,qR=OR,WR=IR,zR=LR,XR=$R,YR=_R,KR=VR,GR=UR,JR=BR;const Xu=tX,Yu=sX,rX=h.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(GR,{ref:a,className:ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(Cn,{className:"ml-auto h-4 w-4"})]}));rX.displayName=GR.displayName;const aX=h.forwardRef(({className:e,...t},n)=>s.jsx(JR,{ref:n,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));aX.displayName=JR.displayName;const Nc=h.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(nX,{children:s.jsx(HR,{ref:r,sideOffset:t,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Nc.displayName=HR.displayName;const Rt=h.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(WR,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Rt.displayName=WR.displayName;const oX=h.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(zR,{ref:a,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(YR,{children:s.jsx(Ci,{className:"h-4 w-4"})})}),t]}));oX.displayName=zR.displayName;const iX=h.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(XR,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(YR,{children:s.jsx(al,{className:"h-2 w-2 fill-current"})})}),t]}));iX.displayName=XR.displayName;const yN=h.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(qR,{ref:r,className:ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));yN.displayName=qR.displayName;const Mr=h.forwardRef(({className:e,...t},n)=>s.jsx(KR,{ref:n,className:ce("-mx-1 my-1 h-px bg-muted",e),...t}));Mr.displayName=KR.displayName;function hj(e,[t,n]){return Math.min(n,Math.max(t,e))}function cg(e){const t=h.useRef({value:e,previous:e});return h.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lX=[" ","Enter","ArrowUp","ArrowDown"],cX=[" ","Enter"],Ku="Select",[dg,ug,dX]=Ff(Ku),[bc,Gve]=ln(Ku,[dX,fc]),hg=fc(),[uX,Co]=bc(Ku),[hX,mX]=bc(Ku),QR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:p,required:g,form:x}=e,f=hg(t),[w,y]=h.useState(null),[v,j]=h.useState(null),[N,b]=h.useState(!1),E=jc(d),[S=!1,P]=qn({prop:r,defaultProp:a,onChange:o}),[A,L]=qn({prop:i,defaultProp:l,onChange:c}),R=h.useRef(null),I=w?x||!!w.closest("form"):!0,[V,O]=h.useState(new Set),k=Array.from(V).map(T=>T.props.value).join(";");return s.jsx(z0,{...f,children:s.jsxs(uX,{required:g,scope:t,trigger:w,onTriggerChange:y,valueNode:v,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:b,contentId:_n(),value:A,onValueChange:L,open:S,onOpenChange:P,dir:E,triggerPointerDownPosRef:R,disabled:p,children:[s.jsx(dg.Provider,{scope:t,children:s.jsx(hX,{scope:e.__scopeSelect,onNativeOptionAdd:h.useCallback(T=>{O(D=>new Set(D).add(T))},[]),onNativeOptionRemove:h.useCallback(T=>{O(D=>{const M=new Set(D);return M.delete(T),M})},[]),children:n})}),I?s.jsxs(bF,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:m,value:A,onChange:T=>L(T.target.value),disabled:p,form:x,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(V)]},k):null]})})};QR.displayName=Ku;var ZR="SelectTrigger",eF=h.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,o=hg(n),i=Co(ZR,n),l=i.disabled||r,c=Xe(t,i.onTriggerChange),d=ug(n),u=h.useRef("touch"),[m,p,g]=SF(f=>{const w=d().filter(j=>!j.disabled),y=w.find(j=>j.value===i.value),v=CF(w,f,y);v!==void 0&&i.onValueChange(v.value)}),x=f=>{l||(i.onOpenChange(!0),g()),f&&(i.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return s.jsx(X0,{asChild:!0,...o,children:s.jsx(Fe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":NF(i.value)?"":void 0,...a,ref:c,onClick:Ee(a.onClick,f=>{f.currentTarget.focus(),u.current!=="mouse"&&x(f)}),onPointerDown:Ee(a.onPointerDown,f=>{u.current=f.pointerType;const w=f.target;w.hasPointerCapture(f.pointerId)&&w.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(x(f),f.preventDefault())}),onKeyDown:Ee(a.onKeyDown,f=>{const w=m.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&p(f.key),!(w&&f.key===" ")&&lX.includes(f.key)&&(x(),f.preventDefault())})})})});eF.displayName=ZR;var tF="SelectValue",sF=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:o,placeholder:i="",...l}=e,c=Co(tF,n),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,m=Xe(t,c.onValueNodeChange);return ms(()=>{d(u)},[d,u]),s.jsx(Fe.span,{...l,ref:m,style:{pointerEvents:"none"},children:NF(c.value)?s.jsx(s.Fragment,{children:i}):o})});sF.displayName=tF;var pX="SelectIcon",nF=h.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(Fe.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});nF.displayName=pX;var fX="SelectPortal",rF=e=>s.jsx(Fu,{asChild:!0,...e});rF.displayName=fX;var di="SelectContent",aF=h.forwardRef((e,t)=>{const n=Co(di,e.__scopeSelect),[r,a]=h.useState();if(ms(()=>{a(new DocumentFragment)},[]),!n.open){const o=r;return o?jr.createPortal(s.jsx(oF,{scope:e.__scopeSelect,children:s.jsx(dg.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(iF,{...e,ref:t})});aF.displayName=di;var Jn=10,[oF,Eo]=bc(di),gX="SelectContentImpl",iF=h.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:f,avoidCollisions:w,...y}=e,v=Co(di,n),[j,N]=h.useState(null),[b,E]=h.useState(null),S=Xe(t,J=>N(J)),[P,A]=h.useState(null),[L,R]=h.useState(null),I=ug(n),[V,O]=h.useState(!1),k=h.useRef(!1);h.useEffect(()=>{if(j)return qu(j)},[j]),nN();const T=h.useCallback(J=>{const[ge,...Q]=I().map(me=>me.ref.current),[he]=Q.slice(-1),le=document.activeElement;for(const me of J)if(me===le||(me?.scrollIntoView({block:"nearest"}),me===ge&&b&&(b.scrollTop=0),me===he&&b&&(b.scrollTop=b.scrollHeight),me?.focus(),document.activeElement!==le))return},[I,b]),D=h.useCallback(()=>T([P,j]),[T,P,j]);h.useEffect(()=>{V&&D()},[V,D]);const{onOpenChange:M,triggerPointerDownPosRef:_}=v;h.useEffect(()=>{if(j){let J={x:0,y:0};const ge=he=>{J={x:Math.abs(Math.round(he.pageX)-(_.current?.x??0)),y:Math.abs(Math.round(he.pageY)-(_.current?.y??0))}},Q=he=>{J.x<=10&&J.y<=10?he.preventDefault():j.contains(he.target)||M(!1),document.removeEventListener("pointermove",ge),_.current=null};return _.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",Q,{capture:!0})}}},[j,M,_]),h.useEffect(()=>{const J=()=>M(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[M]);const[H,$]=SF(J=>{const ge=I().filter(le=>!le.disabled),Q=ge.find(le=>le.ref.current===document.activeElement),he=CF(ge,J,Q);he&&setTimeout(()=>he.ref.current.focus())}),B=h.useCallback((J,ge,Q)=>{const he=!k.current&&!Q;(v.value!==void 0&&v.value===ge||he)&&(A(J),he&&(k.current=!0))},[v.value]),W=h.useCallback(()=>j?.focus(),[j]),q=h.useCallback((J,ge,Q)=>{const he=!k.current&&!Q;(v.value!==void 0&&v.value===ge||he)&&R(J)},[v.value]),Y=r==="popper"?mj:lF,pe=Y===mj?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:f,avoidCollisions:w}:{};return s.jsx(oF,{scope:n,content:j,viewport:b,onViewportChange:E,itemRefCallback:B,selectedItem:P,onItemLeave:W,itemTextRefCallback:q,focusSelectedItem:D,selectedItemText:L,position:r,isPositioned:V,searchRef:H,children:s.jsx(og,{as:Sn,allowPinchZoom:!0,children:s.jsx(tg,{asChild:!0,trapped:v.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:Ee(a,J=>{v.trigger?.focus({preventScroll:!0}),J.preventDefault()}),children:s.jsx(cc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(Y,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:J=>J.preventDefault(),...y,...pe,onPlaced:()=>O(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ee(y.onKeyDown,J=>{const ge=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ge&&J.key.length===1&&$(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let he=I().filter(le=>!le.disabled).map(le=>le.ref.current);if(["ArrowUp","End"].includes(J.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const le=J.target,me=he.indexOf(le);he=he.slice(me+1)}setTimeout(()=>T(he)),J.preventDefault()}})})})})})})});iF.displayName=gX;var xX="SelectItemAlignedPosition",lF=h.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,o=Co(di,n),i=Eo(di,n),[l,c]=h.useState(null),[d,u]=h.useState(null),m=Xe(t,S=>u(S)),p=ug(n),g=h.useRef(!1),x=h.useRef(!0),{viewport:f,selectedItem:w,selectedItemText:y,focusSelectedItem:v}=i,j=h.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&f&&w&&y){const S=o.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),A=o.valueNode.getBoundingClientRect(),L=y.getBoundingClientRect();if(o.dir!=="rtl"){const le=L.left-P.left,me=A.left-le,Z=S.left-me,ae=S.width+Z,we=Math.max(ae,P.width),Ve=window.innerWidth-Jn,Ue=hj(me,[Jn,Math.max(Jn,Ve-we)]);l.style.minWidth=ae+"px",l.style.left=Ue+"px"}else{const le=P.right-L.right,me=window.innerWidth-A.right-le,Z=window.innerWidth-S.right-me,ae=S.width+Z,we=Math.max(ae,P.width),Ve=window.innerWidth-Jn,Ue=hj(me,[Jn,Math.max(Jn,Ve-we)]);l.style.minWidth=ae+"px",l.style.right=Ue+"px"}const R=p(),I=window.innerHeight-Jn*2,V=f.scrollHeight,O=window.getComputedStyle(d),k=parseInt(O.borderTopWidth,10),T=parseInt(O.paddingTop,10),D=parseInt(O.borderBottomWidth,10),M=parseInt(O.paddingBottom,10),_=k+T+V+M+D,H=Math.min(w.offsetHeight*5,_),$=window.getComputedStyle(f),B=parseInt($.paddingTop,10),W=parseInt($.paddingBottom,10),q=S.top+S.height/2-Jn,Y=I-q,pe=w.offsetHeight/2,J=w.offsetTop+pe,ge=k+T+J,Q=_-ge;if(ge<=q){const le=R.length>0&&w===R[R.length-1].ref.current;l.style.bottom="0px";const me=d.clientHeight-f.offsetTop-f.offsetHeight,Z=Math.max(Y,pe+(le?W:0)+me+D),ae=ge+Z;l.style.height=ae+"px"}else{const le=R.length>0&&w===R[0].ref.current;l.style.top="0px";const Z=Math.max(q,k+f.offsetTop+(le?B:0)+pe)+Q;l.style.height=Z+"px",f.scrollTop=ge-q+f.offsetTop}l.style.margin=`${Jn}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=I+"px",r?.(),requestAnimationFrame(()=>g.current=!0)}},[p,o.trigger,o.valueNode,l,d,f,w,y,o.dir,r]);ms(()=>j(),[j]);const[N,b]=h.useState();ms(()=>{d&&b(window.getComputedStyle(d).zIndex)},[d]);const E=h.useCallback(S=>{S&&x.current===!0&&(j(),v?.(),x.current=!1)},[j,v]);return s.jsx(yX,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Fe.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});lF.displayName=xX;var vX="SelectPopperPosition",mj=h.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Jn,...o}=e,i=hg(n);return s.jsx(Y0,{...i,...o,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mj.displayName=vX;var[yX,jN]=bc(di,{}),pj="SelectViewport",cF=h.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,o=Eo(pj,n),i=jN(pj,n),l=Xe(t,o.onViewportChange),c=h.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(dg.Slot,{scope:n,children:s.jsx(Fe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ee(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=i;if(p?.current&&m){const g=Math.abs(c.current-u.scrollTop);if(g>0){const x=window.innerHeight-Jn*2,f=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),y=Math.max(f,w);if(y<x){const v=y+g,j=Math.min(x,v),N=v-j;m.style.height=j+"px",m.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});cF.displayName=pj;var dF="SelectGroup",[jX,wX]=bc(dF),NX=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=_n();return s.jsx(jX,{scope:n,id:a,children:s.jsx(Fe.div,{role:"group","aria-labelledby":a,...r,ref:t})})});NX.displayName=dF;var uF="SelectLabel",hF=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=wX(uF,n);return s.jsx(Fe.div,{id:a.id,...r,ref:t})});hF.displayName=uF;var Op="SelectItem",[bX,mF]=bc(Op),pF=h.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:o,...i}=e,l=Co(Op,n),c=Eo(Op,n),d=l.value===r,[u,m]=h.useState(o??""),[p,g]=h.useState(!1),x=Xe(t,v=>c.itemRefCallback?.(v,r,a)),f=_n(),w=h.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(bX,{scope:n,value:r,disabled:a,textId:f,isSelected:d,onItemTextChange:h.useCallback(v=>{m(j=>j||(v?.textContent??"").trim())},[]),children:s.jsx(dg.ItemSlot,{scope:n,value:r,disabled:a,textValue:u,children:s.jsx(Fe.div,{role:"option","aria-labelledby":f,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:x,onFocus:Ee(i.onFocus,()=>g(!0)),onBlur:Ee(i.onBlur,()=>g(!1)),onClick:Ee(i.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:Ee(i.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:Ee(i.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:Ee(i.onPointerMove,v=>{w.current=v.pointerType,a?c.onItemLeave?.():w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(i.onPointerLeave,v=>{v.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Ee(i.onKeyDown,v=>{c.searchRef?.current!==""&&v.key===" "||(cX.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});pF.displayName=Op;var ld="SelectItemText",fF=h.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...o}=e,i=Co(ld,n),l=Eo(ld,n),c=mF(ld,n),d=mX(ld,n),[u,m]=h.useState(null),p=Xe(t,y=>m(y),c.onItemTextChange,y=>l.itemTextRefCallback?.(y,c.value,c.disabled)),g=u?.textContent,x=h.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:f,onNativeOptionRemove:w}=d;return ms(()=>(f(x),()=>w(x)),[f,w,x]),s.jsxs(s.Fragment,{children:[s.jsx(Fe.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?jr.createPortal(o.children,i.valueNode):null]})});fF.displayName=ld;var gF="SelectItemIndicator",xF=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return mF(gF,n).isSelected?s.jsx(Fe.span,{"aria-hidden":!0,...r,ref:t}):null});xF.displayName=gF;var fj="SelectScrollUpButton",vF=h.forwardRef((e,t)=>{const n=Eo(fj,e.__scopeSelect),r=jN(fj,e.__scopeSelect),[a,o]=h.useState(!1),i=Xe(t,r.onScrollButtonChange);return ms(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(jF,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});vF.displayName=fj;var gj="SelectScrollDownButton",yF=h.forwardRef((e,t)=>{const n=Eo(gj,e.__scopeSelect),r=jN(gj,e.__scopeSelect),[a,o]=h.useState(!1),i=Xe(t,r.onScrollButtonChange);return ms(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(jF,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yF.displayName=gj;var jF=h.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,o=Eo("SelectScrollButton",n),i=h.useRef(null),l=ug(n),c=h.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return h.useEffect(()=>()=>c(),[c]),ms(()=>{l().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(Fe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ee(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Ee(a.onPointerMove,()=>{o.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Ee(a.onPointerLeave,()=>{c()})})}),SX="SelectSeparator",wF=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Fe.div,{"aria-hidden":!0,...r,ref:t})});wF.displayName=SX;var xj="SelectArrow",CX=h.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=hg(n),o=Co(xj,n),i=Eo(xj,n);return o.open&&i.position==="popper"?s.jsx(K0,{...a,...r,ref:t}):null});CX.displayName=xj;function NF(e){return e===""||e===void 0}var bF=h.forwardRef((e,t)=>{const{value:n,...r}=e,a=h.useRef(null),o=Xe(t,a),i=cg(n);return h.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&u){const m=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(m)}},[i,n]),s.jsx(Ou,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:n})})});bF.displayName="BubbleSelect";function SF(e){const t=_t(e),n=h.useRef(""),r=h.useRef(0),a=h.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=h.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,o]}function CF(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=EX(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function EX(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var TX=QR,EF=eF,PX=sF,AX=nF,DX=rF,TF=aF,kX=cF,PF=hF,AF=pF,MX=fF,RX=xF,DF=vF,kF=yF,MF=wF;const se=TX,ne=PX,ee=h.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(EF,{ref:r,className:ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(AX,{asChild:!0,children:s.jsx(ur,{className:"h-4 w-4 opacity-50"})})]}));ee.displayName=EF.displayName;const RF=h.forwardRef(({className:e,...t},n)=>s.jsx(DF,{ref:n,className:ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(RB,{className:"h-4 w-4"})}));RF.displayName=DF.displayName;const FF=h.forwardRef(({className:e,...t},n)=>s.jsx(kF,{ref:n,className:ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ur,{className:"h-4 w-4"})}));FF.displayName=kF.displayName;const te=h.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(DX,{children:s.jsxs(TF,{ref:a,className:ce("relative z-[10000] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(RF,{}),s.jsx(kX,{className:ce("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(FF,{})]})}));te.displayName=TF.displayName;const FX=h.forwardRef(({className:e,...t},n)=>s.jsx(PF,{ref:n,className:ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));FX.displayName=PF.displayName;const F=h.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(AF,{ref:r,className:ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(RX,{children:s.jsx(Ci,{className:"h-4 w-4"})})}),s.jsx(MX,{children:t})]}));F.displayName=AF.displayName;const OX=h.forwardRef(({className:e,...t},n)=>s.jsx(MF,{ref:n,className:ce("-mx-1 my-1 h-px bg-muted",e),...t}));OX.displayName=MF.displayName;function nt({className:e,...t}){return s.jsx("div",{className:ce("animate-pulse rounded-md bg-muted",e),...t})}function IX(){const{currentTenant:e,userTenants:t,loading:n,switchTenant:r}=Xz();if(n)return s.jsx(nt,{className:"h-10 w-48"});if(!e||t.length===0)return null;const a=i=>{switch(i){case"TENANT_OWNER":return s.jsx(F0,{className:"h-3 w-3"});case"TENANT_ADMIN":return s.jsx(mo,{className:"h-3 w-3"});case"VIEWER":return s.jsx(fa,{className:"h-3 w-3"});default:return null}},o=i=>{switch(i){case"TENANT_OWNER":case"TENANT_ADMIN":return"default";case"VIEWER":return"secondary";default:return"outline"}};return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wp,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs(se,{value:e.id,onValueChange:r,children:[s.jsx(ee,{className:"w-48",children:s.jsx(ne,{placeholder:"Select tenant"})}),s.jsx(te,{children:t.map(i=>s.jsx(F,{value:i.id,children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:i.displayName||i.name}),i.primary&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Primary"})]}),i.userRole&&s.jsxs(fe,{variant:o(i.userRole),className:"ml-2 text-xs",children:[a(i.userRole),s.jsx("span",{className:"ml-1",children:i.userRole.replace("TENANT_","")})]})]})},i.id))})]})]})}const Vx=768;function LX(){const[e,t]=h.useState(void 0);return h.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Vx-1}px)`),r=()=>{t(window.innerWidth<Vx)};return n.addEventListener("change",r),t(window.innerWidth<Vx),()=>n.removeEventListener("change",r)},[]),!!e}const U=h.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));U.displayName="Input";var $X="Separator",_1="horizontal",_X=["horizontal","vertical"],OF=h.forwardRef((e,t)=>{const{decorative:n,orientation:r=_1,...a}=e,o=VX(r)?r:_1,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return s.jsx(Fe.div,{"data-orientation":o,...l,...a,ref:t})});OF.displayName=$X;function VX(e){return _X.includes(e)}var IF=OF;const pt=h.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(IF,{ref:a,decorative:n,orientation:t,className:ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));pt.displayName=IF.displayName;var wN="Dialog",[LF,$F]=ln(wN),[UX,Nr]=LF(wN),_F=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=h.useRef(null),c=h.useRef(null),[d=!1,u]=qn({prop:r,defaultProp:a,onChange:o});return s.jsx(UX,{scope:t,triggerRef:l,contentRef:c,contentId:_n(),titleId:_n(),descriptionId:_n(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(m=>!m),[u]),modal:i,children:n})};_F.displayName=wN;var VF="DialogTrigger",UF=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Nr(VF,n),o=Xe(t,a.triggerRef);return s.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":SN(a.open),...r,ref:o,onClick:Ee(e.onClick,a.onOpenToggle)})});UF.displayName=VF;var NN="DialogPortal",[BX,BF]=LF(NN,{forceMount:void 0}),HF=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,o=Nr(NN,t);return s.jsx(BX,{scope:t,forceMount:n,children:h.Children.map(r,i=>s.jsx(ps,{present:n||o.open,children:s.jsx(Fu,{asChild:!0,container:a,children:i})}))})};HF.displayName=NN;var Ip="DialogOverlay",qF=h.forwardRef((e,t)=>{const n=BF(Ip,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Nr(Ip,e.__scopeDialog);return o.modal?s.jsx(ps,{present:r||o.open,children:s.jsx(HX,{...a,ref:t})}):null});qF.displayName=Ip;var HX=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Nr(Ip,n);return s.jsx(og,{as:Sn,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Fe.div,{"data-state":SN(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ui="DialogContent",WF=h.forwardRef((e,t)=>{const n=BF(ui,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Nr(ui,e.__scopeDialog);return s.jsx(ps,{present:r||o.open,children:o.modal?s.jsx(qX,{...a,ref:t}):s.jsx(WX,{...a,ref:t})})});WF.displayName=ui;var qX=h.forwardRef((e,t)=>{const n=Nr(ui,e.__scopeDialog),r=h.useRef(null),a=Xe(t,n.contentRef,r);return h.useEffect(()=>{const o=r.current;if(o)return qu(o)},[]),s.jsx(zF,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(e.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ee(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Ee(e.onFocusOutside,o=>o.preventDefault())})}),WX=h.forwardRef((e,t)=>{const n=Nr(ui,e.__scopeDialog),r=h.useRef(!1),a=h.useRef(!1);return s.jsx(zF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;n.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),zF=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Nr(ui,n),c=h.useRef(null),d=Xe(t,c);return nN(),s.jsxs(s.Fragment,{children:[s.jsx(tg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(cc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":SN(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(XX,{titleId:l.titleId}),s.jsx(KX,{contentRef:c,descriptionId:l.descriptionId})]})]})}),bN="DialogTitle",XF=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Nr(bN,n);return s.jsx(Fe.h2,{id:a.titleId,...r,ref:t})});XF.displayName=bN;var YF="DialogDescription",KF=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Nr(YF,n);return s.jsx(Fe.p,{id:a.descriptionId,...r,ref:t})});KF.displayName=YF;var GF="DialogClose",JF=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Nr(GF,n);return s.jsx(Fe.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,()=>a.onOpenChange(!1))})});JF.displayName=GF;function SN(e){return e?"open":"closed"}var QF="DialogTitleWarning",[zX,ZF]=WU(QF,{contentName:ui,titleName:bN,docsSlug:"dialog"}),XX=({titleId:e})=>{const t=ZF(QF),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return h.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},YX="DialogDescriptionWarning",KX=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZF(YX).contentName}}.`;return h.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},CN=_F,eO=UF,EN=HF,Gu=qF,Ju=WF,Qu=XF,Zu=KF,mg=JF;const GX=CN,JX=EN,tO=h.forwardRef(({className:e,...t},n)=>s.jsx(Gu,{className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));tO.displayName=Gu.displayName;const QX=Si("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),sO=h.forwardRef(({side:e="right",className:t,children:n,...r},a)=>s.jsxs(JX,{children:[s.jsx(tO,{}),s.jsxs(Ju,{ref:a,className:ce(QX({side:e}),t),...r,children:[n,s.jsxs(mg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(jt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sO.displayName=Ju.displayName;const ZX=h.forwardRef(({className:e,...t},n)=>s.jsx(Qu,{ref:n,className:ce("text-lg font-semibold text-foreground",e),...t}));ZX.displayName=Qu.displayName;const eY=h.forwardRef(({className:e,...t},n)=>s.jsx(Zu,{ref:n,className:ce("text-sm text-muted-foreground",e),...t}));eY.displayName=Zu.displayName;const tY="sidebar:state",sY=60*60*24*7,nY="16rem",rY="18rem",aY="3rem",oY="b",nO=h.createContext(null);function eh(){const e=h.useContext(nO);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const rO=h.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:a,children:o,...i},l)=>{const c=LX(),[d,u]=h.useState(!1),[m,p]=h.useState(e),g=t??m,x=h.useCallback(v=>{const j=typeof v=="function"?v(g):v;n?n(j):p(j),document.cookie=`${tY}=${j}; path=/; max-age=${sY}`},[n,g]),f=h.useCallback(()=>c?u(v=>!v):x(v=>!v),[c,x,u]);h.useEffect(()=>{const v=j=>{j.key===oY&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),f())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[f]);const w=g?"expanded":"collapsed",y=h.useMemo(()=>({state:w,open:g,setOpen:x,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:f}),[w,g,x,c,d,u,f]);return s.jsx(nO.Provider,{value:y,children:s.jsx(aM,{delayDuration:0,children:s.jsx("div",{style:{"--sidebar-width":nY,"--sidebar-width-icon":aY,...a},className:ce("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...i,children:o})})})});rO.displayName="SidebarProvider";const iY=h.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:a,...o},i)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=eh();return n==="none"?s.jsx("div",{className:ce("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...o,children:a}):l?s.jsx(GX,{open:d,onOpenChange:u,...o,children:s.jsx(sO,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":rY},side:e,children:s.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):s.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[s.jsx("div",{className:ce("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),s.jsx("div",{className:ce("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...o,children:s.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});iY.displayName="Sidebar";const lY=h.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:a}=eh();return s.jsxs(z,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ce("h-7 w-7",e),onClick:o=>{t?.(o),a()},...n,children:[s.jsx(YB,{}),s.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});lY.displayName="SidebarTrigger";const cY=h.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=eh();return s.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ce("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});cY.displayName="SidebarRail";const dY=h.forwardRef(({className:e,...t},n)=>s.jsx("main",{ref:n,className:ce("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));dY.displayName="SidebarInset";const uY=h.forwardRef(({className:e,...t},n)=>s.jsx(U,{ref:n,"data-sidebar":"input",className:ce("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));uY.displayName="SidebarInput";const hY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"header",className:ce("flex flex-col gap-2 p-2",e),...t}));hY.displayName="SidebarHeader";const mY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"footer",className:ce("flex flex-col gap-2 p-2",e),...t}));mY.displayName="SidebarFooter";const pY=h.forwardRef(({className:e,...t},n)=>s.jsx(pt,{ref:n,"data-sidebar":"separator",className:ce("mx-2 w-auto bg-sidebar-border",e),...t}));pY.displayName="SidebarSeparator";const fY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"content",className:ce("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));fY.displayName="SidebarContent";const gY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group",className:ce("relative flex w-full min-w-0 flex-col p-2",e),...t}));gY.displayName="SidebarGroup";const xY=h.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?Sn:"div";return s.jsx(a,{ref:r,"data-sidebar":"group-label",className:ce("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});xY.displayName="SidebarGroupLabel";const vY=h.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const a=t?Sn:"button";return s.jsx(a,{ref:r,"data-sidebar":"group-action",className:ce("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});vY.displayName="SidebarGroupAction";const yY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"group-content",className:ce("w-full text-sm",e),...t}));yY.displayName="SidebarGroupContent";const jY=h.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu",className:ce("flex w-full min-w-0 flex-col gap-1",e),...t}));jY.displayName="SidebarMenu";const wY=h.forwardRef(({className:e,...t},n)=>s.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ce("group/menu-item relative",e),...t}));wY.displayName="SidebarMenuItem";const NY=Si("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),bY=h.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:a,className:o,...i},l)=>{const c=e?Sn:"button",{isMobile:d,state:u}=eh(),m=s.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:ce(NY({variant:n,size:r}),o),...i});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(aq,{children:[s.jsx(oq,{asChild:!0,children:m}),s.jsx(oM,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):m});bY.displayName="SidebarMenuButton";const SY=h.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},a)=>{const o=t?Sn:"button";return s.jsx(o,{ref:a,"data-sidebar":"menu-action",className:ce("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});SY.displayName="SidebarMenuAction";const CY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ce("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));CY.displayName="SidebarMenuBadge";const EY=h.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const a=h.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return s.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ce("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&s.jsx(nt,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),s.jsx(nt,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});EY.displayName="SidebarMenuSkeleton";const TY=h.forwardRef(({className:e,...t},n)=>s.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ce("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));TY.displayName="SidebarMenuSub";const PY=h.forwardRef(({...e},t)=>s.jsx("li",{ref:t,...e}));PY.displayName="SidebarMenuSubItem";const AY=h.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...a},o)=>{const i=e?Sn:"a";return s.jsx(i,{ref:o,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:ce("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});AY.displayName="SidebarMenuSubButton";const DY=()=>{const{user:e,logout:t}=Kr(),{toggleSidebar:n}=eh();return s.jsx("header",{className:"h-16 border-b border-border bg-card/80 backdrop-blur-md transition-all duration-300",children:s.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(z,{variant:"ghost",size:"icon",onClick:n,className:"md:hidden","aria-label":"Toggle sidebar",children:s.jsx(zB,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-bold text-primary-foreground",children:"IFB"})}),s.jsx("h1",{className:"text-xl font-semibold app-name-gradient",children:"Integrix Flow Bridge"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(IX,{}),s.jsx("div",{className:"h-6 w-px bg-border"}),s.jsxs(z,{variant:"ghost",size:"sm",className:"relative transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:[s.jsx(tk,{className:"h-4 w-4"}),s.jsx(fe,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs animate-pulse",children:"3"})]}),s.jsxs(Xu,{children:[s.jsx(Yu,{asChild:!0,children:s.jsxs(z,{variant:"ghost",size:"sm",className:"flex items-center space-x-2",children:[s.jsx(mo,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:e?.username})]})}),s.jsxs(Nc,{align:"end",className:"w-56",children:[s.jsxs(Rt,{children:[s.jsx(mo,{className:"mr-2 h-4 w-4"}),"Profile"]}),s.jsxs(Rt,{children:[s.jsx(qt,{className:"mr-2 h-4 w-4"}),"Settings"]}),s.jsx(Mr,{}),s.jsxs(Rt,{onClick:t,className:"text-destructive",children:[s.jsx(WB,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})]})})},Gc={getEnvironmentConfig:async()=>{try{const e=await G.get("/system/config/environment");return e.data&&typeof e.data=="object"&&"type"in e.data?e.data:(console.warn("Invalid environment config response, using defaults"),{type:"DEVELOPMENT",displayName:"Development",description:"Development Environment",enforceRestrictions:!1,permissions:{canCreateFlows:!0,canCreateAdapters:!0,canModifyAdapterConfig:!0,canImportFlows:!0,canDeployFlows:!0,canCreateBusinessComponents:!0,canCreateDataStructures:!0,isAdmin:!1,canAccessAdmin:!1}})}catch(e){return console.error("Error fetching environment config:",e),{type:"DEVELOPMENT",displayName:"Development",description:"Development Environment",enforceRestrictions:!1,permissions:{canCreateFlows:!0,canCreateAdapters:!0,canModifyAdapterConfig:!0,canImportFlows:!0,canDeployFlows:!0,canCreateBusinessComponents:!0,canCreateDataStructures:!0,isAdmin:!1,canAccessAdmin:!1}}}},getPermissions:async()=>{try{const e=await G.get("/system/config/permissions");return e.data&&typeof e.data=="object"?e.data:(console.warn("Invalid permissions response, using defaults"),{canCreateFlows:!0,canCreateAdapters:!0,canModifyAdapterConfig:!0,canImportFlows:!0,canDeployFlows:!0,canCreateBusinessComponents:!0,canCreateDataStructures:!0,isAdmin:!1,canAccessAdmin:!1})}catch(e){return console.error("Error fetching permissions:",e),{canCreateFlows:!0,canCreateAdapters:!0,canModifyAdapterConfig:!0,canImportFlows:!0,canDeployFlows:!0,canCreateBusinessComponents:!0,canCreateDataStructures:!0,isAdmin:!1,canAccessAdmin:!1}}},updateEnvironmentType:async e=>(await G.put("/system/config/environment",{environmentType:e})).data,checkPermission:async e=>(await G.get("/system/config/check-permission",{params:{action:e}})).data.allowed,checkUIVisibility:async e=>(await G.get("/system/config/ui-visibility",{params:{element:e}})).data.visible,getSystemTimezone:async()=>{try{return(await G.get("/system/config/timezone")).data}catch(e){return console.error("Error fetching system timezone:",e),{timezone:"Africa/Johannesburg",dateFormat:"yyyy-MM-dd",timeFormat:"HH:mm:ss",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"}}},updateSystemTimezone:async e=>{await G.put("/system/config/timezone",{timezone:e})},getAvailableTimezones:async()=>{try{return(await G.get("/system/config/timezones")).data||[]}catch(e){return console.error("Error fetching available timezones:",e),[]}}},Pi=()=>{const[e,t]=h.useState(void 0),[n,r]=h.useState(void 0),[a,o]=h.useState(!0),i=async()=>{try{const[u,m]=await Promise.all([Gc.getEnvironmentConfig(),Gc.getPermissions()]);t(u),r(m)}catch(u){console.error("Error fetching environment data:",u),t({type:"DEVELOPMENT",name:"Development"}),r({isAdmin:!1,canWrite:!0,canRead:!0})}finally{o(!1)}};return h.useEffect(()=>{i()},[]),{environmentInfo:e,permissions:n,isLoading:a,checkPermission:async u=>{try{return await Gc.checkPermission(u)}catch{return!1}},checkUIVisibility:async u=>{try{return await Gc.checkUIVisibility(u)}catch{return!0}},updateEnvironmentType:async u=>{const m=await Gc.updateEnvironmentType(u);return await i(),m},isDevelopment:e?.type==="DEVELOPMENT",isQA:e?.type==="QUALITY_ASSURANCE",isProduction:e?.type==="PRODUCTION"}},Ux=[{name:"Dashboard",href:"/dashboard",icon:dk,roles:["administrator","integrator","viewer"],requiresDevEnv:!1},{name:"Data Structures",href:"/data-structures",icon:Ko,roles:["administrator","integrator"],requiresDevEnv:!1},{name:"Communication Adapters",href:"/communication-adapters",icon:I0,roles:["administrator","integrator"],requiresDevEnv:!1},{name:"Business Components",href:"/business-components",icon:wp,roles:["administrator","integrator"],requiresDevEnv:!1},{name:"Interface Management",href:"/all-interfaces",icon:Qd,roles:["administrator","integrator"],requiresDevEnv:!1},{name:"Message Monitor",href:"/messages",icon:Xs,roles:["administrator","integrator","viewer"],requiresDevEnv:!1},{name:"Adapter Monitoring",href:"/adapter-monitoring",icon:dc,roles:["administrator","integrator","viewer"],requiresDevEnv:!1},{name:"Development Functions",href:"/development-functions",icon:vn,roles:["administrator","integrator"],requiresDevEnv:!1},{name:"Admin Panel",href:"/admin",icon:_s,roles:["administrator"],requiresDevEnv:!1},{name:"Settings",href:"/settings",icon:qt,roles:["administrator"],requiresDevEnv:!1}],kY=()=>{const[e,t]=h.useState(!1),{user:n}=Kr(),{isDevelopment:r,permissions:a}=Pi(),o=h.useMemo(()=>{if(!Array.isArray(Ux))return console.error("Navigation is not an array:",Ux),[];try{return Ux.filter(i=>{const l=n?.role==="administrator"?"administrator":n?.role;return!n||!l||!i.roles.includes(l)||i.requiresDevEnv&&!r?!1:i.name==="Admin Panel"||i.name==="Settings"?a?.isAdmin||l==="administrator":!0})}catch(i){return console.error("Error filtering navigation:",i),[]}},[n,r,a]);return s.jsx("div",{className:ce("h-full bg-card/80 backdrop-blur-md border-r border-border transition-all duration-300 ease-in-out",e?"w-16":"w-64"),children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"p-4 border-b border-border",children:s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>t(!e),className:"ml-auto flex transition-all duration-300 hover:scale-110 hover:bg-accent/50",children:e?s.jsx(Cn,{className:"h-4 w-4 transition-transform duration-300"}):s.jsx(sk,{className:"h-4 w-4 transition-transform duration-300"})})}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:o.map(i=>s.jsxs(oW,{to:i.href,className:({isActive:l})=>ce("flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 group","hover:bg-accent hover:text-accent-foreground hover:scale-[1.02] hover:shadow-soft",l?"bg-primary text-primary-foreground shadow-elegant":"text-muted-foreground hover:text-foreground"),children:[s.jsx(i.icon,{className:ce("h-4 w-4 transition-all duration-300 group-hover:scale-110",!e&&"mr-3")}),!e&&s.jsx("span",{className:"transition-all duration-300",children:i.name})]},i.name))}),s.jsx("div",{className:"p-4 border-t border-border",children:s.jsx("div",{className:ce("text-xs text-muted-foreground",e?"text-center":"space-y-1"),children:!e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:"Version 1.0.0"}),s.jsx("div",{children:"© 2024 Integrix Flow Bridge"})]})})})]})})},Fa=[],MY=10,Sc=()=>{const e=as(),t=Ms(),n=h.useRef(null);return h.useEffect(()=>{t.pathname!==n.current&&(Fa.push({pathname:t.pathname,state:t.state,timestamp:Date.now()}),Fa.length>MY&&Fa.shift(),n.current=t.pathname)},[t]),{navigateBack:(i="/dashboard")=>{const l=Fa.filter(c=>c.pathname!==t.pathname);if(l.length>0){const c=l[l.length-1];e(c.pathname,{state:c.state})}else e(i)},isDirectNavigation:()=>{if(Fa.length<2)return!0;const i=t.pathname,l=Fa[Fa.length-2]?.pathname;if(!l)return!0;const c=i.split("/")[1],d=l?.split("/")[1];return c!==d},getBreadcrumbs:()=>{const i=t.pathname.split("/").filter(Boolean),l=[{label:"Home",path:"/"}];let c="";return i.forEach((d,u)=>{c+=`/${d}`,d==="message-structures"||d==="flow-structures"?l.push({label:"Data Structures",path:"/data-structures"}):l.push({label:RY(d),path:c})}),l},currentPath:t.pathname,hasHistory:Fa.length>1}};function RY(e){return e==="settings"?"User Settings":e==="development-functions"?"Development Functions":e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}const FY=()=>{const{getBreadcrumbs:e,currentPath:t}=Sc(),n=e();return t==="/login"||t==="/"?null:s.jsx("nav",{className:"flex items-center space-x-1 text-sm text-muted-foreground px-6 py-2 border-b",children:n.map((r,a)=>{const o=a===n.length-1,i=a===0;return s.jsxs("div",{className:"flex items-center",children:[!i&&s.jsx(Cn,{className:"h-4 w-4 mx-1"}),o?s.jsxs("span",{className:"font-medium text-foreground flex items-center",children:[i&&s.jsx(Wy,{className:"h-4 w-4 mr-1"}),r.label]}):s.jsxs(vM,{to:r.path,className:ce("hover:text-foreground transition-colors flex items-center","hover:underline"),children:[i&&s.jsx(Wy,{className:"h-4 w-4 mr-1"}),r.label]})]},r.path)})})};var aO="AlertDialog",[OY,Jve]=ln(aO,[$F]),Ta=$F(),oO=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ta(t);return s.jsx(CN,{...r,...n,modal:!0})};oO.displayName=aO;var IY="AlertDialogTrigger",iO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ta(n);return s.jsx(eO,{...a,...r,ref:t})});iO.displayName=IY;var LY="AlertDialogPortal",lO=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ta(t);return s.jsx(EN,{...r,...n})};lO.displayName=LY;var $Y="AlertDialogOverlay",cO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ta(n);return s.jsx(Gu,{...a,...r,ref:t})});cO.displayName=$Y;var Tl="AlertDialogContent",[_Y,VY]=OY(Tl),dO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,o=Ta(n),i=h.useRef(null),l=Xe(t,i),c=h.useRef(null);return s.jsx(zX,{contentName:Tl,titleName:uO,docsSlug:"alert-dialog",children:s.jsx(_Y,{scope:n,cancelRef:c,children:s.jsxs(Ju,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:Ee(a.onOpenAutoFocus,d=>{d.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(P0,{children:r}),s.jsx(BY,{contentRef:i})]})})})});dO.displayName=Tl;var uO="AlertDialogTitle",hO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ta(n);return s.jsx(Qu,{...a,...r,ref:t})});hO.displayName=uO;var mO="AlertDialogDescription",pO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ta(n);return s.jsx(Zu,{...a,...r,ref:t})});pO.displayName=mO;var UY="AlertDialogAction",fO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ta(n);return s.jsx(mg,{...a,...r,ref:t})});fO.displayName=UY;var gO="AlertDialogCancel",xO=h.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=VY(gO,n),o=Ta(n),i=Xe(t,a);return s.jsx(mg,{...o,...r,ref:i})});xO.displayName=gO;var BY=({contentRef:e})=>{const t=`\`${Tl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Tl}\` by passing a \`${mO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Tl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return h.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},HY=oO,qY=iO,WY=lO,vO=cO,yO=dO,jO=fO,wO=xO,NO=hO,bO=pO;const th=HY,zY=qY,XY=WY,SO=h.forwardRef(({className:e,...t},n)=>s.jsx(vO,{className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));SO.displayName=vO.displayName;const Cc=h.forwardRef(({className:e,...t},n)=>s.jsxs(XY,{children:[s.jsx(SO,{}),s.jsx(yO,{ref:n,className:ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Cc.displayName=yO.displayName;const Ec=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ec.displayName="AlertDialogHeader";const Tc=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Tc.displayName="AlertDialogFooter";const Pc=h.forwardRef(({className:e,...t},n)=>s.jsx(NO,{ref:n,className:ce("text-lg font-semibold",e),...t}));Pc.displayName=NO.displayName;const Ac=h.forwardRef(({className:e,...t},n)=>s.jsx(bO,{ref:n,className:ce("text-sm text-muted-foreground",e),...t}));Ac.displayName=bO.displayName;const Dc=h.forwardRef(({className:e,...t},n)=>s.jsx(jO,{ref:n,className:ce(ru(),e),...t}));Dc.displayName=jO.displayName;const sh=h.forwardRef(({className:e,...t},n)=>s.jsx(wO,{ref:n,className:ce(ru({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));sh.displayName=wO.displayName;const YY=()=>{const{tokenExpiry:e}=Kr(),{toast:t}=_e(),[n,r]=h.useState(!1),[a,o]=h.useState(0);h.useEffect(()=>{if(!e)return;const c=()=>{const u=e-Date.now();o(u),u<=10*60*1e3&&u>0?r(!0):r(!1),u<=5*60*1e3&&u>4*60*1e3&&t({title:"Session Expiring Soon",description:"Your session will expire in 5 minutes. Please save your work.",variant:"destructive"}),u<=1*60*1e3&&u>30*1e3&&t({title:"Session Expiring",description:"Your session will expire in 1 minute.",variant:"destructive"})};c();const d=setInterval(c,1e3);return()=>clearInterval(d)},[e,t]);const i=()=>{r(!1),t({title:"Session Extended",description:"Your session has been extended."})},l=c=>{const d=Math.floor(c/6e4),u=Math.floor(c%(1e3*60)/1e3);return`${d}:${u.toString().padStart(2,"0")}`};return s.jsx(th,{open:n&&a>0,children:s.jsxs(Cc,{children:[s.jsxs(Ec,{children:[s.jsxs(Pc,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-5 w-5"}),"Session Expiring Soon"]}),s.jsxs(Ac,{className:"space-y-2",children:[s.jsx("p",{children:"Your session will expire in:"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-foreground",children:l(a)}),s.jsx("p",{className:"text-sm",children:"Please save your work or extend your session to continue."})]})]}),s.jsx(Tc,{children:s.jsx(Dc,{onClick:i,children:"Extend Session"})})]})})},KY=()=>{const{tokenExpiry:e,checkSession:t,logout:n}=Kr(),[r,a]=h.useState(!1),[o,i]=h.useState(0);h.useEffect(()=>{if(!e)return;const d=()=>{const m=Date.now(),p=e-m,g=5*60*1e3;p<=0?n():p<=g&&!r&&(a(!0),i(Math.floor(p/1e3)))};d();const u=setInterval(d,3e4);return()=>clearInterval(u)},[e,n,r]),h.useEffect(()=>{if(!r||o<=0)return;const d=setInterval(()=>{i(u=>u<=1?(n(),0):u-1)},1e3);return()=>clearInterval(d)},[r,n]);const l=async()=>{try{await t()&&(a(!1),i(0))}catch(d){console.error("Failed to extend session:",d),n()}},c=d=>{const u=Math.floor(d/60),m=d%60;return`${u}:${m.toString().padStart(2,"0")}`};return s.jsx(th,{open:r,onOpenChange:a,children:s.jsxs(Cc,{children:[s.jsxs(Ec,{children:[s.jsxs(Pc,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-5 w-5"}),"Session Expiring Soon"]}),s.jsxs(Ac,{className:"space-y-2",children:[s.jsx("p",{children:"Your session will expire in:"}),s.jsx("p",{className:"text-2xl font-mono font-bold text-foreground",children:c(o)}),s.jsx("p",{className:"text-sm",children:"Would you like to extend your session or logout?"})]})]}),s.jsxs(Tc,{children:[s.jsx(sh,{onClick:n,children:"Logout"}),s.jsx(Dc,{onClick:l,children:"Extend Session"})]})]})})},GY=()=>s.jsx(rO,{children:s.jsxs("div",{className:"min-h-screen w-full bg-background flex flex-col",children:[s.jsx(DY,{}),s.jsxs("div",{className:"flex flex-1 w-full",children:[s.jsx(kY,{}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 w-full max-w-none",children:[s.jsx(FY,{}),s.jsx("main",{className:"flex-1 overflow-auto p-6 w-full",children:s.jsx(gM,{})})]})]}),s.jsx(YY,{}),s.jsx(KY,{})]})});var JY="Label",CO=h.forwardRef((e,t)=>s.jsx(Fe.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));CO.displayName=JY;var EO=CO;const QY=Si("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),C=h.forwardRef(({className:e,...t},n)=>s.jsx(EO,{ref:n,className:ce(QY(),e),...t}));C.displayName=EO.displayName;const K=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));K.displayName="Card";const oe=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ce("flex flex-col space-y-1.5 p-6",e),...t}));oe.displayName="CardHeader";const ie=h.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:ce("text-lg font-semibold leading-none tracking-tight",e),...t}));ie.displayName="CardTitle";const Ne=h.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:ce("text-sm text-muted-foreground",e),...t}));Ne.displayName="CardDescription";const re=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ce("p-6 pt-0",e),...t}));re.displayName="CardContent";const ZY=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ce("flex items-center p-6 pt-0",e),...t}));ZY.displayName="CardFooter";const eK=()=>{const[e,t]=h.useState(""),[n,r]=h.useState(""),[a,o]=h.useState(!1),{login:i,isAuthenticated:l}=Kr(),{toast:c}=_e(),u=Ms().state?.from?.pathname||"/dashboard";if(l)return s.jsx(Ap,{to:u,replace:!0});const m=async p=>{p.preventDefault(),o(!0),await i(e,n,u)||c({title:"Login Failed",description:"Invalid username or password",variant:"destructive"}),o(!1)};return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-secondary relative overflow-hidden p-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-primary/10 rounded-full blur-3xl animate-float"}),s.jsx("div",{className:"absolute -bottom-40 -right-40 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-primary/5 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),s.jsx("div",{className:"w-full max-w-md relative z-10",children:s.jsxs(K,{className:"w-full shadow-elegant animate-scale-in border-border/50 bg-card/95 backdrop-blur-sm",children:[s.jsxs(oe,{className:"text-center space-y-6 animate-fade-in",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"h-16 w-16 rounded-2xl bg-primary flex items-center justify-center animate-glow",children:s.jsx(Ln,{className:"h-8 w-8 text-primary-foreground"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-3xl font-bold bg-primary bg-clip-text text-transparent",children:"Integrix Flow Bridge"}),s.jsx(Ne,{className:"text-base",children:"Enterprise Integration Platform"})]})]}),s.jsx(re,{className:"space-y-6 animate-slide-up",children:s.jsxs("form",{onSubmit:m,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:"username",className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(mo,{className:"h-4 w-4"}),"Username"]}),s.jsx(U,{id:"username",type:"text",placeholder:"Enter your username",value:e,onChange:p=>t(p.target.value),className:"transition-all duration-300 focus:scale-[1.02] focus:shadow-elegant",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:"password",className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(UB,{className:"h-4 w-4"}),"Password"]}),s.jsx(U,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:p=>r(p.target.value),className:"transition-all duration-300 focus:scale-[1.02] focus:shadow-elegant",required:!0})]}),s.jsx(z,{type:"submit",className:"w-full bg-primary hover:opacity-90 transition-all duration-300 hover:scale-[1.02] hover:shadow-elegant group",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):s.jsxs(s.Fragment,{children:["Sign In",s.jsx(jp,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})]})})]})})]})};function tK(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:p,children:g,...x}=m,f=p?.[e][c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})}function u(m,p){const g=p?.[e][c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,sK(a,...t)]}function sK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var TN="Progress",PN=100,[nK,Qve]=tK(TN),[rK,aK]=nK(TN),TO=h.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:o=oK,...i}=e;(a||a===0)&&!V1(a)&&console.error(iK(`${a}`,"Progress"));const l=V1(a)?a:PN;r!==null&&!U1(r,l)&&console.error(lK(`${r}`,"Progress"));const c=U1(r,l)?r:null,d=Lp(c)?o(c,l):void 0;return s.jsx(rK,{scope:n,value:c,max:l,children:s.jsx(Fe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Lp(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":DO(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});TO.displayName=TN;var PO="ProgressIndicator",AO=h.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=aK(PO,n);return s.jsx(Fe.div,{"data-state":DO(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});AO.displayName=PO;function oK(e,t){return`${Math.round(e/t*100)}%`}function DO(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Lp(e){return typeof e=="number"}function V1(e){return Lp(e)&&!isNaN(e)&&e>0}function U1(e,t){return Lp(e)&&!isNaN(e)&&e<=t&&e>=0}function iK(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${PN}\`.`}function lK(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${PN} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var kO=TO,cK=AO;const nh=h.forwardRef(({className:e,value:t,...n},r)=>s.jsx(kO,{ref:r,className:ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(cK,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));nh.displayName=kO.displayName;function kc({children:e,className:t}){return s.jsx("div",{className:ce("w-full px-6 md:px-8 py-6 space-y-6 animate-fade-in",t),children:e})}const Mc=({title:e,description:t,icon:n,actions:r,className:a})=>s.jsxs("div",{className:ce("flex items-center justify-between mb-6 animate-slide-up",a),children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[n&&s.jsx("span",{className:"text-primary [&>svg]:h-5 [&>svg]:w-5",children:n}),e]}),t&&s.jsx("p",{className:"text-muted-foreground mt-1",children:t})]}),r&&s.jsx("div",{className:"flex items-center gap-3",children:r})]});class dK{async getDashboardStats(t){try{const n=t?`/dashboard/stats?businessComponentId=${t}`:"/dashboard/stats";return await G.get(n)}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch dashboard stats"}}}async getDashboardMetrics(t){try{const n=t?`/dashboard/metrics?businessComponentId=${t}`:"/dashboard/metrics",r=await G.get(n);if(r.success&&r.data){const a=r.data;return{success:!0,data:[{title:"Active Integrations",value:a.activeIntegrations?.toString()||"0",change:"+0%",icon:"Activity",color:"text-success"},{title:"Messages Today",value:a.messagesToday?.toLocaleString()||"0",change:"+0%",icon:"MessageSquare",color:"text-info"},{title:"Success Rate",value:a.successRate?`${a.successRate.toFixed(1)}%`:"0.0%",change:"+0%",icon:"CheckCircle",color:"text-success"},{title:"Avg Response Time",value:a.avgResponseTime?`${a.avgResponseTime}ms`:"0ms",change:"0ms",icon:"Zap",color:"text-warning"}]}}return{success:!1,data:[],error:"Invalid response format"}}catch(n){return console.error("Dashboard metrics error:",n),{success:!1,data:[],error:n instanceof Error?n.message:"Failed to fetch dashboard metrics"}}}async getRecentMessages(t,n=10){try{const r=t?`/messages/recent?businessComponentId=${t}&limit=${n}`:`/messages/recent?limit=${n}`;return await G.get(r)}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch recent messages"}}}async getAdapterStatuses(t){try{const n=t?`/adapter-monitoring/status?businessComponentId=${t}`:"/adapter-monitoring/status";return await G.get(n)}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch adapter statuses"}}}async getDashboardData(t){try{const[n,r,a]=await Promise.all([this.getDashboardStats(t),this.getRecentMessages(t),this.getAdapterStatuses(t)]);if(!n.success||!r.success||!a.success)return{success:!1,error:"Failed to fetch some dashboard data"};const o=await this.getDashboardMetrics(t);return{success:!0,data:{stats:n.data,metrics:o.data||[],recentMessages:r.data||[],adapterStatuses:a.data||[]}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch dashboard data"}}}}const Bx=new dK;class uK{async getAllBusinessComponents(){try{return{success:!0,data:await ut.get("/business-components")}}catch(t){return console.error("Failed to fetch business components:",t),{success:!1,error:"Failed to fetch business components"}}}async getBusinessComponentById(t){try{return{success:!0,data:await ut.get(`/business-components/${t}`)}}catch(n){return console.error("Failed to fetch business component:",n),{success:!1,error:"Failed to fetch business component"}}}async createBusinessComponent(t){try{console.log("Frontend: Creating business component with data:",t);const n=await ut.post("/business-components",t);return console.log("Frontend: Created business component:",n),{success:!0,data:n}}catch(n){return console.error("Frontend: Failed to create business component:",n),{success:!1,error:"Failed to create business component"}}}async updateBusinessComponent(t){try{return{success:!0,data:await ut.put(`/business-components/${t.id}`,t)}}catch(n){return console.error("Failed to update business component:",n),{success:!1,error:"Failed to update business component"}}}async deleteBusinessComponent(t){try{return await ut.delete(`/business-components/${t}`),{success:!0}}catch(n){return console.error("Failed to delete business component:",n),{success:!1,error:"Failed to delete business component"}}}}const Rr=new uK;function pg(e){h.useEffect(()=>{const t=document.title;return document.title=`${e} | Integrix Flow Bridge`,()=>{document.title=t}},[e])}const fg=e=>{h.useEffect(()=>{const t=document.querySelector('meta[name="description"]'),n=document.querySelector('meta[property="og:description"]');if(t){const r=t.getAttribute("content")||"";return t.setAttribute("content",e),n&&n.setAttribute("content",e),()=>{t.setAttribute("content",r),n&&r&&n.setAttribute("content",r)}}},[e])},hK=Si("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),We=h.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:ce(hK({variant:t}),e),...n}));We.displayName="Alert";const $r=h.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:ce("mb-1 font-medium leading-none tracking-tight",e),...t}));$r.displayName="AlertTitle";const ze=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:ce("text-sm [&_p]:leading-relaxed",e),...t}));ze.displayName="AlertDescription";function mK({title:e="Error",error:t,className:n,variant:r="destructive"}){const a=t instanceof Error?t.message:typeof t=="string"?t:"An unexpected error occurred",o=r==="destructive"?en:yt;return s.jsxs(We,{variant:r,className:ce("mb-4",n),children:[s.jsx(o,{className:"h-4 w-4"}),s.jsx($r,{children:e}),s.jsx(ze,{children:a})]})}const pK={Activity:dc,MessageSquare:Xs,CheckCircle:rs,XCircle:en,Clock:js,TrendingUp:s8,Server:Lf,Zap:sn,Users:_s},fK=()=>{pg("Dashboard"),fg("Monitor your integration flows, adapter status, and system performance in real-time with the Integrix Flow Bridge dashboard."),console.log("Dashboard component loading...");const[e,t]=h.useState(null),[n,r]=h.useState([]),[a,o]=h.useState([]),[i,l]=h.useState([]),[c,d]=h.useState(!0),[u,m]=h.useState(!0),[p,g]=h.useState(!0),[x,f]=h.useState(null),[w,y]=h.useState([]),[v,j]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{console.log("Dashboard - loading business components...");const b=await Rr.getAllBusinessComponents();b.success&&b.data&&y(b.data)}catch(b){console.error("Error loading business components:",b)}finally{j(!1)}})()},[]),console.log("Dashboard - business components:",w,"loading:",v),h.useEffect(()=>{const N=async()=>{try{f(null);const E=e?.id;d(!0);const S=await Bx.getDashboardMetrics(E);console.log("Metrics response:",S),S.success&&S.data&&Array.isArray(S.data)?r(S.data):(console.error("Failed to fetch metrics:",S.error),r([])),d(!1),m(!0);const P=await Bx.getRecentMessages(E);P.success&&P.data?o(P.data):(console.error("Failed to fetch messages:",P.error),o([])),m(!1),g(!0);const A=await Bx.getAdapterStatuses(E);A.success&&A.data?l(A.data):(console.error("Failed to fetch adapters:",A.error),l([])),g(!1)}catch(E){console.error("Dashboard data fetch error:",E),f("Failed to load dashboard data"),r([]),o([]),l([]),d(!1),m(!1),g(!1)}};N();const b=setInterval(N,3e4);return()=>clearInterval(b)},[e]),console.log("Dashboard render - about to return JSX"),s.jsxs(kc,{className:"max-w-none px-0 md:px-0",children:[s.jsx(Mc,{title:"Integration Dashboard",description:"Monitor your integration flows and system health",icon:s.jsx(dk,{})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(C,{htmlFor:"business-component",children:"Business Component:"}),s.jsxs(se,{value:e?.id||"all",onValueChange:N=>{if(N==="all")t(null);else{const b=w.find(E=>E.id===N);t(b||null)}},children:[s.jsx(ee,{id:"business-component",className:"w-[280px]",children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Components"}),w.map(N=>s.jsx(F,{value:N.id,children:N.name},N.id))]})]})]}),x&&s.jsx(mK,{error:x}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c?s.jsx("div",{className:"col-span-full flex justify-center p-8",children:s.jsx(vt,{className:"h-8 w-8 animate-spin"})}):n&&Array.isArray(n)?n.map((N,b)=>{const E=pK[N.icon]||dc,S=N.change.startsWith("+")||N.change.startsWith("-")&&N.change.includes("ms");return s.jsxs(K,{children:[s.jsxs(oe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ie,{className:"text-sm font-medium",children:N.title}),s.jsx(E,{className:`h-4 w-4 ${N.color}`})]}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:N.value}),s.jsxs("p",{className:`text-xs ${S?"text-success":"text-destructive"}`,children:[N.change," from last period"]})]})]},b)}):s.jsx("div",{className:"col-span-full",children:s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No metrics available"})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Recent Messages"}),s.jsx(Ne,{children:"Latest integration messages"})]}),s.jsx(re,{children:u?s.jsx("div",{className:"flex justify-center p-8",children:s.jsx(vt,{className:"h-6 w-6 animate-spin"})}):!a||!Array.isArray(a)||a.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No recent messages"}):s.jsx("div",{className:"space-y-4",children:a.map(N=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fe,{variant:N.status==="success"?"success":N.status==="failed"?"destructive":"secondary",children:N.status}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium",children:[N.source," → ",N.target]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:N.time})]})]}),N.status==="success"&&s.jsx(rs,{className:"h-4 w-4 text-success"}),N.status==="failed"&&s.jsx(en,{className:"h-4 w-4 text-destructive"}),N.status==="processing"&&s.jsx(js,{className:"h-4 w-4 text-warning animate-pulse"})]},N.id))})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Adapter Monitoring"}),s.jsx(Ne,{children:"Active communication adapters"})]}),s.jsx(re,{children:p?s.jsx("div",{className:"flex justify-center p-8",children:s.jsx(vt,{className:"h-6 w-6 animate-spin"})}):!i||!Array.isArray(i)||i.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No active adapters"}):s.jsx("div",{className:"space-y-4",children:i.map((N,b)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lf,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-medium",children:N.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fe,{variant:"outline",children:N.type}),s.jsx(fe,{variant:"secondary",children:N.mode}),s.jsx(fe,{variant:N.status==="running"?"success":N.status==="stopped"?"secondary":"destructive",children:N.status})]})]}),s.jsx(nh,{value:N.load,className:"h-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[s.jsxs("span",{children:["Load: ",N.load,"%"]}),N.messagesProcessed!==void 0&&s.jsxs("span",{children:["Messages: ",N.messagesProcessed.toLocaleString()]})]})]},b))})})]})]})]})},gK=()=>(console.log("TestPage - rendering without React Query"),s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test Page"}),s.jsx("p",{children:"This is a simple test page without React Query to verify navigation works."})]})),MO=({children:e,requireDevelopment:t=!0,customMessage:n})=>{const{isDevelopment:r,environmentInfo:a}=Pi(),o=as();return t&&!r?s.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:s.jsx(K,{children:s.jsx(re,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[s.jsx("div",{className:"rounded-full bg-destructive/10 p-4",children:s.jsx(ho,{className:"h-12 w-12 text-destructive"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Page Restricted"}),s.jsx("p",{className:"text-muted-foreground",children:n||`This page is only available in development environment. 
                     The system is currently configured as ${a?.displayName||"non-development"}.`})]}),s.jsxs(We,{className:"mt-4",children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx($r,{children:"Why is this restricted?"}),s.jsxs(ze,{children:["In ",a?.displayName||"this"," environment, creation and modification of flows, adapters, and data structures is disabled to prevent accidental changes. You can still import flows, modify adapter configurations, and manage deployments."]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx(z,{onClick:()=>o(-1),variant:"outline",children:"Go Back"}),s.jsx(z,{onClick:()=>o("/interfaces"),children:"Interface Management"})]})]})})})}):s.jsx(s.Fragment,{children:e})};function xK(){const e=as();return Sc(),s.jsx(MO,{children:s.jsxs("div",{className:"w-full p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:"Create Integration Flow"}),s.jsx("p",{className:"text-muted-foreground",children:"Choose the type of integration flow you want to create"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(K,{className:"cursor-pointer transition-all hover:shadow-lg border-2 hover:border-primary/20",children:[s.jsxs(oe,{className:"text-center pb-4",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-primary/10",children:s.jsx(nr,{className:"h-8 w-8 text-primary"})}),s.jsx(ie,{className:"text-xl",children:"Create Orchestration Flow"}),s.jsx(Ne,{className:"text-sm",children:"Design complex workflows with multiple systems, routing, and business logic"})]}),s.jsxs(re,{className:"pt-0",children:[s.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Visual workflow designer"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Message routing & transformation"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Multi-system orchestration"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Error handling & compensation"})]})]}),s.jsx(z,{className:"w-full",onClick:()=>e("/create-orchestration-flow"),children:"Create Orchestration Flow"})]})]}),s.jsxs(K,{className:"cursor-pointer transition-all hover:shadow-lg border-2 hover:border-primary/20",children:[s.jsxs(oe,{className:"text-center pb-4",children:[s.jsx("div",{className:"mx-auto mb-4 p-3 rounded-full bg-primary/10",children:s.jsx(wl,{className:"h-8 w-8 text-primary"})}),s.jsx(ie,{className:"text-xl",children:"Create Direct Mapping Flow"}),s.jsx(Ne,{className:"text-sm",children:"Create simple point-to-point integration with field mapping"})]}),s.jsxs(re,{className:"pt-0",children:[s.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Point-to-point integration"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Visual field mapping"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Transformation functions"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),s.jsx("span",{children:"Quick setup & deployment"})]})]}),s.jsx(z,{className:"w-full",onClick:()=>e("/create-direct-mapping-flow"),children:"Create Direct Mapping Flow"})]})]})]})]})})}const RO=e=>{const t=Ms(),{isDirectNavigation:n}=Sc(),r=h.useRef(!1),a=h.useRef(t.pathname);return h.useEffect(()=>{a.current!==t.pathname&&(a.current=t.pathname,n()?(e(),r.current=!0):r.current=!1)},[t.pathname,n,e]),{isDirectNavigation:n(),hasReset:r.current}},Re=h.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Re.displayName="Textarea";var AN="Switch",[vK,Zve]=ln(AN),[yK,jK]=vK(AN),FO=h.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[p,g]=h.useState(null),x=Xe(t,j=>g(j)),f=h.useRef(!1),w=p?u||!!p.closest("form"):!0,[y=!1,v]=qn({prop:a,defaultProp:o,onChange:d});return s.jsxs(yK,{scope:n,checked:y,disabled:l,children:[s.jsx(Fe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":LO(y),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onClick:Ee(e.onClick,j=>{v(N=>!N),w&&(f.current=j.isPropagationStopped(),f.current||j.stopPropagation())})}),w&&s.jsx(wK,{control:p,bubbles:!f.current,name:r,value:c,checked:y,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});FO.displayName=AN;var OO="SwitchThumb",IO=h.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=jK(OO,n);return s.jsx(Fe.span,{"data-state":LO(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});IO.displayName=OO;var wK=e=>{const{control:t,checked:n,bubbles:r=!0,...a}=e,o=h.useRef(null),i=cg(n),l=Uf(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[i,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function LO(e){return e?"checked":"unchecked"}var $O=FO,NK=IO;const bt=h.forwardRef(({className:e,...t},n)=>s.jsx($O,{className:ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(NK,{className:ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));bt.displayName=$O.displayName;const bK=({onSaveFlow:e,isLoading:t=!1,disabled:n=!1})=>s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.3s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Actions"}),s.jsx(Ne,{children:"Save your integration flow"})]}),s.jsxs(re,{className:"space-y-3",children:[s.jsx(z,{onClick:e,className:"w-full bg-gradient-primary hover:opacity-90 transition-all duration-300",disabled:n||t,children:t?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Flow"]})}),s.jsx(pt,{}),s.jsxs(z,{variant:"outline",className:"w-full",children:[s.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Duplicate Flow"]})]})]}),SK=({sourceAdapter:e,targetAdapter:t,sourceStructure:n,targetStructure:r,selectedTransformations:a,adapters:o,sampleStructures:i})=>{const l=d=>o.find(u=>u.id===d),c=d=>i.find(u=>u.id===d);return s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.4s"},children:[s.jsx(oe,{children:s.jsx(ie,{children:"Flow Summary"})}),s.jsx(re,{className:"space-y-3",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsx(fe,{variant:"secondary",children:"Draft"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Source:"}),s.jsx("span",{children:e?l(e)?.name:"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Source Structure:"}),s.jsx("span",{children:n?c(n)?.name:"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Target:"}),s.jsx("span",{children:t?l(t)?.name:"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Target Structure:"}),s.jsx("span",{children:r?c(r)?.name:"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Transformations:"}),s.jsx("span",{children:a.length})]})]})})]})},CK=()=>s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.5s"},children:[s.jsx(oe,{children:s.jsx(ie,{children:"Quick Tips"})}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),s.jsx("span",{children:"Test your flow before saving to ensure connectivity"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),s.jsx("span",{children:"Add transformations to modify data between systems"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),s.jsx("span",{children:"Use descriptive names for easier management"})]})]})})]});function _O({fields:e,mappings:t,side:n,selectedField:r,onToggleExpanded:a,onDragStart:o,onDragEnd:i,onDragOver:l,onDrop:c,onSelectField:d}){const u=h.useCallback((m,p)=>{const g=!m.children||m.children.length===0,x=m.type==="array"||m.name.endsWith("[]"),f=!g&&(x||m.type==="object"),w=n==="source"&&(g||f),y=n==="target"&&(g||f),v=t.some(N=>{if(n==="source"){const b=N.sourcePaths&&N.sourcePaths.includes(m.path),E=N.sourceFields&&N.sourceFields.includes(m.name);return b||E}else return N.targetPath===m.path||N.targetField===m.name}),j=r?.id===m.id;return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`flex items-center p-2 border rounded-md transition-colors ${j?"bg-primary/20 border-primary ring-1 ring-primary":v?"bg-primary/10 border-primary border-dotted border-2":"bg-background hover:bg-muted/50"} ${w?"cursor-grab active:cursor-grabbing":""} ${y&&!v?"border-dashed border-2 hover:border-primary cursor-pointer":""}`,style:{marginLeft:`${p*16}px`},draggable:w,onClick:()=>{d&&d(m)},onDragStart:N=>{w&&o&&(N.dataTransfer.effectAllowed="copy",N.dataTransfer.setData("application/json",JSON.stringify(m)),o(m))},onDragEnd:N=>{w&&i&&i()},onDragOver:y?l:void 0,onDrop:N=>{y&&(N.preventDefault(),N.stopPropagation(),c?.(m))},children:[!g&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>a(m.id,n==="source"),className:"mr-2 h-auto w-auto p-1 hover:bg-muted rounded",children:m.expanded?s.jsx(ur,{className:"h-3 w-3"}):s.jsx(Cn,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:m.name}),s.jsx(fe,{variant:"outline",className:"text-xs",children:m.type}),v&&s.jsx(BB,{className:"h-3 w-3 text-primary"}),f&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Node"})]}),n==="source"&&w&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"Drag →"}),n==="target"&&y&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"Drop here"})]}),!g&&m.expanded&&m.children&&s.jsx("div",{className:"ml-4",children:m.children.map(N=>u(N,p+1))})]},m.id)},[t,n,r,a,o,i,l,c,d]);return s.jsx("div",{className:"space-y-2",children:e.map(m=>u(m,0))})}const ft=CN,rh=eO,EK=EN,VO=h.forwardRef(({className:e,...t},n)=>s.jsx(Gu,{ref:n,className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));VO.displayName=Gu.displayName;const mt=h.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(EK,{children:[s.jsx(VO,{}),s.jsxs(Ju,{ref:r,className:ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(mg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(jt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mt.displayName=Ju.displayName;const gt=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});gt.displayName="DialogHeader";const Wn=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Wn.displayName="DialogFooter";const xt=h.forwardRef(({className:e,...t},n)=>s.jsx(Qu,{ref:n,className:ce("text-lg font-semibold leading-none tracking-tight",e),...t}));xt.displayName=Qu.displayName;const ks=h.forwardRef(({className:e,...t},n)=>s.jsx(Zu,{ref:n,className:ce("text-sm text-muted-foreground",e),...t}));ks.displayName=Zu.displayName;const vj=e=>{try{const t=JSON.parse(e);return yj(t)}catch{return null}},yj=e=>{if(Array.isArray(e))return e.length>0?["array",yj(e[0])]:"array";if(e!==null&&typeof e=="object"){const t={};for(const[n,r]of Object.entries(e))t[n]=yj(r);return t}else return typeof e},_r=(e,t)=>{try{const r=new DOMParser().parseFromString(e,"text/xml");if(r.querySelector("parsererror"))return null;const o={},i=new Map,l=r.querySelector("schema, xs\\:schema, xsd\\:schema");if(!l)return null;const c=g=>{if(g.includes(":")&&t){const[v,j]=g.split(":"),N={},b=l?.attributes;if(b)for(let S=0;S<b.length;S++){const P=b[S];if(P.name.startsWith("xmlns:")){const A=P.name.substring(6);N[A]=P.value}}console.log("[XSD Parser] Namespace map:",N),console.log("[XSD Parser] Looking for namespace:",v,"with URI:",N[v]);const E=l?.querySelectorAll("import, xs\\:import, xsd\\:import");if(E)for(const S of E){const P=S.getAttribute("namespace"),A=S.getAttribute("schemaLocation");if(console.log("[XSD Parser] Checking import - namespace:",P,"location:",A),P===N[v]&&A){const L=[A,A.split("/").pop()||A,A.startsWith("structure://")?A:null].filter(Boolean);for(const R of L)if(R&&t[R]){const I=t[R];if(console.log("[XSD Parser] Found linked structure for location:",R),console.log("[XSD Parser] Looking for type:",j),console.log("[XSD Parser] Available types in linked structure:",Object.keys(I)),I[j])return console.log("[XSD Parser] Found type directly:",j),I[j];const V=j.replace(/-/g,"_");if(I[V])return console.log("[XSD Parser] Found type with underscore:",V),I[V];for(const[O,k]of Object.entries(I))if(typeof k=="object"&&k[j])return console.log("[XSD Parser] Found type nested under:",O),k[j]}}}}const x=g.split(":").pop()||"";if(i.has(x))return i.get(x);const f={string:"string",boolean:"boolean",decimal:"decimal",float:"float",double:"double",int:"integer",integer:"integer",long:"long",short:"short",byte:"byte",date:"date",dateTime:"datetime",time:"time",base64Binary:"base64",hexBinary:"hex",anyURI:"uri",QName:"qname",normalizedString:"string",token:"string",language:"string",ID:"string",IDREF:"string",ENTITY:"string",NMTOKEN:"string",NCName:"string"};if(f[x])return f[x];const w=l.querySelector(`complexType[name="${x}"], xs\\:complexType[name="${x}"], xsd\\:complexType[name="${x}"]`);if(w){const v={};return d(w,v),i.set(x,v),v}const y=l.querySelector(`simpleType[name="${x}"], xs\\:simpleType[name="${x}"], xsd\\:simpleType[name="${x}"]`);if(y){const v=y.querySelector("restriction, xs\\:restriction, xsd\\:restriction");if(v){const j=v.getAttribute("base")||"string";return c(j)}}return"string"},d=(g,x)=>{const f=g.querySelectorAll(":scope > sequence, :scope > xs\\:sequence, :scope > xsd\\:sequence, :scope > choice, :scope > xs\\:choice, :scope > xsd\\:choice, :scope > all, :scope > xs\\:all, :scope > xsd\\:all");f.length>0?f.forEach(y=>{u(y,x)}):u(g,x),g.querySelectorAll(":scope > attribute, :scope > xs\\:attribute, :scope > xsd\\:attribute").forEach(y=>{const v=y.getAttribute("name"),j=y.getAttribute("type"),N=y.getAttribute("use");if(v){const b=`@${v}${N==="required"?"*":""}`;x[b]=j?c(j):"string"}})},u=(g,x)=>{g.querySelectorAll(":scope > element, :scope > xs\\:element, :scope > xsd\\:element").forEach(w=>{const y=w.getAttribute("name"),v=w.getAttribute("type"),j=w.getAttribute("ref"),N=w.getAttribute("minOccurs"),b=w.getAttribute("maxOccurs"),E=N==="0",S=b==="unbounded"||b&&parseInt(b)>1;if(y||j){let A=y||j?.split(":").pop()||"";S&&(A+="[]"),!E&&!S&&(A+="*");const L=w.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(L){const R={};d(L,R),x[A]=R}else if(v){const R=c(v);console.log(`[XSD Parser] Element '${y}' has type '${v}', resolved to:`,R),x[A]=R}else if(j){const R=j.split(":").pop()||"",I=l.querySelector(`element[name="${R}"], xs\\:element[name="${R}"], xsd\\:element[name="${R}"]`);if(I){const V=I.getAttribute("type");if(V)x[A]=c(V);else{const O=I.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(O){const k={};d(O,k),x[A]=k}else x[A]="string"}}else x[A]="string"}else x[A]="string"}})},m=l.querySelectorAll(":scope > complexType, :scope > xs\\:complexType, :scope > xsd\\:complexType");return console.log("[XSD Parser] Found",m.length,"global complex types"),m.forEach(g=>{const x=g.getAttribute("name");if(x&&!i.has(x)){const f={};d(g,f),i.set(x,f),console.log("[XSD Parser] Processed complex type:",x,"with structure:",f)}}),l.querySelectorAll(":scope > element, :scope > xs\\:element, :scope > xsd\\:element").forEach(g=>{const x=g.getAttribute("name"),f=g.getAttribute("type");if(x){const w=g.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(w){const y={};d(w,y),o[x]=y}else f?o[x]=c(f):o[x]="string"}}),Object.keys(o).length===0&&i.size>0&&(console.log("[XSD Parser] No root elements found, returning complex types"),i.forEach((g,x)=>{o[x]=g})),console.log("[XSD Parser] Final structure:",o),Object.keys(o).length>0?o:null}catch(n){return console.error("Error parsing XSD:",n),null}},$p=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))return null;const a=[],o=new Map,i=(x,f)=>{const w=x.split(":").pop()||"";if(o.has(w))return o.get(w);for(const y of f){const v=y.querySelector(`complexType[name="${w}"], xs\\:complexType[name="${w}"], xsd\\:complexType[name="${w}"]`);if(v){const N={};return c(v,N,0,f),o.set(w,N),N}const j=y.querySelector(`simpleType[name="${w}"], xs\\:simpleType[name="${w}"], xsd\\:simpleType[name="${w}"]`);if(j){const N=j.querySelector("restriction, xs\\:restriction, xsd\\:restriction");if(N)return(N.getAttribute("base")||"string").replace(/^(xs:|xsd:|tns:)/,"")}}return w.replace(/^(xs:|xsd:|tns:)/,"")},l=x=>{const f={};for(const[w,y]of x)f[w]=y;return f},c=(x,f,w=0,y)=>{const v=x.querySelectorAll(":scope > sequence > element, :scope > sequence > xs\\:element, :scope > sequence > xsd\\:element, :scope > element, :scope > xs\\:element, :scope > xsd\\:element"),j=[];v.forEach(N=>{const b=N.getAttribute("name"),E=N.getAttribute("type"),S=N.getAttribute("ref"),P=N.getAttribute("maxOccurs"),A=P==="unbounded"||P&&parseInt(P)>1;if(b||S){const L=b||S?.split(":").pop()||"",R=A?`${L}[]`:L;let I;const V=N.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(V){const O={};c(V,O,w+1,y),I=O}else if(E)I=i(E,y);else if(S){const O=S.split(":").pop()||"";for(const k of y){const T=k.querySelector(`element[name="${O}"], xs\\:element[name="${O}"], xsd\\:element[name="${O}"]`);if(T){const D=T.getAttribute("type");D&&(I=i(D,y));break}}I||(I="string")}else I="string";j.push([R,I])}});for(const[N,b]of j)f[N]=b},d=n.querySelectorAll("schema, xs\\:schema, xsd\\:schema");n.querySelectorAll("message, wsdl\\:message").forEach(x=>{x.querySelectorAll("part, wsdl\\:part").forEach(w=>{const y=w.getAttribute("element");if(y){const v=y.split(":").pop();for(const j of d){const N=j.querySelector(`element[name="${v}"], xs\\:element[name="${v}"], xsd\\:element[name="${v}"]`);if(N){const b=N.getAttribute("type");if(b){const E=i(b,d);typeof E=="object"?a.push([v,E]):a.push([v,{value:E}])}else{const E=N.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(E){const S={};c(E,S,0,d),a.push([v,S])}}break}}}})}),a.length===0&&d.forEach(x=>{x.querySelectorAll(":scope > element, :scope > xs\\:element, :scope > xsd\\:element").forEach(w=>{const y=w.getAttribute("name");if(y){const v=w.getAttribute("type");if(v){const j=i(v,d);typeof j=="object"?a.push([y,j]):a.push([y,{value:j}])}else{const j=w.querySelector("complexType, xs\\:complexType, xsd\\:complexType");if(j){const N={};c(j,N,0,d),a.push([y,N])}}}})});const m=l(a),p=n.querySelectorAll("operation, wsdl\\:operation");let g=null;if(p.length>0){const x=p[0],f=!!x.querySelector("input, wsdl\\:input"),w=!!x.querySelector("output, wsdl\\:output"),y=!!x.querySelector("fault, wsdl\\:fault");g={hasInput:f,hasOutput:w,hasFault:y,isSynchronous:f&&w,messageTypes:[]},f&&g.messageTypes.push("input"),w&&g.messageTypes.push("output"),y&&g.messageTypes.push("fault")}return Object.keys(m).length>0?{structure:m,operationInfo:g}:null}catch(t){return console.error("Error parsing WSDL:",t),null}},UO=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml"),r=n.querySelector("parsererror");if(r)return console.error("WSDL parsing error:",r),{names:[],hasMultiple:!1};const a=n.documentElement;console.log("WSDL root element:",a.tagName,"namespace:",a.namespaceURI);const o=[],i=n.getElementsByTagName("*");for(let d=0;d<i.length;d++){const u=i[d];(u.localName==="portType"||u.tagName==="portType"||u.tagName==="wsdl:portType")&&o.push(u)}console.log("Found portTypes:",o.length);const l=[];o.forEach(d=>{const u=d.getElementsByTagName("*");for(let m=0;m<u.length;m++){const p=u[m];(p.localName==="operation"||p.tagName==="operation"||p.tagName==="wsdl:operation")&&p.parentElement===d&&l.push(p)}});const c=[];if(console.log("Found operations in portType:",l.length),l.forEach(d=>{const u=d.getAttribute("name");console.log("Operation element:",d.tagName,"name attribute:",u),u&&!c.includes(u)&&(c.push(u),console.log("Added operation:",u))}),c.length===0){console.log("No operations in portType, checking binding elements...");const d=[];for(let u=0;u<i.length;u++){const m=i[u];(m.localName==="binding"||m.tagName==="binding"||m.tagName==="wsdl:binding")&&d.push(m)}console.log("Found bindings:",d.length),d.forEach(u=>{const m=u.getElementsByTagName("*");for(let p=0;p<m.length;p++){const g=m[p];if((g.localName==="operation"||g.tagName==="operation"||g.tagName==="wsdl:operation")&&g.parentElement===u){const x=g.getAttribute("name");x&&!c.includes(x)&&(c.push(x),console.log("Found operation in binding:",x))}}})}return{names:c,hasMultiple:c.length>1}}catch(t){return console.error("Error extracting WSDL operations:",t),{names:[],hasMultiple:!1}}},jj=e=>{try{const{names:t,hasMultiple:n}=UO(e);return console.log("WSDL operation extraction result:",{names:t,hasMultiple:n}),t.length===1?t[0]:(t.length>1,null)}catch(t){return console.error("Error extracting WSDL part name:",t),null}},wj=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))return null;const a=n.documentElement,o=a.getAttribute("targetNamespace")||"",i=n.querySelectorAll("address, soap\\:address, soap12\\:address");let l="";i.length>0&&(l=i[0].getAttribute("location")||"");let c="";for(let d=0;d<a.attributes.length;d++){const u=a.attributes[d];if(u.name.startsWith("xmlns:")&&u.value===o){c=u.name.replace("xmlns:","");break}}return{uri:o,prefix:c,targetNamespace:o,schemaLocation:l}}catch{return null}},BO=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml"),r=n.querySelector("parsererror");if(r)return console.error("WSDL parsing error:",r),[];const a=[],o=n.getElementsByTagName("*"),i=[];for(let c=0;c<o.length;c++){const d=o[c];(d.localName==="binding"||d.tagName==="binding"||d.tagName==="wsdl:binding")&&i.push(d)}return i.forEach(c=>{const d=c.getElementsByTagName("*");for(let u=0;u<d.length;u++){const m=d[u];if((m.localName==="operation"||m.tagName==="operation"||m.tagName==="wsdl:operation")&&m.parentElement===c){const p=m.getAttribute("name");if(p){const g=m.getElementsByTagName("*");for(let x=0;x<g.length;x++){const f=g[x];if(f.localName==="operation"&&(f.namespaceURI==="http://schemas.xmlsoap.org/wsdl/soap/"||f.namespaceURI==="http://schemas.xmlsoap.org/wsdl/soap12/")){const w=f.getAttribute("soapAction");w!==null&&a.push({operationName:p,soapAction:w})}}}}}}),a.filter((c,d,u)=>d===u.findIndex(m=>m.operationName===c.operationName))}catch(t){return console.error("Error extracting SOAP actions:",t),[]}},_p=e=>{const t={};return e.forEach(n=>{n.children&&n.children.length>0?t[n.name]=_p(n.children):t[n.name]=n.type}),t},Bl=e=>{const t={imports:[],includes:[],hasUnresolvedDependencies:!1};try{const r=new DOMParser().parseFromString(e,"text/xml");if(r.querySelector("parsererror"))return t;r.querySelectorAll("import, xs\\:import, xsd\\:import").forEach(l=>{const c=l.getAttribute("namespace"),d=l.getAttribute("schemaLocation");(c||d)&&(t.imports.push({namespace:c||void 0,schemaLocation:d||void 0,type:"import"}),d&&(t.hasUnresolvedDependencies=!0))}),r.querySelectorAll("include, xs\\:include, xsd\\:include").forEach(l=>{const c=l.getAttribute("schemaLocation");c&&(t.includes.push({schemaLocation:c,type:"include"}),t.hasUnresolvedDependencies=!0)})}catch(n){console.error("Error extracting XSD dependencies:",n)}return t},Vp=e=>{const t={uri:"",prefix:"",targetNamespace:"",schemaLocation:""};try{const a=new DOMParser().parseFromString(e,"text/xml").querySelector("schema, xs\\:schema, xsd\\:schema");if(!a)return t;const o=a.getAttribute("targetNamespace");o&&(t.targetNamespace=o,t.uri=o);const i=a.attributes;for(let d=0;d<i.length;d++){const u=i[d];if(u.name.startsWith("xmlns:")){const m=u.name.substring(6);u.value===o&&(t.prefix=m)}}const l=a.getAttribute("elementFormDefault");l&&(t.elementFormDefault=l);const c=a.getAttribute("attributeFormDefault");c&&(t.attributeFormDefault=c)}catch(n){console.error("Error extracting XSD namespace info:",n)}return t},Up=e=>{const t={imports:[],includes:[],hasUnresolvedDependencies:!1};try{const r=new DOMParser().parseFromString(e,"text/xml");if(r.querySelector("parsererror"))return t;r.querySelectorAll("schema, xs\\:schema, xsd\\:schema").forEach(l=>{l.querySelectorAll("import, xs\\:import, xsd\\:import").forEach(u=>{const m=u.getAttribute("namespace"),p=u.getAttribute("schemaLocation");(m||p)&&(t.imports.push({namespace:m||void 0,schemaLocation:p||void 0,type:"import"}),p&&(p.includes("../")||p.includes("./")||p.startsWith("http"))&&(t.hasUnresolvedDependencies=!0))}),l.querySelectorAll("include, xs\\:include, xsd\\:include").forEach(u=>{const m=u.getAttribute("schemaLocation");m&&(t.includes.push({schemaLocation:m,type:"include"}),(m.includes("../")||m.includes("./")||m.startsWith("http"))&&(t.hasUnresolvedDependencies=!0))})}),r.querySelectorAll("definitions > import, wsdl\\:definitions > wsdl\\:import").forEach(l=>{const c=l.getAttribute("namespace"),d=l.getAttribute("location");(c||d)&&(t.imports.push({namespace:c||void 0,schemaLocation:d||void 0,type:"import"}),d&&(d.includes("../")||d.includes("./")||d.startsWith("http"))&&(t.hasUnresolvedDependencies=!0))})}catch(n){console.error("Error extracting WSDL dependencies:",n)}return t};class TK{async createStructure(t){return G.post("/structures",t)}async getStructures(t){const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&(Array.isArray(o)?o.forEach(i=>n.append(a,i.toString())):n.append(a,o.toString()))});const r=`/structures${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async getStructure(t){return G.get(`/structures/${t}`)}async updateStructure(t,n){return G.put(`/structures/${t}`,n)}async deleteStructure(t){return G.delete(`/structures/${t}`)}async validateStructure(t,n){return G.post("/structures/validate",{structure:t,type:n})}async parseStructure(t,n){return G.post("/structures/parse",{content:t,type:n})}async generateSampleData(t,n){const r=`/structures/${t}/sample${n?`?format=${n}`:""}`;return G.get(r)}async getStructureUsage(t){return G.get(`/structures/${t}/usage`)}async cloneStructure(t,n){return G.post(`/structures/${t}/clone`,{name:n})}async compareStructures(t,n){return G.post("/structures/compare",{sourceId:t,targetId:n})}async getStructureMappings(t,n){return G.get(`/structures/mappings?source=${t}&target=${n}`)}async exportStructure(t,n){return G.get(`/structures/${t}/export?format=${n}`)}async searchStructures(t,n){const r=new URLSearchParams({q:t});return n&&Object.entries(n).forEach(([a,o])=>{o!==void 0&&r.append(a,o.toString())}),G.get(`/structures/search?${r.toString()}`)}async getStructureVersions(t){return G.get(`/structures/${t}/versions`)}}const Mn=new TK,PK=[{id:"1",name:"Business Component Order",type:"json",description:"Standard businessComponent order structure",structure:{orderId:"string",businessComponentId:"string",items:"array",totalAmount:"decimal",orderDate:"datetime"},createdAt:"2024-01-15",usage:"source"},{id:"2",name:"Payment Response",type:"soap",description:"Payment gateway response format",structure:{transactionId:"string",status:"string",amount:"decimal",currency:"string"},createdAt:"2024-01-10",usage:"target"},{id:"3",name:"Business Component Profile",type:"json",description:"Detailed businessComponent profile with nested address information",structure:{businessComponent:{id:"string",firstName:"string",lastName:"string",email:"string",phone:"string",dateOfBirth:"date",address:{street:"string",city:"string",state:"string",zipCode:"string",country:"string"},preferences:{newsletter:"boolean",smsNotifications:"boolean",language:"string"}}},createdAt:"2024-01-12",usage:"source"},{id:"4",name:"Product Catalog",type:"json",description:"Product information with categories and pricing",structure:{products:{id:"string",name:"string",description:"string",category:{id:"string",name:"string",parentCategory:"string"},pricing:{basePrice:"decimal",currency:"string",discountPercentage:"decimal",taxRate:"decimal"},inventory:{quantity:"integer",warehouse:"string",lastUpdated:"datetime"},specifications:{weight:"decimal",dimensions:{length:"decimal",width:"decimal",height:"decimal"},color:"string",material:"string"}}},createdAt:"2024-01-08",usage:"source"},{id:"5",name:"Invoice Data",type:"xsd",description:"Standard invoice format for accounting systems",structure:{invoice:{header:{invoiceNumber:"string",invoiceDate:"date",dueDate:"date",currency:"string"},vendor:{vendorId:"string",companyName:"string",address:{street:"string",city:"string",postalCode:"string",country:"string"},taxId:"string"},businessComponent:{businessComponentId:"string",companyName:"string",contactPerson:"string",address:{street:"string",city:"string",postalCode:"string",country:"string"}},lineItems:{item:{lineNumber:"integer",productId:"string",description:"string",quantity:"decimal",unitPrice:"decimal",taxAmount:"decimal",lineTotal:"decimal"}},totals:{subtotal:"decimal",totalTax:"decimal",totalAmount:"decimal"}}},createdAt:"2024-01-05",usage:"target"},{id:"6",name:"Sales Report",type:"json",description:"Comprehensive sales reporting structure",structure:{report:{metadata:{reportId:"string",generatedAt:"datetime",period:{startDate:"date",endDate:"date"},reportType:"string"},summary:{totalSales:"decimal",totalOrders:"integer",averageOrderValue:"decimal",topProducts:{productId:"string",productName:"string",salesCount:"integer",revenue:"decimal"}},salesData:{daily:{date:"date",orders:"integer",revenue:"decimal",customers:"integer"},byRegion:{region:"string",orders:"integer",revenue:"decimal",growthRate:"decimal"}}}},createdAt:"2024-01-03",usage:"target"},{id:"7",name:"Employee Record",type:"custom",description:"HR system employee data structure",structure:{employee:{personalInfo:{employeeId:"string",firstName:"string",lastName:"string",middleName:"string",dateOfBirth:"date",ssn:"string",address:{home:{street:"string",city:"string",state:"string",zipCode:"string"},mailing:{street:"string",city:"string",state:"string",zipCode:"string"}}},employment:{hireDate:"date",department:"string",position:"string",manager:"string",salary:{amount:"decimal",currency:"string",payFrequency:"string"},benefits:{healthInsurance:"boolean",dentalInsurance:"boolean",retirement401k:"boolean",vacationDays:"integer"}}}},createdAt:"2024-01-01",usage:"source"}],ah=()=>{const[e,t]=h.useState([]),[n,r]=h.useState(null),[a,o]=h.useState(!1),{toast:i}=_e();h.useEffect(()=>{l()},[]);const l=async()=>{try{o(!0),console.log("Loading data structures from backend...");const p=await Mn.getStructures();if(p.success&&p.data){console.log("API structures loaded:",p.data.structures||p.data);const g=p.data.structures||p.data||[];if(typeof g=="string"&&g.includes("<!DOCTYPE html>")){console.log("API endpoint not implemented yet, showing sample data"),t(PK),i({title:"Info",description:"Data structures API not available yet. Showing sample data."});return}console.log(`API returned ${g.length} structures`),t(g)}else console.log("API failed, showing empty list"),t([])}catch(p){console.error("Error loading structures, showing empty list:",p),t([])}finally{o(!1)}};return{structures:e,selectedStructure:n,setSelectedStructure:r,saveStructure:async(p,g,x,f,w,y,v,j,N,b,E,S)=>{if(!p)return i({title:"Validation Error",description:"Please provide a structure name",variant:"destructive"}),!1;let P={},A={};if(f)P=vj(f);else if(v){const T=$p(v);T&&typeof T=="object"&&"structure"in T?(P=T.structure,T.operationInfo&&(A.operationInfo=T.operationInfo)):P=T;const D=Up(v);(D.imports.length>0||D.includes.length>0)&&(A.dependencies=D,D.hasUnresolvedDependencies&&(!S||S.length===0)&&i({title:"Warning: External Dependencies Detected",description:"This WSDL has external schema dependencies. You may need to upload the dependent XSD files separately.",variant:"default"}))}else if(w){let T=w,D;if(b?.schemaLocationId)try{const $=new DOMParser().parseFromString(w,"text/xml"),B=$.querySelectorAll("import, xs\\:import, xsd\\:import");let W=!1;B.forEach(q=>{q.getAttribute("schemaLocation")&&(q.setAttribute("schemaLocation",`structure://${b.schemaLocationId}`),W=!0)}),W&&(T=new XMLSerializer().serializeToString($),D=T)}catch(H){console.error("Error updating schema locations:",H)}let M={};if(b?.schemaLocationId)try{const H=await Mn.getStructure(b.schemaLocationId);H.success&&H.data&&(M[`structure://${b.schemaLocationId}`]=H.data.structure,M[b.schemaLocationId]=H.data.structure)}catch(H){console.error("Error fetching linked dependency:",H)}P=_r(T,M)||{error:"Failed to parse XSD structure"},D&&(w=D);const _=Bl(w);(_.imports.length>0||_.includes.length>0)&&(A.dependencies=_,_.hasUnresolvedDependencies&&(!S||S.length===0)&&i({title:"Warning: External Dependencies Detected",description:"This XSD has external schema dependencies. You may need to upload the dependent XSD files separately.",variant:"default"}))}else if(y)P={message:"EDMX parsing not fully implemented yet"};else if(j.length>0)P=_p(j);else return i({title:"Validation Error",description:"Please define a structure using JSON, XSD, EDMX, WSDL, or custom fields",variant:"destructive"}),!1;let L,R;f?(L=f,R="json"):v?(L=v,R="xml"):w?(L=w,R="xml"):y&&(L=y,R="xml"),S&&S.length>0&&(A.resolvedFiles=S.map(T=>({name:T.name,type:T.type,content:T.content}))),b?.schemaLocationId&&(A.linkedDependencies={schemaLocationId:b.schemaLocationId,schemaLocation:b.schemaLocation});const I=w&&A.dependencies?.hasUnresolvedDependencies||v&&A.dependencies?.hasUnresolvedDependencies,V=b?.schemaLocationId,O=I&&(!S||S.length===0)&&!V;console.log("Draft check:",{hasDependencies:I,isDraft:O,hasLinkedDependency:V,xsdDependencies:w?A.dependencies:null,wsdlDependencies:v?A.dependencies:null,resolvedDependencies:S}),O&&(A.isDraft=!0,A.draftReason="unresolved_dependencies");const k={name:p,type:f?"json":v?"wsdl":w?"xsd":"custom",description:g,usage:x,structure:P,originalContent:L,originalFormat:R,businessComponentId:E,namespace:(N==="xsd"||N==="wsdl"||N==="edmx")&&b.uri?b:void 0,metadata:Object.keys(A).length>0?A:void 0};try{console.log("Saving structure to backend:",k);const T=await Mn.createStructure(k);return T.success&&T.data?(console.log("Structure saved successfully:",T.data),await l(),i({title:"Structure Saved",description:`Data structure "${p}" has been created successfully`}),!0):(console.error("Failed to save structure:",T.error),i({title:"Save Failed",description:"Failed to save data structure to the backend",variant:"destructive"}),!1)}catch(T){console.error("Error saving structure:",T);let D="An error occurred while saving the data structure";return T.response?(console.error("Error response data:",T.response),T.response.detail?D=T.response.detail:T.response.message?D=T.response.message:T.response.error?D=T.response.error:typeof T.response=="string"&&(D=T.response)):T.message&&(D=T.message),i({title:"Save Error",description:D,variant:"destructive"}),!1}},updateStructure:async(p,g,x,f,w,y,v,j,N,b,E,S)=>{if(!g)return i({title:"Validation Error",description:"Please provide a structure name",variant:"destructive"}),!1;let P={},A={},L;if(w)P=vj(w);else if(j){const D=$p(j);D&&typeof D=="object"&&"structure"in D?(P=D.structure,D.operationInfo&&(A.operationInfo=D.operationInfo)):P=D}else if(y){L=y;let D=y,M;if(E?.schemaLocationId)try{const $=new DOMParser().parseFromString(y,"text/xml"),B=$.querySelectorAll("import, xs\\:import, xsd\\:import");let W=!1;B.forEach(q=>{q.getAttribute("schemaLocation")&&(q.setAttribute("schemaLocation",`structure://${E.schemaLocationId}`),W=!0)}),W&&(D=new XMLSerializer().serializeToString($),M=D)}catch(H){console.error("Error updating schema locations:",H)}let _={};if(E?.schemaLocationId)try{const H=await Mn.getStructure(E.schemaLocationId);H.success&&H.data&&(_[`structure://${E.schemaLocationId}`]=H.data.structure,_[E.schemaLocationId]=H.data.structure)}catch(H){console.error("Error fetching linked dependency:",H)}P=_r(D,_)||{error:"Failed to parse XSD structure"},M&&(y=M)}else if(v)P={message:"EDMX parsing not fully implemented yet"};else if(N.length>0)P=_p(N);else return i({title:"Validation Error",description:"Please define a structure using JSON, XSD, EDMX, WSDL, or custom fields",variant:"destructive"}),!1;let R,I;w?(R=w,I="json"):j?(R=j,I="xml"):y?(R=L||y,I="xml"):v&&(R=v,I="xml"),E?.schemaLocationId&&(A.linkedDependencies={schemaLocationId:E.schemaLocationId,schemaLocation:E.schemaLocation});const V=y&&A.dependencies?.hasUnresolvedDependencies||j&&A.dependencies?.hasUnresolvedDependencies,O=E?.schemaLocationId,k=V&&!O;k?(A.isDraft=!0,A.draftReason="unresolved_dependencies"):A.isDraft&&(delete A.isDraft,delete A.draftReason);const T={name:g,type:w?"json":j?"wsdl":y?"xsd":"custom",description:x,usage:f,structure:P,originalContent:R,originalFormat:I,businessComponentId:S,namespace:(b==="xsd"||b==="wsdl"||b==="edmx")&&E.uri?E:void 0,metadata:Object.keys(A).length>0?A:void 0};try{console.log("Updating structure:",p,T),console.log("Update draft check:",{hasDependencies:V,hasLinkedDependency:O,isDraft:k,schemaLocationId:E?.schemaLocationId,metadata:A});const D=await Mn.updateStructure(p,T);return D.success&&D.data?(console.log("Structure updated successfully:",D.data),await l(),i({title:"Structure Updated",description:`Data structure "${g}" has been updated successfully`}),!0):(console.error("Failed to update structure:",D.error),i({title:"Update Failed",description:"Failed to update data structure",variant:"destructive"}),!1)}catch(D){console.error("Error updating structure:",D);let M="An error occurred while updating the data structure";return D.response?(console.error("Error response data:",D.response),D.response.detail?M=D.response.detail:D.response.message?M=D.response.message:D.response.error?M=D.response.error:typeof D.response=="string"&&(M=D.response)):D.message&&(M=D.message),i({title:"Update Error",description:M,variant:"destructive"}),!1}},deleteStructure:async p=>{try{console.log("Deleting structure:",p);const g=await Mn.deleteStructure(p);g.success?(console.log("Structure deleted successfully"),await l(),n?.id===p&&r(null),i({title:"Structure Deleted",description:"Data structure has been removed"})):(console.error("Failed to delete structure:",g.error),i({title:"Delete Failed",description:"Failed to delete data structure",variant:"destructive"}))}catch(g){console.error("Error deleting structure:",g),i({title:"Delete Error",description:"An error occurred while deleting the data structure",variant:"destructive"})}},duplicateStructure:async p=>{try{console.log("Duplicating structure:",p.name);const g=await Mn.cloneStructure(p.id,`${p.name} (Copy)`);g.success&&g.data?(console.log("Structure duplicated successfully:",g.data),await l(),i({title:"Structure Duplicated",description:`Created copy of "${p.name}"`})):(console.error("Failed to duplicate structure:",g.error),i({title:"Duplicate Failed",description:"Failed to duplicate data structure",variant:"destructive"}))}catch(g){console.error("Error duplicating structure:",g),i({title:"Duplicate Error",description:"An error occurred while duplicating the data structure",variant:"destructive"})}},loading:a,refreshStructures:l}};function HO({isOpen:e,onOpenChange:t,selectedService:n,onSelectService:r,title:a,usage:o,businessComponentId:i}){const{structures:l}=ah(),c=l.filter(d=>{const u=d.usage===o,m=!i||d.businessComponentId===i;return u&&m});return s.jsxs(ft,{open:e,onOpenChange:t,children:[s.jsx(rh,{asChild:!0,children:s.jsxs(z,{variant:"outline",size:"sm",children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Select"]})}),s.jsxs(mt,{className:"max-w-2xl",children:[s.jsx(gt,{children:s.jsx(xt,{children:a})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Select Data Structure"}),s.jsxs(se,{onValueChange:r,value:n,children:[s.jsx(ee,{className:"w-full",children:s.jsx(ne,{placeholder:"Choose a data structure..."})}),s.jsx(te,{className:"bg-background border shadow-lg z-50",children:c.map(d=>s.jsx(F,{value:d.name,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:d.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[d.type.toUpperCase()," • ",d.description||"No description"]})]})},d.id))})]})]}),c.length===0&&s.jsx("div",{className:"border rounded-md p-3 space-y-2",children:s.jsxs("div",{className:"text-sm text-muted-foreground",children:["No data structures found for ",o," usage. Please create data structures on the Data Structures page first."]})}),n&&s.jsxs("div",{className:"border rounded-md p-3 space-y-2 bg-muted/20",children:[s.jsx("div",{className:"text-sm font-medium",children:"Selected Structure"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:c.find(d=>d.name===n)?.description||n})]})]})]})]})}function AK({fields:e,mappings:t,selectedService:n,searchValue:r,showSelector:a,selectedField:o,onSearchChange:i,onShowSelectorChange:l,onSelectService:c,onToggleExpanded:d,onDragStart:u,onDragEnd:m,onSelectField:p,isLoading:g=!1,hideSelector:x=!1,label:f="Source Message"}){return s.jsxs("div",{className:"w-1/3 border-r bg-muted/20 animate-fade-in",children:[s.jsxs("div",{className:"p-4 border-b bg-background",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(C,{className:"font-semibold",children:f}),!x&&s.jsx(HO,{isOpen:a,onOpenChange:l,selectedService:n,onSelectService:c,title:"Select Source Message",usage:"source"})]}),s.jsx("div",{className:"text-sm text-muted-foreground mb-3 p-2 bg-background border rounded",children:n||"No source selected"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(U,{placeholder:"Search source fields...",value:r,onChange:w=>i(w.target.value),className:"pl-10"})]})]}),s.jsx("div",{className:"p-4 h-[calc(100%-140px)] overflow-y-auto",children:g?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(vt,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Converting structure to XML..."})]})}):e.length===0?s.jsx(We,{children:s.jsx(ze,{children:"Select a source data structure to view fields"})}):s.jsx(_O,{fields:e,mappings:t,side:"source",selectedField:o,onToggleExpanded:d,onDragStart:u,onDragEnd:m,onSelectField:p})})]})}function DK({fields:e,mappings:t,selectedService:n,searchValue:r,showSelector:a,selectedField:o,onSearchChange:i,onShowSelectorChange:l,onSelectService:c,onToggleExpanded:d,onDragOver:u,onDrop:m,onSelectField:p,isLoading:g=!1,hideSelector:x=!1,label:f="Target Message"}){return s.jsxs("div",{className:"w-1/3 border-l bg-muted/20 animate-fade-in",children:[s.jsxs("div",{className:"p-4 border-b bg-background",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(C,{className:"font-semibold",children:f}),!x&&s.jsx(HO,{isOpen:a,onOpenChange:l,selectedService:n,onSelectService:c,title:"Select Target Message",usage:"target"})]}),s.jsx("div",{className:"text-sm text-muted-foreground mb-3 p-2 bg-background border rounded",children:n||"No target selected"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),s.jsx(U,{placeholder:"Search target fields...",value:r,onChange:w=>i(w.target.value),className:"pl-10"})]})]}),s.jsx("div",{className:"p-4 h-[calc(100%-140px)] overflow-y-auto",children:g?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(vt,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Converting structure to XML..."})]})}):e.length===0?s.jsx(We,{children:s.jsx(ze,{children:"Select a target data structure to view fields"})}):s.jsx(_O,{fields:e,mappings:t,side:"target",selectedField:o,onToggleExpanded:d,onDragOver:u,onDrop:m,onSelectField:p})})]})}class kK{functionsCache=null;cacheExpiry=0;cacheDuration=5*60*1e3;async getAllFunctions(){if(this.functionsCache&&Date.now()<this.cacheExpiry)return this.functionsCache;try{const n=(await ut.get("/development/functions")).builtInFunctions.map(r=>{let a=[];if(r.parameters)if(typeof r.parameters=="string")try{a=JSON.parse(r.parameters)}catch(o){console.error("Failed to parse parameters for function",r.name,o),a=[]}else a=r.parameters;else{const o=r.signature.match(/\((.*)\)/);o&&o[1]&&(a=o[1].split(",").map(l=>l.trim()).map(l=>({name:l,type:"any",required:!0})))}return{name:r.name,category:r.category,description:r.description,parameters:a,isBuiltIn:!0,execute:this.getExecuteFunction(r.name),javaTemplate:this.getJavaTemplate(r.name,a)}});return this.functionsCache=n,this.cacheExpiry=Date.now()+this.cacheDuration,n}catch(t){return console.error("Failed to fetch functions from API:",t),[]}}async getBuiltInFunctionByName(t){try{const n=await ut.get(`/development/functions/built-in/${t}`);if(n.parameters&&typeof n.parameters=="string")try{n.parameters=JSON.parse(n.parameters)}catch(r){console.error("Failed to parse parameters:",r),n.parameters=[]}return n}catch(n){return console.error("Failed to fetch function by name:",n),null}}clearCache(){this.functionsCache=null,this.cacheExpiry=0}getExecuteFunction(t){return{concat:(r,a,o)=>o?`${r}${o}${a}`:`${r}${a}`,substring:(r,a,o)=>r.substring(a,o),replace:(r,a,o)=>r.replace(a,o),trim:r=>r.trim(),toUpperCase:r=>r.toUpperCase(),toLowerCase:r=>r.toLowerCase(),capitalize:r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase(),length:r=>r.length,padLeft:(r,a,o=" ")=>r.padStart(a,o),padRight:(r,a,o=" ")=>r.padEnd(a,o),currentDate:()=>new Date().toISOString(),formatDate:(r,a)=>new Date(r).toLocaleDateString(),parseDate:(r,a)=>new Date(r).toISOString(),addDays:(r,a)=>{const o=new Date(r);return o.setDate(o.getDate()+a),o.toISOString()},addMonths:(r,a)=>{const o=new Date(r);return o.setMonth(o.getMonth()+a),o.toISOString()},datesDifference:(r,a)=>{const o=new Date(r),i=new Date(a);return Math.floor((i.getTime()-o.getTime())/864e5)},round:(r,a=0)=>Number(r.toFixed(a)),floor:r=>Math.floor(r),ceil:r=>Math.ceil(r),abs:r=>Math.abs(r),parseNumber:r=>parseFloat(r),formatNumber:(r,a)=>r.toFixed(2),defaultIfEmpty:(r,a)=>r||a}[t]}getJavaTemplate(t,n){const r=n.map((a,o)=>`{${o}}`).join(", ");return`${t}(${r})`}}const qO=new kK,MK=[{name:"add",category:"math",description:"Add two numbers",parameters:[{name:"a",type:"number",required:!0,description:"First number"},{name:"b",type:"number",required:!0,description:"Second number"}],execute:(e,t)=>e+t,javaTemplate:"add({0}, {1})"},{name:"subtract",category:"math",description:"Subtract two numbers",parameters:[{name:"a",type:"number",required:!0,description:"First number"},{name:"b",type:"number",required:!0,description:"Second number"}],execute:(e,t)=>e-t,javaTemplate:"subtract({0}, {1})"},{name:"multiply",category:"math",description:"Multiply two numbers",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>e*t,javaTemplate:"multiply({0}, {1})"},{name:"divide",category:"math",description:"Divide two numbers",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>e/t,javaTemplate:"divide({0}, {1})"},{name:"equals",category:"math",description:"Check if two numbers are equal",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>e===t,javaTemplate:"equals({0}, {1})"},{name:"absolute",category:"math",description:"Get absolute value of a number",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.abs(e),javaTemplate:"absolute({0})"},{name:"sqrt",category:"math",description:"Get square root of a number",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.sqrt(e),javaTemplate:"sqrt({0})"},{name:"square",category:"math",description:"Square a number",parameters:[{name:"value",type:"number",required:!0}],execute:e=>e*e,javaTemplate:"square({0})"},{name:"sign",category:"math",description:"Get sign of a number (-1, 0, or 1)",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.sign(e),javaTemplate:"sign({0})"},{name:"neg",category:"math",description:"Negate a number",parameters:[{name:"value",type:"number",required:!0}],execute:e=>-e,javaTemplate:"neg({0})"},{name:"inv",category:"math",description:"Get inverse of a number (1/x)",parameters:[{name:"value",type:"number",required:!0}],execute:e=>1/e,javaTemplate:"inv({0})"},{name:"power",category:"math",description:"Raise number to power",parameters:[{name:"base",type:"number",required:!0},{name:"exponent",type:"number",required:!0}],execute:(e,t)=>Math.pow(e,t),javaTemplate:"power({0}, {1})"},{name:"lesser",category:"math",description:"Check if first number is less than second",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>e<t,javaTemplate:"lesser({0}, {1})"},{name:"greater",category:"math",description:"Check if first number is greater than second",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>e>t,javaTemplate:"greater({0}, {1})"},{name:"max",category:"math",description:"Get maximum of two numbers",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>Math.max(e,t),javaTemplate:"max({0}, {1})"},{name:"min",category:"math",description:"Get minimum of two numbers",parameters:[{name:"a",type:"number",required:!0},{name:"b",type:"number",required:!0}],execute:(e,t)=>Math.min(e,t),javaTemplate:"min({0}, {1})"},{name:"ceil",category:"math",description:"Round number up to nearest integer",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.ceil(e),javaTemplate:"ceil({0})"},{name:"floor",category:"math",description:"Round number down to nearest integer",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.floor(e),javaTemplate:"floor({0})"},{name:"round",category:"math",description:"Round number to nearest integer",parameters:[{name:"value",type:"number",required:!0}],execute:e=>Math.round(e),javaTemplate:"round({0})"},{name:"counter",category:"math",description:"Generate incremental counter",parameters:[{name:"start",type:"number",required:!1,description:"Starting value"},{name:"step",type:"number",required:!1,description:"Increment step"}],execute:(e=1,t=1)=>e+t,javaTemplate:"counter({0}, {1})"},{name:"formatNumber",category:"math",description:"Format number with specified total digits and decimal places",parameters:[{name:"value",type:"number",required:!0,description:"Number to format"},{name:"totalDigits",type:"number",required:!0,description:"Total number of digits required (adds trailing zeros)"},{name:"decimals",type:"number",required:!1,description:"Number of decimal places"}],execute:(e,t,n=2)=>Number(e.toFixed(n)).toString().padStart(t,"0"),javaTemplate:"formatNumber({0}, {1}, {2})"},{name:"sum",category:"math",description:"Sum multiple numbers",parameters:[{name:"values",type:"array",required:!0,description:"Array of numbers to sum"}],execute:e=>e.reduce((t,n)=>t+n,0),javaTemplate:"sum({0})"},{name:"average",category:"math",description:"Calculate average of numbers",parameters:[{name:"values",type:"array",required:!0,description:"Array of numbers"}],execute:e=>e.reduce((t,n)=>t+n,0)/e.length,javaTemplate:"average({0})"},{name:"count",category:"math",description:"Count elements in array",parameters:[{name:"values",type:"array",required:!0,description:"Array to count"}],execute:e=>e.length,javaTemplate:"count({0})"},{name:"index",category:"math",description:"Get current index in iteration",parameters:[{name:"position",type:"number",required:!0,description:"Current position"}],execute:e=>e,javaTemplate:"index({0})"}],RK=[{name:"concat",category:"text",description:"Concatenate two strings with optional delimiter",parameters:[{name:"string1",type:"string",required:!0,description:"First string to concatenate"},{name:"string2",type:"string",required:!0,description:"Second string to concatenate"},{name:"delimiter",type:"string",required:!1,description:"Optional delimiter between strings"}],execute:(e,t,n)=>n?e+n+t:e+t,javaTemplate:"concat({0}, {1}, {2})"},{name:"substring",category:"text",description:"Extract substring from text",parameters:[{name:"text",type:"string",required:!0},{name:"start",type:"number",required:!0},{name:"end",type:"number",required:!1}],execute:(e,t,n)=>e.substring(t,n),javaTemplate:"substring({0}, {1}, {2})"},{name:"equals",category:"text",description:"Check if two strings are equal",parameters:[{name:"string1",type:"string",required:!0},{name:"string2",type:"string",required:!0}],execute:(e,t)=>e===t,javaTemplate:"equals({0}, {1})"},{name:"indexOf",category:"text",description:"Find index of substring",parameters:[{name:"text",type:"string",required:!0},{name:"searchValue",type:"string",required:!0}],execute:(e,t)=>e.indexOf(t),javaTemplate:"indexOf({0}, {1})"},{name:"lastIndexOf",category:"text",description:"Find last index of substring",parameters:[{name:"text",type:"string",required:!0},{name:"searchValue",type:"string",required:!0}],execute:(e,t)=>e.lastIndexOf(t),javaTemplate:"lastIndexOf({0}, {1})"},{name:"compare",category:"text",description:"Compare two strings lexicographically",parameters:[{name:"string1",type:"string",required:!0},{name:"string2",type:"string",required:!0}],execute:(e,t)=>e.localeCompare(t),javaTemplate:"compare({0}, {1})"},{name:"replaceString",category:"text",description:"Replace substring in text",parameters:[{name:"text",type:"string",required:!0},{name:"searchValue",type:"string",required:!0},{name:"replaceValue",type:"string",required:!0}],execute:(e,t,n)=>e.replace(t,n),javaTemplate:"replaceString({0}, {1}, {2})"},{name:"length",category:"text",description:"Get length of string",parameters:[{name:"text",type:"string",required:!0}],execute:e=>e.length,javaTemplate:"length({0})"},{name:"endsWith",category:"text",description:"Check if string ends with specified suffix",parameters:[{name:"text",type:"string",required:!0},{name:"suffix",type:"string",required:!0}],execute:(e,t)=>e.endsWith(t),javaTemplate:"endsWith({0}, {1})"},{name:"startsWith",category:"text",description:"Check if string starts with specified prefix",parameters:[{name:"text",type:"string",required:!0},{name:"prefix",type:"string",required:!0}],execute:(e,t)=>e.startsWith(t),javaTemplate:"startsWith({0}, {1})"},{name:"toUpperCase",category:"text",description:"Convert text to uppercase",parameters:[{name:"text",type:"string",required:!0}],execute:e=>e.toUpperCase(),javaTemplate:"toUpperCase({0})"},{name:"toLowerCase",category:"text",description:"Convert text to lowercase",parameters:[{name:"text",type:"string",required:!0}],execute:e=>e.toLowerCase(),javaTemplate:"toLowerCase({0})"},{name:"trim",category:"text",description:"Remove whitespace from both ends",parameters:[{name:"text",type:"string",required:!0}],execute:e=>e.trim(),javaTemplate:"trim({0})"}],FK=[{name:"and",category:"boolean",description:"Logical AND operation",parameters:[{name:"a",type:"boolean",required:!0},{name:"b",type:"boolean",required:!0}],execute:(e,t)=>e&&t,javaTemplate:"and({0}, {1})"},{name:"or",category:"boolean",description:"Logical OR operation",parameters:[{name:"a",type:"boolean",required:!0},{name:"b",type:"boolean",required:!0}],execute:(e,t)=>e||t,javaTemplate:"or({0}, {1})"},{name:"not",category:"boolean",description:"Logical NOT operation",parameters:[{name:"value",type:"boolean",required:!0}],execute:e=>!e,javaTemplate:"not({0})"},{name:"equals",category:"boolean",description:"Check if two boolean values are equal",parameters:[{name:"a",type:"boolean",required:!0},{name:"b",type:"boolean",required:!0}],execute:(e,t)=>e===t,javaTemplate:"equals({0}, {1})"},{name:"notEquals",category:"boolean",description:"Check if two values are not equal",parameters:[{name:"a",type:"string",required:!0},{name:"b",type:"string",required:!0}],execute:(e,t)=>e!==t,javaTemplate:"notEquals({0}, {1})"},{name:"if",category:"boolean",description:"Conditional logic with true/false branches",parameters:[{name:"condition",type:"boolean",required:!0},{name:"trueValue",type:"string",required:!0},{name:"falseValue",type:"string",required:!0}],execute:(e,t,n)=>e?t:n,javaTemplate:"if({0}, {1}, {2})"},{name:"ifWithoutElse",category:"boolean",description:"Conditional logic without else branch",parameters:[{name:"condition",type:"boolean",required:!0},{name:"trueValue",type:"string",required:!0}],execute:(e,t)=>e?t:null,javaTemplate:"ifWithoutElse({0}, {1})"},{name:"isNil",category:"boolean",description:"Check if value is null or undefined",parameters:[{name:"value",type:"string",required:!0}],execute:e=>e==null,javaTemplate:"isNil({0})"}],OK=[{name:"fixValues",category:"conversion",description:"Fix and validate values according to specified format",parameters:[{name:"value",type:"string",required:!0,description:"Value to fix"},{name:"format",type:"string",required:!0,description:"Target format"}],execute:(e,t)=>e,javaTemplate:"fixValues({0}, {1})"}],IK=[{name:"currentDate",category:"date",description:"Get current date",parameters:[{name:"format",type:"string",required:!1,description:"Date format (optional)"}],execute:e=>new Date().toISOString(),javaTemplate:"currentDate({0})"},{name:"dateTrans",category:"date",description:"Transform date format",parameters:[{name:"date",type:"string",required:!0,description:"Input date"},{name:"fromFormat",type:"string",required:!0,description:"Input date format"},{name:"toFormat",type:"string",required:!0,description:"Output date format"},{name:"firstWeekday",type:"string",required:!1,description:"First day of week (Sunday, Monday, etc.)"},{name:"minDays",type:"number",required:!1,description:"Minimum days in first week"},{name:"lenient",type:"boolean",required:!1,description:"Enable lenient parsing"}],execute:(e,t,n,r,a,o)=>e,javaTemplate:"dateTrans({0}, {1}, {2}, {3}, {4}, {5})"},{name:"dateBefore",category:"date",description:"Check if first date is before second date",parameters:[{name:"date1",type:"string",required:!0},{name:"date2",type:"string",required:!0}],execute:(e,t)=>new Date(e)<new Date(t),javaTemplate:"dateBefore({0}, {1})"},{name:"dateAfter",category:"date",description:"Check if first date is after second date",parameters:[{name:"date1",type:"string",required:!0},{name:"date2",type:"string",required:!0}],execute:(e,t)=>new Date(e)>new Date(t),javaTemplate:"dateAfter({0}, {1})"},{name:"compareDates",category:"date",description:"Compare two dates (-1, 0, 1)",parameters:[{name:"date1",type:"string",required:!0},{name:"date2",type:"string",required:!0}],execute:(e,t)=>{const n=new Date(e),r=new Date(t);return n<r?-1:n>r?1:0},javaTemplate:"compareDates({0}, {1})"}],LK=[{name:"createIf",category:"node",description:"Create conditional node structure",parameters:[{name:"condition",type:"boolean",required:!0},{name:"value",type:"string",required:!0}],execute:(e,t)=>e?t:null,javaTemplate:"createIf({0}, {1})"},{name:"removeContexts",category:"node",description:"Remove context from node structure",parameters:[{name:"node",type:"string",required:!0}],execute:e=>e,javaTemplate:"removeContexts({0})"},{name:"replaceValue",category:"node",description:"Replace value in node structure",parameters:[{name:"node",type:"string",required:!0},{name:"oldValue",type:"string",required:!0},{name:"newValue",type:"string",required:!0}],execute:(e,t,n)=>e.replace(t,n),javaTemplate:"replaceValue({0}, {1}, {2})"},{name:"exists",category:"node",description:"Check if node exists",parameters:[{name:"node",type:"string",required:!0}],execute:e=>e!=null&&e!=="",javaTemplate:"exists({0})"},{name:"getHeader",category:"node",description:"Get header value from message",parameters:[{name:"headerName",type:"string",required:!0}],execute:e=>`header_${e}`,javaTemplate:"getHeader({0})"},{name:"getProperty",category:"node",description:"Get property value",parameters:[{name:"propertyName",type:"string",required:!0}],execute:e=>`property_${e}`,javaTemplate:"getProperty({0})"},{name:"splitByValue",category:"node",description:"Split node by delimiter",parameters:[{name:"value",type:"string",required:!0},{name:"delimiter",type:"string",required:!0}],execute:(e,t)=>e.split(t),javaTemplate:"splitByValue({0}, {1})"},{name:"collapseContexts",category:"node",description:"Collapse multiple contexts into one",parameters:[{name:"contexts",type:"array",required:!0}],execute:e=>e.join(""),javaTemplate:"collapseContexts({0})"},{name:"useOneAsMany",category:"node",description:"Replicate a field that occurs once to pair with fields that occur multiple times",parameters:[{name:"singleField",type:"string",required:!0,description:"Field that occurs 1..1 (once)"},{name:"countField",type:"string",required:!0,description:"Field that determines replication count"},{name:"multipleField",type:"string",required:!0,description:"Field that occurs multiple times and provides context"}],execute:(e,t,n)=>[e],javaTemplate:"useOneAsMany({0}, {1}, {2})"},{name:"sort",category:"node",description:"Sort array of values",parameters:[{name:"values",type:"array",required:!0}],execute:e=>[...e].sort(),javaTemplate:"sort({0})"},{name:"sortByKey",category:"node",description:"Sort array by specific key",parameters:[{name:"values",type:"array",required:!0},{name:"key",type:"string",required:!0}],execute:(e,t)=>[...e].sort((n,r)=>n[t]-r[t]),javaTemplate:"sortByKey({0}, {1})"},{name:"mapWithDefault",category:"node",description:"Map value with default fallback",parameters:[{name:"value",type:"string",required:!0},{name:"defaultValue",type:"string",required:!0}],execute:(e,t)=>e||t,javaTemplate:"mapWithDefault({0}, {1})"},{name:"formatByExample",category:"node",description:"Format value using example pattern",parameters:[{name:"value",type:"string",required:!0},{name:"example",type:"string",required:!0}],execute:(e,t)=>e,javaTemplate:"formatByExample({0}, {1})"}],$K=[{name:"constant",category:"constants",description:"Set a fixed value",parameters:[{name:"value",type:"string",required:!0,description:"The constant value to return"}],execute:e=>e,javaTemplate:'constant("{0}")'}],DN={math:MK,text:RK,boolean:FK,conversion:OK,date:IK,node:LK,constants:$K},_K=({open:e,onClose:t,selectedFunction:n,sourceFields:r,targetField:a,onApplyMapping:o})=>{const i=h.useRef(null),l=h.useRef(null),[c,d]=h.useState({id:"function_modal",functionName:n,parameters:{},sourceConnections:{},position:{x:0,y:0}}),[u,m]=h.useState([]),[p,g]=h.useState({isDragging:!1,draggedItem:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}}),[x,f]=h.useState(new Set),[w,y]=h.useState(!1),j=Object.values(DN).flat().find(R=>R.name===n),N=h.useCallback((R,I)=>{I.preventDefault(),I.stopPropagation(),document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",console.log("🎯 DRAG START - Field:",R.name,"Position:",{x:I.clientX,y:I.clientY}),console.log("🎯 DRAG START - Event target:",I.target),console.log("🎯 DRAG START - Event currentTarget:",I.currentTarget),g({isDragging:!0,draggedItem:R,startPosition:{x:I.clientX,y:I.clientY},currentPosition:{x:I.clientX,y:I.clientY}});const V=new Set;j?.parameters.forEach(O=>{!O.name.toLowerCase().includes("delimiter")&&!O.name.toLowerCase().includes("separator")&&(V.add(`param-${c.id}-${O.name}`),console.log("🎯 DRAG START - Added drop target:",`param-${c.id}-${O.name}`))}),f(V),console.log("🎯 DRAG START - Total drop targets:",V.size)},[j,c.id]),b=h.useCallback(R=>{p.isDragging&&(console.log("🎯 DRAG MOVE - Position:",{x:R.clientX,y:R.clientY}),console.log("🎯 DRAG MOVE - Element under mouse:",document.elementFromPoint(R.clientX,R.clientY)),g(I=>({...I,currentPosition:{x:R.clientX,y:R.clientY}})))},[p.isDragging]),E=h.useCallback(R=>{if(console.log("🎯 DRAG END - Starting mouse up handler"),console.log("🎯 DRAG END - isDragging:",p.isDragging),console.log("🎯 DRAG END - draggedItem:",p.draggedItem),!p.isDragging||!p.draggedItem){console.log("🎯 DRAG END - Early return - no drag in progress");return}console.log("🎯 DRAG END - Position:",{x:R.clientX,y:R.clientY});const I=document.elementFromPoint(R.clientX,R.clientY);console.log("🎯 DRAG END - Element under mouse:",I),console.log("🎯 DRAG END - Element tag:",I?.tagName),console.log("🎯 DRAG END - Element classes:",I?.className),console.log("🎯 DRAG END - Element data-param:",I?.getAttribute("data-param"));const V=I?.closest("[data-param]");if(console.log("🎯 DRAG END - Drop zone found:",V),console.log("🎯 DRAG END - Drop zone data-param:",V?.getAttribute("data-param")),V){const O=V.getAttribute("data-param");if(O){console.log("🎯 DRAG END - ✅ SUCCESS! Dropped on parameter:",O);const k=p.draggedItem;console.log("🎯 DRAG END - Source field:",k),d(T=>{const D={...T,sourceConnections:{...T.sourceConnections,[O]:[k.path]}};return console.log("🎯 DRAG END - Updated function node:",D),D}),setTimeout(()=>{console.log("🎯 DRAG END - Creating visual connection");const T=document.querySelector(`[data-field-id="${k.id}"]`),D=V;if(console.log("🎯 DRAG END - Source element found:",T),console.log("🎯 DRAG END - Target element found:",D),console.log("🎯 DRAG END - Canvas ref:",i.current),T&&D&&i.current){const M=i.current.getBoundingClientRect(),_=T.getBoundingClientRect(),H=D.getBoundingClientRect();console.log("🎯 DRAG END - Canvas rect:",M),console.log("🎯 DRAG END - Source rect:",_),console.log("🎯 DRAG END - Target rect:",H);const $={id:`connection_${Date.now()}`,sourceId:k.id,targetId:`${c.id}-${O}`,sourceX:_.right-M.left,sourceY:_.top+_.height/2-M.top,targetX:H.left-M.left,targetY:H.top+H.height/2-M.top};console.log("🎯 DRAG END - Connection created:",$),m(B=>{const W=[...B,$];return console.log("🎯 DRAG END - All connections:",W),W})}else console.log("🎯 DRAG END - ❌ Failed to create connection - missing elements")},100)}else console.log("🎯 DRAG END - ❌ No param name found on drop zone")}else console.log("🎯 DRAG END - ❌ No drop zone found");document.body.style.userSelect="",document.body.style.webkitUserSelect="",console.log("🎯 DRAG END - Resetting drag state"),g({isDragging:!1,draggedItem:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}}),f(new Set),console.log("🎯 DRAG END - Complete!")},[p,c.id]);Nt.useEffect(()=>(console.log("🎯 DRAG STATE CHANGE - isDragging:",p.isDragging),console.log("🎯 DRAG STATE CHANGE - draggedItem:",p.draggedItem?.name),p.isDragging?(console.log("🎯 DRAG STATE CHANGE - Adding global mouse listeners"),document.addEventListener("mousemove",b),document.addEventListener("mouseup",E),()=>{console.log("🎯 DRAG STATE CHANGE - Removing global mouse listeners"),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",E)}):()=>{}),[p.isDragging,b,E]);const S=h.useCallback(R=>{if(!a)return;R.dataTransfer.setData("text/plain","function-output"),R.dataTransfer.effectAllowed="move";const I=new Set;I.add(`target-${a.id}`),f(I)},[a]),P=h.useCallback(()=>{g({isDragging:!1,draggedItem:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}}),f(new Set)},[]);h.useCallback((R,I)=>{console.log("=== DROP EVENT ==="),console.log("Parameter:",R),console.log("Event type:",I.type),I.preventDefault(),I.stopPropagation();let V=I.dataTransfer.getData("application/json");const O=I.dataTransfer.getData("text/plain"),k=I.dataTransfer.getData("text/field-id");if(console.log("Drag data - JSON:",V),console.log("Drag data - Name:",O),console.log("Drag data - ID:",k),!V&&O){const D=r.find(M=>M.name===O);D&&(V=JSON.stringify(D))}if(!V){console.log("ERROR: No field data found in drag transfer");return}const T=JSON.parse(V);console.log("Parsed source field:",T),d(D=>({...D,sourceConnections:{...D.sourceConnections,[R]:[T.path]}})),setTimeout(()=>{const D=document.querySelector(`[data-field-id="${T.id}"]`),M=document.querySelector(`[data-param="${R}"]`);if(D&&M&&i.current){const _=i.current.getBoundingClientRect(),H=D.getBoundingClientRect(),$=M.getBoundingClientRect(),B={id:`connection_${Date.now()}`,sourceId:T.id,targetId:`${c.id}-${R}`,sourceX:H.right-_.left,sourceY:H.top+H.height/2-_.top,targetX:$.left-_.left,targetY:$.top+$.height/2-_.top};m(W=>[...W,B]),console.log("Connection created:",B)}},100),P(),console.log("=== DROP COMPLETE ===")},[c.id,P,r]);const A=h.useCallback(R=>{if(R.preventDefault(),R.dataTransfer.getData("text/plain")!=="function-output"||!a)return;y(!0);const V=document.querySelector('[data-function-output="true"]'),O=document.querySelector(`[data-target-field="${a.id}"]`);if(V&&O&&i.current){const k=i.current.getBoundingClientRect(),T=V.getBoundingClientRect(),D=O.getBoundingClientRect(),M={id:`connection_output_${Date.now()}`,sourceId:`${c.id}-output`,targetId:a.id,sourceX:T.right-k.left,sourceY:T.top+T.height/2-k.top,targetX:D.left-k.left,targetY:D.top+D.height/2-k.top};m(_=>[..._,M])}},[c.id,a]),L=h.useCallback(()=>{if(!j||!w||!a)return;const R=[],I=[];Object.values(c.sourceConnections).forEach(O=>{O.forEach(k=>{I.push(k),R.push(k.split(".").pop()||k)})});const V={id:`mapping_${Date.now()}`,name:`${n}_to_${a.name}`,sourceFields:R,targetField:a.name,sourcePaths:I,targetPath:a.path,functionNode:{...c,id:`function_${Date.now()}`},requiresTransformation:!0};o(V),t()},[j,w,c,n,a,o,t]);return j?s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-6xl h-[80vh] p-0",children:[s.jsx(gt,{className:"p-6 pb-0",children:s.jsxs(xt,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Function Mapping: ",j.name]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{onClick:L,disabled:!w||Object.keys(c.sourceConnections).length===0,className:"bg-primary text-primary-foreground",children:[s.jsx(Ci,{className:"h-4 w-4 mr-2"}),"Apply Function"]}),s.jsxs(z,{variant:"outline",onClick:t,className:"text-muted-foreground hover:text-foreground",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})}),s.jsxs("div",{ref:i,className:"relative w-full flex-1 bg-background/50 overflow-hidden",children:[s.jsxs("svg",{ref:l,className:"absolute inset-0 w-full h-full pointer-events-none z-10",style:{overflow:"visible"},children:[s.jsx("defs",{children:s.jsx("marker",{id:"arrowhead-modal",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",markerUnits:"strokeWidth",children:s.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"hsl(var(--primary))"})})}),u.map(R=>s.jsx("path",{d:`M ${R.sourceX} ${R.sourceY} C ${R.sourceX+100} ${R.sourceY}, ${R.targetX-100} ${R.targetY}, ${R.targetX} ${R.targetY}`,stroke:"hsl(var(--primary))",strokeWidth:"2",fill:"none",markerEnd:"url(#arrowhead-modal)"},R.id))]}),s.jsxs("div",{className:"flex justify-between items-start px-4 pt-4 space-x-4",children:[s.jsx("div",{className:"w-72 h-60 overflow-y-auto",children:s.jsxs("div",{className:"bg-card border rounded-lg p-2 shadow-sm h-full",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2 text-primary",children:"Source Fields"}),s.jsx("div",{className:"space-y-2",children:r.map(R=>s.jsxs("div",{"data-field-id":R.id,className:ce("bg-background border-2 rounded p-3 transition-all hover:shadow-lg hover:border-primary/50 select-none",p.isDragging&&p.draggedItem?.id===R.id&&"opacity-70 scale-95"),style:{cursor:p.isDragging&&p.draggedItem?.id===R.id?"grabbing":"grab"},onMouseDown:I=>{I.preventDefault(),N(R,I)},children:[s.jsx("div",{className:"font-medium text-sm pointer-events-none",children:R.name}),s.jsx("div",{className:"text-xs text-muted-foreground pointer-events-none",children:R.type})]},R.id))})]})}),s.jsxs("div",{className:"bg-card border-2 border-primary/20 rounded-lg shadow-lg overflow-visible w-60",style:{zIndex:5},children:[s.jsxs("div",{className:"bg-primary text-primary-foreground p-2 rounded-t-lg",children:[s.jsx("div",{className:"font-medium text-sm",children:j.name}),s.jsx("div",{className:"text-xs opacity-80",children:j.description})]}),s.jsx("div",{className:"p-2 space-y-2",children:j.parameters.map(R=>s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-xs",children:R.name}),s.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:R.type}),R.name.toLowerCase().includes("delimiter")||R.name.toLowerCase().includes("separator")?s.jsx(U,{placeholder:`Enter ${R.name}`,value:c.parameters[R.name]||"",onChange:I=>d(V=>({...V,parameters:{...V.parameters,[R.name]:I.target.value}})),className:"h-8 text-xs"}):s.jsxs("div",{"data-param":R.name,className:ce("border-2 border-dashed border-muted-foreground/30 rounded p-2 text-sm transition-colors min-h-10",x.has(`param-${c.id}-${R.name}`)&&"border-primary bg-primary/10","hover:border-primary/50"),children:[c.sourceConnections[R.name]?.map((I,V)=>s.jsx("div",{className:"text-xs bg-primary/10 text-primary rounded px-1 py-0.5 mt-1 inline-block mr-1",children:I.split(".").pop()},V)),!c.sourceConnections[R.name]?.length&&s.jsx("div",{className:"text-xs text-muted-foreground italic",children:"Drop here"})]})]},R.name))}),s.jsxs("div",{"data-function-output":"true",className:"bg-success/10 border-t border-success/20 p-2 text-center cursor-grab hover:bg-success/20 transition-colors",draggable:"true",onDragStart:S,onDragEnd:P,children:[s.jsx("div",{className:"text-xs font-medium text-success",children:"Output"}),s.jsx("div",{className:"text-xs text-success/80",children:"Drag to target"})]})]}),a&&s.jsx("div",{className:"w-72",children:s.jsxs("div",{className:"bg-card border rounded-lg p-2 shadow-sm",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2 text-primary",children:"Target Field"}),s.jsxs("div",{"data-target-field":a.id,className:ce("bg-background border rounded p-3 transition-all",x.has(`target-${a.id}`)&&"border-primary bg-primary/10",w&&"border-success bg-success/10"),onDragOver:R=>R.preventDefault(),onDrop:A,children:[s.jsx("div",{className:"font-medium text-sm",children:a.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:a.type}),w&&s.jsx("div",{className:"text-xs text-success mt-2 font-medium",children:"✓ Function output connected"})]})]})})]})]}),s.jsx("div",{className:"border-t bg-muted/30 py-1 px-2 text-xs",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-muted-foreground",children:"Connect source → function → target"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:ce("px-1.5 py-0.5 rounded",Object.keys(c.sourceConnections).length>0?"bg-success/20 text-success":"bg-muted text-muted-foreground"),children:["Params: ",Object.keys(c.sourceConnections).length,"/",j.parameters.length]}),s.jsxs("span",{className:ce("px-1.5 py-0.5 rounded",w?"bg-success/20 text-success":"bg-muted text-muted-foreground"),children:["Output: ",w?"Connected":"Not connected"]})]})]})})]})}):null};function os(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=os(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var VK={value:()=>{}};function gg(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Lm(n)}function Lm(e){this._=e}function UK(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Lm.prototype=gg.prototype={constructor:Lm,on:function(e,t){var n=this._,r=UK(e+"",n),a,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((a=(e=r[o]).type)&&(a=BK(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(a=(e=r[o]).type)n[a]=B1(n[a],e.name,t);else if(t==null)for(a in n)n[a]=B1(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Lm(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,o;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};function BK(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function B1(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=VK,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Nj="http://www.w3.org/1999/xhtml";const H1={svg:"http://www.w3.org/2000/svg",xhtml:Nj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xg(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),H1.hasOwnProperty(t)?{space:H1[t],local:e}:e}function HK(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Nj&&t.documentElement.namespaceURI===Nj?t.createElement(e):t.createElementNS(n,e)}}function qK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function WO(e){var t=xg(e);return(t.local?qK:HK)(t)}function WK(){}function kN(e){return e==null?WK:function(){return this.querySelector(e)}}function zK(e){typeof e!="function"&&(e=kN(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=new Array(i),c,d,u=0;u<i;++u)(c=o[u])&&(d=e.call(c,c.__data__,u,o))&&("__data__"in c&&(d.__data__=c.__data__),l[u]=d);return new En(r,this._parents)}function XK(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function YK(){return[]}function zO(e){return e==null?YK:function(){return this.querySelectorAll(e)}}function KK(e){return function(){return XK(e.apply(this,arguments))}}function GK(e){typeof e=="function"?e=KK(e):e=zO(e);for(var t=this._groups,n=t.length,r=[],a=[],o=0;o<n;++o)for(var i=t[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&(r.push(e.call(c,c.__data__,d,i)),a.push(c));return new En(r,a)}function XO(e){return function(){return this.matches(e)}}function YO(e){return function(t){return t.matches(e)}}var JK=Array.prototype.find;function QK(e){return function(){return JK.call(this.children,e)}}function ZK(){return this.firstElementChild}function eG(e){return this.select(e==null?ZK:QK(typeof e=="function"?e:YO(e)))}var tG=Array.prototype.filter;function sG(){return Array.from(this.children)}function nG(e){return function(){return tG.call(this.children,e)}}function rG(e){return this.selectAll(e==null?sG:nG(typeof e=="function"?e:YO(e)))}function aG(e){typeof e!="function"&&(e=XO(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=[],c,d=0;d<i;++d)(c=o[d])&&e.call(c,c.__data__,d,o)&&l.push(c);return new En(r,this._parents)}function KO(e){return new Array(e.length)}function oG(){return new En(this._enter||this._groups.map(KO),this._parents)}function Bp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bp.prototype={constructor:Bp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function iG(e){return function(){return e}}function lG(e,t,n,r,a,o){for(var i=0,l,c=t.length,d=o.length;i<d;++i)(l=t[i])?(l.__data__=o[i],r[i]=l):n[i]=new Bp(e,o[i]);for(;i<c;++i)(l=t[i])&&(a[i]=l)}function cG(e,t,n,r,a,o,i){var l,c,d=new Map,u=t.length,m=o.length,p=new Array(u),g;for(l=0;l<u;++l)(c=t[l])&&(p[l]=g=i.call(c,c.__data__,l,t)+"",d.has(g)?a[l]=c:d.set(g,c));for(l=0;l<m;++l)g=i.call(e,o[l],l,o)+"",(c=d.get(g))?(r[l]=c,c.__data__=o[l],d.delete(g)):n[l]=new Bp(e,o[l]);for(l=0;l<u;++l)(c=t[l])&&d.get(p[l])===c&&(a[l]=c)}function dG(e){return e.__data__}function uG(e,t){if(!arguments.length)return Array.from(this,dG);var n=t?cG:lG,r=this._parents,a=this._groups;typeof e!="function"&&(e=iG(e));for(var o=a.length,i=new Array(o),l=new Array(o),c=new Array(o),d=0;d<o;++d){var u=r[d],m=a[d],p=m.length,g=hG(e.call(u,u&&u.__data__,d,r)),x=g.length,f=l[d]=new Array(x),w=i[d]=new Array(x),y=c[d]=new Array(p);n(u,m,f,w,y,g,t);for(var v=0,j=0,N,b;v<x;++v)if(N=f[v]){for(v>=j&&(j=v+1);!(b=w[j])&&++j<x;);N._next=b||null}}return i=new En(i,r),i._enter=l,i._exit=c,i}function hG(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mG(){return new En(this._exit||this._groups.map(KO),this._parents)}function pG(e,t,n){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?o.remove():n(o),r&&a?r.merge(a).order():a}function fG(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),l=new Array(a),c=0;c<i;++c)for(var d=n[c],u=r[c],m=d.length,p=l[c]=new Array(m),g,x=0;x<m;++x)(g=d[x]||u[x])&&(p[x]=g);for(;c<a;++c)l[c]=n[c];return new En(l,this._parents)}function gG(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,o=r[a],i;--a>=0;)(i=r[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function xG(e){e||(e=vG);function t(m,p){return m&&p?e(m.__data__,p.__data__):!m-!p}for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o){for(var i=n[o],l=i.length,c=a[o]=new Array(l),d,u=0;u<l;++u)(d=i[u])&&(c[u]=d);c.sort(t)}return new En(a,this._parents).order()}function vG(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yG(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jG(){return Array.from(this)}function wG(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null}function NG(){let e=0;for(const t of this)++e;return e}function bG(){return!this.node()}function SG(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],o=0,i=a.length,l;o<i;++o)(l=a[o])&&e.call(l,l.__data__,o,a);return this}function CG(e){return function(){this.removeAttribute(e)}}function EG(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TG(e,t){return function(){this.setAttribute(e,t)}}function PG(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function AG(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function DG(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kG(e,t){var n=xg(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?EG:CG:typeof t=="function"?n.local?DG:AG:n.local?PG:TG)(n,t))}function GO(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MG(e){return function(){this.style.removeProperty(e)}}function RG(e,t,n){return function(){this.style.setProperty(e,t,n)}}function FG(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function OG(e,t,n){return arguments.length>1?this.each((t==null?MG:typeof t=="function"?FG:RG)(e,t,n??"")):Hl(this.node(),e)}function Hl(e,t){return e.style.getPropertyValue(t)||GO(e).getComputedStyle(e,null).getPropertyValue(t)}function IG(e){return function(){delete this[e]}}function LG(e,t){return function(){this[e]=t}}function $G(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _G(e,t){return arguments.length>1?this.each((t==null?IG:typeof t=="function"?$G:LG)(e,t)):this.node()[e]}function JO(e){return e.trim().split(/^|\s+/)}function MN(e){return e.classList||new QO(e)}function QO(e){this._node=e,this._names=JO(e.getAttribute("class")||"")}QO.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ZO(e,t){for(var n=MN(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function e4(e,t){for(var n=MN(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function VG(e){return function(){ZO(this,e)}}function UG(e){return function(){e4(this,e)}}function BG(e,t){return function(){(t.apply(this,arguments)?ZO:e4)(this,e)}}function HG(e,t){var n=JO(e+"");if(arguments.length<2){for(var r=MN(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?BG:t?VG:UG)(n,t))}function qG(){this.textContent=""}function WG(e){return function(){this.textContent=e}}function zG(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XG(e){return arguments.length?this.each(e==null?qG:(typeof e=="function"?zG:WG)(e)):this.node().textContent}function YG(){this.innerHTML=""}function KG(e){return function(){this.innerHTML=e}}function GG(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JG(e){return arguments.length?this.each(e==null?YG:(typeof e=="function"?GG:KG)(e)):this.node().innerHTML}function QG(){this.nextSibling&&this.parentNode.appendChild(this)}function ZG(){return this.each(QG)}function eJ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tJ(){return this.each(eJ)}function sJ(e){var t=typeof e=="function"?e:WO(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nJ(){return null}function rJ(e,t){var n=typeof e=="function"?e:WO(e),r=t==null?nJ:typeof t=="function"?t:kN(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function aJ(){var e=this.parentNode;e&&e.removeChild(this)}function oJ(){return this.each(aJ)}function iJ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lJ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cJ(e){return this.select(e?lJ:iJ)}function dJ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uJ(e){return function(t){e.call(this,t,this.__data__)}}function hJ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function mJ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,o;n<a;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function pJ(e,t,n){return function(){var r=this.__on,a,o=uJ(t);if(r){for(var i=0,l=r.length;i<l;++i)if((a=r[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=n),a.value=t;return}}this.addEventListener(e.type,o,n),a={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(a):this.__on=[a]}}function fJ(e,t,n){var r=hJ(e+""),a,o=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,u;c<d;++c)for(a=0,u=l[c];a<o;++a)if((i=r[a]).type===u.type&&i.name===u.name)return u.value}return}for(l=t?pJ:mJ,a=0;a<o;++a)this.each(l(r[a],t,n));return this}function t4(e,t,n){var r=GO(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function gJ(e,t){return function(){return t4(this,e,t)}}function xJ(e,t){return function(){return t4(this,e,t.apply(this,arguments))}}function vJ(e,t){return this.each((typeof t=="function"?xJ:gJ)(e,t))}function*yJ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length,i;a<o;++a)(i=r[a])&&(yield i)}var s4=[null];function En(e,t){this._groups=e,this._parents=t}function oh(){return new En([[document.documentElement]],s4)}function jJ(){return this}En.prototype=oh.prototype={constructor:En,select:zK,selectAll:GK,selectChild:eG,selectChildren:rG,filter:aG,data:uG,enter:oG,exit:mG,join:pG,merge:fG,selection:jJ,order:gG,sort:xG,call:yG,nodes:jG,node:wG,size:NG,empty:bG,each:SG,attr:kG,style:OG,property:_G,classed:HG,text:XG,html:JG,raise:ZG,lower:tJ,append:sJ,insert:rJ,remove:oJ,clone:cJ,datum:dJ,on:fJ,dispatch:vJ,[Symbol.iterator]:yJ};function yn(e){return typeof e=="string"?new En([[document.querySelector(e)]],[document.documentElement]):new En([[e]],s4)}function wJ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tr(e,t){if(e=wJ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const NJ={passive:!1},iu={capture:!0,passive:!1};function Hx(e){e.stopImmediatePropagation()}function Pl(e){e.preventDefault(),e.stopImmediatePropagation()}function n4(e){var t=e.document.documentElement,n=yn(e).on("dragstart.drag",Pl,iu);"onselectstart"in t?n.on("selectstart.drag",Pl,iu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function r4(e,t){var n=e.document.documentElement,r=yn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Pl,iu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Xh=e=>()=>e;function bj(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:l,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}bj.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function bJ(e){return!e.ctrlKey&&!e.button}function SJ(){return this.parentNode}function CJ(e,t){return t??{x:e.x,y:e.y}}function EJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function a4(){var e=bJ,t=SJ,n=CJ,r=EJ,a={},o=gg("start","drag","end"),i=0,l,c,d,u,m=0;function p(N){N.on("mousedown.drag",g).filter(r).on("touchstart.drag",w).on("touchmove.drag",y,NJ).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(N,b){if(!(u||!e.call(this,N,b))){var E=j(this,t.call(this,N,b),N,b,"mouse");E&&(yn(N.view).on("mousemove.drag",x,iu).on("mouseup.drag",f,iu),n4(N.view),Hx(N),d=!1,l=N.clientX,c=N.clientY,E("start",N))}}function x(N){if(Pl(N),!d){var b=N.clientX-l,E=N.clientY-c;d=b*b+E*E>m}a.mouse("drag",N)}function f(N){yn(N.view).on("mousemove.drag mouseup.drag",null),r4(N.view,d),Pl(N),a.mouse("end",N)}function w(N,b){if(e.call(this,N,b)){var E=N.changedTouches,S=t.call(this,N,b),P=E.length,A,L;for(A=0;A<P;++A)(L=j(this,S,N,b,E[A].identifier,E[A]))&&(Hx(N),L("start",N,E[A]))}}function y(N){var b=N.changedTouches,E=b.length,S,P;for(S=0;S<E;++S)(P=a[b[S].identifier])&&(Pl(N),P("drag",N,b[S]))}function v(N){var b=N.changedTouches,E=b.length,S,P;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(P=a[b[S].identifier])&&(Hx(N),P("end",N,b[S]))}function j(N,b,E,S,P,A){var L=o.copy(),R=tr(A||E,b),I,V,O;if((O=n.call(N,new bj("beforestart",{sourceEvent:E,target:p,identifier:P,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:L}),S))!=null)return I=O.x-R[0]||0,V=O.y-R[1]||0,function k(T,D,M){var _=R,H;switch(T){case"start":a[P]=k,H=i++;break;case"end":delete a[P],--i;case"drag":R=tr(M||D,b),H=i;break}L.call(T,N,new bj(T,{sourceEvent:D,subject:O,target:p,identifier:P,active:H,x:R[0]+I,y:R[1]+V,dx:R[0]-_[0],dy:R[1]-_[1],dispatch:L}),S)}}return p.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Xh(!!N),p):e},p.container=function(N){return arguments.length?(t=typeof N=="function"?N:Xh(N),p):t},p.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Xh(N),p):n},p.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Xh(!!N),p):r},p.on=function(){var N=o.on.apply(o,arguments);return N===o?p:N},p.clickDistance=function(N){return arguments.length?(m=(N=+N)*N,p):Math.sqrt(m)},p}function RN(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function o4(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ih(){}var lu=.7,Hp=1/lu,Al="\\s*([+-]?\\d+)\\s*",cu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TJ=/^#([0-9a-f]{3,8})$/,PJ=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),AJ=new RegExp(`^rgb\\(${Vr},${Vr},${Vr}\\)$`),DJ=new RegExp(`^rgba\\(${Al},${Al},${Al},${cu}\\)$`),kJ=new RegExp(`^rgba\\(${Vr},${Vr},${Vr},${cu}\\)$`),MJ=new RegExp(`^hsl\\(${cu},${Vr},${Vr}\\)$`),RJ=new RegExp(`^hsla\\(${cu},${Vr},${Vr},${cu}\\)$`),q1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RN(ih,hi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:W1,formatHex:W1,formatHex8:FJ,formatHsl:OJ,formatRgb:z1,toString:z1});function W1(){return this.rgb().formatHex()}function FJ(){return this.rgb().formatHex8()}function OJ(){return i4(this).formatHsl()}function z1(){return this.rgb().formatRgb()}function hi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=TJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?X1(t):n===3?new Ys(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PJ.exec(e))?new Ys(t[1],t[2],t[3],1):(t=AJ.exec(e))?new Ys(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=DJ.exec(e))?Yh(t[1],t[2],t[3],t[4]):(t=kJ.exec(e))?Yh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=MJ.exec(e))?G1(t[1],t[2]/100,t[3]/100,1):(t=RJ.exec(e))?G1(t[1],t[2]/100,t[3]/100,t[4]):q1.hasOwnProperty(e)?X1(q1[e]):e==="transparent"?new Ys(NaN,NaN,NaN,0):null}function X1(e){return new Ys(e>>16&255,e>>8&255,e&255,1)}function Yh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ys(e,t,n,r)}function IJ(e){return e instanceof ih||(e=hi(e)),e?(e=e.rgb(),new Ys(e.r,e.g,e.b,e.opacity)):new Ys}function Sj(e,t,n,r){return arguments.length===1?IJ(e):new Ys(e,t,n,r??1)}function Ys(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}RN(Ys,Sj,o4(ih,{brighter(e){return e=e==null?Hp:Math.pow(Hp,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lu:Math.pow(lu,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ys(Jo(this.r),Jo(this.g),Jo(this.b),qp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y1,formatHex:Y1,formatHex8:LJ,formatRgb:K1,toString:K1}));function Y1(){return`#${Ho(this.r)}${Ho(this.g)}${Ho(this.b)}`}function LJ(){return`#${Ho(this.r)}${Ho(this.g)}${Ho(this.b)}${Ho((isNaN(this.opacity)?1:this.opacity)*255)}`}function K1(){const e=qp(this.opacity);return`${e===1?"rgb(":"rgba("}${Jo(this.r)}, ${Jo(this.g)}, ${Jo(this.b)}${e===1?")":`, ${e})`}`}function qp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ho(e){return e=Jo(e),(e<16?"0":"")+e.toString(16)}function G1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rr(e,t,n,r)}function i4(e){if(e instanceof rr)return new rr(e.h,e.s,e.l,e.opacity);if(e instanceof ih||(e=hi(e)),!e)return new rr;if(e instanceof rr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,l=o-a,c=(o+a)/2;return l?(t===o?i=(n-r)/l+(n<r)*6:n===o?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?o+a:2-o-a,i*=60):l=c>0&&c<1?0:i,new rr(i,l,c,e.opacity)}function $J(e,t,n,r){return arguments.length===1?i4(e):new rr(e,t,n,r??1)}function rr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}RN(rr,$J,o4(ih,{brighter(e){return e=e==null?Hp:Math.pow(Hp,e),new rr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lu:Math.pow(lu,e),new rr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ys(qx(e>=240?e-240:e+120,a,r),qx(e,a,r),qx(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new rr(J1(this.h),Kh(this.s),Kh(this.l),qp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qp(this.opacity);return`${e===1?"hsl(":"hsla("}${J1(this.h)}, ${Kh(this.s)*100}%, ${Kh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function J1(e){return e=(e||0)%360,e<0?e+360:e}function Kh(e){return Math.max(0,Math.min(1,e||0))}function qx(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FN=e=>()=>e;function _J(e,t){return function(n){return e+n*t}}function VJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function UJ(e){return(e=+e)==1?l4:function(t,n){return n-t?VJ(t,n,e):FN(isNaN(t)?n:t)}}function l4(e,t){var n=t-e;return n?_J(e,n):FN(isNaN(e)?t:e)}const Wp=function e(t){var n=UJ(t);function r(a,o){var i=n((a=Sj(a)).r,(o=Sj(o)).r),l=n(a.g,o.g),c=n(a.b,o.b),d=l4(a.opacity,o.opacity);return function(u){return a.r=i(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return r.gamma=e,r}(1);function BJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(o){for(a=0;a<n;++a)r[a]=e[a]*(1-o)+t[a]*o;return r}}function HJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),o=new Array(n),i;for(i=0;i<r;++i)a[i]=bd(e[i],t[i]);for(;i<n;++i)o[i]=t[i];return function(l){for(i=0;i<r;++i)o[i]=a[i](l);return o}}function WJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Tr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function zJ(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=bd(e[a],t[a]):r[a]=t[a];return function(o){for(a in n)r[a]=n[a](o);return r}}var Cj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wx=new RegExp(Cj.source,"g");function XJ(e){return function(){return e}}function YJ(e){return function(t){return e(t)+""}}function c4(e,t){var n=Cj.lastIndex=Wx.lastIndex=0,r,a,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Cj.exec(e))&&(a=Wx.exec(t));)(o=a.index)>n&&(o=t.slice(n,o),l[i]?l[i]+=o:l[++i]=o),(r=r[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Tr(r,a)})),n=Wx.lastIndex;return n<t.length&&(o=t.slice(n),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?YJ(c[0].x):XJ(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)l[(m=c[u]).i]=m.x(d);return l.join("")})}function bd(e,t){var n=typeof t,r;return t==null||n==="boolean"?FN(t):(n==="number"?Tr:n==="string"?(r=hi(t))?(t=r,Wp):c4:t instanceof hi?Wp:t instanceof Date?WJ:HJ(t)?BJ:Array.isArray(t)?qJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zJ:Tr)(e,t)}var Q1=180/Math.PI,Ej={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function d4(e,t,n,r,a,o){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*Q1,skewX:Math.atan(c)*Q1,scaleX:i,scaleY:l}}var Gh;function KJ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ej:d4(t.a,t.b,t.c,t.d,t.e,t.f)}function GJ(e){return e==null||(Gh||(Gh=document.createElementNS("http://www.w3.org/2000/svg","g")),Gh.setAttribute("transform",e),!(e=Gh.transform.baseVal.consolidate()))?Ej:(e=e.matrix,d4(e.a,e.b,e.c,e.d,e.e,e.f))}function u4(e,t,n,r){function a(d){return d.length?d.pop()+" ":""}function o(d,u,m,p,g,x){if(d!==m||u!==p){var f=g.push("translate(",null,t,null,n);x.push({i:f-4,x:Tr(d,m)},{i:f-2,x:Tr(u,p)})}else(m||p)&&g.push("translate("+m+t+p+n)}function i(d,u,m,p){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),p.push({i:m.push(a(m)+"rotate(",null,r)-2,x:Tr(d,u)})):u&&m.push(a(m)+"rotate("+u+r)}function l(d,u,m,p){d!==u?p.push({i:m.push(a(m)+"skewX(",null,r)-2,x:Tr(d,u)}):u&&m.push(a(m)+"skewX("+u+r)}function c(d,u,m,p,g,x){if(d!==m||u!==p){var f=g.push(a(g)+"scale(",null,",",null,")");x.push({i:f-4,x:Tr(d,m)},{i:f-2,x:Tr(u,p)})}else(m!==1||p!==1)&&g.push(a(g)+"scale("+m+","+p+")")}return function(d,u){var m=[],p=[];return d=e(d),u=e(u),o(d.translateX,d.translateY,u.translateX,u.translateY,m,p),i(d.rotate,u.rotate,m,p),l(d.skewX,u.skewX,m,p),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,m,p),d=u=null,function(g){for(var x=-1,f=p.length,w;++x<f;)m[(w=p[x]).i]=w.x(g);return m.join("")}}}var JJ=u4(KJ,"px, ","px)","deg)"),QJ=u4(GJ,", ",")",")"),ZJ=1e-12;function Z1(e){return((e=Math.exp(e))+1/e)/2}function eQ(e){return((e=Math.exp(e))-1/e)/2}function tQ(e){return((e=Math.exp(2*e))-1)/(e+1)}const $m=function e(t,n,r){function a(o,i){var l=o[0],c=o[1],d=o[2],u=i[0],m=i[1],p=i[2],g=u-l,x=m-c,f=g*g+x*x,w,y;if(f<ZJ)y=Math.log(p/d)/t,w=function(S){return[l+S*g,c+S*x,d*Math.exp(t*S*y)]};else{var v=Math.sqrt(f),j=(p*p-d*d+r*f)/(2*d*n*v),N=(p*p-d*d-r*f)/(2*p*n*v),b=Math.log(Math.sqrt(j*j+1)-j),E=Math.log(Math.sqrt(N*N+1)-N);y=(E-b)/t,w=function(S){var P=S*y,A=Z1(b),L=d/(n*v)*(A*tQ(t*P+b)-eQ(b));return[l+L*g,c+L*x,d*A/Z1(t*P+b)]}}return w.duration=y*1e3*t/Math.SQRT2,w}return a.rho=function(o){var i=Math.max(.001,+o),l=i*i,c=l*l;return e(i,l,c)},a}(Math.SQRT2,2,4);var ql=0,cd=0,Jc=0,h4=1e3,zp,dd,Xp=0,mi=0,vg=0,du=typeof performance=="object"&&performance.now?performance:Date,m4=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ON(){return mi||(m4(sQ),mi=du.now()+vg)}function sQ(){mi=0}function Yp(){this._call=this._time=this._next=null}Yp.prototype=p4.prototype={constructor:Yp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ON():+n)+(t==null?0:+t),!this._next&&dd!==this&&(dd?dd._next=this:zp=this,dd=this),this._call=e,this._time=n,Tj()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tj())}};function p4(e,t,n){var r=new Yp;return r.restart(e,t,n),r}function nQ(){ON(),++ql;for(var e=zp,t;e;)(t=mi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ql}function eE(){mi=(Xp=du.now())+vg,ql=cd=0;try{nQ()}finally{ql=0,aQ(),mi=0}}function rQ(){var e=du.now(),t=e-Xp;t>h4&&(vg-=t,Xp=e)}function aQ(){for(var e,t=zp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zp=n);dd=e,Tj(r)}function Tj(e){if(!ql){cd&&(cd=clearTimeout(cd));var t=e-mi;t>24?(e<1/0&&(cd=setTimeout(eE,e-du.now()-vg)),Jc&&(Jc=clearInterval(Jc))):(Jc||(Xp=du.now(),Jc=setInterval(rQ,h4)),ql=1,m4(eE))}}function tE(e,t,n){var r=new Yp;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var oQ=gg("start","end","cancel","interrupt"),iQ=[],f4=0,sE=1,Pj=2,_m=3,nE=4,Aj=5,Vm=6;function yg(e,t,n,r,a,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;lQ(e,n,{name:t,index:r,group:a,on:oQ,tween:iQ,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:f4})}function IN(e,t){var n=br(e,t);if(n.state>f4)throw new Error("too late; already scheduled");return n}function Gr(e,t){var n=br(e,t);if(n.state>_m)throw new Error("too late; already running");return n}function br(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lQ(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=p4(o,0,n.time);function o(d){n.state=sE,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var u,m,p,g;if(n.state!==sE)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===_m)return tE(i);g.state===nE?(g.state=Vm,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=Vm,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(tE(function(){n.state===_m&&(n.state=nE,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Pj,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pj){for(n.state=_m,a=new Array(p=n.tween.length),u=0,m=-1;u<p;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(a[++m]=g);a.length=m+1}}function l(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Aj,1),m=-1,p=a.length;++m<p;)a[m].call(e,u);n.state===Aj&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Vm,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Um(e,t){var n=e.__transition,r,a,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}a=r.state>Pj&&r.state<Aj,r.state=Vm,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function cQ(e){return this.each(function(){Um(this,e)})}function dQ(e,t){var n,r;return function(){var a=Gr(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}a.tween=r}}function uQ(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var o=Gr(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var l={name:t,value:n},c=0,d=a.length;c<d;++c)if(a[c].name===t){a[c]=l;break}c===d&&a.push(l)}o.tween=a}}function hQ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=br(this.node(),n).tween,a=0,o=r.length,i;a<o;++a)if((i=r[a]).name===e)return i.value;return null}return this.each((t==null?dQ:uQ)(n,e,t))}function LN(e,t,n){var r=e._id;return e.each(function(){var a=Gr(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return br(a,r).value[t]}}function g4(e,t){var n;return(typeof t=="number"?Tr:t instanceof hi?Wp:(n=hi(t))?(t=n,Wp):c4)(e,t)}function mQ(e){return function(){this.removeAttribute(e)}}function pQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fQ(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function gQ(e,t,n){var r,a=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function xQ(e,t,n){var r,a,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l)))}}function vQ(e,t,n){var r,a,o;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l)))}}function yQ(e,t){var n=xg(e),r=n==="transform"?QJ:g4;return this.attrTween(e,typeof t=="function"?(n.local?vQ:xQ)(n,r,LN(this,"attr."+e,t)):t==null?(n.local?pQ:mQ)(n):(n.local?gQ:fQ)(n,r,t))}function jQ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wQ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function NQ(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&wQ(e,o)),n}return a._value=t,a}function bQ(e,t){var n,r;function a(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&jQ(e,o)),n}return a._value=t,a}function SQ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=xg(e);return this.tween(n,(r.local?NQ:bQ)(r,t))}function CQ(e,t){return function(){IN(this,e).delay=+t.apply(this,arguments)}}function EQ(e,t){return t=+t,function(){IN(this,e).delay=t}}function TQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?CQ:EQ)(t,e)):br(this.node(),t).delay}function PQ(e,t){return function(){Gr(this,e).duration=+t.apply(this,arguments)}}function AQ(e,t){return t=+t,function(){Gr(this,e).duration=t}}function DQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PQ:AQ)(t,e)):br(this.node(),t).duration}function kQ(e,t){if(typeof t!="function")throw new Error;return function(){Gr(this,e).ease=t}}function MQ(e){var t=this._id;return arguments.length?this.each(kQ(t,e)):br(this.node(),t).ease}function RQ(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gr(this,e).ease=n}}function FQ(e){if(typeof e!="function")throw new Error;return this.each(RQ(this._id,e))}function OQ(e){typeof e!="function"&&(e=XO(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var o=t[a],i=o.length,l=r[a]=[],c,d=0;d<i;++d)(c=o[d])&&e.call(c,c.__data__,d,o)&&l.push(c);return new ya(r,this._parents,this._name,this._id)}function IQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=new Array(r),l=0;l<o;++l)for(var c=t[l],d=n[l],u=c.length,m=i[l]=new Array(u),p,g=0;g<u;++g)(p=c[g]||d[g])&&(m[g]=p);for(;l<r;++l)i[l]=t[l];return new ya(i,this._parents,this._name,this._id)}function LQ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $Q(e,t,n){var r,a,o=LQ(t)?IN:Gr;return function(){var i=o(this,e),l=i.on;l!==r&&(a=(r=l).copy()).on(t,n),i.on=a}}function _Q(e,t){var n=this._id;return arguments.length<2?br(this.node(),n).on.on(e):this.each($Q(n,e,t))}function VQ(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function UQ(){return this.on("end.remove",VQ(this._id))}function BQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kN(e));for(var r=this._groups,a=r.length,o=new Array(a),i=0;i<a;++i)for(var l=r[i],c=l.length,d=o[i]=new Array(c),u,m,p=0;p<c;++p)(u=l[p])&&(m=e.call(u,u.__data__,p,l))&&("__data__"in u&&(m.__data__=u.__data__),d[p]=m,yg(d[p],t,n,p,d,br(u,n)));return new ya(o,this._parents,t,n)}function HQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zO(e));for(var r=this._groups,a=r.length,o=[],i=[],l=0;l<a;++l)for(var c=r[l],d=c.length,u,m=0;m<d;++m)if(u=c[m]){for(var p=e.call(u,u.__data__,m,c),g,x=br(u,n),f=0,w=p.length;f<w;++f)(g=p[f])&&yg(g,t,n,f,p,x);o.push(p),i.push(u)}return new ya(o,i,t,n)}var qQ=oh.prototype.constructor;function WQ(){return new qQ(this._groups,this._parents)}function zQ(e,t){var n,r,a;return function(){var o=Hl(this,e),i=(this.style.removeProperty(e),Hl(this,e));return o===i?null:o===n&&i===r?a:a=t(n=o,r=i)}}function x4(e){return function(){this.style.removeProperty(e)}}function XQ(e,t,n){var r,a=n+"",o;return function(){var i=Hl(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}function YQ(e,t,n){var r,a,o;return function(){var i=Hl(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),Hl(this,e))),i===c?null:i===r&&c===a?o:(a=c,o=t(r=i,l))}}function KQ(e,t){var n,r,a,o="style."+t,i="end."+o,l;return function(){var c=Gr(this,e),d=c.on,u=c.value[o]==null?l||(l=x4(t)):void 0;(d!==n||a!==u)&&(r=(n=d).copy()).on(i,a=u),c.on=r}}function GQ(e,t,n){var r=(e+="")=="transform"?JJ:g4;return t==null?this.styleTween(e,zQ(e,r)).on("end.style."+e,x4(e)):typeof t=="function"?this.styleTween(e,YQ(e,r,LN(this,"style."+e,t))).each(KQ(this._id,e)):this.styleTween(e,XQ(e,r,t),n).on("end.style."+e,null)}function JQ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function QQ(e,t,n){var r,a;function o(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&JQ(e,i,n)),r}return o._value=t,o}function ZQ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,QQ(e,t,n??""))}function eZ(e){return function(){this.textContent=e}}function tZ(e){return function(){var t=e(this);this.textContent=t??""}}function sZ(e){return this.tween("text",typeof e=="function"?tZ(LN(this,"text",e)):eZ(e==null?"":e+""))}function nZ(e){return function(t){this.textContent=e.call(this,t)}}function rZ(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&nZ(a)),t}return r._value=e,r}function aZ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,rZ(e))}function oZ(){for(var e=this._name,t=this._id,n=v4(),r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],l=i.length,c,d=0;d<l;++d)if(c=i[d]){var u=br(c,t);yg(c,e,n,d,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ya(r,this._parents,e,n)}function iZ(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var l={value:i},c={value:function(){--a===0&&o()}};n.each(function(){var d=Gr(this,r),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),d.on=t}),a===0&&o()})}var lZ=0;function ya(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v4(){return++lZ}var ta=oh.prototype;ya.prototype={constructor:ya,select:BQ,selectAll:HQ,selectChild:ta.selectChild,selectChildren:ta.selectChildren,filter:OQ,merge:IQ,selection:WQ,transition:oZ,call:ta.call,nodes:ta.nodes,node:ta.node,size:ta.size,empty:ta.empty,each:ta.each,on:_Q,attr:yQ,attrTween:SQ,style:GQ,styleTween:ZQ,text:sZ,textTween:aZ,remove:UQ,tween:hQ,delay:TQ,duration:DQ,ease:MQ,easeVarying:FQ,end:iZ,[Symbol.iterator]:ta[Symbol.iterator]};function cZ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dZ={time:null,delay:0,duration:250,ease:cZ};function uZ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function hZ(e){var t,n;e instanceof ya?(t=e._id,e=e._name):(t=v4(),(n=dZ).time=ON(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i=r[o],l=i.length,c,d=0;d<l;++d)(c=i[d])&&yg(c,e,t,d,i,n||uZ(c,t));return new ya(r,this._parents,e,t)}oh.prototype.interrupt=cQ;oh.prototype.transition=hZ;const Jh=e=>()=>e;function mZ(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function la(e,t,n){this.k=e,this.x=t,this.y=n}la.prototype={constructor:la,scale:function(e){return e===1?this:new la(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new la(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jg=new la(1,0,0);y4.prototype=la.prototype;function y4(e){for(;!e.__zoom;)if(!(e=e.parentNode))return jg;return e.__zoom}function zx(e){e.stopImmediatePropagation()}function Qc(e){e.preventDefault(),e.stopImmediatePropagation()}function pZ(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function fZ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function rE(){return this.__zoom||jg}function gZ(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function vZ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function j4(){var e=pZ,t=fZ,n=vZ,r=gZ,a=xZ,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=$m,d=gg("start","zoom","end"),u,m,p,g=500,x=150,f=0,w=10;function y(O){O.property("__zoom",rE).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",L).filter(a).on("touchstart.zoom",R).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(O,k,T,D){var M=O.selection?O.selection():O;M.property("__zoom",rE),O!==M?b(O,k,T,D):M.interrupt().each(function(){E(this,arguments).event(D).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},y.scaleBy=function(O,k,T,D){y.scaleTo(O,function(){var M=this.__zoom.k,_=typeof k=="function"?k.apply(this,arguments):k;return M*_},T,D)},y.scaleTo=function(O,k,T,D){y.transform(O,function(){var M=t.apply(this,arguments),_=this.__zoom,H=T==null?N(M):typeof T=="function"?T.apply(this,arguments):T,$=_.invert(H),B=typeof k=="function"?k.apply(this,arguments):k;return n(j(v(_,B),H,$),M,i)},T,D)},y.translateBy=function(O,k,T,D){y.transform(O,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,D)},y.translateTo=function(O,k,T,D,M){y.transform(O,function(){var _=t.apply(this,arguments),H=this.__zoom,$=D==null?N(_):typeof D=="function"?D.apply(this,arguments):D;return n(jg.translate($[0],$[1]).scale(H.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),_,i)},D,M)};function v(O,k){return k=Math.max(o[0],Math.min(o[1],k)),k===O.k?O:new la(k,O.x,O.y)}function j(O,k,T){var D=k[0]-T[0]*O.k,M=k[1]-T[1]*O.k;return D===O.x&&M===O.y?O:new la(O.k,D,M)}function N(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function b(O,k,T,D){O.on("start.zoom",function(){E(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(D).end()}).tween("zoom",function(){var M=this,_=arguments,H=E(M,_).event(D),$=t.apply(M,_),B=T==null?N($):typeof T=="function"?T.apply(M,_):T,W=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),q=M.__zoom,Y=typeof k=="function"?k.apply(M,_):k,pe=c(q.invert(B).concat(W/q.k),Y.invert(B).concat(W/Y.k));return function(J){if(J===1)J=Y;else{var ge=pe(J),Q=W/ge[2];J=new la(Q,B[0]-ge[0]*Q,B[1]-ge[1]*Q)}H.zoom(null,J)}})}function E(O,k,T){return!T&&O.__zooming||new S(O,k)}function S(O,k){this.that=O,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,k),this.taps=0}S.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,k){return this.mouse&&O!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var k=yn(this.that).datum();d.call(O,this.that,new mZ(O,{sourceEvent:this.sourceEvent,target:y,type:O,transform:this.that.__zoom,dispatch:d}),k)}};function P(O,...k){if(!e.apply(this,arguments))return;var T=E(this,k).event(O),D=this.__zoom,M=Math.max(o[0],Math.min(o[1],D.k*Math.pow(2,r.apply(this,arguments)))),_=tr(O);if(T.wheel)(T.mouse[0][0]!==_[0]||T.mouse[0][1]!==_[1])&&(T.mouse[1]=D.invert(T.mouse[0]=_)),clearTimeout(T.wheel);else{if(D.k===M)return;T.mouse=[_,D.invert(_)],Um(this),T.start()}Qc(O),T.wheel=setTimeout(H,x),T.zoom("mouse",n(j(v(D,M),T.mouse[0],T.mouse[1]),T.extent,i));function H(){T.wheel=null,T.end()}}function A(O,...k){if(p||!e.apply(this,arguments))return;var T=O.currentTarget,D=E(this,k,!0).event(O),M=yn(O.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",W,!0),_=tr(O,T),H=O.clientX,$=O.clientY;n4(O.view),zx(O),D.mouse=[_,this.__zoom.invert(_)],Um(this),D.start();function B(q){if(Qc(q),!D.moved){var Y=q.clientX-H,pe=q.clientY-$;D.moved=Y*Y+pe*pe>f}D.event(q).zoom("mouse",n(j(D.that.__zoom,D.mouse[0]=tr(q,T),D.mouse[1]),D.extent,i))}function W(q){M.on("mousemove.zoom mouseup.zoom",null),r4(q.view,D.moved),Qc(q),D.event(q).end()}}function L(O,...k){if(e.apply(this,arguments)){var T=this.__zoom,D=tr(O.changedTouches?O.changedTouches[0]:O,this),M=T.invert(D),_=T.k*(O.shiftKey?.5:2),H=n(j(v(T,_),D,M),t.apply(this,k),i);Qc(O),l>0?yn(this).transition().duration(l).call(b,H,D,O):yn(this).call(y.transform,H,D,O)}}function R(O,...k){if(e.apply(this,arguments)){var T=O.touches,D=T.length,M=E(this,k,O.changedTouches.length===D).event(O),_,H,$,B;for(zx(O),H=0;H<D;++H)$=T[H],B=tr($,this),B=[B,this.__zoom.invert(B),$.identifier],M.touch0?!M.touch1&&M.touch0[2]!==B[2]&&(M.touch1=B,M.taps=0):(M.touch0=B,_=!0,M.taps=1+!!u);u&&(u=clearTimeout(u)),_&&(M.taps<2&&(m=B[0],u=setTimeout(function(){u=null},g)),Um(this),M.start())}}function I(O,...k){if(this.__zooming){var T=E(this,k).event(O),D=O.changedTouches,M=D.length,_,H,$,B;for(Qc(O),_=0;_<M;++_)H=D[_],$=tr(H,this),T.touch0&&T.touch0[2]===H.identifier?T.touch0[0]=$:T.touch1&&T.touch1[2]===H.identifier&&(T.touch1[0]=$);if(H=T.that.__zoom,T.touch1){var W=T.touch0[0],q=T.touch0[1],Y=T.touch1[0],pe=T.touch1[1],J=(J=Y[0]-W[0])*J+(J=Y[1]-W[1])*J,ge=(ge=pe[0]-q[0])*ge+(ge=pe[1]-q[1])*ge;H=v(H,Math.sqrt(J/ge)),$=[(W[0]+Y[0])/2,(W[1]+Y[1])/2],B=[(q[0]+pe[0])/2,(q[1]+pe[1])/2]}else if(T.touch0)$=T.touch0[0],B=T.touch0[1];else return;T.zoom("touch",n(j(H,$,B),T.extent,i))}}function V(O,...k){if(this.__zooming){var T=E(this,k).event(O),D=O.changedTouches,M=D.length,_,H;for(zx(O),p&&clearTimeout(p),p=setTimeout(function(){p=null},g),_=0;_<M;++_)H=D[_],T.touch0&&T.touch0[2]===H.identifier?delete T.touch0:T.touch1&&T.touch1[2]===H.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(H=tr(H,this),Math.hypot(m[0]-H[0],m[1]-H[1])<w)){var $=yn(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return y.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:Jh(+O),y):r},y.filter=function(O){return arguments.length?(e=typeof O=="function"?O:Jh(!!O),y):e},y.touchable=function(O){return arguments.length?(a=typeof O=="function"?O:Jh(!!O),y):a},y.extent=function(O){return arguments.length?(t=typeof O=="function"?O:Jh([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),y):t},y.scaleExtent=function(O){return arguments.length?(o[0]=+O[0],o[1]=+O[1],y):[o[0],o[1]]},y.translateExtent=function(O){return arguments.length?(i[0][0]=+O[0][0],i[1][0]=+O[1][0],i[0][1]=+O[0][1],i[1][1]=+O[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(O){return arguments.length?(n=O,y):n},y.duration=function(O){return arguments.length?(l=+O,y):l},y.interpolate=function(O){return arguments.length?(c=O,y):c},y.on=function(){var O=d.on.apply(d,arguments);return O===d?y:O},y.clickDistance=function(O){return arguments.length?(f=(O=+O)*O,y):Math.sqrt(f)},y.tapDistance=function(O){return arguments.length?(w=+O,y):w},y}const Wr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},uu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],w4=["Enter"," ","Escape"],N4={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var pi;(function(e){e.Strict="strict",e.Loose="loose"})(pi||(pi={}));var Qo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Qo||(Qo={}));var hu;(function(e){e.Partial="partial",e.Full="full"})(hu||(hu={}));const b4={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var za;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(za||(za={}));var ar;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ar||(ar={}));var Pe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Pe||(Pe={}));const aE={[Pe.Left]:Pe.Right,[Pe.Right]:Pe.Left,[Pe.Top]:Pe.Bottom,[Pe.Bottom]:Pe.Top};function S4(e){return e===null?null:e?"valid":"invalid"}const C4=e=>"id"in e&&"source"in e&&"target"in e,yZ=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),$N=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),lh=(e,t=[0,0])=>{const{width:n,height:r}=Pa(e),a=e.origin??t,o=n*a[0],i=r*a[1];return{x:e.position.x-o,y:e.position.y-i}},jZ=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,a)=>{const o=typeof a=="string";let i=!t.nodeLookup&&!o?a:void 0;t.nodeLookup&&(i=o?t.nodeLookup.get(a):$N(a)?a:t.nodeLookup.get(a.id));const l=i?Kp(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return wg(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ng(n)},ch=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const a=Kp(r);n=wg(n,a)}}),Ng(n)},_N=(e,t,[n,r,a]=[0,0,1],o=!1,i=!1)=>{const l={...dh(t,[n,r,a]),width:t.width/a,height:t.height/a},c=[];for(const d of e.values()){const{measured:u,selectable:m=!0,hidden:p=!1}=d;if(i&&!m||p)continue;const g=u.width??d.width??d.initialWidth??null,x=u.height??d.height??d.initialHeight??null,f=mu(l,zl(d)),w=(g??0)*(x??0),y=o&&f>0;(!d.internals.handleBounds||y||f>=w||d.dragging)&&c.push(d)}return c},wZ=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function NZ(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&(t?.includeHiddenNodes||!a.hidden)&&(!r||r.has(a.id))&&n.set(a.id,a)}),n}async function bZ({nodes:e,width:t,height:n,panZoom:r,minZoom:a,maxZoom:o},i){if(e.size===0)return Promise.resolve(!0);const l=NZ(e,i),c=ch(l),d=VN(c,t,n,i?.minZoom??a,i?.maxZoom??o,i?.padding??.1);return await r.setViewport(d,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function E4({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:a,onError:o}){const i=n.get(e),l=i.parentId?n.get(i.parentId):void 0,{x:c,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let m=i.extent||a;if(i.extent==="parent"&&!i.expandParent)if(!l)o?.("005",Wr.error005());else{const g=l.measured.width,x=l.measured.height;g&&x&&(m=[[c,d],[c+g,d+x]])}else l&&Xl(i.extent)&&(m=[[i.extent[0][0]+c,i.extent[0][1]+d],[i.extent[1][0]+c,i.extent[1][1]+d]]);const p=Xl(m)?fi(t,m,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&o?.("015",Wr.error015()),{position:{x:p.x-c+(i.measured.width??0)*u[0],y:p.y-d+(i.measured.height??0)*u[1]},positionAbsolute:p}}async function SZ({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:a}){const o=new Set(e.map(p=>p.id)),i=[];for(const p of n){if(p.deletable===!1)continue;const g=o.has(p.id),x=!g&&p.parentId&&i.find(f=>f.id===p.parentId);(g||x)&&i.push(p)}const l=new Set(t.map(p=>p.id)),c=r.filter(p=>p.deletable!==!1),u=wZ(i,c);for(const p of c)l.has(p.id)&&!u.find(x=>x.id===p.id)&&u.push(p);if(!a)return{edges:u,nodes:i};const m=await a({nodes:i,edges:u});return typeof m=="boolean"?m?{edges:u,nodes:i}:{edges:[],nodes:[]}:m}const Wl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),fi=(e={x:0,y:0},t,n)=>({x:Wl(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Wl(e.y,t[0][1],t[1][1]-(n?.height??0))});function T4(e,t,n){const{width:r,height:a}=Pa(n),{x:o,y:i}=n.internals.positionAbsolute;return fi(e,[[o,i],[o+r,i+a]],t)}const oE=(e,t,n)=>e<t?Wl(Math.abs(e-t),1,t)/t:e>n?-Wl(Math.abs(e-n),1,t)/t:0,P4=(e,t,n=15,r=40)=>{const a=oE(e.x,r,t.width-r)*n,o=oE(e.y,r,t.height-r)*n;return[a,o]},wg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Dj=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ng=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),zl=(e,t=[0,0])=>{const{x:n,y:r}=$N(e)?e.internals.positionAbsolute:lh(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Kp=(e,t=[0,0])=>{const{x:n,y:r}=$N(e)?e.internals.positionAbsolute:lh(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},A4=(e,t)=>Ng(wg(Dj(e),Dj(t))),mu=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},iE=e=>or(e.width)&&or(e.height)&&or(e.x)&&or(e.y),or=e=>!isNaN(e)&&isFinite(e),CZ=(e,t)=>{},bg=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),dh=({x:e,y:t},[n,r,a],o=!1,i=[1,1])=>{const l={x:(e-n)/a,y:(t-r)/a};return o?bg(l,i):l},Gp=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r});function $i(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function EZ(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=$i(e,n),a=$i(e,t);return{top:r,right:a,bottom:r,left:a,x:a*2,y:r*2}}if(typeof e=="object"){const r=$i(e.top??e.y??0,n),a=$i(e.bottom??e.y??0,n),o=$i(e.left??e.x??0,t),i=$i(e.right??e.x??0,t);return{top:r,right:i,bottom:a,left:o,x:o+i,y:r+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function TZ(e,t,n,r,a,o){const{x:i,y:l}=Gp(e,[t,n,r]),{x:c,y:d}=Gp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=a-c,m=o-d;return{left:Math.floor(i),top:Math.floor(l),right:Math.floor(u),bottom:Math.floor(m)}}const VN=(e,t,n,r,a,o)=>{const i=EZ(o,t,n),l=(t-i.x)/e.width,c=(n-i.y)/e.height,d=Math.min(l,c),u=Wl(d,r,a),m=e.x+e.width/2,p=e.y+e.height/2,g=t/2-m*u,x=n/2-p*u,f=TZ(e,g,x,u,t,n),w={left:Math.min(f.left-i.left,0),top:Math.min(f.top-i.top,0),right:Math.min(f.right-i.right,0),bottom:Math.min(f.bottom-i.bottom,0)};return{x:g-w.left+w.right,y:x-w.top+w.bottom,zoom:u}},Jp=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Xl(e){return e!==void 0&&e!=="parent"}function Pa(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function D4(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function k4(e,t={width:0,height:0},n,r,a){const o={...e},i=r.get(n);if(i){const l=i.origin||a;o.x+=i.internals.positionAbsolute.x-(t.width??0)*l[0],o.y+=i.internals.positionAbsolute.y-(t.height??0)*l[1]}return o}function lE(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function PZ(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function AZ(e){return{...N4,...e||{}}}function Sd(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:a}){const{x:o,y:i}=Fr(e),l=dh({x:o-(a?.left??0),y:i-(a?.top??0)},r),{x:c,y:d}=n?bg(l,t):l;return{xSnapped:c,ySnapped:d,...l}}const UN=e=>({width:e.offsetWidth,height:e.offsetHeight}),M4=e=>e?.getRootNode?.()||window?.document,DZ=["INPUT","SELECT","TEXTAREA"];function R4(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:DZ.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const F4=e=>"clientX"in e,Fr=(e,t)=>{const n=F4(e),r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},cE=(e,t,n,r,a)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:a,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...UN(i)}})};function O4({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:o,targetControlX:i,targetControlY:l}){const c=e*.125+a*.375+i*.375+n*.125,d=t*.125+o*.375+l*.375+r*.125,u=Math.abs(c-e),m=Math.abs(d-t);return[c,d,u,m]}function Qh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function dE({pos:e,x1:t,y1:n,x2:r,y2:a,c:o}){switch(e){case Pe.Left:return[t-Qh(t-r,o),n];case Pe.Right:return[t+Qh(r-t,o),n];case Pe.Top:return[t,n-Qh(n-a,o)];case Pe.Bottom:return[t,n+Qh(a-n,o)]}}function BN({sourceX:e,sourceY:t,sourcePosition:n=Pe.Bottom,targetX:r,targetY:a,targetPosition:o=Pe.Top,curvature:i=.25}){const[l,c]=dE({pos:n,x1:e,y1:t,x2:r,y2:a,c:i}),[d,u]=dE({pos:o,x1:r,y1:a,x2:e,y2:t,c:i}),[m,p,g,x]=O4({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${c} ${d},${u} ${r},${a}`,m,p,g,x]}function I4({sourceX:e,sourceY:t,targetX:n,targetY:r}){const a=Math.abs(n-e)/2,o=n<e?n+a:n-a,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[o,l,a,i]}function kZ({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:a=!1}){if(r!==void 0)return r;const o=a&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return o+i}function MZ({sourceNode:e,targetNode:t,width:n,height:r,transform:a}){const o=wg(Kp(e),Kp(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const i={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:r/a[2]};return mu(i,Ng(o))>0}const RZ=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,FZ=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Qp=(e,t)=>{if(!e.source||!e.target)return t;let n;return C4(e)?n={...e}:n={...e,id:RZ(e)},FZ(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function L4({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[a,o,i,l]=I4({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,o,i,l]}const uE={[Pe.Left]:{x:-1,y:0},[Pe.Right]:{x:1,y:0},[Pe.Top]:{x:0,y:-1},[Pe.Bottom]:{x:0,y:1}},OZ=({source:e,sourcePosition:t=Pe.Bottom,target:n})=>t===Pe.Left||t===Pe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},hE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function IZ({source:e,sourcePosition:t=Pe.Bottom,target:n,targetPosition:r=Pe.Top,center:a,offset:o,stepPosition:i}){const l=uE[t],c=uE[r],d={x:e.x+l.x*o,y:e.y+l.y*o},u={x:n.x+c.x*o,y:n.y+c.y*o},m=OZ({source:d,sourcePosition:t,target:u}),p=m.x!==0?"x":"y",g=m[p];let x=[],f,w;const y={x:0,y:0},v={x:0,y:0},[,,j,N]=I4({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[p]*c[p]===-1){p==="x"?(f=a.x??d.x+(u.x-d.x)*i,w=a.y??(d.y+u.y)/2):(f=a.x??(d.x+u.x)/2,w=a.y??d.y+(u.y-d.y)*i);const E=[{x:f,y:d.y},{x:f,y:u.y}],S=[{x:d.x,y:w},{x:u.x,y:w}];l[p]===g?x=p==="x"?E:S:x=p==="x"?S:E}else{const E=[{x:d.x,y:u.y}],S=[{x:u.x,y:d.y}];if(p==="x"?x=l.x===g?S:E:x=l.y===g?E:S,t===r){const I=Math.abs(e[p]-n[p]);if(I<=o){const V=Math.min(o-1,o-I);l[p]===g?y[p]=(d[p]>e[p]?-1:1)*V:v[p]=(u[p]>n[p]?-1:1)*V}}if(t!==r){const I=p==="x"?"y":"x",V=l[p]===c[I],O=d[I]>u[I],k=d[I]<u[I];(l[p]===1&&(!V&&O||V&&k)||l[p]!==1&&(!V&&k||V&&O))&&(x=p==="x"?E:S)}const P={x:d.x+y.x,y:d.y+y.y},A={x:u.x+v.x,y:u.y+v.y},L=Math.max(Math.abs(P.x-x[0].x),Math.abs(A.x-x[0].x)),R=Math.max(Math.abs(P.y-x[0].y),Math.abs(A.y-x[0].y));L>=R?(f=(P.x+A.x)/2,w=x[0].y):(f=x[0].x,w=(P.y+A.y)/2)}return[[e,{x:d.x+y.x,y:d.y+y.y},...x,{x:u.x+v.x,y:u.y+v.y},n],f,w,j,N]}function LZ(e,t,n,r){const a=Math.min(hE(e,t)/2,hE(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+a*d},${i}Q ${o},${i} ${o},${i+a*u}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${i+a*c}Q ${o},${i} ${o+a*l},${i}`}function kj({sourceX:e,sourceY:t,sourcePosition:n=Pe.Bottom,targetX:r,targetY:a,targetPosition:o=Pe.Top,borderRadius:i=5,centerX:l,centerY:c,offset:d=20,stepPosition:u=.5}){const[m,p,g,x,f]=IZ({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:o,center:{x:l,y:c},offset:d,stepPosition:u});return[m.reduce((y,v,j)=>{let N="";return j>0&&j<m.length-1?N=LZ(m[j-1],v,m[j+1],i):N=`${j===0?"M":"L"}${v.x} ${v.y}`,y+=N,y},""),p,g,x,f]}function mE(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function $Z(e){const{sourceNode:t,targetNode:n}=e;if(!mE(t)||!mE(n))return null;const r=t.internals.handleBounds||pE(t.handles),a=n.internals.handleBounds||pE(n.handles),o=fE(r?.source??[],e.sourceHandle),i=fE(e.connectionMode===pi.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),e.targetHandle);if(!o||!i)return e.onError?.("008",Wr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=o?.position||Pe.Bottom,c=i?.position||Pe.Top,d=pu(t,o,l),u=pu(n,i,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:l,targetPosition:c}}function pE(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function pu(e,t,n=Pe.Left,r=!1){const a=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:l}=t??Pa(e);if(r)return{x:a+i/2,y:o+l/2};switch(t?.position??n){case Pe.Top:return{x:a+i/2,y:o};case Pe.Right:return{x:a+i,y:o+l/2};case Pe.Bottom:return{x:a+i/2,y:o+l};case Pe.Left:return{x:a,y:o+l/2}}}function fE(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Mj(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function _Z(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:a}){const o=new Set;return e.reduce((i,l)=>([l.markerStart||r,l.markerEnd||a].forEach(c=>{if(c&&typeof c=="object"){const d=Mj(c,t);o.has(d)||(i.push({id:d,color:c.color||n,...c}),o.add(d))}}),i),[]).sort((i,l)=>i.id.localeCompare(l.id))}const HN={nodeOrigin:[0,0],nodeExtent:uu,elevateNodesOnSelect:!0,defaults:{}},VZ={...HN,checkEquality:!0};function qN(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function UZ(e,t,n){const r=qN(HN,n);for(const a of e.values())if(a.parentId)WN(a,e,t,r);else{const o=lh(a,r.nodeOrigin),i=Xl(a.extent)?a.extent:r.nodeExtent,l=fi(o,i,Pa(a));a.internals.positionAbsolute=l}}function Rj(e,t,n,r){const a=qN(VZ,r);let o=e.length>0;const i=new Map(t),l=a?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=i.get(c.id);if(a.checkEquality&&c===d?.internals.userNode)t.set(c.id,d);else{const u=lh(c,a.nodeOrigin),m=Xl(c.extent)?c.extent:a.nodeExtent,p=fi(u,m,Pa(c));d={...a.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:p,handleBounds:c.measured?d?.internals.handleBounds:void 0,z:$4(c,l),userNode:c}},t.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(o=!1),c.parentId&&WN(d,t,n,r)}return o}function BZ(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function WN(e,t,n,r){const{elevateNodesOnSelect:a,nodeOrigin:o,nodeExtent:i}=qN(HN,r),l=e.parentId,c=t.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}BZ(e,n);const d=a?1e3:0,{x:u,y:m,z:p}=HZ(e,c,o,i,d),{positionAbsolute:g}=e.internals,x=u!==g.x||m!==g.y;(x||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:u,y:m}:g,z:p}})}function $4(e,t){return(or(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function HZ(e,t,n,r,a){const{x:o,y:i}=t.internals.positionAbsolute,l=Pa(e),c=lh(e,n),d=Xl(e.extent)?fi(c,e.extent,l):c;let u=fi({x:o+d.x,y:i+d.y},r,l);e.extent==="parent"&&(u=T4(u,l,t));const m=$4(e,a),p=t.internals.z??0;return{x:u.x,y:u.y,z:p>=m?p+1:m}}function zN(e,t,n,r=[0,0]){const a=[],o=new Map;for(const i of e){const l=t.get(i.parentId);if(!l)continue;const c=o.get(i.parentId)?.expandedRect??zl(l),d=A4(c,i.rect);o.set(i.parentId,{expandedRect:d,parent:l})}return o.size>0&&o.forEach(({expandedRect:i,parent:l},c)=>{const d=l.internals.positionAbsolute,u=Pa(l),m=l.origin??r,p=i.x<d.x?Math.round(Math.abs(d.x-i.x)):0,g=i.y<d.y?Math.round(Math.abs(d.y-i.y)):0,x=Math.max(u.width,Math.round(i.width)),f=Math.max(u.height,Math.round(i.height)),w=(x-u.width)*m[0],y=(f-u.height)*m[1];(p>0||g>0||w||y)&&(a.push({id:c,type:"position",position:{x:l.position.x-p+w,y:l.position.y-g+y}}),n.get(c)?.forEach(v=>{e.some(j=>j.id===v.id)||a.push({id:v.id,type:"position",position:{x:v.position.x+p,y:v.position.y+g}})})),(u.width<i.width||u.height<i.height||p||g)&&a.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:x+(p?m[0]*p-w:0),height:f+(g?m[1]*g-y:0)}})}),a}function qZ(e,t,n,r,a,o){const i=r?.querySelector(".xyflow__viewport");let l=!1;if(!i)return{changes:[],updatedInternals:l};const c=[],d=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(d.transform),m=[];for(const p of e.values()){const g=t.get(p.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const x=UN(p.nodeElement),f=g.measured.width!==x.width||g.measured.height!==x.height;if(!!(x.width&&x.height&&(f||!g.internals.handleBounds||p.force))){const y=p.nodeElement.getBoundingClientRect(),v=Xl(g.extent)?g.extent:o;let{positionAbsolute:j}=g.internals;g.parentId&&g.extent==="parent"?j=T4(j,x,t.get(g.parentId)):v&&(j=fi(j,v,x));const N={...g,measured:x,internals:{...g.internals,positionAbsolute:j,handleBounds:{source:cE("source",p.nodeElement,y,u,g.id),target:cE("target",p.nodeElement,y,u,g.id)}}};t.set(g.id,N),g.parentId&&WN(N,t,n,{nodeOrigin:a}),l=!0,f&&(c.push({id:g.id,type:"dimensions",dimensions:x}),g.expandParent&&g.parentId&&m.push({id:g.id,parentId:g.parentId,rect:zl(N,a)}))}}if(m.length>0){const p=zN(m,t,n,a);c.push(...p)}return{changes:c,updatedInternals:l}}async function WZ({delta:e,panZoom:t,transform:n,translateExtent:r,width:a,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[a,o]],r),l=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(l)}function gE(e,t,n,r,a,o){let i=a;const l=r.get(i)||new Map;r.set(i,l.set(n,t)),i=`${a}-${e}`;const c=r.get(i)||new Map;if(r.set(i,c.set(n,t)),o){i=`${a}-${e}-${o}`;const d=r.get(i)||new Map;r.set(i,d.set(n,t))}}function _4(e,t,n){e.clear(),t.clear();for(const r of n){const{source:a,target:o,sourceHandle:i=null,targetHandle:l=null}=r,c={edgeId:r.id,source:a,target:o,sourceHandle:i,targetHandle:l},d=`${a}-${i}--${o}-${l}`,u=`${o}-${l}--${a}-${i}`;gE("source",c,u,e,a,i),gE("target",c,d,e,o,l),t.set(r.id,r)}}function V4(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:V4(n,t):!1}function xE(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function zZ(e,t,n,r){const a=new Map;for(const[o,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!V4(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const l=e.get(o);l&&a.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return a}function Xx({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const a=[];for(const[i,l]of t){const c=n.get(i)?.internals.userNode;c&&a.push({...c,position:l.position,dragging:r})}if(!e)return[a[0],a];const o=n.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:a[0],a]}function XZ({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:a}){let o={x:null,y:null},i=0,l=new Map,c=!1,d={x:0,y:0},u=null,m=!1,p=null,g=!1,x=!1;function f({noDragClassName:y,handleSelector:v,domNode:j,isSelectable:N,nodeId:b,nodeClickDistance:E=0}){p=yn(j);function S({x:R,y:I},V){const{nodeLookup:O,nodeExtent:k,snapGrid:T,snapToGrid:D,nodeOrigin:M,onNodeDrag:_,onSelectionDrag:H,onError:$,updateNodePositions:B}=t();o={x:R,y:I};let W=!1,q={x:0,y:0,x2:0,y2:0};if(l.size>1&&k){const Y=ch(l);q=Dj(Y)}for(const[Y,pe]of l){if(!O.has(Y))continue;let J={x:R-pe.distance.x,y:I-pe.distance.y};D&&(J=bg(J,T));let ge=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];if(l.size>1&&k&&!pe.extent){const{positionAbsolute:le}=pe.internals,me=le.x-q.x+k[0][0],Z=le.x+pe.measured.width-q.x2+k[1][0],ae=le.y-q.y+k[0][1],we=le.y+pe.measured.height-q.y2+k[1][1];ge=[[me,ae],[Z,we]]}const{position:Q,positionAbsolute:he}=E4({nodeId:Y,nextPosition:J,nodeLookup:O,nodeExtent:ge,nodeOrigin:M,onError:$});W=W||pe.position.x!==Q.x||pe.position.y!==Q.y,pe.position=Q,pe.internals.positionAbsolute=he}if(x=x||W,!!W&&(B(l,!0),V&&(r||_||!b&&H))){const[Y,pe]=Xx({nodeId:b,dragItems:l,nodeLookup:O});r?.(V,l,Y,pe),_?.(V,Y,pe),b||H?.(V,pe)}}async function P(){if(!u)return;const{transform:R,panBy:I,autoPanSpeed:V,autoPanOnNodeDrag:O}=t();if(!O){c=!1,cancelAnimationFrame(i);return}const[k,T]=P4(d,u,V);(k!==0||T!==0)&&(o.x=(o.x??0)-k/R[2],o.y=(o.y??0)-T/R[2],await I({x:k,y:T})&&S(o,null)),i=requestAnimationFrame(P)}function A(R){const{nodeLookup:I,multiSelectionActive:V,nodesDraggable:O,transform:k,snapGrid:T,snapToGrid:D,selectNodesOnDrag:M,onNodeDragStart:_,onSelectionDragStart:H,unselectNodesAndEdges:$}=t();m=!0,(!M||!N)&&!V&&b&&(I.get(b)?.selected||$()),N&&M&&b&&e?.(b);const B=Sd(R.sourceEvent,{transform:k,snapGrid:T,snapToGrid:D,containerBounds:u});if(o=B,l=zZ(I,O,B,b),l.size>0&&(n||_||!b&&H)){const[W,q]=Xx({nodeId:b,dragItems:l,nodeLookup:I});n?.(R.sourceEvent,l,W,q),_?.(R.sourceEvent,W,q),b||H?.(R.sourceEvent,q)}}const L=a4().clickDistance(E).on("start",R=>{const{domNode:I,nodeDragThreshold:V,transform:O,snapGrid:k,snapToGrid:T}=t();u=I?.getBoundingClientRect()||null,g=!1,x=!1,V===0&&A(R),o=Sd(R.sourceEvent,{transform:O,snapGrid:k,snapToGrid:T,containerBounds:u}),d=Fr(R.sourceEvent,u)}).on("drag",R=>{const{autoPanOnNodeDrag:I,transform:V,snapGrid:O,snapToGrid:k,nodeDragThreshold:T,nodeLookup:D}=t(),M=Sd(R.sourceEvent,{transform:V,snapGrid:O,snapToGrid:k,containerBounds:u});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||b&&!D.has(b))&&(g=!0),!g){if(!c&&I&&m&&(c=!0,P()),!m){const _=M.xSnapped-(o.x??0),H=M.ySnapped-(o.y??0);Math.sqrt(_*_+H*H)>T&&A(R)}(o.x!==M.xSnapped||o.y!==M.ySnapped)&&l&&m&&(d=Fr(R.sourceEvent,u),S(M,R.sourceEvent))}}).on("end",R=>{if(!(!m||g)&&(c=!1,m=!1,cancelAnimationFrame(i),l.size>0)){const{nodeLookup:I,updateNodePositions:V,onNodeDragStop:O,onSelectionDragStop:k}=t();if(x&&(V(l,!1),x=!1),a||O||!b&&k){const[T,D]=Xx({nodeId:b,dragItems:l,nodeLookup:I,dragging:!1});a?.(R.sourceEvent,l,T,D),O?.(R.sourceEvent,T,D),b||k?.(R.sourceEvent,D)}}}).filter(R=>{const I=R.target;return!R.button&&(!y||!xE(I,`.${y}`,j))&&(!v||xE(I,v,j))});p.call(L)}function w(){p?.on(".drag",null)}return{update:f,destroy:w}}function YZ(e,t,n){const r=[],a={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())mu(a,zl(o))>0&&r.push(o);return r}const KZ=250;function GZ(e,t,n,r){let a=[],o=1/0;const i=YZ(e,n,t+KZ);for(const l of i){const c=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of c){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:u,y:m}=pu(l,d,d.position,!0),p=Math.sqrt(Math.pow(u-e.x,2)+Math.pow(m-e.y,2));p>t||(p<o?(a=[{...d,x:u,y:m}],o=p):p===o&&a.push({...d,x:u,y:m}))}}if(!a.length)return null;if(a.length>1){const l=r.type==="source"?"target":"source";return a.find(c=>c.type===l)??a[0]}return a[0]}function U4(e,t,n,r,a,o=!1){const i=r.get(e);if(!i)return null;const l=a==="strict"?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],c=(n?l?.find(d=>d.id===n):l?.[0])??null;return c&&o?{...c,...pu(i,c,c.position,!0)}:c}function B4(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function JZ(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const H4=()=>!0;function QZ(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:a,edgeUpdaterType:o,isTarget:i,domNode:l,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:m,panBy:p,cancelConnection:g,onConnectStart:x,onConnect:f,onConnectEnd:w,isValidConnection:y=H4,onReconnectEnd:v,updateConnection:j,getTransform:N,getFromHandle:b,autoPanSpeed:E,dragThreshold:S=1}){const P=M4(e.target);let A=0,L;const{x:R,y:I}=Fr(e),V=P?.elementFromPoint(R,I),O=B4(o,V),k=l?.getBoundingClientRect();let T=!1;if(!k||!O)return;const D=U4(a,O,r,c,t);if(!D)return;let M=Fr(e,k),_=!1,H=null,$=!1,B=null;function W(){if(!u||!k)return;const[le,me]=P4(M,k,E);p({x:le,y:me}),A=requestAnimationFrame(W)}const q={...D,nodeId:a,type:O,position:D.position},Y=c.get(a);let J={inProgress:!0,isValid:null,from:pu(Y,q,Pe.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:Y,to:M,toHandle:null,toPosition:aE[q.position],toNode:null};function ge(){T=!0,j(J),x?.(e,{nodeId:a,handleId:r,handleType:O})}S===0&&ge();function Q(le){if(!T){const{x:we,y:Ve}=Fr(le),Ue=we-R,ct=Ve-I;if(!(Ue*Ue+ct*ct>S*S))return;ge()}if(!b()||!q){he(le);return}const me=N();M=Fr(le,k),L=GZ(dh(M,me,!1,[1,1]),n,c,q),_||(W(),_=!0);const Z=q4(le,{handle:L,connectionMode:t,fromNodeId:a,fromHandleId:r,fromType:i?"target":"source",isValidConnection:y,doc:P,lib:d,flowId:m,nodeLookup:c});B=Z.handleDomNode,H=Z.connection,$=JZ(!!L,Z.isValid);const ae={...J,isValid:$,to:Z.toHandle&&$?Gp({x:Z.toHandle.x,y:Z.toHandle.y},me):M,toHandle:Z.toHandle,toPosition:$&&Z.toHandle?Z.toHandle.position:aE[q.position],toNode:Z.toHandle?c.get(Z.toHandle.nodeId):null};$&&L&&J.toHandle&&ae.toHandle&&J.toHandle.type===ae.toHandle.type&&J.toHandle.nodeId===ae.toHandle.nodeId&&J.toHandle.id===ae.toHandle.id&&J.to.x===ae.to.x&&J.to.y===ae.to.y||(j(ae),J=ae)}function he(le){if(T){(L||B)&&H&&$&&f?.(H);const{inProgress:me,...Z}=J,ae={...Z,toPosition:J.toHandle?J.toPosition:null};w?.(le,ae),o&&v?.(le,ae)}g(),cancelAnimationFrame(A),_=!1,$=!1,H=null,B=null,P.removeEventListener("mousemove",Q),P.removeEventListener("mouseup",he),P.removeEventListener("touchmove",Q),P.removeEventListener("touchend",he)}P.addEventListener("mousemove",Q),P.addEventListener("mouseup",he),P.addEventListener("touchmove",Q),P.addEventListener("touchend",he)}function q4(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:a,fromType:o,doc:i,lib:l,flowId:c,isValidConnection:d=H4,nodeLookup:u}){const m=o==="target",p=t?i.querySelector(`.${l}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:x}=Fr(e),f=i.elementFromPoint(g,x),w=f?.classList.contains(`${l}-flow__handle`)?f:p,y={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const v=B4(void 0,w),j=w.getAttribute("data-nodeid"),N=w.getAttribute("data-handleid"),b=w.classList.contains("connectable"),E=w.classList.contains("connectableend");if(!j||!v)return y;const S={source:m?j:r,sourceHandle:m?N:a,target:m?r:j,targetHandle:m?a:N};y.connection=S;const A=b&&E&&(n===pi.Strict?m&&v==="source"||!m&&v==="target":j!==r||N!==a);y.isValid=A&&d(S),y.toHandle=U4(j,v,N,u,n,!0)}return y}const Fj={onPointerDown:QZ,isValid:q4};function ZZ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const a=yn(e);function o({translateExtent:l,width:c,height:d,zoomStep:u=10,pannable:m=!0,zoomable:p=!0,inversePan:g=!1}){const x=j=>{const N=n();if(j.sourceEvent.type!=="wheel"||!t)return;const b=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*u,E=N[2]*Math.pow(2,b);t.scaleTo(E)};let f=[0,0];const w=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(f=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},y=j=>{const N=n();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!t)return;const b=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],E=[b[0]-f[0],b[1]-f[1]];f=b;const S=r()*Math.max(N[2],Math.log(N[2]))*(g?-1:1),P={x:N[0]-E[0]*S,y:N[1]-E[1]*S},A=[[0,0],[c,d]];t.setViewportConstrained({x:P.x,y:P.y,zoom:N[2]},A,l)},v=j4().on("start",w).on("zoom",m?y:null).on("zoom.wheel",p?x:null);a.call(v,{})}function i(){a.on("zoom",null)}return{update:o,destroy:i,pointer:tr}}const eee=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Sg=e=>({x:e.x,y:e.y,zoom:e.k}),Yx=({x:e,y:t,zoom:n})=>jg.translate(e,t).scale(n),ol=(e,t)=>e.target.closest(`.${t}`),W4=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),tee=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Kx=(e,t=0,n=tee,r=()=>{})=>{const a=typeof t=="number"&&t>0;return a||r(),a?e.transition().duration(t).ease(n).on("end",r):e},z4=e=>{const t=e.ctrlKey&&Jp()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function see({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:a,panOnScrollSpeed:o,zoomOnPinch:i,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(ol(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(u.ctrlKey&&i){const w=tr(u),y=z4(u),v=m*Math.pow(2,y);r.scaleTo(n,v,w,u);return}const p=u.deltaMode===1?20:1;let g=a===Qo.Vertical?0:u.deltaX*p,x=a===Qo.Horizontal?0:u.deltaY*p;!Jp()&&u.shiftKey&&a!==Qo.Vertical&&(g=u.deltaY*p,x=0),r.translateBy(n,-(g/m)*o,-(x/m)*o,{internal:!0});const f=Sg(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(u,f)),e.isPanScrolling&&(c?.(u,f),e.panScrollTimeout=setTimeout(()=>{d?.(u,f),e.isPanScrolling=!1},150))}}function nee({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,a){const o=r.type==="wheel",i=!t&&o&&!r.ctrlKey,l=ol(r,e);if(r.ctrlKey&&o&&l&&r.preventDefault(),i||l)return null;r.preventDefault(),n.call(this,r,a)}}function ree({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const a=Sg(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=a,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,a)}}function aee({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:a}){return o=>{e.usedRightMouseButton=!!(n&&W4(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),a&&!o.sourceEvent?.internal&&a?.(o.sourceEvent,Sg(o.transform))}}function oee({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:a,onPaneContextMenu:o}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&W4(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&o(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),a&&eee(e.prevViewport,i.transform))){const l=Sg(i.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a?.(i.sourceEvent,l)},n?150:0)}}}function iee({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:a,zoomOnDoubleClick:o,userSelectionActive:i,noWheelClassName:l,noPanClassName:c,lib:d}){return u=>{const m=e||t,p=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(ol(u,`${d}-flow__node`)||ol(u,`${d}-flow__edge`)))return!0;if(!r&&!m&&!a&&!o&&!n||i||ol(u,l)&&u.type==="wheel"||ol(u,c)&&(u.type!=="wheel"||a&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&u.touches?.length>1)return u.preventDefault(),!1;if(!m&&!a&&!p&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function lee({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:a,viewport:o,onPanZoom:i,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),p=j4().clickDistance(!or(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(a),g=yn(e).call(p);j({x:o.x,y:o.y,zoom:Wl(o.zoom,t,n)},[[0,0],[m.width,m.height]],a);const x=g.on("wheel.zoom"),f=g.on("dblclick.zoom");p.wheelDelta(z4);function w(I,V){return g?new Promise(O=>{p?.interpolate(V?.interpolate==="linear"?bd:$m).transform(Kx(g,V?.duration,V?.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function y({noWheelClassName:I,noPanClassName:V,onPaneContextMenu:O,userSelectionActive:k,panOnScroll:T,panOnDrag:D,panOnScrollMode:M,panOnScrollSpeed:_,preventScrolling:H,zoomOnPinch:$,zoomOnScroll:B,zoomOnDoubleClick:W,zoomActivationKeyPressed:q,lib:Y,onTransformChange:pe}){k&&!u.isZoomingOrPanning&&v();const ge=T&&!q&&!k?see({zoomPanValues:u,noWheelClassName:I,d3Selection:g,d3Zoom:p,panOnScrollMode:M,panOnScrollSpeed:_,zoomOnPinch:$,onPanZoomStart:l,onPanZoom:i,onPanZoomEnd:c}):nee({noWheelClassName:I,preventScrolling:H,d3ZoomHandler:x});if(g.on("wheel.zoom",ge,{passive:!1}),!k){const he=ree({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:l});p.on("start",he);const le=aee({zoomPanValues:u,panOnDrag:D,onPaneContextMenu:!!O,onPanZoom:i,onTransformChange:pe});p.on("zoom",le);const me=oee({zoomPanValues:u,panOnDrag:D,panOnScroll:T,onPaneContextMenu:O,onPanZoomEnd:c,onDraggingChange:d});p.on("end",me)}const Q=iee({zoomActivationKeyPressed:q,panOnDrag:D,zoomOnScroll:B,panOnScroll:T,zoomOnDoubleClick:W,zoomOnPinch:$,userSelectionActive:k,noPanClassName:V,noWheelClassName:I,lib:Y});p.filter(Q),W?g.on("dblclick.zoom",f):g.on("dblclick.zoom",null)}function v(){p.on("zoom",null)}async function j(I,V,O){const k=Yx(I),T=p?.constrain()(k,V,O);return T&&await w(T),new Promise(D=>D(T))}async function N(I,V){const O=Yx(I);return await w(O,V),new Promise(k=>k(O))}function b(I){if(g){const V=Yx(I),O=g.property("__zoom");(O.k!==I.zoom||O.x!==I.x||O.y!==I.y)&&p?.transform(g,V,null,{sync:!0})}}function E(){const I=g?y4(g.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function S(I,V){return g?new Promise(O=>{p?.interpolate(V?.interpolate==="linear"?bd:$m).scaleTo(Kx(g,V?.duration,V?.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function P(I,V){return g?new Promise(O=>{p?.interpolate(V?.interpolate==="linear"?bd:$m).scaleBy(Kx(g,V?.duration,V?.ease,()=>O(!0)),I)}):Promise.resolve(!1)}function A(I){p?.scaleExtent(I)}function L(I){p?.translateExtent(I)}function R(I){const V=!or(I)||I<0?0:I;p?.clickDistance(V)}return{update:y,destroy:v,setViewport:N,setViewportConstrained:j,getViewport:E,scaleTo:S,scaleBy:P,setScaleExtent:A,setTranslateExtent:L,syncViewport:b,setClickDistance:R}}var Yl;(function(e){e.Line="line",e.Handle="handle"})(Yl||(Yl={}));function cee({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:a,affectsY:o}){const i=e-t,l=n-r,c=[i>0?1:i<0?-1:0,l>0?1:l<0?-1:0];return i&&a&&(c[0]=c[0]*-1),l&&o&&(c[1]=c[1]*-1),c}function dee(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:a}}function Oa(e,t){return Math.max(0,t-e)}function Ia(e,t){return Math.max(0,e-t)}function Zh(e,t,n){return Math.max(0,t-e,e-n)}function vE(e,t){return e?!t:t}function uee(e,t,n,r,a,o,i,l){let{affectsX:c,affectsY:d}=t;const{isHorizontal:u,isVertical:m}=t,p=u&&m,{xSnapped:g,ySnapped:x}=n,{minWidth:f,maxWidth:w,minHeight:y,maxHeight:v}=r,{x:j,y:N,width:b,height:E,aspectRatio:S}=e;let P=Math.floor(u?g-e.pointerX:0),A=Math.floor(m?x-e.pointerY:0);const L=b+(c?-P:P),R=E+(d?-A:A),I=-o[0]*b,V=-o[1]*E;let O=Zh(L,f,w),k=Zh(R,y,v);if(i){let M=0,_=0;c&&P<0?M=Oa(j+P+I,i[0][0]):!c&&P>0&&(M=Ia(j+L+I,i[1][0])),d&&A<0?_=Oa(N+A+V,i[0][1]):!d&&A>0&&(_=Ia(N+R+V,i[1][1])),O=Math.max(O,M),k=Math.max(k,_)}if(l){let M=0,_=0;c&&P>0?M=Ia(j+P,l[0][0]):!c&&P<0&&(M=Oa(j+L,l[1][0])),d&&A>0?_=Ia(N+A,l[0][1]):!d&&A<0&&(_=Oa(N+R,l[1][1])),O=Math.max(O,M),k=Math.max(k,_)}if(a){if(u){const M=Zh(L/S,y,v)*S;if(O=Math.max(O,M),i){let _=0;!c&&!d||c&&!d&&p?_=Ia(N+V+L/S,i[1][1])*S:_=Oa(N+V+(c?P:-P)/S,i[0][1])*S,O=Math.max(O,_)}if(l){let _=0;!c&&!d||c&&!d&&p?_=Oa(N+L/S,l[1][1])*S:_=Ia(N+(c?P:-P)/S,l[0][1])*S,O=Math.max(O,_)}}if(m){const M=Zh(R*S,f,w)/S;if(k=Math.max(k,M),i){let _=0;!c&&!d||d&&!c&&p?_=Ia(j+R*S+I,i[1][0])/S:_=Oa(j+(d?A:-A)*S+I,i[0][0])/S,k=Math.max(k,_)}if(l){let _=0;!c&&!d||d&&!c&&p?_=Oa(j+R*S,l[1][0])/S:_=Ia(j+(d?A:-A)*S,l[0][0])/S,k=Math.max(k,_)}}}A=A+(A<0?k:-k),P=P+(P<0?O:-O),a&&(p?L>R*S?A=(vE(c,d)?-P:P)/S:P=(vE(c,d)?-A:A)*S:u?(A=P/S,d=c):(P=A*S,c=d));const T=c?j+P:j,D=d?N+A:N;return{width:b+(c?-P:P),height:E+(d?-A:A),x:o[0]*P*(c?-1:1)+T,y:o[1]*A*(d?-1:1)+D}}const X4={width:0,height:0,x:0,y:0},hee={...X4,pointerX:0,pointerY:0,aspectRatio:1};function mee(e){return[[0,0],[e.measured.width,e.measured.height]]}function pee(e,t,n){const r=t.position.x+e.position.x,a=t.position.y+e.position.y,o=e.measured.width??0,i=e.measured.height??0,l=n[0]*o,c=n[1]*i;return[[r-l,a-c],[r+o-l,a+i-c]]}function fee({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:a}){const o=yn(e);function i({controlPosition:c,boundaries:d,keepAspectRatio:u,resizeDirection:m,onResizeStart:p,onResize:g,onResizeEnd:x,shouldResize:f}){let w={...X4},y={...hee};const v=dee(c);let j,N=null,b=[],E,S,P;const A=a4().on("start",L=>{const{nodeLookup:R,transform:I,snapGrid:V,snapToGrid:O,nodeOrigin:k,paneDomNode:T}=n();if(j=R.get(t),!j)return;N=T?.getBoundingClientRect()??null;const{xSnapped:D,ySnapped:M}=Sd(L.sourceEvent,{transform:I,snapGrid:V,snapToGrid:O,containerBounds:N});w={width:j.measured.width??0,height:j.measured.height??0,x:j.position.x??0,y:j.position.y??0},y={...w,pointerX:D,pointerY:M,aspectRatio:w.width/w.height},E=void 0,j.parentId&&(j.extent==="parent"||j.expandParent)&&(E=R.get(j.parentId),S=E&&j.extent==="parent"?mee(E):void 0),b=[],P=void 0;for(const[_,H]of R)if(H.parentId===t&&(b.push({id:_,position:{...H.position},extent:H.extent}),H.extent==="parent"||H.expandParent)){const $=pee(H,j,H.origin??k);P?P=[[Math.min($[0][0],P[0][0]),Math.min($[0][1],P[0][1])],[Math.max($[1][0],P[1][0]),Math.max($[1][1],P[1][1])]]:P=$}p?.(L,{...w})}).on("drag",L=>{const{transform:R,snapGrid:I,snapToGrid:V,nodeOrigin:O}=n(),k=Sd(L.sourceEvent,{transform:R,snapGrid:I,snapToGrid:V,containerBounds:N}),T=[];if(!j)return;const{x:D,y:M,width:_,height:H}=w,$={},B=j.origin??O,{width:W,height:q,x:Y,y:pe}=uee(y,v,k,d,u,B,S,P),J=W!==_,ge=q!==H,Q=Y!==D&&J,he=pe!==M&&ge;if(!Q&&!he&&!J&&!ge)return;if((Q||he||B[0]===1||B[1]===1)&&($.x=Q?Y:w.x,$.y=he?pe:w.y,w.x=$.x,w.y=$.y,b.length>0)){const ae=Y-D,we=pe-M;for(const Ve of b)Ve.position={x:Ve.position.x-ae+B[0]*(W-_),y:Ve.position.y-we+B[1]*(q-H)},T.push(Ve)}if((J||ge)&&($.width=J&&(!m||m==="horizontal")?W:w.width,$.height=ge&&(!m||m==="vertical")?q:w.height,w.width=$.width,w.height=$.height),E&&j.expandParent){const ae=B[0]*($.width??0);$.x&&$.x<ae&&(w.x=ae,y.x=y.x-($.x-ae));const we=B[1]*($.height??0);$.y&&$.y<we&&(w.y=we,y.y=y.y-($.y-we))}const le=cee({width:w.width,prevWidth:_,height:w.height,prevHeight:H,affectsX:v.affectsX,affectsY:v.affectsY}),me={...w,direction:le};f?.(L,me)!==!1&&(g?.(L,me),r($,T))}).on("end",L=>{x?.(L,{...w}),a?.({...w})});o.call(A)}function l(){o.on(".drag",null)}return{update:i,destroy:l}}var Y4={exports:{}},K4={},G4={exports:{}},J4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=h;function gee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xee=typeof Object.is=="function"?Object.is:gee,vee=Kl.useState,yee=Kl.useEffect,jee=Kl.useLayoutEffect,wee=Kl.useDebugValue;function Nee(e,t){var n=t(),r=vee({inst:{value:n,getSnapshot:t}}),a=r[0].inst,o=r[1];return jee(function(){a.value=n,a.getSnapshot=t,Gx(a)&&o({inst:a})},[e,n,t]),yee(function(){return Gx(a)&&o({inst:a}),e(function(){Gx(a)&&o({inst:a})})},[e]),wee(n),n}function Gx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xee(e,n)}catch{return!0}}function bee(e,t){return t()}var See=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bee:Nee;J4.useSyncExternalStore=Kl.useSyncExternalStore!==void 0?Kl.useSyncExternalStore:See;G4.exports=J4;var Cee=G4.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=h,Eee=Cee;function Tee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pee=typeof Object.is=="function"?Object.is:Tee,Aee=Eee.useSyncExternalStore,Dee=Cg.useRef,kee=Cg.useEffect,Mee=Cg.useMemo,Ree=Cg.useDebugValue;K4.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var o=Dee(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Mee(function(){function c(g){if(!d){if(d=!0,u=g,g=r(g),a!==void 0&&i.hasValue){var x=i.value;if(a(x,g))return m=x}return m=g}if(x=m,Pee(u,g))return x;var f=r(g);return a!==void 0&&a(x,f)?(u=g,x):(u=g,m=f)}var d=!1,u,m,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,a]);var l=Aee(e,o[0],o[1]);return kee(function(){i.hasValue=!0,i.value=l},[l]),Ree(l),l};Y4.exports=K4;var Fee=Y4.exports;const Oee=Mw(Fee),Iee={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},yE=e=>{let t;const n=new Set,r=(u,m)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const g=t;t=m??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(x=>x(t,g))}},a=()=>t,c={setState:r,getState:a,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Iee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,a,c);return c},Lee=e=>e?yE(e):yE,{useDebugValue:$ee}=Nt,{useSyncExternalStoreWithSelector:_ee}=Oee,Vee=e=>e;function Q4(e,t=Vee,n){const r=_ee(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $ee(r),r}const jE=(e,t)=>{const n=Lee(e),r=(a,o=t)=>Q4(n,a,o);return Object.assign(r,n),r},Uee=(e,t)=>e?jE(e,t):jE;function Wt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,a]of e)if(!Object.is(a,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Eg=h.createContext(null),Bee=Eg.Provider,Z4=Wr.error001();function lt(e,t){const n=h.useContext(Eg);if(n===null)throw new Error(Z4);return Q4(n,e,t)}function Lt(){const e=h.useContext(Eg);if(e===null)throw new Error(Z4);return h.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const wE={display:"none"},Hee={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},eI="react-flow__node-desc",tI="react-flow__edge-desc",qee="react-flow__aria-live",Wee=e=>e.ariaLiveMessage,zee=e=>e.ariaLabelConfig;function Xee({rfId:e}){const t=lt(Wee);return s.jsx("div",{id:`${qee}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Hee,children:t})}function Yee({rfId:e,disableKeyboardA11y:t}){const n=lt(zee);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${eI}-${e}`,style:wE,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${tI}-${e}`,style:wE,children:n["edge.a11yDescription.default"]}),!t&&s.jsx(Xee,{rfId:e})]})}const Gl=h.forwardRef(({position:e="top-left",children:t,className:n,style:r,...a},o)=>{const i=`${e}`.split("-");return s.jsx("div",{className:os(["react-flow__panel",n,...i]),style:r,ref:o,...a,children:t})});Gl.displayName="Panel";function Kee({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:s.jsx(Gl,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Gee=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},em=e=>e.id;function Jee(e,t){return Wt(e.selectedNodes.map(em),t.selectedNodes.map(em))&&Wt(e.selectedEdges.map(em),t.selectedEdges.map(em))}function Qee({onSelectionChange:e}){const t=Lt(),{selectedNodes:n,selectedEdges:r}=lt(Gee,Jee);return h.useEffect(()=>{const a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChangeHandlers.forEach(o=>o(a))},[n,r,e]),null}const Zee=e=>!!e.onSelectionChangeHandlers;function ete({onSelectionChange:e}){const t=lt(Zee);return e||t?s.jsx(Qee,{onSelectionChange:e}):null}const sI=[0,0],tte={x:0,y:0,zoom:1},ste=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],NE=[...ste,"rfId"],nte=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),bE={translateExtent:uu,nodeOrigin:sI,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function rte(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:a,setTranslateExtent:o,setNodeExtent:i,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=lt(nte,Wt),u=Lt();h.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{m.current=bE,l()}),[]);const m=h.useRef(bE);return h.useEffect(()=>{for(const p of NE){const g=e[p],x=m.current[p];g!==x&&(typeof e[p]>"u"||(p==="nodes"?t(g):p==="edges"?n(g):p==="minZoom"?r(g):p==="maxZoom"?a(g):p==="translateExtent"?o(g):p==="nodeExtent"?i(g):p==="paneClickDistance"?d(g):p==="ariaLabelConfig"?u.setState({ariaLabelConfig:AZ(g)}):p==="fitView"?u.setState({fitViewQueued:g}):p==="fitViewOptions"?u.setState({fitViewOptions:g}):u.setState({[p]:g})))}m.current=e},NE.map(p=>e[p])),null}function SE(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ate(e){const[t,n]=h.useState(e==="system"?null:e);return h.useEffect(()=>{if(e!=="system"){n(e);return}const r=SE(),a=()=>n(r?.matches?"dark":"light");return a(),r?.addEventListener("change",a),()=>{r?.removeEventListener("change",a)}},[e]),t!==null?t:SE()?.matches?"dark":"light"}const CE=typeof document<"u"?document:null;function fu(e=null,t={target:CE,actInsideInputWithModifier:!0}){const[n,r]=h.useState(!1),a=h.useRef(!1),o=h.useRef(new Set([])),[i,l]=h.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=d.reduce((m,p)=>m.concat(...p),[]);return[d,u]}return[[],[]]},[e]);return h.useEffect(()=>{const c=t?.target??CE,d=t?.actInsideInputWithModifier??!0;if(e!==null){const u=g=>{if(a.current=g.ctrlKey||g.metaKey||g.shiftKey||g.altKey,(!a.current||a.current&&!d)&&R4(g))return!1;const f=TE(g.code,l);if(o.current.add(g[f]),EE(i,o.current,!1)){const w=g.composedPath?.()?.[0]||g.target,y=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(a.current||!y)&&g.preventDefault(),r(!0)}},m=g=>{const x=TE(g.code,l);EE(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(g[x]),g.key==="Meta"&&o.current.clear(),a.current=!1},p=()=>{o.current.clear(),r(!1)};return c?.addEventListener("keydown",u),c?.addEventListener("keyup",m),window.addEventListener("blur",p),window.addEventListener("contextmenu",p),()=>{c?.removeEventListener("keydown",u),c?.removeEventListener("keyup",m),window.removeEventListener("blur",p),window.removeEventListener("contextmenu",p)}}},[e,r]),n}function EE(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(a=>t.has(a)))}function TE(e,t){return t.includes(e)?"code":"key"}const ote=()=>{const e=Lt();return h.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,a,o],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??a,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:a,minZoom:o,maxZoom:i,panZoom:l}=e.getState(),c=VN(t,r,a,o,i,n?.padding??.1);return l?(await l.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:a,snapToGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:l,y:c}=i.getBoundingClientRect(),d={x:t.x-l,y:t.y-c},u=n.snapGrid??a,m=n.snapToGrid??o;return dh(d,r,m,u)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:a,y:o}=r.getBoundingClientRect(),i=Gp(t,n);return{x:i.x+a,y:i.y+o}}}),[])};function nI(e,t){const n=[],r=new Map,a=[];for(const o of e)if(o.type==="add"){a.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const i=r.get(o.id);i?i.push(o):r.set(o.id,[o])}for(const o of t){const i=r.get(o.id);if(!i){n.push(o);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const l={...o};for(const c of i)ite(c,l);n.push(l)}return a.length&&a.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function ite(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function rI(e,t){return nI(e,t)}function aI(e,t){return nI(e,t)}function Fo(e,t){return{id:e,type:"select",selected:t}}function il(e,t=new Set,n=!1){const r=[];for(const[a,o]of e){const i=t.has(a);!(o.selected===void 0&&!i)&&o.selected!==i&&(n&&(o.selected=i),r.push(Fo(o.id,i)))}return r}function PE({items:e=[],lookup:t}){const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,o]of e.entries()){const i=t.get(o.id),l=i?.internals?.userNode??i;l!==void 0&&l!==o&&n.push({id:o.id,item:o,type:"replace"}),l===void 0&&n.push({item:o,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function AE(e){return{id:e.id,type:"remove"}}const DE=e=>yZ(e),lte=e=>C4(e);function oI(e){return h.forwardRef(e)}const cte=typeof window<"u"?h.useLayoutEffect:h.useEffect;function kE(e){const[t,n]=h.useState(BigInt(0)),[r]=h.useState(()=>dte(()=>n(a=>a+BigInt(1))));return cte(()=>{const a=r.get();a.length&&(e(a),r.reset())},[t]),r}function dte(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const iI=h.createContext(null);function ute({children:e}){const t=Lt(),n=h.useCallback(l=>{const{nodes:c=[],setNodes:d,hasDefaultNodes:u,onNodesChange:m,nodeLookup:p,fitViewQueued:g}=t.getState();let x=c;for(const w of l)x=typeof w=="function"?w(x):w;const f=PE({items:x,lookup:p});u&&d(x),f.length>0?m?.(f):g&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:y,setNodes:v}=t.getState();w&&v(y)})},[]),r=kE(n),a=h.useCallback(l=>{const{edges:c=[],setEdges:d,hasDefaultEdges:u,onEdgesChange:m,edgeLookup:p}=t.getState();let g=c;for(const x of l)g=typeof x=="function"?x(g):x;u?d(g):m&&m(PE({items:g,lookup:p}))},[]),o=kE(a),i=h.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return s.jsx(iI.Provider,{value:i,children:e})}function hte(){const e=h.useContext(iI);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const mte=e=>!!e.panZoom;function Jr(){const e=ote(),t=Lt(),n=hte(),r=lt(mte),a=h.useMemo(()=>{const o=m=>t.getState().nodeLookup.get(m),i=m=>{n.nodeQueue.push(m)},l=m=>{n.edgeQueue.push(m)},c=m=>{const{nodeLookup:p,nodeOrigin:g}=t.getState(),x=DE(m)?m:p.get(m.id),f=x.parentId?k4(x.position,x.measured,x.parentId,p,g):x.position,w={...x,position:f,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return zl(w)},d=(m,p,g={replace:!1})=>{i(x=>x.map(f=>{if(f.id===m){const w=typeof p=="function"?p(f):p;return g.replace&&DE(w)?w:{...f,...w}}return f}))},u=(m,p,g={replace:!1})=>{l(x=>x.map(f=>{if(f.id===m){const w=typeof p=="function"?p(f):p;return g.replace&&lte(w)?w:{...f,...w}}return f}))};return{getNodes:()=>t.getState().nodes.map(m=>({...m})),getNode:m=>o(m)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:m=[]}=t.getState();return m.map(p=>({...p}))},getEdge:m=>t.getState().edgeLookup.get(m),setNodes:i,setEdges:l,addNodes:m=>{const p=Array.isArray(m)?m:[m];n.nodeQueue.push(g=>[...g,...p])},addEdges:m=>{const p=Array.isArray(m)?m:[m];n.edgeQueue.push(g=>[...g,...p])},toObject:()=>{const{nodes:m=[],edges:p=[],transform:g}=t.getState(),[x,f,w]=g;return{nodes:m.map(y=>({...y})),edges:p.map(y=>({...y})),viewport:{x,y:f,zoom:w}}},deleteElements:async({nodes:m=[],edges:p=[]})=>{const{nodes:g,edges:x,onNodesDelete:f,onEdgesDelete:w,triggerNodeChanges:y,triggerEdgeChanges:v,onDelete:j,onBeforeDelete:N}=t.getState(),{nodes:b,edges:E}=await SZ({nodesToRemove:m,edgesToRemove:p,nodes:g,edges:x,onBeforeDelete:N}),S=E.length>0,P=b.length>0;if(S){const A=E.map(AE);w?.(E),v(A)}if(P){const A=b.map(AE);f?.(b),y(A)}return(P||S)&&j?.({nodes:b,edges:E}),{deletedNodes:b,deletedEdges:E}},getIntersectingNodes:(m,p=!0,g)=>{const x=iE(m),f=x?m:c(m),w=g!==void 0;return f?(g||t.getState().nodes).filter(y=>{const v=t.getState().nodeLookup.get(y.id);if(v&&!x&&(y.id===m.id||!v.internals.positionAbsolute))return!1;const j=zl(w?y:v),N=mu(j,f);return p&&N>0||N>=j.width*j.height||N>=f.width*f.height}):[]},isNodeIntersecting:(m,p,g=!0)=>{const f=iE(m)?m:c(m);if(!f)return!1;const w=mu(f,p);return g&&w>0||w>=f.width*f.height},updateNode:d,updateNodeData:(m,p,g={replace:!1})=>{d(m,x=>{const f=typeof p=="function"?p(x):p;return g.replace?{...x,data:f}:{...x,data:{...x.data,...f}}},g)},updateEdge:u,updateEdgeData:(m,p,g={replace:!1})=>{u(m,x=>{const f=typeof p=="function"?p(x):p;return g.replace?{...x,data:f}:{...x,data:{...x.data,...f}}},g)},getNodesBounds:m=>{const{nodeLookup:p,nodeOrigin:g}=t.getState();return jZ(m,{nodeLookup:p,nodeOrigin:g})},getHandleConnections:({type:m,id:p,nodeId:g})=>Array.from(t.getState().connectionLookup.get(`${g}-${m}${p?`-${p}`:""}`)?.values()??[]),getNodeConnections:({type:m,handleId:p,nodeId:g})=>Array.from(t.getState().connectionLookup.get(`${g}${m?p?`-${m}-${p}`:`-${m}`:""}`)?.values()??[]),fitView:async m=>{const p=t.getState().fitViewResolver??PZ();return t.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:p}),n.nodeQueue.push(g=>[...g]),p.promise}}},[]);return h.useMemo(()=>({...a,...e,viewportInitialized:r}),[r])}const ME=e=>e.selected,pte=typeof window<"u"?window:void 0;function fte({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Lt(),{deleteElements:r}=Jr(),a=fu(e,{actInsideInputWithModifier:!1}),o=fu(t,{target:pte});h.useEffect(()=>{if(a){const{edges:i,nodes:l}=n.getState();r({nodes:l.filter(ME),edges:i.filter(ME)}),n.setState({nodesSelectionActive:!1})}},[a]),h.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function gte(e){const t=Lt();h.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=UN(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Wr.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Tg={position:"absolute",width:"100%",height:"100%",top:0,left:0},xte=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function vte({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:o=Qo.Free,zoomOnDoubleClick:i=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:d,minZoom:u,maxZoom:m,zoomActivationKeyCode:p,preventScrolling:g=!0,children:x,noWheelClassName:f,noPanClassName:w,onViewportChange:y,isControlledViewport:v,paneClickDistance:j}){const N=Lt(),b=h.useRef(null),{userSelectionActive:E,lib:S}=lt(xte,Wt),P=fu(p),A=h.useRef();gte(b);const L=h.useCallback(R=>{y?.({x:R[0],y:R[1],zoom:R[2]}),v||N.setState({transform:R})},[y,v]);return h.useEffect(()=>{if(b.current){A.current=lee({domNode:b.current,minZoom:u,maxZoom:m,translateExtent:d,viewport:c,paneClickDistance:j,onDraggingChange:O=>N.setState({paneDragging:O}),onPanZoomStart:(O,k)=>{const{onViewportChangeStart:T,onMoveStart:D}=N.getState();D?.(O,k),T?.(k)},onPanZoom:(O,k)=>{const{onViewportChange:T,onMove:D}=N.getState();D?.(O,k),T?.(k)},onPanZoomEnd:(O,k)=>{const{onViewportChangeEnd:T,onMoveEnd:D}=N.getState();D?.(O,k),T?.(k)}});const{x:R,y:I,zoom:V}=A.current.getViewport();return N.setState({panZoom:A.current,transform:[R,I,V],domNode:b.current.closest(".react-flow")}),()=>{A.current?.destroy()}}},[]),h.useEffect(()=>{A.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:o,zoomOnDoubleClick:i,panOnDrag:l,zoomActivationKeyPressed:P,preventScrolling:g,noPanClassName:w,userSelectionActive:E,noWheelClassName:f,lib:S,onTransformChange:L})},[e,t,n,r,a,o,i,l,P,g,w,E,f,S,L]),s.jsx("div",{className:"react-flow__renderer",ref:b,style:Tg,children:x})}const yte=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function jte(){const{userSelectionActive:e,userSelectionRect:t}=lt(yte,Wt);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Jx=(e,t)=>n=>{n.target===t.current&&e?.(n)},wte=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Nte({isSelecting:e,selectionKeyPressed:t,selectionMode:n=hu.Full,panOnDrag:r,selectionOnDrag:a,onSelectionStart:o,onSelectionEnd:i,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:m,onPaneMouseLeave:p,children:g}){const x=Lt(),{userSelectionActive:f,elementsSelectable:w,dragging:y,connectionInProgress:v}=lt(wte,Wt),j=w&&(e||f),N=h.useRef(null),b=h.useRef(),E=h.useRef(new Set),S=h.useRef(new Set),P=h.useRef(!1),A=h.useRef(!1),L=D=>{if(P.current||v){P.current=!1;return}l?.(D),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},R=D=>{if(Array.isArray(r)&&r?.includes(2)){D.preventDefault();return}c?.(D)},I=d?D=>d(D):void 0,V=D=>{const{resetSelectedElements:M,domNode:_}=x.getState();if(b.current=_?.getBoundingClientRect(),!w||!e||D.button!==0||D.target!==N.current||!b.current)return;D.target?.setPointerCapture?.(D.pointerId),A.current=!0,P.current=!1;const{x:H,y:$}=Fr(D.nativeEvent,b.current);M(),x.setState({userSelectionRect:{width:0,height:0,startX:H,startY:$,x:H,y:$}}),o?.(D)},O=D=>{const{userSelectionRect:M,transform:_,nodeLookup:H,edgeLookup:$,connectionLookup:B,triggerNodeChanges:W,triggerEdgeChanges:q,defaultEdgeOptions:Y}=x.getState();if(!b.current||!M)return;P.current=!0;const{x:pe,y:J}=Fr(D.nativeEvent,b.current),{startX:ge,startY:Q}=M,he={startX:ge,startY:Q,x:pe<ge?pe:ge,y:J<Q?J:Q,width:Math.abs(pe-ge),height:Math.abs(J-Q)},le=E.current,me=S.current;E.current=new Set(_N(H,he,_,n===hu.Partial,!0).map(ae=>ae.id)),S.current=new Set;const Z=Y?.selectable??!0;for(const ae of E.current){const we=B.get(ae);if(we)for(const{edgeId:Ve}of we.values()){const Ue=$.get(Ve);Ue&&(Ue.selectable??Z)&&S.current.add(Ve)}}if(!lE(le,E.current)){const ae=il(H,E.current,!0);W(ae)}if(!lE(me,S.current)){const ae=il($,S.current);q(ae)}x.setState({userSelectionRect:he,userSelectionActive:!0,nodesSelectionActive:!1})},k=D=>{if(D.button!==0||!A.current)return;D.target?.releasePointerCapture?.(D.pointerId);const{userSelectionRect:M}=x.getState();!f&&M&&D.target===N.current&&L?.(D),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:E.current.size>0}),i?.(D),(t||a)&&(P.current=!1),A.current=!1},T=r===!0||Array.isArray(r)&&r.includes(0);return s.jsxs("div",{className:os(["react-flow__pane",{draggable:T,dragging:y,selection:e}]),onClick:j?void 0:Jx(L,N),onContextMenu:Jx(R,N),onWheel:Jx(I,N),onPointerEnter:j?void 0:u,onPointerDown:j?V:m,onPointerMove:j?O:m,onPointerUp:j?k:void 0,onPointerLeave:p,ref:N,style:Tg,children:[g,s.jsx(jte,{})]})}function Oj({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:o,multiSelectionActive:i,nodeLookup:l,onError:c}=t.getState(),d=l.get(e);if(!d){c?.("012",Wr.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&i)&&(o({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])}function lI({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:o,nodeClickDistance:i}){const l=Lt(),[c,d]=h.useState(!1),u=h.useRef();return h.useEffect(()=>{u.current=XZ({getStoreItems:()=>l.getState(),onNodeMouseDown:m=>{Oj({id:m,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),h.useEffect(()=>{if(t)u.current?.destroy();else if(e.current)return u.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:a,nodeClickDistance:i}),()=>{u.current?.destroy()}},[n,r,t,o,e,a]),c}const bte=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function cI(){const e=Lt();return h.useCallback(n=>{const{nodeExtent:r,snapToGrid:a,snapGrid:o,nodesDraggable:i,onError:l,updateNodePositions:c,nodeLookup:d,nodeOrigin:u}=e.getState(),m=new Map,p=bte(i),g=a?o[0]:5,x=a?o[1]:5,f=n.direction.x*g*n.factor,w=n.direction.y*x*n.factor;for(const[,y]of d){if(!p(y))continue;let v={x:y.internals.positionAbsolute.x+f,y:y.internals.positionAbsolute.y+w};a&&(v=bg(v,o));const{position:j,positionAbsolute:N}=E4({nodeId:y.id,nextPosition:v,nodeLookup:d,nodeExtent:r,nodeOrigin:u,onError:l});y.position=j,y.internals.positionAbsolute=N,m.set(y.id,y)}c(m)},[])}const XN=h.createContext(null),Ste=XN.Provider;XN.Consumer;const dI=()=>h.useContext(XN),Cte=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Ete=(e,t,n)=>r=>{const{connectionClickStartHandle:a,connectionMode:o,connection:i}=r,{fromHandle:l,toHandle:c,isValid:d}=i,u=c?.nodeId===e&&c?.id===t&&c?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:u,clickConnecting:a?.nodeId===e&&a?.id===t&&a?.type===n,isPossibleEndHandle:o===pi.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:u&&d}};function Tte({type:e="source",position:t=Pe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:o=!0,id:i,onConnect:l,children:c,className:d,onMouseDown:u,onTouchStart:m,...p},g){const x=i||null,f=e==="target",w=Lt(),y=dI(),{connectOnClick:v,noPanClassName:j,rfId:N}=lt(Cte,Wt),{connectingFrom:b,connectingTo:E,clickConnecting:S,isPossibleEndHandle:P,connectionInProcess:A,clickConnectionInProcess:L,valid:R}=lt(Ete(y,x,e),Wt);y||w.getState().onError?.("010",Wr.error010());const I=k=>{const{defaultEdgeOptions:T,onConnect:D,hasDefaultEdges:M}=w.getState(),_={...T,...k};if(M){const{edges:H,setEdges:$}=w.getState();$(Qp(_,H))}D?.(_),l?.(_)},V=k=>{if(!y)return;const T=F4(k.nativeEvent);if(a&&(T&&k.button===0||!T)){const D=w.getState();Fj.onPointerDown(k.nativeEvent,{autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:f,handleId:x,nodeId:y,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:I,isValidConnection:n||D.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed,dragThreshold:D.connectionDragThreshold})}T?u?.(k):m?.(k)},O=k=>{const{onClickConnectStart:T,onClickConnectEnd:D,connectionClickStartHandle:M,connectionMode:_,isValidConnection:H,lib:$,rfId:B,nodeLookup:W,connection:q}=w.getState();if(!y||!M&&!a)return;if(!M){T?.(k.nativeEvent,{nodeId:y,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:y,type:e,id:x}});return}const Y=M4(k.target),pe=n||H,{connection:J,isValid:ge}=Fj.isValid(k.nativeEvent,{handle:{nodeId:y,id:x,type:e},connectionMode:_,fromNodeId:M.nodeId,fromHandleId:M.id||null,fromType:M.type,isValidConnection:pe,flowId:B,doc:Y,lib:$,nodeLookup:W});ge&&J&&I(J);const Q=structuredClone(q);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,D?.(k,Q),w.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":x,"data-nodeid":y,"data-handlepos":t,"data-id":`${N}-${y}-${x}-${e}`,className:os(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,d,{source:!f,target:f,connectable:r,connectablestart:a,connectableend:o,clickconnecting:S,connectingfrom:b,connectingto:E,valid:R,connectionindicator:r&&(!A||P)&&(A||L?o:a)}]),onMouseDown:V,onTouchStart:V,onClick:v?O:void 0,ref:g,...p,children:c})}const Qt=h.memo(oI(Tte));function Pte({data:e,isConnectable:t,sourcePosition:n=Pe.Bottom}){return s.jsxs(s.Fragment,{children:[e?.label,s.jsx(Qt,{type:"source",position:n,isConnectable:t})]})}function Ate({data:e,isConnectable:t,targetPosition:n=Pe.Top,sourcePosition:r=Pe.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(Qt,{type:"target",position:n,isConnectable:t}),e?.label,s.jsx(Qt,{type:"source",position:r,isConnectable:t})]})}function Dte(){return null}function kte({data:e,isConnectable:t,targetPosition:n=Pe.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(Qt,{type:"target",position:n,isConnectable:t}),e?.label]})}const Zp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},RE={input:Pte,default:Ate,output:kte,group:Dte};function Mte(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Rte=e=>{const{width:t,height:n,x:r,y:a}=ch(e.nodeLookup,{filter:o=>!!o.selected});return{width:or(t)?t:null,height:or(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${a}px)`}};function Fte({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Lt(),{width:a,height:o,transformString:i,userSelectionActive:l}=lt(Rte,Wt),c=cI(),d=h.useRef(null);if(h.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),lI({nodeRef:d}),l||!a||!o)return null;const u=e?p=>{const g=r.getState().nodes.filter(x=>x.selected);e(p,g)}:void 0,m=p=>{Object.prototype.hasOwnProperty.call(Zp,p.key)&&(p.preventDefault(),c({direction:Zp[p.key],factor:p.shiftKey?4:1}))};return s.jsx("div",{className:os(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:s.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:a,height:o}})})}const FE=typeof window<"u"?window:void 0,Ote=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function uI({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:d,selectionOnDrag:u,selectionMode:m,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:f,zoomActivationKeyCode:w,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:j,panOnScroll:N,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:P,defaultViewport:A,translateExtent:L,minZoom:R,maxZoom:I,preventScrolling:V,onSelectionContextMenu:O,noWheelClassName:k,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:M,isControlledViewport:_}){const{nodesSelectionActive:H,userSelectionActive:$}=lt(Ote),B=fu(d,{target:FE}),W=fu(f,{target:FE}),q=W||P,Y=W||N,pe=u&&q!==!0,J=B||$||pe;return fte({deleteKeyCode:c,multiSelectionKeyCode:x}),s.jsx(vte,{onPaneContextMenu:o,elementsSelectable:y,zoomOnScroll:v,zoomOnPinch:j,panOnScroll:Y,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!B&&q,defaultViewport:A,translateExtent:L,minZoom:R,maxZoom:I,zoomActivationKeyCode:w,preventScrolling:V,noWheelClassName:k,noPanClassName:T,onViewportChange:M,isControlledViewport:_,paneClickDistance:l,children:s.jsxs(Nte,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:q,isSelecting:!!J,selectionMode:m,selectionKeyPressed:B,selectionOnDrag:pe,children:[e,H&&s.jsx(Fte,{onSelectionContextMenu:O,noPanClassName:T,disableKeyboardA11y:D})]})})}uI.displayName="FlowRenderer";const Ite=h.memo(uI),Lte=e=>t=>e?_N(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function $te(e){return lt(h.useCallback(Lte(e),[e]),Wt)}const _te=e=>e.updateNodeInternals;function Vte(){const e=lt(_te),[t]=h.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(a=>{const o=a.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:a.target,force:!0})}),e(r)}));return h.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Ute({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const a=Lt(),o=h.useRef(null),i=h.useRef(null),l=h.useRef(e.sourcePosition),c=h.useRef(e.targetPosition),d=h.useRef(t),u=n&&!!e.internals.handleBounds;return h.useEffect(()=>{o.current&&!e.hidden&&(!u||i.current!==o.current)&&(i.current&&r?.unobserve(i.current),r?.observe(o.current),i.current=o.current)},[u,e.hidden]),h.useEffect(()=>()=>{i.current&&(r?.unobserve(i.current),i.current=null)},[]),h.useEffect(()=>{if(o.current){const m=d.current!==t,p=l.current!==e.sourcePosition,g=c.current!==e.targetPosition;(m||p||g)&&(d.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function Bte({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:a,onContextMenu:o,onDoubleClick:i,nodesDraggable:l,elementsSelectable:c,nodesConnectable:d,nodesFocusable:u,resizeObserver:m,noDragClassName:p,noPanClassName:g,disableKeyboardA11y:x,rfId:f,nodeTypes:w,nodeClickDistance:y,onError:v}){const{node:j,internals:N,isParent:b}=lt(ge=>{const Q=ge.nodeLookup.get(e),he=ge.parentLookup.has(e);return{node:Q,internals:Q.internals,isParent:he}},Wt);let E=j.type||"default",S=w?.[E]||RE[E];S===void 0&&(v?.("003",Wr.error003(E)),E="default",S=w?.default||RE.default);const P=!!(j.draggable||l&&typeof j.draggable>"u"),A=!!(j.selectable||c&&typeof j.selectable>"u"),L=!!(j.connectable||d&&typeof j.connectable>"u"),R=!!(j.focusable||u&&typeof j.focusable>"u"),I=Lt(),V=D4(j),O=Ute({node:j,nodeType:E,hasDimensions:V,resizeObserver:m}),k=lI({nodeRef:O,disabled:j.hidden||!P,noDragClassName:p,handleSelector:j.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:y}),T=cI();if(j.hidden)return null;const D=Pa(j),M=Mte(j),_=A||P||t||n||r||a,H=n?ge=>n(ge,{...N.userNode}):void 0,$=r?ge=>r(ge,{...N.userNode}):void 0,B=a?ge=>a(ge,{...N.userNode}):void 0,W=o?ge=>o(ge,{...N.userNode}):void 0,q=i?ge=>i(ge,{...N.userNode}):void 0,Y=ge=>{const{selectNodesOnDrag:Q,nodeDragThreshold:he}=I.getState();A&&(!Q||!P||he>0)&&Oj({id:e,store:I,nodeRef:O}),t&&t(ge,{...N.userNode})},pe=ge=>{if(!(R4(ge.nativeEvent)||x)){if(w4.includes(ge.key)&&A){const Q=ge.key==="Escape";Oj({id:e,store:I,unselect:Q,nodeRef:O})}else if(P&&j.selected&&Object.prototype.hasOwnProperty.call(Zp,ge.key)){ge.preventDefault();const{ariaLabelConfig:Q}=I.getState();I.setState({ariaLiveMessage:Q["node.a11yDescription.ariaLiveMessage"]({direction:ge.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),T({direction:Zp[ge.key],factor:ge.shiftKey?4:1})}}},J=()=>{if(x||!O.current?.matches(":focus-visible"))return;const{transform:ge,width:Q,height:he,autoPanOnNodeFocus:le,setCenter:me}=I.getState();if(!le)return;_N(new Map([[e,j]]),{x:0,y:0,width:Q,height:he},ge,!0).length>0||me(j.position.x+D.width/2,j.position.y+D.height/2,{zoom:ge[2]})};return s.jsx("div",{className:os(["react-flow__node",`react-flow__node-${E}`,{[g]:P},j.className,{selected:j.selected,selectable:A,parent:b,draggable:P,dragging:k}]),ref:O,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:_?"all":"none",visibility:V?"visible":"hidden",...j.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:$,onMouseLeave:B,onContextMenu:W,onClick:Y,onDoubleClick:q,onKeyDown:R?pe:void 0,tabIndex:R?0:void 0,onFocus:R?J:void 0,role:j.ariaRole??(R?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${eI}-${f}`,"aria-label":j.ariaLabel,...j.domAttributes,children:s.jsx(Ste,{value:e,children:s.jsx(S,{id:e,data:j.data,type:E,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:j.selected??!1,selectable:A,draggable:P,deletable:j.deletable??!0,isConnectable:L,sourcePosition:j.sourcePosition,targetPosition:j.targetPosition,dragging:k,dragHandle:j.dragHandle,zIndex:N.z,parentId:j.parentId,...D})})})}const Hte=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function hI(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,onError:o}=lt(Hte,Wt),i=$te(e.onlyRenderVisibleElements),l=Vte();return s.jsx("div",{className:"react-flow__nodes",style:Tg,children:i.map(c=>s.jsx(Bte,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:o},c))})}hI.displayName="NodeRenderer";const qte=h.memo(hI);function Wte(e){return lt(h.useCallback(n=>{if(!e)return n.edges.map(a=>a.id);const r=[];if(n.width&&n.height)for(const a of n.edges){const o=n.nodeLookup.get(a.source),i=n.nodeLookup.get(a.target);o&&i&&MZ({sourceNode:o,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(a.id)}return r},[e]),Wt)}const zte=({color:e="none",strokeWidth:t=1})=>s.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Xte=({color:e="none",strokeWidth:t=1})=>s.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),OE={[ar.Arrow]:zte,[ar.ArrowClosed]:Xte};function Yte(e){const t=Lt();return h.useMemo(()=>Object.prototype.hasOwnProperty.call(OE,e)?OE[e]:(t.getState().onError?.("009",Wr.error009(e)),null),[e])}const Kte=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=Yte(t);return c?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0",children:s.jsx(c,{color:n,strokeWidth:i})}):null},mI=({defaultColor:e,rfId:t})=>{const n=lt(o=>o.edges),r=lt(o=>o.defaultEdgeOptions),a=h.useMemo(()=>_Z(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return a.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:a.map(o=>s.jsx(Kte,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};mI.displayName="MarkerDefinitions";var Gte=h.memo(mI);function pI({x:e,y:t,label:n,labelStyle:r,labelShowBg:a=!0,labelBgStyle:o,labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...u}){const[m,p]=h.useState({x:1,y:0,width:0,height:0}),g=os(["react-flow__edge-textwrapper",d]),x=h.useRef(null);return h.useEffect(()=>{if(x.current){const f=x.current.getBBox();p({x:f.x,y:f.y,width:f.width,height:f.height})}},[n]),n?s.jsxs("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:g,visibility:m.width?"visible":"hidden",...u,children:[a&&s.jsx("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),s.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:x,style:r,children:n}),c]}):null}pI.displayName="EdgeText";const Jte=h.memo(pI);function uh({path:e,labelX:t,labelY:n,label:r,labelStyle:a,labelShowBg:o,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:d=20,...u}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...u,d:e,fill:"none",className:os(["react-flow__edge-path",u.className])}),d&&s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&or(t)&&or(n)?s.jsx(Jte,{x:t,y:n,label:r,labelStyle:a,labelShowBg:o,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function IE({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===Pe.Left||e===Pe.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function fI({sourceX:e,sourceY:t,sourcePosition:n=Pe.Bottom,targetX:r,targetY:a,targetPosition:o=Pe.Top}){const[i,l]=IE({pos:n,x1:e,y1:t,x2:r,y2:a}),[c,d]=IE({pos:o,x1:r,y1:a,x2:e,y2:t}),[u,m,p,g]=O4({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${i},${l} ${c},${d} ${r},${a}`,u,m,p,g]}function gI(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,sourcePosition:i,targetPosition:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:f,markerStart:w,interactionWidth:y})=>{const[v,j,N]=fI({sourceX:n,sourceY:r,sourcePosition:i,targetX:a,targetY:o,targetPosition:l}),b=e.isInternal?void 0:t;return s.jsx(uh,{id:b,path:v,labelX:j,labelY:N,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:f,markerStart:w,interactionWidth:y})})}const Qte=gI({isInternal:!1}),xI=gI({isInternal:!0});Qte.displayName="SimpleBezierEdge";xI.displayName="SimpleBezierEdgeInternal";function vI(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:p,sourcePosition:g=Pe.Bottom,targetPosition:x=Pe.Top,markerEnd:f,markerStart:w,pathOptions:y,interactionWidth:v})=>{const[j,N,b]=kj({sourceX:n,sourceY:r,sourcePosition:g,targetX:a,targetY:o,targetPosition:x,borderRadius:y?.borderRadius,offset:y?.offset,stepPosition:y?.stepPosition}),E=e.isInternal?void 0:t;return s.jsx(uh,{id:E,path:j,labelX:N,labelY:b,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:p,markerEnd:f,markerStart:w,interactionWidth:v})})}const yI=vI({isInternal:!1}),jI=vI({isInternal:!0});yI.displayName="SmoothStepEdge";jI.displayName="SmoothStepEdgeInternal";function wI(e){return h.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return s.jsx(yI,{...n,id:r,pathOptions:h.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Zte=wI({isInternal:!1}),NI=wI({isInternal:!0});Zte.displayName="StepEdge";NI.displayName="StepEdgeInternal";function bI(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:p,markerEnd:g,markerStart:x,interactionWidth:f})=>{const[w,y,v]=L4({sourceX:n,sourceY:r,targetX:a,targetY:o}),j=e.isInternal?void 0:t;return s.jsx(uh,{id:j,path:w,labelX:y,labelY:v,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:m,style:p,markerEnd:g,markerStart:x,interactionWidth:f})})}const ese=bI({isInternal:!1}),SI=bI({isInternal:!0});ese.displayName="StraightEdge";SI.displayName="StraightEdgeInternal";function CI(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:a,targetY:o,sourcePosition:i=Pe.Bottom,targetPosition:l=Pe.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:f,markerStart:w,pathOptions:y,interactionWidth:v})=>{const[j,N,b]=BN({sourceX:n,sourceY:r,sourcePosition:i,targetX:a,targetY:o,targetPosition:l,curvature:y?.curvature}),E=e.isInternal?void 0:t;return s.jsx(uh,{id:E,path:j,labelX:N,labelY:b,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:g,style:x,markerEnd:f,markerStart:w,interactionWidth:v})})}const tse=CI({isInternal:!1}),EI=CI({isInternal:!0});tse.displayName="BezierEdge";EI.displayName="BezierEdgeInternal";const LE={default:EI,straight:SI,step:NI,smoothstep:jI,simplebezier:xI},$E={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},sse=(e,t,n)=>n===Pe.Left?e-t:n===Pe.Right?e+t:e,nse=(e,t,n)=>n===Pe.Top?e-t:n===Pe.Bottom?e+t:e,_E="react-flow__edgeupdater";function VE({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:o,onMouseOut:i,type:l}){return s.jsx("circle",{onMouseDown:a,onMouseEnter:o,onMouseOut:i,className:os([_E,`${_E}-${l}`]),cx:sse(t,r,e),cy:nse(n,r,e),r,stroke:"transparent",fill:"transparent"})}function rse({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:a,targetX:o,targetY:i,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:m,setReconnecting:p,setUpdateHover:g}){const x=Lt(),f=(N,b)=>{if(N.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:P,connectionMode:A,connectionRadius:L,lib:R,onConnectStart:I,onConnectEnd:V,cancelConnection:O,nodeLookup:k,rfId:T,panBy:D,updateConnection:M}=x.getState(),_=b.type==="target",H=(W,q)=>{p(!1),m?.(W,n,b.type,q)},$=W=>d?.(n,W),B=(W,q)=>{p(!0),u?.(N,n,b.type),I?.(W,q)};Fj.onPointerDown(N.nativeEvent,{autoPanOnConnect:E,connectionMode:A,connectionRadius:L,domNode:S,handleId:b.id,nodeId:b.nodeId,nodeLookup:k,isTarget:_,edgeUpdaterType:b.type,lib:R,flowId:T,cancelConnection:O,panBy:D,isValidConnection:P,onConnect:$,onConnectStart:B,onConnectEnd:V,onReconnectEnd:H,updateConnection:M,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold})},w=N=>f(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),y=N=>f(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),v=()=>g(!0),j=()=>g(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(VE,{position:l,centerX:r,centerY:a,radius:t,onMouseDown:w,onMouseEnter:v,onMouseOut:j,type:"source"}),(e===!0||e==="target")&&s.jsx(VE,{position:c,centerX:o,centerY:i,radius:t,onMouseDown:y,onMouseEnter:v,onMouseOut:j,type:"target"})]})}function ase({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:a,onDoubleClick:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,reconnectRadius:u,onReconnect:m,onReconnectStart:p,onReconnectEnd:g,rfId:x,edgeTypes:f,noPanClassName:w,onError:y,disableKeyboardA11y:v}){let j=lt(me=>me.edgeLookup.get(e));const N=lt(me=>me.defaultEdgeOptions);j=N?{...N,...j}:j;let b=j.type||"default",E=f?.[b]||LE[b];E===void 0&&(y?.("011",Wr.error011(b)),b="default",E=f?.default||LE.default);const S=!!(j.focusable||t&&typeof j.focusable>"u"),P=typeof m<"u"&&(j.reconnectable||n&&typeof j.reconnectable>"u"),A=!!(j.selectable||r&&typeof j.selectable>"u"),L=h.useRef(null),[R,I]=h.useState(!1),[V,O]=h.useState(!1),k=Lt(),{zIndex:T,sourceX:D,sourceY:M,targetX:_,targetY:H,sourcePosition:$,targetPosition:B}=lt(h.useCallback(me=>{const Z=me.nodeLookup.get(j.source),ae=me.nodeLookup.get(j.target);if(!Z||!ae)return{zIndex:j.zIndex,...$E};const we=$Z({id:e,sourceNode:Z,targetNode:ae,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:me.connectionMode,onError:y});return{zIndex:kZ({selected:j.selected,zIndex:j.zIndex,sourceNode:Z,targetNode:ae,elevateOnSelect:me.elevateEdgesOnSelect}),...we||$E}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Wt),W=h.useMemo(()=>j.markerStart?`url('#${Mj(j.markerStart,x)}')`:void 0,[j.markerStart,x]),q=h.useMemo(()=>j.markerEnd?`url('#${Mj(j.markerEnd,x)}')`:void 0,[j.markerEnd,x]);if(j.hidden||D===null||M===null||_===null||H===null)return null;const Y=me=>{const{addSelectedEdges:Z,unselectNodesAndEdges:ae,multiSelectionActive:we}=k.getState();A&&(k.setState({nodesSelectionActive:!1}),j.selected&&we?(ae({nodes:[],edges:[j]}),L.current?.blur()):Z([e])),a&&a(me,j)},pe=o?me=>{o(me,{...j})}:void 0,J=i?me=>{i(me,{...j})}:void 0,ge=l?me=>{l(me,{...j})}:void 0,Q=c?me=>{c(me,{...j})}:void 0,he=d?me=>{d(me,{...j})}:void 0,le=me=>{if(!v&&w4.includes(me.key)&&A){const{unselectNodesAndEdges:Z,addSelectedEdges:ae}=k.getState();me.key==="Escape"?(L.current?.blur(),Z({edges:[j]})):ae([e])}};return s.jsx("svg",{style:{zIndex:T},children:s.jsxs("g",{className:os(["react-flow__edge",`react-flow__edge-${b}`,j.className,w,{selected:j.selected,animated:j.animated,inactive:!A&&!a,updating:R,selectable:A}]),onClick:Y,onDoubleClick:pe,onContextMenu:J,onMouseEnter:ge,onMouseMove:Q,onMouseLeave:he,onKeyDown:S?le:void 0,tabIndex:S?0:void 0,role:j.ariaRole??(S?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":S?`${tI}-${x}`:void 0,ref:L,...j.domAttributes,children:[!V&&s.jsx(E,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:A,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:D,sourceY:M,targetX:_,targetY:H,sourcePosition:$,targetPosition:B,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:W,markerEnd:q,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),P&&s.jsx(rse,{edge:j,isReconnectable:P,reconnectRadius:u,onReconnect:m,onReconnectStart:p,onReconnectEnd:g,sourceX:D,sourceY:M,targetX:_,targetY:H,sourcePosition:$,targetPosition:B,setUpdateHover:I,setReconnecting:O})]})})}const ose=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function TI({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:a,onReconnect:o,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:u,reconnectRadius:m,onEdgeDoubleClick:p,onReconnectStart:g,onReconnectEnd:x,disableKeyboardA11y:f}){const{edgesFocusable:w,edgesReconnectable:y,elementsSelectable:v,onError:j}=lt(ose,Wt),N=Wte(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(Gte,{defaultColor:e,rfId:n}),N.map(b=>s.jsx(ase,{id:b,edgesFocusable:w,edgesReconnectable:y,elementsSelectable:v,noPanClassName:a,onReconnect:o,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:u,reconnectRadius:m,onDoubleClick:p,onReconnectStart:g,onReconnectEnd:x,rfId:n,onError:j,edgeTypes:r,disableKeyboardA11y:f},b))]})}TI.displayName="EdgeRenderer";const ise=h.memo(TI),lse=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function cse({children:e}){const t=lt(lse);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function dse(e){const t=Jr(),n=h.useRef(!1);h.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const use=e=>e.panZoom?.syncViewport;function hse(e){const t=lt(use),n=Lt();return h.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function mse(e){return e.connection.inProgress?{...e.connection,to:dh(e.connection.to,e.transform)}:{...e.connection}}function pse(e){return mse}function fse(e){const t=pse();return lt(t,Wt)}const gse=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function xse({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:a,width:o,height:i,isValid:l,inProgress:c}=lt(gse,Wt);return!(o&&a&&c)?null:s.jsx("svg",{style:e,width:o,height:i,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:os(["react-flow__connection",S4(l)]),children:s.jsx(PI,{style:t,type:n,CustomComponent:r,isValid:l})})})}const PI=({style:e,type:t=za.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:a,from:o,fromNode:i,fromHandle:l,fromPosition:c,to:d,toNode:u,toHandle:m,toPosition:p}=fse();if(!a)return;if(n)return s.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:l,fromX:o.x,fromY:o.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:p,connectionStatus:S4(r),toNode:u,toHandle:m});let g="";const x={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:p};switch(t){case za.Bezier:[g]=BN(x);break;case za.SimpleBezier:[g]=fI(x);break;case za.Step:[g]=kj({...x,borderRadius:0});break;case za.SmoothStep:[g]=kj(x);break;default:[g]=L4(x)}return s.jsx("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};PI.displayName="ConnectionLine";const vse={};function UE(e=vse){h.useRef(e),Lt(),h.useEffect(()=>{},[e])}function yse(){Lt(),h.useRef(!1),h.useEffect(()=>{},[])}function AI({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:o,onEdgeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,onSelectionContextMenu:m,onSelectionStart:p,onSelectionEnd:g,connectionLineType:x,connectionLineStyle:f,connectionLineComponent:w,connectionLineContainerStyle:y,selectionKeyCode:v,selectionOnDrag:j,selectionMode:N,multiSelectionKeyCode:b,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:P,onlyRenderVisibleElements:A,elementsSelectable:L,defaultViewport:R,translateExtent:I,minZoom:V,maxZoom:O,preventScrolling:k,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:M,panOnScroll:_,panOnScrollSpeed:H,panOnScrollMode:$,zoomOnDoubleClick:B,panOnDrag:W,onPaneClick:q,onPaneMouseEnter:Y,onPaneMouseMove:pe,onPaneMouseLeave:J,onPaneScroll:ge,onPaneContextMenu:Q,paneClickDistance:he,nodeClickDistance:le,onEdgeContextMenu:me,onEdgeMouseEnter:Z,onEdgeMouseMove:ae,onEdgeMouseLeave:we,reconnectRadius:Ve,onReconnect:Ue,onReconnectStart:ct,onReconnectEnd:$e,noDragClassName:Ge,noWheelClassName:Oe,noPanClassName:at,disableKeyboardA11y:st,nodeExtent:Ct,rfId:dn,viewport:ts,onViewportChange:An}){return UE(e),UE(t),yse(),dse(n),hse(ts),s.jsx(Ite,{onPaneClick:q,onPaneMouseEnter:Y,onPaneMouseMove:pe,onPaneMouseLeave:J,onPaneContextMenu:Q,onPaneScroll:ge,paneClickDistance:he,deleteKeyCode:P,selectionKeyCode:v,selectionOnDrag:j,selectionMode:N,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:b,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:L,zoomOnScroll:D,zoomOnPinch:M,zoomOnDoubleClick:B,panOnScroll:_,panOnScrollSpeed:H,panOnScrollMode:$,panOnDrag:W,defaultViewport:R,translateExtent:I,minZoom:V,maxZoom:O,onSelectionContextMenu:m,preventScrolling:k,noDragClassName:Ge,noWheelClassName:Oe,noPanClassName:at,disableKeyboardA11y:st,onViewportChange:An,isControlledViewport:!!ts,children:s.jsxs(cse,{children:[s.jsx(ise,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:i,onReconnect:Ue,onReconnectStart:ct,onReconnectEnd:$e,onlyRenderVisibleElements:A,onEdgeContextMenu:me,onEdgeMouseEnter:Z,onEdgeMouseMove:ae,onEdgeMouseLeave:we,reconnectRadius:Ve,defaultMarkerColor:T,noPanClassName:at,disableKeyboardA11y:st,rfId:dn}),s.jsx(xse,{style:f,type:x,component:w,containerStyle:y}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(qte,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,nodeClickDistance:le,onlyRenderVisibleElements:A,noPanClassName:at,noDragClassName:Ge,disableKeyboardA11y:st,nodeExtent:Ct,rfId:dn}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}AI.displayName="GraphView";const jse=h.memo(AI),BE=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:i,fitViewOptions:l,minZoom:c=.5,maxZoom:d=2,nodeOrigin:u,nodeExtent:m}={})=>{const p=new Map,g=new Map,x=new Map,f=new Map,w=r??t??[],y=n??e??[],v=u??[0,0],j=m??uu;_4(x,f,w);const N=Rj(y,p,g,{nodeOrigin:v,nodeExtent:j,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&a&&o){const E=ch(p,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:S,y:P,zoom:A}=VN(E,a,o,c,d,l?.padding??.1);b=[S,P,A]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodesInitialized:N,nodeLookup:p,parentLookup:g,edges:w,edgeLookup:f,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:d,translateExtent:uu,nodeExtent:j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:pi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:l,fitViewResolver:null,connection:{...b4},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:CZ,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:N4}},wse=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:i,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:u,nodeExtent:m})=>Uee((p,g)=>{async function x(){const{nodeLookup:f,panZoom:w,fitViewOptions:y,fitViewResolver:v,width:j,height:N,minZoom:b,maxZoom:E}=g();w&&(await bZ({nodes:f,width:j,height:N,panZoom:w,minZoom:b,maxZoom:E},y),v?.resolve(!0),p({fitViewResolver:null}))}return{...BE({nodes:e,edges:t,width:a,height:o,fitView:i,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:u,nodeExtent:m,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:w,parentLookup:y,nodeOrigin:v,elevateNodesOnSelect:j,fitViewQueued:N}=g(),b=Rj(f,w,y,{nodeOrigin:v,nodeExtent:m,elevateNodesOnSelect:j,checkEquality:!0});N&&b?(x(),p({nodes:f,nodesInitialized:b,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:f,nodesInitialized:b})},setEdges:f=>{const{connectionLookup:w,edgeLookup:y}=g();_4(w,y,f),p({edges:f})},setDefaultNodesAndEdges:(f,w)=>{if(f){const{setNodes:y}=g();y(f),p({hasDefaultNodes:!0})}if(w){const{setEdges:y}=g();y(w),p({hasDefaultEdges:!0})}},updateNodeInternals:f=>{const{triggerNodeChanges:w,nodeLookup:y,parentLookup:v,domNode:j,nodeOrigin:N,nodeExtent:b,debug:E,fitViewQueued:S}=g(),{changes:P,updatedInternals:A}=qZ(f,y,v,j,N,b);A&&(UZ(y,v,{nodeOrigin:N,nodeExtent:b}),S?(x(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),P?.length>0&&(E&&console.log("React Flow: trigger node changes",P),w?.(P)))},updateNodePositions:(f,w=!1)=>{const y=[],v=[],{nodeLookup:j,triggerNodeChanges:N}=g();for(const[b,E]of f){const S=j.get(b),P=!!(S?.expandParent&&S?.parentId&&E?.position),A={id:b,type:"position",position:P?{x:Math.max(0,E.position.x),y:Math.max(0,E.position.y)}:E.position,dragging:w};P&&S.parentId&&y.push({id:b,parentId:S.parentId,rect:{...E.internals.positionAbsolute,width:E.measured.width??0,height:E.measured.height??0}}),v.push(A)}if(y.length>0){const{parentLookup:b,nodeOrigin:E}=g(),S=zN(y,j,b,E);v.push(...S)}N(v)},triggerNodeChanges:f=>{const{onNodesChange:w,setNodes:y,nodes:v,hasDefaultNodes:j,debug:N}=g();if(f?.length){if(j){const b=rI(f,v);y(b)}N&&console.log("React Flow: trigger node changes",f),w?.(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:w,setEdges:y,edges:v,hasDefaultEdges:j,debug:N}=g();if(f?.length){if(j){const b=aI(f,v);y(b)}N&&console.log("React Flow: trigger edge changes",f),w?.(f)}},addSelectedNodes:f=>{const{multiSelectionActive:w,edgeLookup:y,nodeLookup:v,triggerNodeChanges:j,triggerEdgeChanges:N}=g();if(w){const b=f.map(E=>Fo(E,!0));j(b);return}j(il(v,new Set([...f]),!0)),N(il(y))},addSelectedEdges:f=>{const{multiSelectionActive:w,edgeLookup:y,nodeLookup:v,triggerNodeChanges:j,triggerEdgeChanges:N}=g();if(w){const b=f.map(E=>Fo(E,!0));N(b);return}N(il(y,new Set([...f]))),j(il(v,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:w}={})=>{const{edges:y,nodes:v,nodeLookup:j,triggerNodeChanges:N,triggerEdgeChanges:b}=g(),E=f||v,S=w||y,P=E.map(L=>{const R=j.get(L.id);return R&&(R.selected=!1),Fo(L.id,!1)}),A=S.map(L=>Fo(L.id,!1));N(P),b(A)},setMinZoom:f=>{const{panZoom:w,maxZoom:y}=g();w?.setScaleExtent([f,y]),p({minZoom:f})},setMaxZoom:f=>{const{panZoom:w,minZoom:y}=g();w?.setScaleExtent([y,f]),p({maxZoom:f})},setTranslateExtent:f=>{g().panZoom?.setTranslateExtent(f),p({translateExtent:f})},setPaneClickDistance:f=>{g().panZoom?.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:w,triggerNodeChanges:y,triggerEdgeChanges:v,elementsSelectable:j}=g();if(!j)return;const N=w.reduce((E,S)=>S.selected?[...E,Fo(S.id,!1)]:E,[]),b=f.reduce((E,S)=>S.selected?[...E,Fo(S.id,!1)]:E,[]);y(N),v(b)},setNodeExtent:f=>{const{nodes:w,nodeLookup:y,parentLookup:v,nodeOrigin:j,elevateNodesOnSelect:N,nodeExtent:b}=g();f[0][0]===b[0][0]&&f[0][1]===b[0][1]&&f[1][0]===b[1][0]&&f[1][1]===b[1][1]||(Rj(w,y,v,{nodeOrigin:j,nodeExtent:f,elevateNodesOnSelect:N,checkEquality:!1}),p({nodeExtent:f}))},panBy:f=>{const{transform:w,width:y,height:v,panZoom:j,translateExtent:N}=g();return WZ({delta:f,panZoom:j,transform:w,translateExtent:N,width:y,height:v})},setCenter:async(f,w,y)=>{const{width:v,height:j,maxZoom:N,panZoom:b}=g();if(!b)return Promise.resolve(!1);const E=typeof y?.zoom<"u"?y.zoom:N;return await b.setViewport({x:v/2-f*E,y:j/2-w*E,zoom:E},{duration:y?.duration,ease:y?.ease,interpolate:y?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...b4}})},updateConnection:f=>{p({connection:f})},reset:()=>p({...BE()})}},Object.is);function Nse({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:a,initialHeight:o,initialMinZoom:i,initialMaxZoom:l,initialFitViewOptions:c,fitView:d,nodeOrigin:u,nodeExtent:m,children:p}){const[g]=h.useState(()=>wse({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:o,fitView:d,minZoom:i,maxZoom:l,fitViewOptions:c,nodeOrigin:u,nodeExtent:m}));return s.jsx(Bee,{value:g,children:s.jsx(ute,{children:p})})}function bse({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:a,width:o,height:i,fitView:l,fitViewOptions:c,minZoom:d,maxZoom:u,nodeOrigin:m,nodeExtent:p}){return h.useContext(Eg)?s.jsx(s.Fragment,{children:e}):s.jsx(Nse,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:a,initialWidth:o,initialHeight:i,fitView:l,initialFitViewOptions:c,initialMinZoom:d,initialMaxZoom:u,nodeOrigin:m,nodeExtent:p,children:e})}const Sse={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Cse({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:o,edgeTypes:i,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:u,onMoveStart:m,onMoveEnd:p,onConnect:g,onConnectStart:x,onConnectEnd:f,onClickConnectStart:w,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:b,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:P,onNodeDragStop:A,onNodesDelete:L,onEdgesDelete:R,onDelete:I,onSelectionChange:V,onSelectionDragStart:O,onSelectionDrag:k,onSelectionDragStop:T,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:_,onBeforeDelete:H,connectionMode:$,connectionLineType:B=za.Bezier,connectionLineStyle:W,connectionLineComponent:q,connectionLineContainerStyle:Y,deleteKeyCode:pe="Backspace",selectionKeyCode:J="Shift",selectionOnDrag:ge=!1,selectionMode:Q=hu.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:le=Jp()?"Meta":"Control",zoomActivationKeyCode:me=Jp()?"Meta":"Control",snapToGrid:Z,snapGrid:ae,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:Ve,nodesDraggable:Ue,autoPanOnNodeFocus:ct,nodesConnectable:$e,nodesFocusable:Ge,nodeOrigin:Oe=sI,edgesFocusable:at,edgesReconnectable:st,elementsSelectable:Ct=!0,defaultViewport:dn=tte,minZoom:ts=.5,maxZoom:An=2,translateExtent:un=uu,preventScrolling:Zr=!0,nodeExtent:qs,defaultMarkerColor:ve="#b1b1b7",zoomOnScroll:X=!0,zoomOnPinch:de=!0,panOnScroll:Se=!1,panOnScrollSpeed:be=.5,panOnScrollMode:Te=Qo.Free,zoomOnDoubleClick:Le=!0,panOnDrag:Je=!0,onPaneClick:ot,onPaneMouseEnter:Et,onPaneMouseMove:Ie,onPaneMouseLeave:Me,onPaneScroll:Qe,onPaneContextMenu:hn,paneClickDistance:zt=0,nodeClickDistance:Da=0,children:Wg,onReconnect:S5,onReconnectStart:C5,onReconnectEnd:E5,onEdgeContextMenu:T5,onEdgeDoubleClick:P5,onEdgeMouseEnter:A5,onEdgeMouseMove:D5,onEdgeMouseLeave:k5,reconnectRadius:M5=10,onNodesChange:R5,onEdgesChange:F5,noDragClassName:O5="nodrag",noWheelClassName:I5="nowheel",noPanClassName:bS="nopan",fitView:SS,fitViewOptions:CS,connectOnClick:L5,attributionPosition:$5,proOptions:_5,defaultEdgeOptions:V5,elevateNodesOnSelect:U5,elevateEdgesOnSelect:B5,disableKeyboardA11y:ES=!1,autoPanOnConnect:H5,autoPanOnNodeDrag:q5,autoPanSpeed:W5,connectionRadius:z5,isValidConnection:X5,onError:Y5,style:K5,id:TS,nodeDragThreshold:G5,connectionDragThreshold:J5,viewport:Q5,onViewportChange:Z5,width:eV,height:tV,colorMode:sV="light",debug:nV,onScroll:PS,ariaLabelConfig:rV,...aV},oV){const zg=TS||"1",iV=ate(sV),lV=h.useCallback(AS=>{AS.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),PS?.(AS)},[PS]);return s.jsx("div",{"data-testid":"rf__wrapper",...aV,onScroll:lV,style:{...K5,...Sse},ref:oV,className:os(["react-flow",a,iV]),id:TS,role:"application",children:s.jsxs(bse,{nodes:e,edges:t,width:eV,height:tV,fitView:SS,fitViewOptions:CS,minZoom:ts,maxZoom:An,nodeOrigin:Oe,nodeExtent:qs,children:[s.jsx(jse,{onInit:d,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:b,onNodeDoubleClick:E,nodeTypes:o,edgeTypes:i,connectionLineType:B,connectionLineStyle:W,connectionLineComponent:q,connectionLineContainerStyle:Y,selectionKeyCode:J,selectionOnDrag:ge,selectionMode:Q,deleteKeyCode:pe,multiSelectionKeyCode:le,panActivationKeyCode:he,zoomActivationKeyCode:me,onlyRenderVisibleElements:we,defaultViewport:dn,translateExtent:un,minZoom:ts,maxZoom:An,preventScrolling:Zr,zoomOnScroll:X,zoomOnPinch:de,zoomOnDoubleClick:Le,panOnScroll:Se,panOnScrollSpeed:be,panOnScrollMode:Te,panOnDrag:Je,onPaneClick:ot,onPaneMouseEnter:Et,onPaneMouseMove:Ie,onPaneMouseLeave:Me,onPaneScroll:Qe,onPaneContextMenu:hn,paneClickDistance:zt,nodeClickDistance:Da,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:_,onReconnect:S5,onReconnectStart:C5,onReconnectEnd:E5,onEdgeContextMenu:T5,onEdgeDoubleClick:P5,onEdgeMouseEnter:A5,onEdgeMouseMove:D5,onEdgeMouseLeave:k5,reconnectRadius:M5,defaultMarkerColor:ve,noDragClassName:O5,noWheelClassName:I5,noPanClassName:bS,rfId:zg,disableKeyboardA11y:ES,nodeExtent:qs,viewport:Q5,onViewportChange:Z5}),s.jsx(rte,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:x,onConnectEnd:f,onClickConnectStart:w,onClickConnectEnd:y,nodesDraggable:Ue,autoPanOnNodeFocus:ct,nodesConnectable:$e,nodesFocusable:Ge,edgesFocusable:at,edgesReconnectable:st,elementsSelectable:Ct,elevateNodesOnSelect:U5,elevateEdgesOnSelect:B5,minZoom:ts,maxZoom:An,nodeExtent:qs,onNodesChange:R5,onEdgesChange:F5,snapToGrid:Z,snapGrid:ae,connectionMode:$,translateExtent:un,connectOnClick:L5,defaultEdgeOptions:V5,fitView:SS,fitViewOptions:CS,onNodesDelete:L,onEdgesDelete:R,onDelete:I,onNodeDragStart:S,onNodeDrag:P,onNodeDragStop:A,onSelectionDrag:k,onSelectionDragStart:O,onSelectionDragStop:T,onMove:u,onMoveStart:m,onMoveEnd:p,noPanClassName:bS,nodeOrigin:Oe,rfId:zg,autoPanOnConnect:H5,autoPanOnNodeDrag:q5,autoPanSpeed:W5,onError:Y5,connectionRadius:z5,isValidConnection:X5,selectNodesOnDrag:Ve,nodeDragThreshold:G5,connectionDragThreshold:J5,onBeforeDelete:H,paneClickDistance:zt,debug:nV,ariaLabelConfig:rV}),s.jsx(ete,{onSelectionChange:V}),Wg,s.jsx(Kee,{proOptions:_5,position:$5}),s.jsx(Yee,{rfId:zg,disableKeyboardA11y:ES})]})})}var DI=oI(Cse);const Ese=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function Tse({children:e}){const t=lt(Ese);return t?jr.createPortal(e,t):null}function kI(e){const[t,n]=h.useState(e),r=h.useCallback(a=>n(o=>rI(a,o)),[]);return[t,n,r]}function MI(e){const[t,n]=h.useState(e),r=h.useCallback(a=>n(o=>aI(a,o)),[]);return[t,n,r]}function Pse({dimensions:e,lineWidth:t,variant:n,className:r}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:os(["react-flow__background-pattern",n,r])})}function Ase({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:os(["react-flow__background-pattern","dots",t])})}var da;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(da||(da={}));const Dse={[da.Dots]:1,[da.Lines]:1,[da.Cross]:6},kse=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function RI({id:e,variant:t=da.Dots,gap:n=20,size:r,lineWidth:a=1,offset:o=0,color:i,bgColor:l,style:c,className:d,patternClassName:u}){const m=h.useRef(null),{transform:p,patternId:g}=lt(kse,Wt),x=r||Dse[t],f=t===da.Dots,w=t===da.Cross,y=Array.isArray(n)?n:[n,n],v=[y[0]*p[2]||1,y[1]*p[2]||1],j=x*p[2],N=Array.isArray(o)?o:[o,o],b=w?[j,j]:v,E=[N[0]*p[2]||1+b[0]/2,N[1]*p[2]||1+b[1]/2],S=`${g}${e||""}`;return s.jsxs("svg",{className:os(["react-flow__background",d]),style:{...c,...Tg,"--xy-background-color-props":l,"--xy-background-pattern-color-props":i},ref:m,"data-testid":"rf__background",children:[s.jsx("pattern",{id:S,x:p[0]%v[0],y:p[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:f?s.jsx(Ase,{radius:j/2,className:u}):s.jsx(Pse,{dimensions:b,lineWidth:a,variant:t,className:u})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}RI.displayName="Background";const FI=h.memo(RI);function Mse(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Rse(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Fse(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Ose(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ise(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function tm({children:e,className:t,...n}){return s.jsx("button",{type:"button",className:os(["react-flow__controls-button",t]),...n,children:e})}const Lse=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function OI({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:d,children:u,position:m="bottom-left",orientation:p="vertical","aria-label":g}){const x=Lt(),{isInteractive:f,minZoomReached:w,maxZoomReached:y,ariaLabelConfig:v}=lt(Lse,Wt),{zoomIn:j,zoomOut:N,fitView:b}=Jr(),E=()=>{j(),o?.()},S=()=>{N(),i?.()},P=()=>{b(a),l?.()},A=()=>{x.setState({nodesDraggable:!f,nodesConnectable:!f,elementsSelectable:!f}),c?.(!f)},L=p==="horizontal"?"horizontal":"vertical";return s.jsxs(Gl,{className:os(["react-flow__controls",L,d]),position:m,style:e,"data-testid":"rf__controls","aria-label":g??v["controls.ariaLabel"],children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(tm,{onClick:E,className:"react-flow__controls-zoomin",title:v["controls.zoomIn.ariaLabel"],"aria-label":v["controls.zoomIn.ariaLabel"],disabled:y,children:s.jsx(Mse,{})}),s.jsx(tm,{onClick:S,className:"react-flow__controls-zoomout",title:v["controls.zoomOut.ariaLabel"],"aria-label":v["controls.zoomOut.ariaLabel"],disabled:w,children:s.jsx(Rse,{})})]}),n&&s.jsx(tm,{className:"react-flow__controls-fitview",onClick:P,title:v["controls.fitView.ariaLabel"],"aria-label":v["controls.fitView.ariaLabel"],children:s.jsx(Fse,{})}),r&&s.jsx(tm,{className:"react-flow__controls-interactive",onClick:A,title:v["controls.interactive.ariaLabel"],"aria-label":v["controls.interactive.ariaLabel"],children:f?s.jsx(Ise,{}):s.jsx(Ose,{})}),u]})}OI.displayName="Controls";const II=h.memo(OI);function $se({id:e,x:t,y:n,width:r,height:a,style:o,color:i,strokeColor:l,strokeWidth:c,className:d,borderRadius:u,shapeRendering:m,selected:p,onClick:g}){const{background:x,backgroundColor:f}=o||{},w=i||x||f;return s.jsx("rect",{className:os(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:u,ry:u,width:r,height:a,style:{fill:w,stroke:l,strokeWidth:c},shapeRendering:m,onClick:g?y=>g(y,e):void 0})}const _se=h.memo($se),Vse=e=>e.nodes.map(t=>t.id),Qx=e=>e instanceof Function?e:()=>e;function Use({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a,nodeComponent:o=_se,onClick:i}){const l=lt(Vse,Wt),c=Qx(t),d=Qx(e),u=Qx(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:l.map(p=>s.jsx(Hse,{id:p,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:a,NodeComponent:o,onClick:i,shapeRendering:m},p))})}function Bse({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:a,nodeStrokeWidth:o,shapeRendering:i,NodeComponent:l,onClick:c}){const{node:d,x:u,y:m,width:p,height:g}=lt(x=>{const{internals:f}=x.nodeLookup.get(e),w=f.userNode,{x:y,y:v}=f.positionAbsolute,{width:j,height:N}=Pa(w);return{node:w,x:y,y:v,width:j,height:N}},Wt);return!d||d.hidden||!D4(d)?null:s.jsx(l,{x:u,y:m,width:p,height:g,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:a,strokeColor:n(d),strokeWidth:o,shapeRendering:i,onClick:c,id:d.id})}const Hse=h.memo(Bse);var qse=h.memo(Use);const Wse=200,zse=150,Xse=e=>!e.hidden,Yse=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?A4(ch(e.nodeLookup,{filter:Xse}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Kse="react-flow__minimap-desc";function LI({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:a="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:l,bgColor:c,maskColor:d,maskStrokeColor:u,maskStrokeWidth:m,position:p="bottom-right",onClick:g,onNodeClick:x,pannable:f=!1,zoomable:w=!1,ariaLabel:y,inversePan:v,zoomStep:j=10,offsetScale:N=5}){const b=Lt(),E=h.useRef(null),{boundingRect:S,viewBB:P,rfId:A,panZoom:L,translateExtent:R,flowWidth:I,flowHeight:V,ariaLabelConfig:O}=lt(Yse,Wt),k=e?.width??Wse,T=e?.height??zse,D=S.width/k,M=S.height/T,_=Math.max(D,M),H=_*k,$=_*T,B=N*_,W=S.x-(H-S.width)/2-B,q=S.y-($-S.height)/2-B,Y=H+B*2,pe=$+B*2,J=`${Kse}-${A}`,ge=h.useRef(0),Q=h.useRef();ge.current=_,h.useEffect(()=>{if(E.current&&L)return Q.current=ZZ({domNode:E.current,panZoom:L,getTransform:()=>b.getState().transform,getViewScale:()=>ge.current}),()=>{Q.current?.destroy()}},[L]),h.useEffect(()=>{Q.current?.update({translateExtent:R,width:I,height:V,inversePan:v,pannable:f,zoomStep:j,zoomable:w})},[f,w,v,j,R,I,V]);const he=g?Z=>{const[ae,we]=Q.current?.pointer(Z)||[0,0];g(Z,{x:ae,y:we})}:void 0,le=x?h.useCallback((Z,ae)=>{const we=b.getState().nodeLookup.get(ae).internals.userNode;x(Z,we)},[]):void 0,me=y??O["minimap.ariaLabel"];return s.jsx(Gl,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*_:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:os(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:k,height:T,viewBox:`${W} ${q} ${Y} ${pe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":J,ref:E,onClick:he,children:[me&&s.jsx("title",{id:J,children:me}),s.jsx(qse,{onClick:le,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:a,nodeStrokeWidth:i,nodeComponent:l}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${W-B},${q-B}h${Y+B*2}v${pe+B*2}h${-Y-B*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}LI.displayName="MiniMap";const $I=h.memo(LI),Gse=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Jse={[Yl.Line]:"right",[Yl.Handle]:"bottom-right"};function Qse({nodeId:e,position:t,variant:n=Yl.Handle,className:r,style:a=void 0,children:o,color:i,minWidth:l=10,minHeight:c=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:p,autoScale:g=!0,shouldResize:x,onResizeStart:f,onResize:w,onResizeEnd:y}){const v=dI(),j=typeof e=="string"?e:v,N=Lt(),b=h.useRef(null),E=n===Yl.Handle,S=lt(h.useCallback(Gse(E&&g),[E,g]),Wt),P=h.useRef(null),A=t??Jse[n];h.useEffect(()=>{if(!(!b.current||!j))return P.current||(P.current=fee({domNode:b.current,nodeId:j,getStoreItems:()=>{const{nodeLookup:R,transform:I,snapGrid:V,snapToGrid:O,nodeOrigin:k,domNode:T}=N.getState();return{nodeLookup:R,transform:I,snapGrid:V,snapToGrid:O,nodeOrigin:k,paneDomNode:T}},onChange:(R,I)=>{const{triggerNodeChanges:V,nodeLookup:O,parentLookup:k,nodeOrigin:T}=N.getState(),D=[],M={x:R.x,y:R.y},_=O.get(j);if(_&&_.expandParent&&_.parentId){const H=_.origin??T,$=R.width??_.measured.width??0,B=R.height??_.measured.height??0,W={id:_.id,parentId:_.parentId,rect:{width:$,height:B,...k4({x:R.x??_.position.x,y:R.y??_.position.y},{width:$,height:B},_.parentId,O,H)}},q=zN([W],O,k,T);D.push(...q),M.x=R.x?Math.max(H[0]*$,R.x):void 0,M.y=R.y?Math.max(H[1]*B,R.y):void 0}if(M.x!==void 0&&M.y!==void 0){const H={id:j,type:"position",position:{...M}};D.push(H)}if(R.width!==void 0&&R.height!==void 0){const $={id:j,type:"dimensions",resizing:!0,setAttributes:p?p==="horizontal"?"width":"height":!0,dimensions:{width:R.width,height:R.height}};D.push($)}for(const H of I){const $={...H,type:"position"};D.push($)}V(D)},onEnd:({width:R,height:I})=>{const V={id:j,type:"dimensions",resizing:!1,dimensions:{width:R,height:I}};N.getState().triggerNodeChanges([V])}})),P.current.update({controlPosition:A,boundaries:{minWidth:l,minHeight:c,maxWidth:d,maxHeight:u},keepAspectRatio:m,resizeDirection:p,onResizeStart:f,onResize:w,onResizeEnd:y,shouldResize:x}),()=>{P.current?.destroy()}},[A,l,c,d,u,m,f,w,y,x]);const L=A.split("-");return s.jsx("div",{className:os(["react-flow__resize-control","nodrag",...L,n,r]),ref:b,style:{...a,scale:S,...i&&{[E?"backgroundColor":"borderColor"]:i}},children:o})}h.memo(Qse);const Zse=({id:e,data:t})=>{const{field:n}=t,{setNodes:r,setEdges:a}=Jr(),o=()=>{r(i=>i.filter(l=>l.id!==e)),a(i=>i.filter(l=>l.source!==e&&l.target!==e))};return s.jsxs("div",{className:"bg-card border-2 border-muted rounded-lg p-3 min-w-[160px] shadow-sm relative group",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:o,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete source field",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx(Ds,{className:"h-4 w-4 text-blue-500"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-primary",children:n.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:n.type}),s.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[140px]",title:n.path,children:n.path})]}),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-blue-500 border-2 border-white"})]})},ene=({id:e,data:t})=>{const[n,r]=h.useState(t.function),[a,o]=h.useState(t.parameters),[i,l]=h.useState(!1),[c,d]=h.useState([]),[u,m]=h.useState(!1),{setNodes:p,setEdges:g}=Jr();h.useEffect(()=>{(async()=>{m(!0);try{const N=await qO.getAllFunctions();if(d(N),"isBuiltIn"in t.function&&t.function.isBuiltIn){const b=N.find(E=>E.name===t.function.name);b&&r(b)}}catch(N){console.error("Failed to load functions:",N)}finally{m(!1)}})()},[t.function]);const x=j=>j.uiType?j.uiType==="draggable":["string1","string2","text","input","value","a","b","array","object","source","target"].some(E=>j.name.toLowerCase().includes(E))||n.parameters.indexOf(j)===0&&j.required?!0:["delimiter","format","separator","pattern","start","end","length","index"].some(E=>j.name.toLowerCase().includes(E))?!1:j.required,f=h.useMemo(()=>{const j=Object.values(DN).flat(),N=new Map;return j.forEach(b=>{N.set(b.name,b)}),c.forEach(b=>{N.set(b.name,b)}),Array.from(N.values())},[c]),w=j=>{const N=f.find(b=>b.name===j);N&&(r(N),o({}))},y=(j,N)=>{const b={...a,[j]:N};o(b),p(E=>E.map(S=>S.id===e?{...S,data:{...S.data,parameters:b}}:S))},v=()=>{p(j=>j.filter(N=>N.id!==e)),g(j=>j.filter(N=>N.source!==e&&N.target!==e))};return s.jsxs("div",{className:"bg-card border-2 border-orange-200 rounded-lg p-3 min-w-[200px] shadow-sm relative group",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:v,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete function",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(sn,{className:"h-4 w-4 text-orange-500"})}),s.jsx(z,{size:"sm",variant:"ghost",onClick:j=>{j.preventDefault(),j.stopPropagation(),l(!i)},className:"h-6 w-6 p-0 hover:bg-muted rounded",children:s.jsx(qt,{className:`h-3 w-3 ${i?"text-primary":""}`})})]}),t.showSelector?s.jsxs(se,{value:n.name,onValueChange:w,disabled:u,children:[s.jsx(ee,{className:"w-full text-xs",children:s.jsx(ne,{})}),s.jsx(te,{children:(()=>{const j=f.reduce((N,b)=>{const E=b.category||"general";return N[E]||(N[E]=[]),N[E].push(b),N},{});return Object.entries(j).map(([N,b])=>s.jsxs("div",{children:[s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground uppercase",children:N}),b.map(E=>s.jsx(F,{value:E.name,className:"text-xs",children:E.name},E.name))]},N))})()})]}):s.jsxs("div",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[t.isCustom&&s.jsx(vn,{className:"h-3 w-3"}),n.name]}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1 mb-3",children:n.description}),i&&s.jsx("div",{className:"space-y-2 mb-3 border-t pt-2 bg-muted/20 rounded p-2",children:t.isCustom?s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-xs font-medium",children:"Custom Java Code"}),s.jsx(Re,{placeholder:"Enter your custom Java transformation code here...",className:"h-20 text-xs font-mono",value:a.customCode||"",onChange:j=>y("customCode",j.target.value)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Write Java code to transform input values. Use 'input' variable to access connected fields."})]}):s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"text-xs font-medium",children:"Parameters"}),n.parameters.filter(j=>!x(j)).length===0?s.jsx("div",{className:"text-xs text-muted-foreground",children:"No configurable parameters"}):n.parameters.filter(j=>!x(j)).map(j=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs(C,{className:"text-xs",children:[j.name,j.required&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.jsx(U,{placeholder:`${j.type} value`,value:a[j.name]||"",onChange:N=>y(j.name,N.target.value),className:"h-6 text-xs"}),j.description&&s.jsx("div",{className:"text-xs text-muted-foreground",children:j.description})]},j.name))]})}),n.parameters.map((j,N)=>x(j)?s.jsx(Qt,{type:"target",position:Pe.Left,id:j.name,style:{top:`${60+N*20}px`,background:"#f97316",width:"8px",height:"8px"},className:"border-2 border-white"},`input-${j.name}`):null),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-orange-500 border-2 border-white"})]})},tne=({data:e})=>{const[t,n]=h.useState(e.value),[r,a]=h.useState(e.type);return s.jsxs("div",{className:"bg-card border-2 border-green-200 rounded-lg p-3 min-w-[160px] shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(VB,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Constant"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(se,{value:r,onValueChange:o=>a(o),children:[s.jsx(ee,{className:"w-full h-7 text-xs",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"string",children:"String"}),s.jsx(F,{value:"number",children:"Number"}),s.jsx(F,{value:"boolean",children:"Boolean"})]})]}),r==="boolean"?s.jsxs(se,{value:t,onValueChange:n,children:[s.jsx(ee,{className:"w-full h-7 text-xs",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"true",children:"true"}),s.jsx(F,{value:"false",children:"false"})]})]}):s.jsx(U,{placeholder:`Enter ${r} value`,value:t,onChange:o=>n(o.target.value),type:r==="number"?"number":"text",className:"h-7 text-xs"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Value: ",s.jsx("span",{className:"font-mono",children:t||"undefined"})]})]}),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-green-500 border-2 border-white"})]})},sne=({data:e})=>{const{field:t}=e;return s.jsxs("div",{className:"bg-card border-2 border-purple-200 rounded-lg p-3 min-w-[160px] shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx(zy,{className:"h-4 w-4 text-purple-500"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-primary",children:t.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:t.type}),s.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[140px]",title:t.path,children:t.path})]}),s.jsx(Qt,{type:"target",position:Pe.Left,className:"w-3 h-3 bg-purple-500 border-2 border-white"})]})},nne=({data:e})=>{const[t,n]=h.useState(e.condition),[r,a]=h.useState(e.compareValue);return s.jsxs("div",{className:"bg-card border-2 border-yellow-200 rounded-lg p-3 min-w-[180px] shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(nr,{className:"h-4 w-4 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Conditional"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Condition"}),s.jsxs(se,{value:t,onValueChange:o=>n(o),children:[s.jsx(ee,{className:"w-full h-7 text-xs",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"equals",children:"Equals"}),s.jsx(F,{value:"notEquals",children:"Not Equals"}),s.jsx(F,{value:"contains",children:"Contains"}),s.jsx(F,{value:"startsWith",children:"Starts With"}),s.jsx(F,{value:"endsWith",children:"Ends With"}),s.jsx(F,{value:"isEmpty",children:"Is Empty"}),s.jsx(F,{value:"isNotEmpty",children:"Is Not Empty"})]})]})]}),!["isEmpty","isNotEmpty"].includes(t)&&s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Compare Value"}),s.jsx(U,{placeholder:"Value to compare",value:r,onChange:o=>a(o.target.value),className:"h-7 text-xs"})]})]}),s.jsx(Qt,{type:"target",position:Pe.Left,id:"input",className:"w-3 h-3 bg-yellow-500 border-2 border-white",style:{top:40}}),s.jsx(Qt,{type:"source",position:Pe.Right,id:"true",className:"w-3 h-3 bg-green-500 border-2 border-white",style:{top:35}}),s.jsx(Qt,{type:"source",position:Pe.Right,id:"false",className:"w-3 h-3 bg-red-500 border-2 border-white",style:{top:55}}),s.jsx("div",{className:"absolute -right-8 top-7 text-xs text-green-600 font-medium",children:"T"}),s.jsx("div",{className:"absolute -right-8 top-12 text-xs text-red-600 font-medium",children:"F"})]})};function rne(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var YN="ScrollArea",[_I,eye]=ln(YN),[ane,Yn]=_I(YN),VI=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=h.useState(null),[d,u]=h.useState(null),[m,p]=h.useState(null),[g,x]=h.useState(null),[f,w]=h.useState(null),[y,v]=h.useState(0),[j,N]=h.useState(0),[b,E]=h.useState(!1),[S,P]=h.useState(!1),A=Xe(t,R=>c(R)),L=jc(a);return s.jsx(ane,{scope:n,type:r,dir:L,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:u,content:m,onContentChange:p,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:b,onScrollbarXEnabledChange:E,scrollbarY:f,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:P,onCornerWidthChange:v,onCornerHeightChange:N,children:s.jsx(Fe.div,{dir:L,...i,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});VI.displayName=YN;var UI="ScrollAreaViewport",BI=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,asChild:a,nonce:o,...i}=e,l=Yn(UI,n),c=h.useRef(null),d=Xe(t,c,l.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:o}),s.jsx(Fe.div,{"data-radix-scroll-area-viewport":"",...i,asChild:a,ref:d,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...e.style},children:fne({asChild:a,children:r},u=>s.jsx("div",{"data-radix-scroll-area-content":"",ref:l.onContentChange,style:{minWidth:l.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});BI.displayName=UI;var Qr="ScrollAreaScrollbar",KN=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Yn(Qr,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return h.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?s.jsx(one,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(ine,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(HI,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(GN,{...r,ref:t}):null});KN.displayName=Qr;var one=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Yn(Qr,e.__scopeScrollArea),[o,i]=h.useState(!1);return h.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},u=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(ps,{present:n||o,children:s.jsx(HI,{"data-state":o?"visible":"hidden",...r,ref:t})})}),ine=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Yn(Qr,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Ag(()=>c("SCROLL_END"),100),[l,c]=rne("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),h.useEffect(()=>{const d=a.viewport,u=o?"scrollLeft":"scrollTop";if(d){let m=d[u];const p=()=>{const g=d[u];m!==g&&(c("SCROLL"),i()),m=g};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[a.viewport,o,c,i]),s.jsx(ps,{present:n||l!=="hidden",children:s.jsx(GN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ee(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ee(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),HI=h.forwardRef((e,t)=>{const n=Yn(Qr,e.__scopeScrollArea),{forceMount:r,...a}=e,[o,i]=h.useState(!1),l=e.orientation==="horizontal",c=Ag(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?d:u)}},10);return Jl(n.viewport,c),Jl(n.content,c),s.jsx(ps,{present:r||o,children:s.jsx(GN,{"data-state":o?"visible":"hidden",...a,ref:t})})}),GN=h.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Yn(Qr,e.__scopeScrollArea),o=h.useRef(null),i=h.useRef(0),[l,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=YI(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>o.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function m(p,g){return mne(p,i.current,l,g)}return n==="horizontal"?s.jsx(lne,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const p=a.viewport.scrollLeft,g=HE(p,l,a.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=m(p,a.dir))}}):n==="vertical"?s.jsx(cne,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const p=a.viewport.scrollTop,g=HE(p,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=m(p))}}):null}),lne=h.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=Yn(Qr,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Xe(t,c,o.onScrollbarXChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(WI,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pg(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(o.viewport){const p=o.viewport.scrollLeft+u.deltaX;e.onWheelScroll(p),GI(p,m)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:tf(i.paddingLeft),paddingEnd:tf(i.paddingRight)}})}})}),cne=h.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,o=Yn(Qr,e.__scopeScrollArea),[i,l]=h.useState(),c=h.useRef(null),d=Xe(t,c,o.onScrollbarYChange);return h.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(WI,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pg(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(o.viewport){const p=o.viewport.scrollTop+u.deltaY;e.onWheelScroll(p),GI(p,m)&&u.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:tf(i.paddingTop),paddingEnd:tf(i.paddingBottom)}})}})}),[dne,qI]=_I(Qr),WI=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...p}=e,g=Yn(Qr,n),[x,f]=h.useState(null),w=Xe(t,A=>f(A)),y=h.useRef(null),v=h.useRef(""),j=g.viewport,N=r.content-r.viewport,b=_t(u),E=_t(c),S=Ag(m,10);function P(A){if(y.current){const L=A.clientX-y.current.left,R=A.clientY-y.current.top;d({x:L,y:R})}}return h.useEffect(()=>{const A=L=>{const R=L.target;x?.contains(R)&&b(L,N)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[j,x,N,b]),h.useEffect(E,[r,E]),Jl(x,S),Jl(g.content,S),s.jsx(dne,{scope:n,scrollbar:x,hasThumb:a,onThumbChange:_t(o),onThumbPointerUp:_t(i),onThumbPositionChange:E,onThumbPointerDown:_t(l),children:s.jsx(Fe.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:Ee(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=x.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),P(A))}),onPointerMove:Ee(e.onPointerMove,P),onPointerUp:Ee(e.onPointerUp,A=>{const L=A.target;L.hasPointerCapture(A.pointerId)&&L.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,g.viewport&&(g.viewport.style.scrollBehavior=""),y.current=null})})})}),ef="ScrollAreaThumb",zI=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=qI(ef,e.__scopeScrollArea);return s.jsx(ps,{present:n||a.hasThumb,children:s.jsx(une,{ref:t,...r})})}),une=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,o=Yn(ef,n),i=qI(ef,n),{onThumbPositionChange:l}=i,c=Xe(t,m=>i.onThumbChange(m)),d=h.useRef(),u=Ag(()=>{d.current&&(d.current(),d.current=void 0)},100);return h.useEffect(()=>{const m=o.viewport;if(m){const p=()=>{if(u(),!d.current){const g=pne(m,l);d.current=g,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[o.viewport,u,l]),s.jsx(Fe.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ee(e.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),x=m.clientX-g.left,f=m.clientY-g.top;i.onThumbPointerDown({x,y:f})}),onPointerUp:Ee(e.onPointerUp,i.onThumbPointerUp)})});zI.displayName=ef;var JN="ScrollAreaCorner",XI=h.forwardRef((e,t)=>{const n=Yn(JN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(hne,{...e,ref:t}):null});XI.displayName=JN;var hne=h.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Yn(JN,n),[o,i]=h.useState(0),[l,c]=h.useState(0),d=!!(o&&l);return Jl(a.scrollbarX,()=>{const u=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(u),c(u)}),Jl(a.scrollbarY,()=>{const u=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(u),i(u)}),d?s.jsx(Fe.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function tf(e){return e?parseInt(e,10):0}function YI(e,t){const n=e/t;return isNaN(n)?0:n}function Pg(e){const t=YI(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function mne(e,t,n,r="ltr"){const a=Pg(n),o=a/2,i=t||o,l=a-i,c=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,m=r==="ltr"?[0,u]:[u*-1,0];return KI([c,d],m)(e)}function HE(e,t,n="ltr"){const r=Pg(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,i]:[i*-1,0],d=hj(e,c);return KI([0,i],[0,l])(d)}function KI(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function GI(e,t){return e>0&&e<t}var pne=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Ag(e,t){const n=_t(e),r=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(r.current),[]),h.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Jl(e,t){const n=_t(t);ms(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}function fne(e,t){const{asChild:n,children:r}=e;if(!n)return typeof t=="function"?t(r):t;const a=h.Children.only(r);return h.cloneElement(a,{children:typeof t=="function"?t(a.props.children):t})}var JI=VI,gne=BI,xne=XI;const zn=h.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(JI,{ref:r,className:ce("relative overflow-hidden",e),...n,children:[s.jsx(gne,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(QI,{}),s.jsx(xne,{})]}));zn.displayName=JI.displayName;const QI=h.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(KN,{ref:r,orientation:t,className:ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(zI,{className:"relative flex-1 rounded-full bg-border"})}));QI.displayName=KN.displayName;const vne=({open:e,onClose:t,sourceFields:n,onSelectField:r,excludeFields:a=[]})=>{const[o,i]=h.useState(""),[l,c]=h.useState(new Set),d=w=>{c(y=>{const v=new Set(y);return v.has(w)?v.delete(w):v.add(w),v})},u=w=>{r(w),t(),i(""),c(new Set)},m=(w,y=0)=>{const v=!w.children||w.children.length===0,j=l.has(w.id),N=a.includes(w.id),b=!o||w.name.toLowerCase().includes(o.toLowerCase())||w.path.toLowerCase().includes(o.toLowerCase())||w.type.toLowerCase().includes(o.toLowerCase()),E=w.children?.some(S=>S.name.toLowerCase().includes(o.toLowerCase())||S.path.toLowerCase().includes(o.toLowerCase())||S.type.toLowerCase().includes(o.toLowerCase()));return!b&&!E?null:s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`flex items-center p-2 border rounded-md transition-colors ${N?"bg-muted/50 opacity-50":v?"hover:bg-primary/10 cursor-pointer border-dashed":"hover:bg-muted/50"}`,style:{marginLeft:`${y*16}px`},onClick:()=>{v&&!N?u(w):v||d(w.id)},children:[!v&&s.jsx(z,{variant:"ghost",size:"sm",onClick:S=>{S.stopPropagation(),d(w.id)},className:"mr-2 h-auto w-auto p-1 hover:bg-muted rounded",children:j?s.jsx(ur,{className:"h-3 w-3"}):s.jsx(Cn,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx(Ds,{className:"h-3 w-3 text-info flex-shrink-0"}),s.jsx("span",{className:"font-medium text-sm",children:w.name}),s.jsx(fe,{variant:"outline",className:"text-xs",children:w.type}),N&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Already added"})]}),v&&!N&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"Click to select"})]}),!v&&j&&w.children&&s.jsx("div",{className:"ml-2",children:w.children.map(S=>m(S,y+1))})]},w.id)},p=w=>{const y=[],v=j=>{!j.children||j.children.length===0?y.push(j):j.children.forEach(v)};return w.forEach(v),y},g=n.filter(w=>!a.includes(w.id)),x=p(n).length,f=p(g).length;return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-2xl h-[80vh] flex flex-col",children:[s.jsx(gt,{className:"flex-shrink-0",children:s.jsxs(xt,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{children:"Select Source Field"}),s.jsxs(fe,{variant:"outline",className:"text-xs",children:[f," of ",x," available"]})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(jt,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"flex-shrink-0 mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search fields by name, path, or type...",value:o,onChange:w=>i(w.target.value),className:"pl-10"})]})}),s.jsx(zn,{className:"flex-1",children:s.jsx("div",{className:"space-y-2 pr-4",children:g.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ds,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No available source fields to add"})]}):g.map(w=>m(w))})}),s.jsx("div",{className:"flex-shrink-0 pt-4 border-t",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Click on any leaf field (shown with dashed border) to add it to your flow"})})]})})};var QN="Tabs",[yne,tye]=ln(QN,[wc]),ZI=wc(),[jne,ZN]=yne(QN),eL=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=jc(l),[m,p]=qn({prop:r,onChange:a,defaultProp:o});return s.jsx(jne,{scope:n,baseId:_n(),value:m,onValueChange:p,orientation:i,dir:u,activationMode:c,children:s.jsx(Fe.div,{dir:u,"data-orientation":i,...d,ref:t})})});eL.displayName=QN;var tL="TabsList",sL=h.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,o=ZN(tL,n),i=ZI(n);return s.jsx(rN,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:s.jsx(Fe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});sL.displayName=tL;var nL="TabsTrigger",rL=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...o}=e,i=ZN(nL,n),l=ZI(n),c=iL(i.baseId,r),d=lL(i.baseId,r),u=r===i.value;return s.jsx(aN,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Fe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:Ee(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?i.onValueChange(r):m.preventDefault()}),onKeyDown:Ee(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(r)}),onFocus:Ee(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!a&&m&&i.onValueChange(r)})})})});rL.displayName=nL;var aL="TabsContent",oL=h.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:o,...i}=e,l=ZN(aL,n),c=iL(l.baseId,r),d=lL(l.baseId,r),u=r===l.value,m=h.useRef(u);return h.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),s.jsx(ps,{present:a||u,children:({present:p})=>s.jsx(Fe.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:p&&o})})});oL.displayName=aL;function iL(e,t){return`${e}-trigger-${t}`}function lL(e,t){return`${e}-content-${t}`}var wne=eL,cL=sL,dL=rL,uL=oL;const et=wne,Ke=h.forwardRef(({className:e,...t},n)=>s.jsx(cL,{ref:n,className:ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ke.displayName=cL.displayName;const xe=h.forwardRef(({className:e,...t},n)=>s.jsx(dL,{ref:n,className:ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));xe.displayName=dL.displayName;const ye=h.forwardRef(({className:e,...t},n)=>s.jsx(uL,{ref:n,className:ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ye.displayName=uL.displayName;const Nne=({open:e,onClose:t,onSelectFunction:n})=>{const[r,a]=h.useState(""),[o,i]=h.useState([]),[l,c]=h.useState(!1);h.useEffect(()=>{e&&(async()=>{c(!0);try{const f=await qO.getAllFunctions();i(f)}catch(f){console.error("Failed to load functions:",f)}finally{c(!1)}})()},[e]);const d=Nt.useMemo(()=>{const x={};return Object.entries(DN).forEach(([f,w])=>{x[f]=[...w]}),o.forEach(f=>{const w=f.category||"general";x[w]||(x[w]=[]),x[w]=x[w].filter(y=>y.name!==f.name),x[w].push(f)}),x},[o]),u=Object.entries(d).reduce((x,[f,w])=>{const y=w.filter(v=>v.name.toLowerCase().includes(r.toLowerCase())||v.description.toLowerCase().includes(r.toLowerCase()));return y.length>0&&(x[f]=y),x},{}),m=x=>{n(x),t(),a("")},p=Object.values(d).flat().length,g=Object.values(u).flat().length;return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-4xl h-[80vh] flex flex-col",children:[s.jsx(gt,{className:"flex-shrink-0",children:s.jsxs(xt,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Nx,{className:"h-5 w-5 text-primary"}),s.jsx("span",{children:"Select Function"}),s.jsxs(fe,{variant:"outline",className:"text-xs",children:[g," of ",p," functions"]})]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(jt,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"flex-shrink-0 mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search functions by name or description...",value:r,onChange:x=>a(x.target.value),className:"pl-10"})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:l?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(vt,{className:"h-8 w-8 mx-auto mb-2 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading functions..."})]}):Object.keys(u).length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Nx,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No functions found matching your search"})]}):s.jsxs(et,{defaultValue:Object.keys(u)[0],className:"h-full flex flex-col",children:[s.jsx(Ke,{className:"grid w-full flex-shrink-0",style:{gridTemplateColumns:`repeat(${Object.keys(u).length}, 1fr)`},children:Object.keys(u).map(x=>s.jsxs(xe,{value:x,className:"capitalize text-xs",children:[x," (",u[x].length,")"]},x))}),Object.entries(u).map(([x,f])=>s.jsx(ye,{value:x,className:"flex-1 mt-4",children:s.jsx(zn,{className:"h-full",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 pr-4",children:f.map(w=>s.jsxs(K,{className:"cursor-pointer hover:bg-primary/10 transition-colors border-dashed hover:border-primary",onClick:()=>m(w),children:[s.jsx(oe,{className:"pb-2",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Nx,{className:"h-3 w-3 text-primary"}),w.name]}),s.jsx(Ne,{className:"text-xs mt-1",children:w.description})]}),s.jsx(fe,{variant:"secondary",className:"text-xs ml-2",children:w.category})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:[w.parameters.length," parameter",w.parameters.length!==1?"s":""]}),s.jsx("span",{className:"text-xs text-primary font-medium",children:"Click to add"})]})})]},w.name))})})},x))]})}),s.jsx("div",{className:"flex-shrink-0 pt-4 border-t",children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a function to add it to your flow. You can configure parameters after adding."})})]})})},bne=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:o,targetPosition:i,style:l={},markerEnd:c,selected:d=!1})=>{const{setEdges:u}=Jr(),[m,p,g]=BN({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:a,targetPosition:i}),x=f=>{f.stopPropagation(),u(w=>w.filter(y=>y.id!==e))};return s.jsxs(s.Fragment,{children:[s.jsx(uh,{path:m,markerEnd:c,style:l}),d&&s.jsx(Tse,{children:s.jsx("div",{className:"absolute pointer-events-auto",style:{transform:`translate(-50%, -50%) translate(${p}px,${g}px)`},children:s.jsx(z,{variant:"ghost",size:"sm",onClick:x,className:"h-6 w-6 p-0 bg-destructive text-destructive-foreground hover:bg-destructive/80 rounded-full shadow-md",title:"Delete connection",children:s.jsx(jt,{className:"h-3 w-3"})})})})]})},Sne={sourceField:Zse,function:ene,constant:tne,targetField:sne,conditional:nne},Cne={deletable:bne},Ene=({open:e,onClose:t,sourceFields:n,targetField:r,onApplyMapping:a,initialMapping:o})=>{const[i,l,c]=kI([]),[d,u,m]=MI([]),[p,g]=h.useState(1),[x,f]=h.useState(!1),[w,y]=h.useState(!1);Nt.useEffect(()=>{if(e&&r){let L=[],R=[],I=1;if(o?.visualFlowData)L=o.visualFlowData.nodes,R=o.visualFlowData.edges,I=o.visualFlowData.nodeIdCounter;else{L.push({id:"target",type:"targetField",position:{x:800,y:200},data:{field:r}});const V=(k,T,D)=>{for(const M of k){if(M.name===T||M.path===T||D&&M.path===D)return M;if(M.children&&M.children.length>0){const _=V(M.children,T,D);if(_)return _}}};o&&o.sourcePaths&&o.sourcePaths.length>0?o.sourcePaths.forEach((k,T)=>{let D=n.find(M=>M.path===k||M.name===k);if(D||(D=V(n,k,k)),!D&&o.sourceFields&&o.sourceFields[T]){const M=o.sourceFields[T];D={id:`source_${M}_${Date.now()}_${T}`,name:M,type:"string",path:k,expanded:!1}}if(D){const M=`source-${D.id}`;L.push({id:M,type:"sourceField",position:{x:50,y:50+T*100},data:{field:D}}),R.push({id:`edge-${M}-target`,source:M,target:"target",type:"deletable",animated:!1,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}})}}):o&&o.sourceFields&&o.sourceFields.length>0&&o.sourceFields.forEach((k,T)=>{let D=n.find(M=>M.name===k||M.path===k);if(D||(D=V(n,k,k)),D||(D={id:`source_${k}_${Date.now()}_${T}`,name:k,type:"string",path:k,expanded:!1}),D){const M=`source-${D.id}`;L.push({id:M,type:"sourceField",position:{x:50,y:50+T*100},data:{field:D}}),R.push({id:`edge-${M}-target`,source:M,target:"target",type:"deletable",animated:!1,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}})}}),I=2+(o?.sourcePaths?.length||o?.sourceFields?.length||0)}l(L),u(R),g(I)}},[e,r,n,o,l,u]);const v=h.useCallback(L=>{if(L.target==="target")u(R=>{const I=R.filter(O=>O.target!=="target"),V={...L,type:"deletable",animated:!1,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}};return Qp(V,I)});else{const R={...L,type:"deletable",animated:!1,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}};u(I=>Qp(R,I))}},[u]),j=h.useCallback(()=>{f(!0)},[]),N=h.useCallback(L=>{const R=i.filter(V=>V.type==="sourceField"),I={id:`source-${L.id}`,type:"sourceField",position:{x:50,y:50+R.length*100},data:{field:L}};l(V=>[...V,I])},[i,l]),b=h.useCallback(()=>{y(!0)},[]),E=h.useCallback(L=>{const R=i.filter(V=>V.type==="function"),I={id:`function-${p}`,type:"function",position:{x:350,y:50+R.length*120},data:{function:L,parameters:{},showSelector:!1}};l(V=>[...V,I]),g(V=>V+1)},[p,i,l]),S=h.useCallback(()=>{const L=i.filter(I=>I.type==="function"&&I.data.function.name==="custom"),R={id:`custom-function-${p}`,type:"function",position:{x:350,y:50+L.length*120},data:{function:{name:"custom",description:"Custom Java function",category:"custom",parameters:[],javaCode:""},parameters:{},showSelector:!1,isCustom:!0}};l(I=>[...I,R]),g(I=>I+1)},[p,i,l]),P=h.useCallback(()=>{if(!r||(console.log("🔥 VisualFlowEditor handleSave - saving with nodes:",i.length,"edges:",d.length),!i.find(O=>O.type==="targetField")))return;const R=[],I=[];i.forEach(O=>{O.type==="sourceField"&&d.some(T=>T.source===O.id)&&(R.push(O.data.field.path),I.push(O.data.field.name))}),console.log("🔥 VisualFlowEditor handleSave - connectedSourcePaths:",R),console.log("🔥 VisualFlowEditor handleSave - connectedSourceFields:",I);const V={id:o?.id||`mapping_${Date.now()}`,name:o?.name||`visual_flow_to_${r.name}`,sourceFields:I,targetField:r.name,sourcePaths:R,targetPath:r.path||r.name,requiresTransformation:!0,visualFlowData:{nodes:i,edges:d,nodeIdCounter:p},functionNode:{id:"visual_flow",functionName:"visual_flow",parameters:{},sourceConnections:{},position:{x:0,y:0}}};console.log("🔥 VisualFlowEditor handleSave - final mapping:",V),a(V),t()},[i,d,p,r,o,a,t]),A=h.useMemo(()=>{const L=i.find(I=>I.type==="targetField");return L?d.some(I=>I.target===L.id):!1},[i,d]);return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-[98vw] h-[95vh] p-0 max-h-[95vh]",children:[s.jsx(gt,{className:"p-4 pb-2 border-b bg-muted/30",children:s.jsxs(xt,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-lg font-semibold",children:"Visual Flow Editor"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Target: ",s.jsx("span",{className:"font-medium text-primary",children:r?.name})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{onClick:P,disabled:!A,className:"bg-primary text-primary-foreground",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Flow"]}),s.jsxs(z,{variant:"outline",onClick:t,children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})}),s.jsx("div",{className:"flex-1 relative h-[calc(95vh-80px)]",children:s.jsxs(DI,{nodes:i,edges:d,onNodesChange:c,onEdgesChange:m,onConnect:v,nodeTypes:Sne,edgeTypes:Cne,connectionMode:pi.Loose,fitView:!0,fitViewOptions:{padding:.1,minZoom:.5,maxZoom:2},defaultEdgeOptions:{type:"deletable",animated:!1,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}},className:"bg-background",children:[s.jsx(FI,{gap:20,size:1}),s.jsx(II,{}),s.jsx($I,{className:"bg-background border border-border",pannable:!0,zoomable:!0,nodeColor:"hsl(var(--primary))"}),s.jsx(Gl,{position:"top-left",className:"bg-card border rounded-lg p-3 shadow-lg min-w-[200px]",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-primary mb-2 border-b border-border pb-2",children:"Add Nodes"}),s.jsxs(z,{onClick:j,size:"sm",variant:"outline",className:"justify-start h-9",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Source Field"]}),s.jsxs(z,{onClick:b,size:"sm",variant:"outline",className:"justify-start h-9",children:[s.jsx(sn,{className:"h-4 w-4 mr-2"}),"Function"]}),s.jsxs(z,{onClick:S,size:"sm",variant:"outline",className:"justify-start h-9",children:[s.jsx(vn,{className:"h-4 w-4 mr-2"}),"Custom Function"]})]})}),s.jsx(Gl,{position:"bottom-right",className:"bg-card border rounded-lg p-3 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${A?"bg-green-500":"bg-red-500"}`}),s.jsx("div",{className:"text-sm font-medium",children:A?"Flow is valid - ready to save":"Connect nodes to target field"})]})})]})}),s.jsx(vne,{open:x,onClose:()=>f(!1),sourceFields:n,onSelectField:N,excludeFields:i.filter(L=>L.type==="sourceField").map(L=>L.data.field.id)}),s.jsx(Nne,{open:w,onClose:()=>y(!1),onSelectFunction:E})]})})};function gu(e,t){if(!e)return"";if(e.startsWith("/")||e.startsWith("//"))return e;const n=e.split(".");if(t?.isSoap&&t?.isTarget){const a=t.soapBodyNamespace||"soapenv",o=t.targetNamespace||"tns",i=n.map((l,c)=>`${o}:${l}`).join("/");return`//${a}:Body/${i}`}return"//"+e.replace(/\./g,"/")}function qE(e,t){return e.map(n=>gu(n,t))}function Tne({mappings:e,sourceFields:t=[],targetFields:n=[],onRemoveMapping:r,onUpdateMapping:a,onCreateMapping:o}){const[i,l]=h.useState({open:!1,selectedFunction:"",targetField:null,filteredSourceFields:[]}),[c,d]=h.useState({open:!1,targetField:null});h.useEffect(()=>{console.log("🔍 Modal state changed:",i)},[i]),h.useEffect(()=>{console.log("🔥 Visual flow editor state changed:",c)},[c]);const u=g=>{console.log("🔥 handleOpenVisualFlowEditor called with mappingId:",g),console.log("🔥 Available mappings:",e),console.log("🔥 Available targetFields:",n),console.log("🔥 Target fields names:",n.map(w=>w?.name));const x=e.find(w=>w.id===g);if(console.log("🔥 Found existing mapping:",x),!x){console.log("❌ No existing mapping found for ID:",g);return}let f=n.find(w=>w?.name===x.targetField);if(!f&&x.targetPath&&(f=n.find(w=>w?.path===x.targetPath)),!f){const w=(y,v,j)=>{for(const N of y){if(N.name===v||j&&N.path===j)return N;if(N.children&&N.children.length>0){const b=w(N.children,v,j);if(b)return b}}};f=w(n,x.targetField,x.targetPath)}if(console.log("🔥 Looking for target field with name:",x.targetField),console.log("🔥 Looking for target field with path:",x.targetPath),console.log("🔥 Found target field:",f),!f){console.log("❌ Target field not found, attempting to create a proper target field from mapping data");let w=x.targetField,y=x.targetPath||x.targetField;if(x.targetPath&&x.targetPath.includes(".")){const j=x.targetPath.split(".");w=j[j.length-1]}const v={id:`target_${w}_${Date.now()}`,name:w,type:"string",path:y,children:[],expanded:!1};console.log("🔥 Created proper target field:",v),d({open:!0,targetField:v,existingMapping:x});return}console.log("✅ Opening visual flow editor with:",{targetField:f.name,existingMapping:x.id}),d({open:!0,targetField:f,existingMapping:x})},m=g=>{console.log("🔥 handleApplyVisualFlow called with:",g),c.existingMapping?a&&a(c.existingMapping.id,{functionNode:g.functionNode,visualFlowData:g.visualFlowData,requiresTransformation:!0,sourceFields:g.sourceFields,sourcePaths:g.sourcePaths,name:g.name}):o&&o(g),d({open:!1,targetField:null})},p=g=>{i.existingMappingId?a&&a(i.existingMappingId,{functionNode:g.functionNode,requiresTransformation:!0,sourceFields:g.sourceFields,sourcePaths:g.sourcePaths}):o&&o(g),l({open:!1,selectedFunction:"",targetField:null,filteredSourceFields:[]})};return console.log("🔍 MappingArea render - mappings count:",e.length),console.log("🔍 MappingArea render - mappings:",e),s.jsxs("div",{className:"w-1/3 relative bg-background animate-fade-in",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(jp,{className:"h-4 w-4"}),"Field Mappings (",e.length,")"]})}),s.jsx("div",{className:"p-4 h-[calc(100%-60px)] overflow-y-auto",children:e.length===0?s.jsx(We,{className:"mt-8",children:s.jsx(ze,{children:"Drag fields from source to target to create mappings"})}):s.jsx("div",{className:"space-y-3",children:e.map(g=>s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30 animate-scale-in",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fe,{variant:"outline",className:"text-xs",children:g.sourceFields&&g.sourceFields.length>1?"Multi-Source Mapping":"Mapping"}),g.requiresTransformation===!1&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Pass-through"}),g.functionNode&&s.jsx(fe,{variant:g.functionNode.functionName==="nodeMapping"?"secondary":"default",className:"text-xs",children:g.functionNode.functionName==="nodeMapping"?`Node: ${g.functionNode.parameters?.sourceType||"object"} → ${g.functionNode.parameters?.targetType||"object"}`:`Function: ${g.functionNode.functionName}`})]}),s.jsxs("div",{className:"flex gap-1",children:[g.requiresTransformation!==!1&&s.jsx(s.Fragment,{children:s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{console.log("🔥 Lightning bolt clicked for mapping:",g.id),u(g.id)},className:"h-6 w-6 p-0 hover-scale",title:"Open Visual Flow Editor",children:s.jsx(sn,{className:"h-3 w-3"})})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>r(g.id),className:"h-6 w-6 p-0 text-destructive hover:text-destructive hover-scale",title:"Remove Mapping",children:s.jsx(jt,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"font-medium text-primary",children:g.name})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Source:"}),s.jsx("span",{className:"text-muted-foreground",children:g.sourceFields?g.sourceFields.join(", "):""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jp,{className:"h-3 w-3 text-primary"}),s.jsx("span",{className:"font-medium",children:"Target:"}),s.jsx("span",{className:"text-muted-foreground",children:g.targetField})]}),(g.sourcePaths||g.targetPath)&&s.jsx("div",{className:"mt-2 space-y-1 text-xs",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium text-primary",children:"XPath:"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[g.sourcePaths&&g.sourcePaths.length>0&&s.jsx("div",{className:"text-muted-foreground",children:s.jsx("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:g.sourcePaths.map(x=>gu(x)).join(", ")})}),g.targetPath&&s.jsx("div",{className:"text-muted-foreground",children:s.jsxs("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:["→ ",gu(g.targetPath)]})})]})]})}),g.requiresTransformation!==!1&&s.jsxs(s.Fragment,{children:[g.functionNode&&s.jsxs("div",{className:"mt-2 p-2 bg-primary/10 rounded text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(sn,{className:"h-3 w-3 text-primary"}),s.jsx("span",{className:"font-medium text-primary",children:"Function Mapping:"})]}),s.jsx("div",{className:"text-muted-foreground",children:g.functionNode.functionName==="visual_flow"?g.visualFlowData?`Visual Flow - ${g.sourceFields?g.sourceFields.length:0} source field(s): ${g.sourceFields?g.sourceFields.join(", "):""}`:`Visual Flow - ${g.sourceFields?g.sourceFields.length:0} source field(s) connected`:`${g.functionNode.functionName} with ${Object.keys(g.functionNode.sourceConnections).length} parameter(s) connected`})]}),!g.functionNode&&s.jsx("div",{className:"mt-2 text-xs text-muted-foreground italic",children:"Click the lightning icon to configure transformations using the visual flow editor"})]}),g.requiresTransformation===!1&&s.jsx("div",{className:"mt-2 text-xs text-muted-foreground italic",children:"Direct field mapping - no transformation required"})]})]},g.id))})}),i.open&&i.targetField&&s.jsx(_K,{open:i.open,onClose:()=>l({open:!1,selectedFunction:"",targetField:null,filteredSourceFields:[]}),selectedFunction:i.selectedFunction,sourceFields:i.filteredSourceFields||t,targetField:i.targetField,onApplyMapping:p}),c.open&&c.targetField&&s.jsx(Ene,{open:c.open,onClose:()=>d({open:!1,targetField:null}),sourceFields:t,targetField:c.targetField,onApplyMapping:m,initialMapping:c.existingMapping})]})}function Pne({open:e,onOpenChange:t,mappings:n,mappingName:r,mappingType:a,sourceXml:o="",targetXml:i=""}){const{toast:l}=_e(),[c,d]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState("idle"),[x,f]=h.useState(""),[w,y]=h.useState(!1),v=S=>{const P=S.target.files?.[0];if(P){const A=new FileReader;A.onload=L=>{const R=L.target?.result;d(R)},A.readAsText(P)}},j=async()=>{if(!c.trim()){l({title:"Input Required",description:"Please provide input XML to test the mapping",variant:"destructive"});return}y(!0),g("testing"),f(""),m("");try{const S=await G.post("/test/field-mappings",{inputXml:c,mappings:n.map(P=>({sourceFields:P.sourceFields,targetField:P.targetField,sourcePaths:P.sourcePaths,targetPath:P.targetPath,javaFunction:P.functionNode?.functionName==="visual_flow"?"visual_flow":P.javaFunction,functionNode:P.functionNode,visualFlowData:P.visualFlowData,requiresTransformation:P.requiresTransformation!==!1})),mappingType:a,sourceStructureXml:o,targetStructureXml:i});if(S.data.success)m(S.data.outputXml),g("success"),l({title:"Test Successful",description:"Field mappings were applied successfully"});else throw new Error(S.data.error||"Test failed")}catch(S){g("error");const P=S.response?.data?.message||S.message||"Failed to test mappings";f(P),l({title:"Test Failed",description:P,variant:"destructive"})}finally{y(!1)}},N=()=>{navigator.clipboard.writeText(u),l({title:"Copied",description:"Output XML copied to clipboard"})},b=()=>{const S=new Blob([u],{type:"text/xml"}),P=URL.createObjectURL(S),A=document.createElement("a");A.href=P,A.download=`${r}_${a}_output.xml`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(P)},E=()=>{d(`<?xml version="1.0" encoding="UTF-8"?>
<${a==="request"?"Request":a==="response"?"Response":"Fault"}>
    <!-- Add your test data here -->
    <Token>sample-token-123</Token>
    <amount>100.00</amount>
    <subClass>A</subClass>
    <tariffIndex>1</tariffIndex>
    <meterBaseDate>2024-01-01</meterBaseDate>
    <keyExpiryNumber>12345</keyExpiryNumber>
    <supplyGroupCode>SG001</supplyGroupCode>
    <keyRevisionNumber>1</keyRevisionNumber>
    <meterSerialNumber>MSN123456</meterSerialNumber>
    <encryptionAlgorithm>AES256</encryptionAlgorithm>
</${a==="request"?"Request":a==="response"?"Response":"Fault"}>`)};return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs(gt,{children:[s.jsxs(xt,{children:["Test Field Mappings - ",r]}),s.jsxs(ks,{children:["Test your ",a," field mappings with sample XML data. Upload or paste your input XML to see the transformation results."]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs(et,{defaultValue:"test",className:"h-full flex flex-col",children:[s.jsxs(Ke,{children:[s.jsx(xe,{value:"test",children:"Test Mappings"}),s.jsxs(xe,{value:"mappings",children:["View Mappings (",n.length,")"]})]}),s.jsxs(ye,{value:"test",className:"flex-1 overflow-auto mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Input XML"}),s.jsx(Ne,{children:"Provide the source XML to test the mappings"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:E,children:"Load Sample"}),s.jsx(C,{htmlFor:"file-upload",className:"cursor-pointer",children:s.jsx(z,{variant:"outline",size:"sm",asChild:!0,children:s.jsxs("span",{children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Upload XML"]})})}),s.jsx("input",{id:"file-upload",type:"file",accept:".xml",onChange:v,className:"hidden"})]}),s.jsx(Re,{value:c,onChange:S=>d(S.target.value),placeholder:"Paste your input XML here...",className:"font-mono text-sm h-[400px]"})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Output XML"}),s.jsx(Ne,{children:"Transformed XML after applying field mappings"})]}),s.jsxs(re,{className:"space-y-4",children:[p==="success"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",size:"sm",onClick:N,children:[s.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Copy"]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:b,children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Download"]})]}),p==="idle"&&s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:'Click "Test Mapping" to see the transformation results'})]}),p==="testing"&&s.jsx("div",{className:"flex items-center justify-center h-[400px]",children:s.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}),p==="error"&&s.jsxs(We,{variant:"destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:x})]}),p==="success"&&s.jsx(Re,{value:u,readOnly:!0,className:"font-mono text-sm h-[400px]"})]})]})]}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsx(z,{onClick:j,disabled:w||!c.trim(),size:"lg",children:w?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(So,{className:"h-4 w-4 mr-2"}),"Test Mapping"]})})})]}),s.jsx(ye,{value:"mappings",className:"flex-1 overflow-auto mt-4",children:s.jsx("div",{className:"space-y-4",children:n.map((S,P)=>s.jsxs(K,{children:[s.jsx(oe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{className:"text-sm",children:S.name}),s.jsxs(fe,{variant:"outline",children:["Mapping ",P+1]})]})}),s.jsxs(re,{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-muted-foreground",children:"Source Fields"}),s.jsx("p",{className:"font-mono",children:S.sourceFields.join(", ")})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-muted-foreground",children:"Target Field"}),s.jsx("p",{className:"font-mono",children:S.targetField})]})]}),S.functionNode&&s.jsxs("div",{children:[s.jsx(C,{className:"text-muted-foreground",children:"Transformation"}),s.jsx("p",{className:"font-mono text-sm",children:S.functionNode.functionName})]})]})]},S.id))})})]})})]})})}async function WE(e,t){try{const n=await G.post(`/structures/${e}/convert-to-xml`,t||{});return console.log("Received XML conversion result:",{structureId:n.data.structureId,structureName:n.data.structureName,xmlContent:n.data.xmlContent}),n.data}catch(n){throw console.error("XML conversion error for structure:",e,n.response?.data),n}}function Zx(e){const n=new DOMParser().parseFromString(e,"text/xml");console.log("Parsing XML content:",e);const r=n.querySelector("parsererror");if(r){const i=e.split(`
`);if(console.error("XML parsing error details:",{errorText:r.textContent,lineCount:i.length,problematicLines:i.map((l,c)=>({lineNumber:c+1,content:l,length:l.length})).filter(l=>l.lineNumber>=15&&l.lineNumber<=25)}),console.error("Full line 17:",i[16]),console.error("Full line 18:",i[17]),i[17]){console.error("Line 18 character analysis around column 14:");for(let l=10;l<20&&l<i[17].length;l++)console.error(`  Position ${l}: '${i[17][l]}' (char code: ${i[17].charCodeAt(l)})`)}throw new Error("Invalid XML: "+r.textContent)}const a=n.documentElement;return[{id:`${a.tagName}_root`,name:a.tagName,type:"object",path:a.tagName,expanded:!0,children:Ij(a,a.tagName)}]}function Ij(e,t=""){const n=[];if(e.attributes.length>0)for(let o=0;o<e.attributes.length;o++){const i=e.attributes[o];if(!i.name.startsWith("xmlns")){const l=t?`${t}.@${i.name}`:`@${i.name}`;n.push({id:`${l}_attr_${o}`,name:`@${i.name}`,type:"attribute",path:l,expanded:!1})}}const r=new Set,a=new Map;for(let o=0;o<e.children.length;o++){const i=e.children[o],l=i.tagName;a.has(l)||a.set(l,[]),a.get(l).push(i)}console.log("Processing children in order for node:",e.tagName);for(let o=0;o<e.children.length;o++){const l=e.children[o].tagName;if(console.log(`  Child ${o}: ${l}`),r.has(l))continue;r.add(l);const c=a.get(l);if(c.length===1){const d=c[0],u=t?`${t}.${l}`:l,m=d.children.length>0||d.attributes.length>0;d.textContent&&d.children.length;const p={id:`${u}_${Date.now()}_${Math.random()}`,name:l,type:m?"object":"string",path:u,expanded:!1,children:m?Ij(d,u):void 0};n.push(p)}else{const d=t?`${t}.${l}[]`:`${l}[]`,u={id:`${d}_array_${Date.now()}`,name:`${l}[]`,type:"array",path:d,expanded:!1,children:c[0].children.length>0||c[0].attributes.length>0?Ij(c[0],`${d}[0]`):void 0};n.push(u)}}if(e.textContent&&e.children.length===0&&n.length===0){const o=t?`${t}._text`:"_text";n.push({id:`${o}_text`,name:"_text",type:"string",path:o,expanded:!1})}return n}function Lj(e){const t=[];console.log("[parseWsdlOperations] ========== STARTING WSDL PARSING =========="),console.log("[parseWsdlOperations] WSDL Content length:",e.length),console.log("[parseWsdlOperations] First 500 chars:",e.substring(0,500));try{const r=new DOMParser().parseFromString(e,"text/xml"),a=r.querySelector("parsererror");if(a)return console.error("[parseWsdlOperations] WSDL parsing error:",a),t;console.log("[parseWsdlOperations] Document parsed successfully");const o=r.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","portType");console.log("[parseWsdlOperations] Found portTypes:",o.length),Array.from(o).forEach((i,l)=>{console.log(`[parseWsdlOperations] Processing portType ${l}`);const c=i.getAttribute("name")||"UnknownPortType",d=i.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","operation");Array.from(d).forEach(u=>{const m=u.getAttribute("name")||"UnknownOperation",p={name:m,portType:c},g=u.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","input")[0];if(g){const w=g.getAttribute("message");if(w){const y=w.split(":").pop()||"";console.log(`[parseWsdlOperations] Extracting input fields for operation ${m}, message ${y}`);const v=ev(r,y);console.log(`[parseWsdlOperations] Extracted ${v.length} fields for input:`,v),p.input={messageName:y,fields:v}}}const x=u.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","output")[0];if(x){const w=x.getAttribute("message");if(w){const y=w.split(":").pop()||"",v=ev(r,y);p.output={messageName:y,fields:v}}}const f=u.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","fault")[0];if(f){const w=f.getAttribute("message");if(w){const y=w.split(":").pop()||"",v=ev(r,y);p.fault={messageName:y,fields:v}}}t.push(p)})})}catch(n){console.error("[parseWsdlOperations] Error parsing WSDL operations:",n)}return console.log("[parseWsdlOperations] ========== FINISHED WSDL PARSING =========="),console.log(`[parseWsdlOperations] Total operations found: ${t.length}`),t.forEach((n,r)=>{console.log(`[parseWsdlOperations] Operation ${r}: ${n.name}`),n.input&&console.log(`  Input: ${n.input.messageName} with ${n.input.fields.length} fields`),n.output&&console.log(`  Output: ${n.output.messageName} with ${n.output.fields.length} fields`)}),t}function ev(e,t){const n=[];console.log(`
[extractMessageFields] ===== Extracting fields for message: ${t} =====`);try{const r=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message");let a=null;for(let i=0;i<r.length;i++)if(r[i].getAttribute("name")===t){a=r[i];break}if(!a)return console.warn(`[extractMessageFields] Message ${t} not found`),console.log("[extractMessageFields] Available messages:",Array.from(r).map(i=>i.getAttribute("name"))),n;console.log(`[extractMessageFields] Found message element for ${t}`);const o=a.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part");Array.from(o).forEach(i=>{const l=i.getAttribute("name")||"part",c=i.getAttribute("element"),d=i.getAttribute("type");if(c){const u=c.split(":").pop()||"";console.log(`[extractMessageFields] Part ${l} references element ${u}`);const m=eb(e,u);console.log(`[extractMessageFields] Element ${u} has ${m.length} fields:`,m),m.length===1&&m[0].name===u?n.push(m[0]):m.length>0?n.push({name:u,type:"object",required:!0,description:"Root element",isComplexType:!0,children:m}):n.push({name:u,type:"object",required:!0,description:"Root element",isComplexType:!0,children:[]})}else if(d){const u=d.split(":").pop()||"",m=sb(u);n.push({name:l,type:m.fieldType,required:!0,description:`Type: ${u}`,isComplexType:m.isComplex})}})}catch(r){console.error("[extractMessageFields] Error extracting message fields:",r)}return console.log(`[extractMessageFields] Returning ${n.length} fields for message ${t}`),n}function eb(e,t){const n=[];console.log(`
[extractElementFields] ===== Extracting fields for element: ${t} =====`);try{const r=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","types")[0];if(!r)return console.log("[extractElementFields] No types section found"),n;console.log("[extractElementFields] Found types section");const a=r.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");let o=!1,i="";console.log(`[extractElementFields] Checking for structure imports in ${a.length} schemas`);for(let l=0;l<a.length;l++){const c=a[l].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","import");console.log(`[extractElementFields] Schema ${l} has ${c.length} imports`);for(let d=0;d<c.length;d++){const u=c[d].getAttribute("schemaLocation");if(console.log(`[extractElementFields] Import ${d} schemaLocation: ${u}`),u&&u.startsWith("structure://")){o=!0,i=u.replace("structure://",""),console.log(`[extractElementFields] Found structure import with ID: ${i}`);break}}if(o)break}if(o){console.log(`[extractElementFields] Found structure import for ${t}, structureId: ${i}`);for(let l=0;l<a.length;l++){const c=a[l].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");for(let d=0;d<c.length;d++)if(c[d].getAttribute("name")===t){const u=c[d].getAttribute("type");if(u&&u.includes("anyType"))return console.log(`[extractElementFields] Element ${t} is anyType - needs structure resolution`),[{name:"content",type:"any",required:!0,description:`Structure content from: ${i}`,isComplexType:!0,metadata:{structureId:i,needsResolution:!0}}];const m=c[d].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType")[0];if(m){const p=m.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","sequence")[0];if(p&&p.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","any").length>0)return console.log(`[extractElementFields] Element ${t} contains xs:any - likely needs structure resolution`),[{name:"content",type:"any",required:!0,description:`Structure content from: ${i}`,isComplexType:!0,metadata:{structureId:i,needsResolution:!0}}]}console.log(`[extractElementFields] Element ${t} found but not anyType, continuing to parse actual definition`);break}}}console.log("[extractElementFields] Looking for element definitions in schemas...");for(let l=0;l<a.length;l++){console.log(`
[extractElementFields] === Processing schema ${l} ===`);const c=new XMLSerializer().serializeToString(a[l]);console.log("[extractElementFields] Schema content (first 1000 chars):",c.substring(0,1e3));let d=Array.from(a[l].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element"));console.log(`[extractElementFields] Found ${d.length} elements using standard namespace lookup`);const u=a[l].getElementsByTagName("*");console.log(`[extractElementFields] Total elements in schema: ${u.length}`);for(let m=0;m<u.length;m++){const p=u[m];if(p.localName==="element"&&p.namespaceURI==="http://www.w3.org/2001/XMLSchema"){let g=!1;for(let x=0;x<d.length;x++)if(d[x]===p){g=!0;break}g||(console.log(`[extractElementFields] Found additional inline element: name="${p.getAttribute("name")}", type="${p.getAttribute("type")}"`),d.push(p))}}console.log(`[extractElementFields] Schema ${l} has ${d.length} total elements to check`);for(let m=0;m<d.length;m++){const p=d[m].getAttribute("name"),g=d[m].getAttribute("type");if(console.log(`[extractElementFields] Checking element ${m}: name="${p}", type="${g}" against target="${t}"`),p===t){console.log(`[extractElementFields] MATCH FOUND! Processing element ${p}`);const x=new XMLSerializer().serializeToString(d[m]);console.log("[extractElementFields] Element XML:",x);const f=d[m].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType")[0];if(f){console.log("[extractElementFields] Found inline complexType");const w=tb(f,e);console.log(`[extractElementFields] Element ${t} has complex type with ${w.length} fields:`,w),n.push({name:t,type:"object",required:!0,description:"Root element",isComplexType:!0,children:w})}else{const w=d[m].getAttribute("type"),y=d[m].getAttribute("ref");if(y){const v=y.split(":").pop()||"";n.push(...eb(e,v))}else if(w){const v=w.split(":").pop()||"",j=sb(v);if(j.isComplex){const N=hL(e,v);n.push({name:t,type:"object",required:!0,description:`Type: ${v}`,isComplexType:!0,children:N})}else n.push({name:t,type:j.fieldType,required:!0,description:`Type: ${v}`,isComplexType:!1})}}return n}}}}catch(r){console.error("[extractElementFields] Error extracting element fields:",r)}return console.log(`[extractElementFields] Returning ${n.length} fields for element ${t}`),n}function tb(e,t){const n=[];console.log(`
[extractFieldsFromComplexType] ===== Processing complexType =====`);const r=new XMLSerializer().serializeToString(e);console.log("[extractFieldsFromComplexType] ComplexType XML (first 500 chars):",r.substring(0,500));try{const a=e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","sequence")[0],o=e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","all")[0],i=e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","choice")[0],l=a||o||i;if(l){console.log(`[extractFieldsFromComplexType] Found container: ${l.localName}`);let c=Array.from(l.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element"));console.log(`[extractFieldsFromComplexType] Found ${c.length} child elements using standard namespace`);const d=l.getElementsByTagName("*");for(let u=0;u<d.length;u++)if(d[u].localName==="element"&&d[u].namespaceURI==="http://www.w3.org/2001/XMLSchema"){let m=!1;for(let p=0;p<c.length;p++)if(c[p]===d[u]){m=!0;break}m||c.push(d[u])}c.forEach((u,m)=>{const p=u.getAttribute("name")||"field",g=u.getAttribute("type"),x=u.getAttribute("ref"),f=u.getAttribute("minOccurs"),w=u.getAttribute("maxOccurs");console.log(`
[extractFieldsFromComplexType] Processing child element ${m}:`),console.log(`  name: "${p}"`),console.log(`  type: "${g}"`),console.log(`  ref: "${x}"`),console.log(`  minOccurs: "${f}"`),console.log(`  maxOccurs: "${w}"`);const y=u.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType")[0];if(y){const v=tb(y,t);n.push({name:p,type:"object",required:f!=="0",description:"Complex Type",isComplexType:!0,isArray:w==="unbounded",children:v})}else if(x){const v=x.split(":").pop()||"",j=eb(t,v);j.length===1&&!j[0].isComplexType?n.push({...j[0],name:v,required:f!=="0",isArray:w==="unbounded"}):n.push({name:v,type:"object",required:f!=="0",description:`Reference: ${v}`,isComplexType:!0,isArray:w==="unbounded",children:j})}else if(g){const v=g.split(":").pop()||"",j=sb(v);if(j.isComplex){const N=hL(t,v);N.length>0?n.push({name:p,type:"object",required:f!=="0",description:`Type: ${v}`,isComplexType:!0,isArray:w==="unbounded",children:N}):n.push({name:p,type:"object",required:f!=="0",description:`Type: ${v}`,isComplexType:!0,isArray:w==="unbounded"})}else n.push({name:p,type:j.fieldType,required:f!=="0",description:g||"",isComplexType:!1,isArray:w==="unbounded"})}else n.push({name:p,type:"string",required:f!=="0",description:"",isComplexType:!1,isArray:w==="unbounded"})})}}catch(a){console.error("[extractFieldsFromComplexType] Error extracting fields from complexType:",a)}return console.log(`[extractFieldsFromComplexType] Returning ${n.length} fields`),n}function hL(e,t){const n=[];try{const r=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","types")[0];if(!r)return n;const a=r.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(let o=0;o<a.length;o++){const i=a[o].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType");for(let l=0;l<i.length;l++)if(i[l].getAttribute("name")===t)return tb(i[l],e)}}catch(r){console.error("[wsdlOperationParser] Error extracting complex type fields:",r)}return n}function sb(e){const t=e.includes(":")&&e.split(":").pop()||e,n={string:"string",int:"number",integer:"number",long:"number",short:"number",decimal:"number",float:"number",double:"number",boolean:"boolean",dateTime:"datetime",date:"date",time:"time",base64Binary:"string",hexBinary:"string",anyURI:"string",QName:"string",NOTATION:"string",anyType:"any"};return n[t]?{fieldType:n[t],isComplex:!1}:{fieldType:"object",isComplex:!0}}function Ane(e,t,n){try{console.log(`[wsdlMessageExtractor] Extracting ${t} from WSDL`);const o=new DOMParser().parseFromString(e,"text/xml").querySelector("parsererror");if(o)return console.error("[wsdlMessageExtractor] WSDL parsing error:",o),{xml:e,fields:[]};let l=Lj(e)[0];if(!l)return console.warn("[wsdlMessageExtractor] No operations found in WSDL"),{xml:pL(t),fields:[]};let c=[],d="";switch(t){case"request":l.input&&(c=l.input.fields,d=l.input.messageName);break;case"response":l.output&&(c=l.output.fields,d=l.output.messageName);break;case"fault":l.fault&&(c=l.fault.fields,d=l.fault.messageName);break}return{xml:Dne(c,t),fields:c}}catch(r){return console.error("[wsdlMessageExtractor] Error extracting WSDL message:",r),{xml:e,fields:[]}}}function Dne(e,t){try{const n=document.implementation.createDocument(null,null,null),r=t.charAt(0).toUpperCase()+t.slice(1),a=n.createElement(r);return n.appendChild(a),e.forEach(i=>{mL(i,a,n)}),new XMLSerializer().serializeToString(n)}catch(n){return console.error("[wsdlMessageExtractor] Error generating XML from fields:",n),pL(t)}}function mL(e,t,n){const r=n.createElement(e.name);e.children&&e.children.length>0?e.children.forEach(a=>{mL(a,r,n)}):r.textContent=kne(e.type||"string"),t.appendChild(r)}function kne(e){switch(e){case"number":case"integer":case"int":case"long":case"short":return"0";case"decimal":case"float":case"double":return"0.0";case"boolean":return"false";case"date":return"2024-01-01";case"datetime":return"2024-01-01T00:00:00Z";case"time":return"00:00:00";default:return"string value"}}function pL(e){switch(e){case"request":return"<Request/>";case"response":return"<Response/>";case"fault":return"<Fault/>";default:return"<Message/>"}}function nb({onClose:e,onSave:t,initialMappingName:n="",initialMappings:r=[],initialSourceOperation:a="",initialTargetOperation:o="",sampleStructures:i=[],sourceAdapterType:l="",targetAdapterType:c="",sourceXml:d="",targetXml:u="",preConverted:m=!1,mappingType:p="request"}){const[g,x]=h.useState([]),[f,w]=h.useState([]),[y,v]=h.useState(r),[j,N]=h.useState(null),[b,E]=h.useState(""),[S,P]=h.useState(""),[A,L]=h.useState(""),[R,I]=h.useState(""),[V,O]=h.useState(n),[k,T]=h.useState(!1),[D,M]=h.useState(!1),[_,H]=h.useState(null),[$,B]=h.useState(null),[W,q]=h.useState(!1),[Y,pe]=h.useState([]),[J,ge]=h.useState([]),[Q,he]=h.useState(a),[le,me]=h.useState(o),{toast:Z}=_e(),ae=ve=>ve.includes("definitions")&&ve.includes("http://schemas.xmlsoap.org/wsdl/")&&(ve.includes("message")||ve.includes("portType")),we=(ve,X)=>{try{if(ae(ve))return console.log(`[FieldMappingScreen] Detected WSDL, using WSDL message extractor for ${X}`),Ane(ve,X);console.log(`[FieldMappingScreen] Using pattern-based filtering for ${X}`);const be=new DOMParser().parseFromString(ve,"text/xml").documentElement,Te=document.implementation.createDocument(null,be.tagName,null),Le=Te.documentElement;for(let Ie=0;Ie<be.attributes.length;Ie++){const Me=be.attributes[Ie];Le.setAttribute(Me.name,Me.value)}const ot={request:["_Req_","Request","Input","input"],response:["_Resp_","Response","Output","output"],fault:["Fault","fault","Error","error","Exception"]}[X];for(let Ie=0;Ie<be.children.length;Ie++){const Me=be.children[Ie],Qe=Me.tagName;if(ot.some(zt=>Qe.includes(zt)||Qe.toLowerCase().includes(zt.toLowerCase()))){const zt=Te.importNode(Me,!0);Le.appendChild(zt)}}if(Le.children.length===0)return console.warn(`No matching elements found for ${X} mapping, returning original XML`),{xml:ve,fields:[]};if(Le.children.length===1){const Ie=be.tagName.toLowerCase();if(Ie==="sourcemessage"||Ie==="targetmessage"||Ie==="message"||Ie==="root"){const Me=Le.children[0],Qe=document.implementation.createDocument(null,Me.tagName,null),hn=Qe.importNode(Me,!0);return Qe.replaceChild(hn,Qe.documentElement),{xml:new XMLSerializer().serializeToString(Qe),fields:[]}}}return{xml:new XMLSerializer().serializeToString(Te),fields:[]}}catch(de){return console.error("Error filtering XML by message type:",de),{xml:ve,fields:[]}}};h.useEffect(()=>{if(m&&d&&u)try{if(ae(d)){const ve=Lj(d);console.log("Source WSDL operations:",ve),pe(ve),ve.length>0&&!Q&&he(ve[0].name)}if(ae(u)){const ve=Lj(u);console.log("Target WSDL operations:",ve),ge(ve),ve.length>0&&!le&&me(ve[0].name)}if(!ae(d)){const ve=we(d,p);let X;ve.fields&&ve.fields.length>0?(console.log(`Using extracted fields for source ${p}:`,ve.fields),X=ve.fields):X=Zx(ve.xml),x(X)}if(!ae(u)){const ve=we(u,p);let X;ve.fields&&ve.fields.length>0?(console.log(`Using extracted fields for target ${p}:`,ve.fields),X=ve.fields):X=Zx(ve.xml),w(X)}L(`Pre-converted XML (${p})`),I(`Pre-converted XML (${p})`)}catch(ve){console.error("Error parsing pre-converted XML:",ve),Z({title:"XML Parse Error",description:ve.message||"Failed to parse XML structures",variant:"destructive"})}},[m,d,u,l,c,p]),h.useEffect(()=>{Q&&Y.length>0&&un("source",Q)},[Q,Y,p]),h.useEffect(()=>{le&&J.length>0&&un("target",le)},[le,J,p]);const Ve=h.useCallback((ve,X)=>{const de=Se=>Se.map(be=>be.id===ve?{...be,expanded:!be.expanded}:be.children?{...be,children:de(be.children)}:be);X?x(de):w(de)},[]),Ue=ve=>{N(ve)},ct=()=>{N(null)},$e=ve=>{ve.preventDefault()},Ge=ve=>{if(!j)return;const X=j.type==="array"||j.type==="object",de=ve.type==="array"||ve.type==="object",Se=X&&de,be=y.findIndex(Te=>Te.targetPath===ve.path);if(be>=0){const Te=y[be],Le={...Te,sourceFields:[...Te.sourceFields,j.name],sourcePaths:[...Te.sourcePaths,j.path]},Je=[...y];Je[be]=Le,v(Je)}else{const Te={id:`mapping_${Date.now()}`,name:`${j.name}_to_${ve.name}`,sourceFields:[j.name],targetField:ve.name,sourcePaths:[j.path],targetPath:ve.path,requiresTransformation:!0,...Se&&{javaFunction:"nodeMapping",functionNode:{id:`node_${Date.now()}`,functionName:"nodeMapping",parameters:{sourceType:j.type,targetType:ve.type,isArrayMapping:j.type==="array"||ve.type==="array"?"true":"false"},sourceConnections:{},position:{x:0,y:0}}}};v(Le=>[...Le,Te]),Se&&Z({title:"Node Mapping Created",description:`Created ${j.type} to ${ve.type} mapping. This will map all child fields.`})}N(null)},Oe=ve=>{v(X=>X.filter(de=>de.id!==ve))},at=()=>{v([])},st=ve=>ve.name.replace(/\[\]$/,"").split(".").pop()||ve.name,Ct=(ve,X=[])=>(ve.forEach(de=>{X.push(de),de.children&&Ct(de.children,X)}),X),dn=()=>{if(!g.length||!f.length){Z({title:"Cannot auto-map",description:"Please select both source and target structures first",variant:"destructive"});return}const ve=[],X=new Set(y.map(Te=>Te.targetPath));if(_&&$){const Te=(_.type==="array"||_.type==="object")&&_.children&&_.children.length>0,Le=($.type==="array"||$.type==="object")&&$.children&&$.children.length>0;if(Te&&Le){let Je=0;if(!X.has($.path)){const Me={id:`mapping_${Date.now()}_${Math.random()}`,name:`${_.name}_to_${$.name}`,sourceFields:[_.name],targetField:$.name,sourcePaths:[_.path],targetPath:$.path,requiresTransformation:!0,javaFunction:"nodeMapping",functionNode:{id:`node_${Date.now()}_${Math.random()}`,functionName:"nodeMapping",parameters:{sourceType:_.type,targetType:$.type,isArrayMapping:_.type==="array"||$.type==="array"?"true":"false"},sourceConnections:{},position:{x:0,y:0}}};ve.push(Me),X.add($.path),Je++}const ot=Ct(_.children||[]),Et=Ct($.children||[]),Ie=new Map;Et.forEach(Me=>{const Qe=st(Me);Ie.has(Qe)||Ie.set(Qe,[]),Ie.get(Qe).push(Me)}),ot.forEach(Me=>{const Qe=st(Me),hn=Ie.get(Qe)||[],zt=hn.find(Da=>!X.has(Da.path)&&Da.type===Me.type)||hn.find(Da=>!X.has(Da.path));if(zt){const Da=(Me.type==="array"||Me.type==="object")&&(zt.type==="array"||zt.type==="object"),Wg={id:`mapping_${Date.now()}_${Math.random()}`,name:`${Me.name}_to_${zt.name}`,sourceFields:[Me.name],targetField:zt.name,sourcePaths:[Me.path],targetPath:zt.path,requiresTransformation:!0,...Da&&{javaFunction:"nodeMapping",functionNode:{id:`node_${Date.now()}_${Math.random()}`,functionName:"nodeMapping",parameters:{sourceType:Me.type,targetType:zt.type,isArrayMapping:Me.type==="array"||zt.type==="array"?"true":"false"},sourceConnections:{},position:{x:0,y:0}}}};ve.push(Wg),X.add(zt.path),Je++}}),Je>0?(v(Me=>[...Me,...ve]),Z({title:"Node mapping complete",description:`Created ${Je} mappings for matching fields within selected nodes`})):Z({title:"No matching fields found",description:"Could not find any matching field names within the selected nodes",variant:"destructive"}),H(null),B(null)}else if(X.has($.path))Z({title:"Target already mapped",description:"The selected target field is already mapped",variant:"destructive"});else{const Je={id:`mapping_${Date.now()}_${Math.random()}`,name:`${_.name}_to_${$.name}`,sourceFields:[_.name],targetField:$.name,sourcePaths:[_.path],targetPath:$.path,requiresTransformation:!0};v(ot=>[...ot,Je]),Z({title:"Mapping created",description:`Mapped ${_.name} to ${$.name}`}),H(null),B(null)}return}const de=Ct(g),Se=Ct(f),be=new Map;Se.forEach(Te=>{const Le=st(Te);be.has(Le)||be.set(Le,[]),be.get(Le).push(Te)}),de.forEach(Te=>{const Le=st(Te),Je=be.get(Le)||[],ot=Je.find(Et=>!X.has(Et.path)&&Et.type===Te.type)||Je.find(Et=>!X.has(Et.path));if(ot){const Et=(Te.type==="array"||Te.type==="object")&&(ot.type==="array"||ot.type==="object"),Ie={id:`mapping_${Date.now()}_${Math.random()}`,name:`${Te.name}_to_${ot.name}`,sourceFields:[Te.name],targetField:ot.name,sourcePaths:[Te.path],targetPath:ot.path,requiresTransformation:!0,...Et&&{javaFunction:"nodeMapping",functionNode:{id:`node_${Date.now()}_${Math.random()}`,functionName:"nodeMapping",parameters:{sourceType:Te.type,targetType:ot.type,isArrayMapping:Te.type==="array"||ot.type==="array"?"true":"false"},sourceConnections:{},position:{x:0,y:0}}}};ve.push(Ie),X.add(ot.path)}}),ve.length>0?(v(Te=>[...Te,...ve]),Z({title:"Auto-mapping complete",description:`Created ${ve.length} automatic mappings`})):Z({title:"No matching fields found",description:"Could not find any matching field names between source and target",variant:"destructive"})},ts=(ve,X)=>{v(de=>de.map(Se=>Se.id===ve?{...Se,...X}:Se))},An=ve=>{v(X=>[...X,ve])},un=async(ve,X)=>{const Se=(ve==="source"?Y:J).find(Je=>Je.name===X);if(!Se)return;let be=[];p==="request"&&Se.input?(be=Se.input.fields,console.log(`[handleOperationChange] ${ve} operation ${X} request fields:`,be)):p==="response"&&Se.output?(be=Se.output.fields,console.log(`[handleOperationChange] ${ve} operation ${X} response fields:`,be)):p==="fault"&&Se.fault&&(be=Se.fault.fields,console.log(`[handleOperationChange] ${ve} operation ${X} fault fields:`,be)),console.log(`[handleOperationChange] Before resolution - ${ve} fields:`,JSON.stringify(be,null,2));const Te=await qs(be);console.log(`[handleOperationChange] After resolution - ${ve} fields:`,JSON.stringify(Te,null,2));const Le=Te.map(Je=>Zr(Je,""));ve==="source"?(x(Le),console.log(`[handleOperationChange] Updated source field nodes for operation ${X}:`,Le)):(w(Le),console.log(`[handleOperationChange] Updated target field nodes for operation ${X}:`,Le))},Zr=(ve,X)=>{const de=X?`${X}.${ve.name}`:ve.name,Se={id:de,name:ve.name,path:de,type:ve.type||"string",required:ve.required!==!1,expanded:!1,level:X.split(".").filter(be=>be).length};return ve.children&&ve.children.length>0&&(Se.children=ve.children.map(be=>Zr(be,de))),Se},qs=async ve=>{const X=[];for(const de of ve)if(de.metadata?.needsResolution&&de.metadata?.structureId){console.log(`[resolveStructureImports] Resolving structure ${de.metadata.structureId} for field ${de.name}`);try{const be=(await Mn.getStructure(de.metadata.structureId)).data;if(console.log("[resolveStructureImports] Loaded structure:",be),be.originalContent){const Te=Zx(be.originalContent);console.log(`[resolveStructureImports] Parsed ${Te.length} fields from structure`),X.push(...Te)}else if(be.structure){console.log("[resolveStructureImports] Converting JSON structure to fields");const Te=(Je,ot="")=>{const Et=[];for(const[Ie,Me]of Object.entries(Je)){const Qe=ot?`${ot}.${Ie}`:Ie;Me&&typeof Me=="object"&&!Array.isArray(Me)?Et.push({name:Ie,type:"object",required:!0,isComplexType:!0,children:Te(Me,"")}):Array.isArray(Me)?Et.push({name:Ie,type:"array",required:!0,isArray:!0,isComplexType:!0,children:Me.length>0&&typeof Me[0]=="object"?Te(Me[0],""):[]}):Et.push({name:Ie,type:typeof Me=="number"?"number":typeof Me=="boolean"?"boolean":"string",required:!0,isComplexType:!1})}return Et},Le=Te(be.structure);X.push(...Le)}}catch(Se){console.error(`[resolveStructureImports] Failed to resolve structure ${de.metadata.structureId}:`,Se),X.push(de)}}else if(de.children&&de.children.length>0){const Se=await qs(de.children);X.push({...de,children:Se})}else X.push(de);return X};return s.jsxs("div",{className:"fixed inset-0 bg-background z-50 overflow-hidden animate-fade-in",children:[s.jsx("div",{className:"border-b",children:s.jsxs("div",{className:"h-16 flex items-center justify-between px-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{htmlFor:"mappingName",className:"text-sm font-medium",children:"Mapping Name:"}),s.jsx(U,{id:"mappingName",placeholder:"Enter mapping name",value:V,onChange:ve=>O(ve.target.value),className:"w-64"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{variant:"outline",onClick:dn,className:"hover-scale",disabled:!g.length||!f.length,children:[s.jsx(sn,{className:"h-4 w-4 mr-2"}),_&&$?"Map Selected":"Map All"]}),s.jsxs(z,{variant:"outline",onClick:at,className:"text-destructive hover:text-destructive hover-scale",children:[s.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Delete All Mappings"]}),y.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs(z,{variant:"outline",onClick:()=>q(!0),className:"hover-scale",children:[s.jsx(So,{className:"h-4 w-4 mr-2"}),"Test Mapping"]}),s.jsxs(z,{onClick:()=>{t?.(y,V,{sourceOperation:Q,targetOperation:le})},className:"hover-scale",disabled:!V.trim(),children:[s.jsx(rs,{className:"h-4 w-4 mr-2"}),"Save Mappings"]})]}),s.jsxs(z,{variant:"outline",onClick:e,className:"hover-scale",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Close"]})]})]})}),(Y.length>0||J.length>0)&&s.jsx("div",{className:"border-b bg-muted/10",children:s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[Y.length>0&&s.jsxs(K,{children:[s.jsxs(oe,{className:"pb-3",children:[s.jsx(ie,{className:"text-base",children:"Source WSDL Operation"}),s.jsx(Ne,{className:"text-xs",children:"Select the operation to map from"})]}),s.jsx(re,{className:"pt-0",children:s.jsxs(se,{value:Q,onValueChange:ve=>{he(ve),un("source",ve)},children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select an operation"})}),s.jsx(te,{children:Y.map(ve=>s.jsxs(F,{value:ve.name,children:[ve.name,s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",ve.portType,")"]})]},ve.name))})]})})]}),J.length>0&&s.jsxs(K,{children:[s.jsxs(oe,{className:"pb-3",children:[s.jsx(ie,{className:"text-base",children:"Target WSDL Operation"}),s.jsx(Ne,{className:"text-xs",children:"Select the operation to map to"})]}),s.jsx(re,{className:"pt-0",children:s.jsxs(se,{value:le,onValueChange:ve=>{me(ve),un("target",ve)},children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select an operation"})}),s.jsx(te,{children:J.map(ve=>s.jsxs(F,{value:ve.name,children:[ve.name,s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",ve.portType,")"]})]},ve.name))})]})})]})]})})}),s.jsxs("div",{className:"flex h-[calc(100vh-${(sourceOperations.length > 0 || targetOperations.length > 0) ? '16rem' : '8rem'})]",children:[s.jsx(AK,{fields:g,mappings:y,selectedService:A,searchValue:b,showSelector:!1,label:p==="response"?"Target Response (Source)":"Source Message",selectedField:_,onSearchChange:E,onShowSelectorChange:()=>{},onSelectService:()=>{},onToggleExpanded:Ve,onDragStart:Ue,onDragEnd:ct,onSelectField:H,isLoading:k,hideSelector:!0}),s.jsx(Tne,{mappings:y,sourceFields:g,targetFields:f,onRemoveMapping:Oe,onUpdateMapping:ts,onCreateMapping:An}),s.jsx(DK,{fields:f,mappings:y,selectedService:R,searchValue:S,showSelector:!1,label:p==="response"?"Source Response (Target)":"Target Message",selectedField:$,onSearchChange:P,onShowSelectorChange:()=>{},onSelectService:()=>{},onToggleExpanded:Ve,onDragOver:$e,onDrop:Ge,onSelectField:B,isLoading:D,hideSelector:!0})]}),s.jsx(Pne,{open:W,onOpenChange:q,mappings:y,mappingName:V,mappingType:p,sourceXml:d,targetXml:u})]})}const tv=e=>{const t=e.toUpperCase();return t.includes("JDBC")?Ds:t.includes("HTTP")||t.includes("REST")?kr:t.includes("SOAP")?vn:t.includes("MAIL")?Iu:t.includes("FILE")||t.includes("FTP")?bs:Lf};function zE(){as();const e=Ms(),{flowId:t}=_u(),{navigateBack:n,isDirectNavigation:r}=Sc(),{toast:a}=_e(),{user:o}=Kr(),[i,l]=h.useState(!1),c=e.state?.flow||null,[d,u]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(""),[f,w]=h.useState(""),[y,v]=h.useState(""),[j,N]=h.useState(""),[b,E]=h.useState(""),[S,P]=h.useState(""),[A,L]=h.useState(!0),[R,I]=h.useState(!1);console.log("=== INITIAL TOGGLE STATES ==="),console.log("Initial mappingRequired:",!0),console.log("Initial skipXmlConversion:",!1);const[V,O]=h.useState([]),[k,T]=h.useState(!0),[D,M]=h.useState([]),[_,H]=h.useState(null),[$,B]=h.useState(""),[W,q]=h.useState([]),[Y,pe]=h.useState([]),[J,ge]=h.useState([]),[Q,he]=h.useState([]),[le,me]=h.useState(!0),[Z,ae]=h.useState(!1),[we,Ve]=h.useState(!1),[Ue,ct]=h.useState(""),[$e,Ge]=h.useState(""),[Oe,at]=h.useState("request");RO(()=>{u(""),p(""),x(""),w(""),v(""),N(""),E(""),P(""),L(!0),O([]),T(!0),M([]),l(!1),ct(""),Ge("")}),h.useEffect(()=>{console.log("Business components state updated:",W)},[W]),h.useEffect(()=>{console.log("Configure button state:",{enabled:A&&g&&f&&y&&j&&b&&S&&!we,mappingRequired:A,sourceBusinessComponent:g,targetBusinessComponent:f,sourceAdapter:y,targetAdapter:j,sourceStructure:b,targetStructure:S,convertingStructures:we})},[A,g,f,y,j,b,S,we]),h.useEffect(()=>{Ct()},[]),h.useEffect(()=>{(c||t)&&dn()},[c,t]),h.useEffect(()=>{const X=async de=>{if(de&&!e.pathname.includes("/edit"))try{const Se=Q.find(be=>be.id===de);if(Se&&Se.wsdlContent&&!Se.wsdlContent.includes("<!-- WSDL generation pending")){console.log("Analyzing flow structure WSDL:",Se.name);const be=$p(Se.wsdlContent);if(console.log("WSDL parse result:",be),be&&be.operationInfo&&(H(be.operationInfo),be.operationInfo.isSynchronous)){T(!1);const Te=[];be.operationInfo.hasOutput&&Te.push({name:"Response Mapping",messageType:"response",fieldMappings:[]}),be.operationInfo.hasFault&&Te.push({name:"Fault Mapping",messageType:"fault",fieldMappings:[]}),Te.length>0&&D.length===0&&(M(Te),a({title:"Synchronous Service Detected",description:`This WSDL defines a synchronous service with ${be.operationInfo.messageTypes.join(", ")} messages. The flow has been switched to synchronous mode.`}))}return}}catch(Se){console.error("Error analyzing WSDL structure:",Se)}};b&&X(b),S&&X(S)},[b,S,J,Q,a,D.length]),h.useEffect(()=>{console.log("State updated - additionalMappings:",D),D.forEach((X,de)=>{console.log(`  Mapping ${de}: messageType=${X.messageType}, fieldMappings.length=${X.fieldMappings?.length||0}`)}),console.log("State updated - isAsynchronous:",k),console.log("State updated - mappingRequired:",A)},[D,k,A]);const Ct=async()=>{try{me(!0);const X=await Rr.getAllBusinessComponents();console.log("Business components result:",X),X.success&&X.data?(q(X.data),console.log("Set business components:",X.data)):(console.error("Failed to load business components:",X.error),console.error("Business result full object:",X));try{const de=await G.get("/adapters");if(de.data){const Se=Array.isArray(de.data)?de.data:de.data.content||de.data.adapters||[];pe(Se)}}catch(de){console.warn("Could not load adapters:",de),pe([])}ge([]);try{const de=await G.get("/flow-structures?size=100");if(console.log("Flow structures response:",de),de.data){let Se=[];de.data.content?Se=de.data.content:Array.isArray(de.data)?Se=de.data:de.data.flowStructures&&(Se=de.data.flowStructures),console.log("Flow structures data:",Se),console.log("Flow structures count:",Se.length),Se.length>0&&(console.log("First flow structure:",Se[0]),console.log("Has wsdlContent?",!!Se[0].wsdlContent)),he(Se)}}catch(de){console.warn("Could not load flow structures:",de),he([])}}catch(X){console.error("Error loading component data:",X),a({title:"Error",description:"Failed to load component data. Some features may not work properly.",variant:"destructive"})}finally{me(!1)}},dn=async()=>{try{let X=c;if(!X&&t){const de=await G.get(`/flows/${t}`);de.data&&(X=de.data)}if(X){u(X.name||""),p(X.description||""),X.businessComponentId&&(x(X.businessComponentId),w(X.businessComponentId));try{if(X.configuration){const de=JSON.parse(X.configuration);console.log("Flow configuration:",de),de.sourceBusinessComponentId&&(console.log("Setting source business component from config:",de.sourceBusinessComponentId),x(de.sourceBusinessComponentId)),de.targetBusinessComponentId&&(console.log("Setting target business component from config:",de.targetBusinessComponentId),w(de.targetBusinessComponentId))}}catch(de){console.error("Error parsing flow configuration:",de)}X.sourceAdapterId&&v(X.sourceAdapterId),X.targetAdapterId&&N(X.targetAdapterId),X.sourceFlowStructureId?E(X.sourceFlowStructureId):X.sourceStructureId&&E(X.sourceStructureId),X.targetFlowStructureId?P(X.targetFlowStructureId):X.targetStructureId&&P(X.targetStructureId),X.mappingMode==="PASS_THROUGH"?(T(!0),L(!1),I(!0),console.log("Loading PASS_THROUGH flow: mappingRequired=false, skipXmlConversion=true")):X.mappingMode==="WITH_MAPPING"?(T(!1),L(!0),I(!1),console.log("Loading WITH_MAPPING flow: mappingRequired=true, skipXmlConversion=false")):(T(!1),L(!0),I(!1));try{console.log("Loading transformations for flow:",X.id);const de=await G.get(`/flows/${X.id}/transformations`);if(console.log("Transformations response:",de.data),de.data&&Array.isArray(de.data)){const Se=de.data.sort((Te,Le)=>Te.executionOrder-Le.executionOrder),be=[];for(let Te=0;Te<Se.length;Te++){const Le=Se[Te];if(Le.type==="FIELD_MAPPING"){console.log(`Loading mappings for transformation ${Le.id} (${Le.name})`);const Je=await G.get(`/transformations/${Le.id}/mappings`);if(console.log(`Mappings response for ${Le.name}:`,Je.data),Je.data&&Array.isArray(Je.data)){let ot,Et={};try{Et=JSON.parse(Le.configuration||"{}"),console.log("Transformation config:",Et),Et.mappingType?ot=Et.mappingType:Te===0?ot="request":X.mappingMode==="PASS_THROUGH"?ot="fault":ot=Te===1?"response":"fault"}catch(Qe){console.error("Error parsing transformation config:",Qe),ot=Te===0?"request":Te===1?"response":"fault"}let Ie=Le.name||"";console.log(`Transformation ${Te}: name="${Le.name}", executionOrder=${Le.executionOrder}, messageType: ${ot}`);const Me=Je.data.map(Qe=>{try{const hn={...Qe,sourceFields:typeof Qe.sourceFields=="string"?JSON.parse(Qe.sourceFields):Qe.sourceFields||[],sourcePaths:typeof Qe.sourceFields=="string"?JSON.parse(Qe.sourceFields):Qe.sourceFields||[],targetPath:Qe.targetField||"",requiresTransformation:!0};if(Qe.visualFlowData)try{hn.visualFlowData=typeof Qe.visualFlowData=="string"?JSON.parse(Qe.visualFlowData):Qe.visualFlowData}catch(zt){console.error("Error parsing visualFlowData:",zt)}if(Qe.functionNode)try{hn.functionNode=typeof Qe.functionNode=="string"?JSON.parse(Qe.functionNode):Qe.functionNode}catch(zt){console.error("Error parsing functionNode:",zt)}return hn}catch(hn){return console.error("Error parsing sourceFields for mapping:",Qe,hn),{...Qe,sourceFields:[]}}});ot==="request"?(O(Me),B(Ie||"Request Mapping"),(Et.sourceWsdlOperation||Et.targetWsdlOperation)&&H(Qe=>({...Qe,request:{sourceWsdlOperation:Et.sourceWsdlOperation,targetWsdlOperation:Et.targetWsdlOperation}}))):be.push({id:Le.id,name:Ie||(ot==="response"?"Response Mapping":"Fault Mapping"),fieldMappings:Me,messageType:ot,sourceWsdlOperation:Et.sourceWsdlOperation,targetWsdlOperation:Et.targetWsdlOperation})}}}be.length>0&&M(be)}}catch(de){console.error("Error loading transformations and mappings:",de)}}}catch(X){console.error("Error loading flow data:",X),a({title:"Error",description:"Failed to load flow data for editing.",variant:"destructive"})}},ts=X=>{v(X);const de=Y.find(be=>be.id===X);if(!de)return;const Se=de.configuration;if(Se&&typeof Se=="object"){const be=Se.transformationConfig;be?.mode==="passthrough"?(L(!1),E(""),a({title:"Passthrough Mode",description:"This adapter is configured for passthrough. Mapping has been disabled."})):be?.dataStructureId&&(E(be.dataStructureId),L(!0),a({title:"Structure Auto-Selected",description:"Data structure has been automatically selected based on adapter configuration."}))}un(de,j)},An=X=>{N(X);const de=Y.find(be=>be.id===X);if(!de)return;const Se=de.configuration;if(Se&&typeof Se=="object"){const be=Se.transformationConfig;be?.mode==="passthrough"?(L(!1),P(""),a({title:"Passthrough Mode",description:"This adapter is configured for passthrough. Mapping has been disabled."})):be?.dataStructureId&&(P(be.dataStructureId),L(!0),a({title:"Structure Auto-Selected",description:"Data structure has been automatically selected based on adapter configuration."}))}un(y,de)},un=(X,de)=>{const Se=typeof X=="string"?Y.find(Je=>Je.id===X):X,be=typeof de=="string"?Y.find(Je=>Je.id===de):de;if(!Se||!be)return;const Te=Se.type?.toUpperCase(),Le=be.type?.toUpperCase();if(["HTTP","HTTPS","REST"].includes(Te)||["HTTP","HTTPS","REST"].includes(Le)){const Je=Se.configuration,ot=be.configuration;(Je?.expectsResponse||ot?.expectsResponse)&&(T(!1),a({title:"Synchronous Mode Detected",description:"Flow mode set to synchronous based on adapter configuration."}))}},Zr=()=>{n("/dashboard")},qs=async(X,de)=>{if(!d.trim()){a({title:"Validation Error",description:"Flow name is required.",variant:"destructive"});return}if(!y||!j){a({title:"Validation Error",description:"Both source and target adapters are required.",variant:"destructive"});return}if(A&&V.length>0&&!$.trim()){a({title:"Validation Error",description:"Please provide a name for the request mapping.",variant:"destructive"});return}if(!k&&Array.isArray(D)&&D.length>0&&D.filter(be=>!be.name?.trim()).length>0){a({title:"Validation Error",description:"Please provide names for all mappings.",variant:"destructive"});return}try{ae(!0);const Se=Y.find(Ie=>Ie.id===y),be=Y.find(Ie=>Ie.id===j),Te=Se?.type?.toUpperCase()==="SOAP",Le=be?.type?.toUpperCase()==="SOAP",Je=A&&(X||V)?(X||V).map((Ie,Me)=>({sourceFields:Ie.sourceFields||[],targetField:Ie.targetField||Ie.targetPath||"",javaFunction:Ie.javaFunction||Ie.functionNode?.javaFunction||null,mappingRule:Ie.mappingRule||null,functionName:Ie.functionNode?.functionName||null,isActive:!0,isArrayMapping:Ie.functionNode?.functionName==="nodeMapping"||!1,arrayContextPath:Ie.functionNode?.parameters?.arrayContextPath||null,sourceXPath:Ie.functionNode?.parameters?.sourceXPath||(Ie.sourcePaths&&Ie.sourcePaths.length>0?qE(Ie.sourcePaths,{isSoap:Te,isTarget:!1}).join(","):null),targetXPath:Ie.functionNode?.parameters?.targetXPath||(Ie.targetPath?gu(Ie.targetPath,{isSoap:Le,isTarget:!0}):null),visualFlowData:Ie.visualFlowData?JSON.stringify(Ie.visualFlowData):null,functionNode:Ie.functionNode?JSON.stringify(Ie.functionNode):null,mappingOrder:Me})):[],ot={flowName:d.trim(),description:m.trim(),sourceBusinessComponentId:g||null,targetBusinessComponentId:f||null,sourceAdapterId:y,targetAdapterId:j,sourceFlowStructureId:b||null,targetFlowStructureId:S||null,sourceStructureId:null,targetStructureId:null,createdBy:o?.id||o?.username||"unknown",skipXmlConversion:R,mappingMode:A?"WITH_MAPPING":"PASS_THROUGH",requestMappingName:$||(d?`${d} Request`:"Request Mapping"),sourceWsdlOperation:_?.request?.sourceWsdlOperation,targetWsdlOperation:_?.request?.targetWsdlOperation,fieldMappings:Je,additionalMappings:!k&&D.length>0?D.map(Ie=>({name:Ie.name,sourceWsdlOperation:Ie.sourceWsdlOperation,targetWsdlOperation:Ie.targetWsdlOperation,fieldMappings:Ie.fieldMappings.map((Me,Qe)=>({sourceFields:Me.sourceFields||[],targetField:Me.targetField||Me.targetPath||"",javaFunction:Me.javaFunction||Me.functionNode?.javaFunction||null,mappingRule:Me.mappingRule||null,functionName:Me.functionNode?.functionName||null,isActive:!0,isArrayMapping:Me.functionNode?.functionName==="nodeMapping"||!1,arrayContextPath:Me.functionNode?.parameters?.arrayContextPath||null,sourceXPath:Me.functionNode?.parameters?.sourceXPath||(Me.sourcePaths&&Me.sourcePaths.length>0?qE(Me.sourcePaths,{isSoap:Te,isTarget:!1}).join(","):null),targetXPath:Me.functionNode?.parameters?.targetXPath||(Me.targetPath?gu(Me.targetPath,{isSoap:Le,isTarget:!0}):null),visualFlowData:Me.visualFlowData?JSON.stringify(Me.visualFlowData):null,functionNode:Me.functionNode?JSON.stringify(Me.functionNode):null,mappingOrder:Qe}))})):[]};console.log("=== FLOW SAVE DEBUG ==="),console.log("mappingRequired state:",A),console.log("skipXmlConversion state:",R),console.log("Calculated mappingMode:",A?"WITH_MAPPING":"PASS_THROUGH"),console.log("Full flow request:",JSON.stringify(ot,null,2)),(await G.post("/flow-composition/direct-mapping",ot)).data&&(a({title:"Success",description:`Integration flow "${d}" has been created successfully.`}),n("/dashboard"))}catch(Se){console.error("Error saving flow:",Se),console.error("Error response:",Se.response),Se.response&&(console.error("Response status:",Se.response.status),console.error("Response data:",Se.response.data),console.error("Response headers:",Se.response.headers));let be="Failed to save the integration flow. Please try again.";Se.message?be=Se.message:Se.response?.data?.message?be=Se.response.data.message:Se.response?.data&&typeof Se.response.data=="string"&&(be=Se.response.data),be.includes("already exists")&&(be=`${be} Please choose a different name.`),a({title:"Save Failed",description:be,variant:"destructive"})}finally{ae(!1)}},ve=async(X="request")=>{if(console.log("handleCreateMapping called with:",{mappingType:X,sourceStructure:b,targetStructure:S,flowStructures:Q.length,flowStructuresData:Q}),!b||!S){a({title:"Validation Error",description:"Please select both source and target data structures.",variant:"destructive"});return}try{Ve(!0),at(X);let de,Se;const be=Q.find(Le=>Le.id===b);console.log("Source flow structure found:",be),be&&be.wsdlContent?(de=be.wsdlContent,console.log("Using source WSDL content")):de=(await WE(b,{rootElementName:"SourceMessage",includeXmlDeclaration:!0,prettyPrint:!0,convertPropertyNames:!0})).xmlContent;const Te=Q.find(Le=>Le.id===S);console.log("Target flow structure found:",Te),Te&&Te.wsdlContent?(Se=Te.wsdlContent,console.log("Using target WSDL content")):Se=(await WE(S,{rootElementName:"TargetMessage",includeXmlDeclaration:!0,prettyPrint:!0,convertPropertyNames:!0})).xmlContent,ct(de),Ge(Se),l(!0)}catch(de){console.error("Error converting structures:",de);const Se=de.response?.data?.details||de.response?.data?.error||de.message||"Failed to convert structures to XML";console.error("Error details:",de.response?.data),a({title:"Conversion Failed",description:Se,variant:"destructive"})}finally{Ve(!1)}};return i?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:s.jsx("div",{className:"w-full px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"gap-2",children:[s.jsx(Hy,{className:"h-4 w-4"}),"Back to Flow Configuration"]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Field Mapping - ",d]}),s.jsxs("p",{className:"text-muted-foreground",children:["Map fields between ",y," and ",j]})]})]})})}),s.jsx(nb,{onClose:()=>l(!1),onSave:(X,de,Se)=>{if(Oe==="request")O(X),de&&B(de),Se&&H(be=>({...be,request:{sourceWsdlOperation:Se.sourceOperation,targetWsdlOperation:Se.targetOperation}}));else{const be=Oe==="response"?"response":Oe;M(Te=>{const Le=Te.findIndex(Je=>Je.messageType===be);if(Le>=0){const Je=[...Te];return Je[Le]={...Je[Le],fieldMappings:X,name:de||Je[Le].name,sourceWsdlOperation:Se?.sourceOperation,targetWsdlOperation:Se?.targetOperation},Je}return Te})}l(!1),a({title:"Mappings Saved",description:`${X.length} ${Oe} mappings have been configured.`})},initialMappingName:Oe==="request"?$||(d?`${d} Request`:""):D.find(de=>de.messageType===(Oe==="response"?"response":"fault"))?.name||(d?`${d} ${Oe.charAt(0).toUpperCase()+Oe.slice(1)}`:""),initialMappings:(()=>{if(Oe==="request")return V;const X=Oe==="response"?"response":Oe;return D.find(Se=>Se.messageType===X)?.fieldMappings||[]})(),sourceAdapterType:y,targetAdapterType:j,sourceXml:Oe==="response"?$e:Ue,targetXml:Oe==="response"?Ue:$e,preConverted:!0,mappingType:Oe,initialSourceOperation:Oe==="request"?_?.request?.sourceWsdlOperation||"":D.find(de=>de.messageType===Oe)?.sourceWsdlOperation||"",initialTargetOperation:Oe==="request"?_?.request?.targetWsdlOperation||"":D.find(de=>de.messageType===Oe)?.targetWsdlOperation||""})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:s.jsx("div",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:Zr,className:"gap-2",children:[s.jsx(Hy,{className:"h-4 w-4"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:t?"Edit Integration Flow":"Create Integration Flow"}),s.jsx("p",{className:"text-muted-foreground",children:t?"Modify the configuration of your integration flow":"Design and configure a new message integration flow"})]})]})})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(K,{className:"animate-scale-in",children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Flow Details"}),s.jsx(Ne,{children:"Configure the basic information for your integration flow"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"flowName",children:"Flow Name *"}),s.jsx(U,{id:"flowName",placeholder:"e.g., Customer Data Sync",value:d,onChange:X=>{const de=X.target.value;u(de),(!$||$===`${d} Request`||$==="Request Mapping")&&B(de?`${de} Request`:"")},className:"transition-all duration-300 focus:scale-[1.01]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",placeholder:"Describe what this integration flow does...",value:m,onChange:X=>p(X.target.value),className:"transition-all duration-300 focus:scale-[1.01]",rows:3})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"async-mode",className:"text-base",children:"Processing Mode"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:k?"Asynchronous - Process messages in the background":"Synchronous - Wait for processing to complete before responding"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm ${k?"text-muted-foreground":"font-medium"}`,children:"Sync"}),s.jsx(bt,{id:"async-mode",checked:k,onCheckedChange:T}),s.jsx("span",{className:`text-sm ${k?"font-medium":"text-muted-foreground"}`,children:"Async"})]})]}),!k&&s.jsx("div",{className:"mt-3 p-3 bg-muted rounded-md",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Note:"})," Synchronous mode allows multiple field mappings to be configured for complex transformations."]})})]})]})]}),s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.1s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Source & Target Configuration"}),s.jsx(Ne,{children:"Select the source and target systems for your integration"})]}),s.jsx(re,{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Source"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Source Business Component *"}),s.jsxs(se,{value:g,onValueChange:x,disabled:le,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select source business component"})}),s.jsx(te,{children:W.map(X=>s.jsx(F,{value:X.id,children:X.name},X.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Source Adapter *"}),s.jsxs(se,{value:y,onValueChange:ts,disabled:le,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select source system"})}),s.jsx(te,{children:Array.isArray(Y)&&Y.filter(X=>X.mode==="SENDER").map(X=>{const de=tv(X.type||X.name);return s.jsx(F,{value:X.id||X.name,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{className:"h-4 w-4"}),X.name]})},X.id||X.name)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Source Flow Structure *"}),s.jsxs(se,{value:b,onValueChange:E,disabled:le||!g,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select source flow structure"})}),s.jsx(te,{children:Array.isArray(Q)&&Q.filter(X=>X.direction==="SOURCE").map(X=>s.jsx(F,{value:X.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:X.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[X.processingMode," Mode"]})]})},X.id))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground uppercase tracking-wide",children:"Target"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Target Business Component *"}),s.jsxs(se,{value:f,onValueChange:w,disabled:le,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select target business component"})}),s.jsx(te,{children:W.map(X=>s.jsx(F,{value:X.id,children:X.name},X.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Target Adapter *"}),s.jsxs(se,{value:j,onValueChange:An,disabled:le,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select target system"})}),s.jsx(te,{children:Array.isArray(Y)&&Y.filter(X=>X.mode==="RECEIVER").map(X=>{const de=tv(X.type||X.name);return s.jsx(F,{value:X.id||X.name,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{className:"h-4 w-4"}),X.name]})},X.id||X.name)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Target Flow Structure *"}),s.jsxs(se,{value:S,onValueChange:P,disabled:le||!f,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:le?"Loading...":"Select target flow structure"})}),s.jsx(te,{children:Array.isArray(Q)&&Q.filter(X=>X.direction==="TARGET").map(X=>s.jsx(F,{value:X.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:X.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[X.processingMode," Mode"]})]})},X.id))})]})]})]})]})]})})]}),s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Transformations"}),s.jsx(Ne,{children:"Configure field mapping between source and target"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"mapping-required",className:"text-base",children:"Mapping Required"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if field mapping is needed between source and target"})]}),s.jsx(bt,{id:"mapping-required",checked:A,onCheckedChange:X=>{console.log("Mapping Required toggle changed to:",X),L(X),I(!X),console.log("Skip XML Conversion automatically set to:",!X)}})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"skip-xml-conversion",className:"text-base",children:"Direct File Passthrough"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Skip XML conversion for direct file transfers (improved performance)"})]}),s.jsx(bt,{id:"skip-xml-conversion",checked:R,onCheckedChange:X=>{console.log("Direct File Passthrough toggle changed to:",X),I(X),L(!X),console.log("Mapping Required automatically set to:",!X)}})]}),A&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-t pt-6",children:s.jsx("div",{className:"space-y-4",children:k?s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Field Mapping"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:V.length>0?`${V.length} mappings configured`:"No mappings configured yet"})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{console.log("Configure button clicked!"),console.log("Button state:",{mappingRequired:A,sourceBusinessComponent:g,targetBusinessComponent:f,sourceAdapter:y,targetAdapter:j,sourceStructure:b,targetStructure:S,convertingStructures:we}),ve()},disabled:!A||!g||!f||!y||!j||!b||!S||we,children:"Configure"})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Request Mapping"}),s.jsx("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-md mr-2",children:"Request"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:V.length>0?`${V.length} mappings configured`:"No mappings configured yet"})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{console.log("Configure request button clicked!"),console.log("Button state:",{mappingRequired:A,sourceBusinessComponent:g,targetBusinessComponent:f,sourceAdapter:y,targetAdapter:j,sourceStructure:b,targetStructure:S,convertingStructures:we}),ve("request")},disabled:!A||!g||!f||!y||!j||!b||!S||we,children:"Configure"})]})}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Response Mapping"}),s.jsx("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-md mr-2",children:"Response"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{const X=D.find(de=>de.messageType==="response");return X?.fieldMappings?.length>0?`${X.fieldMappings.length} mappings configured`:"No mappings configured yet"})()})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{if(!D.find(de=>de.messageType==="response")){const de={id:`response_mapping_${Date.now()}`,name:d?`${d} Response`:"Response Mapping",fieldMappings:[],messageType:"response"};M([...D,de])}ve("response")},disabled:!A||!g||!f||!y||!j||!b||!S||we,children:"Configure"})]})}),s.jsx("div",{className:"p-4 border rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:"Fault Mapping"}),s.jsx("span",{className:"text-xs px-2 py-1 bg-destructive/10 text-destructive rounded-md mr-2",children:"Fault"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{const X=D.find(de=>de.messageType==="fault");return X?.fieldMappings?.length>0?`${X.fieldMappings.length} mappings configured`:"No mappings configured yet"})()})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{if(!D.find(de=>de.messageType==="fault")){const de={id:`fault_mapping_${Date.now()}`,name:d?`${d} Fault`:"Fault Mapping",fieldMappings:[],messageType:"fault"};M([...D,de])}ve("fault")},disabled:!A||!g||!f||!y||!j||!b||!S||we,children:"Configure"})]})})]})})}),A?(!b||!S)&&s.jsx("p",{className:"text-sm text-orange-600 text-center",children:"Please select both source and target data structures to enable mapping"}):s.jsx("p",{className:"text-sm text-blue-600 text-center",children:"Mapping is disabled in passthrough mode. Data will be transferred without transformation."})]}),!A&&s.jsx("div",{className:"text-center py-6 text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:"Pass-through mode enabled - data will flow without transformation"})})]})]})]}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsx(bK,{onSaveFlow:()=>qs(),isLoading:Z,disabled:le||!d.trim()||!y||!j}),s.jsx(SK,{sourceAdapter:y,targetAdapter:j,sourceStructure:b,targetStructure:S,selectedTransformations:[],adapters:Y.map(X=>({id:X.id||X.name,name:X.name,icon:tv(X.type||X.name),category:X.type||"General"})),sampleStructures:J}),s.jsx(CK,{}),le&&s.jsx(K,{children:s.jsx(re,{className:"flex items-center justify-center py-6",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading component data..."]})})})]})]})})]})}var rb="Checkbox",[Mne,sye]=ln(rb),[Rne,Fne]=Mne(rb),fL=h.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[p,g]=h.useState(null),x=Xe(t,N=>g(N)),f=h.useRef(!1),w=p?u||!!p.closest("form"):!0,[y=!1,v]=qn({prop:a,defaultProp:o,onChange:d}),j=h.useRef(y);return h.useEffect(()=>{const N=p?.form;if(N){const b=()=>v(j.current);return N.addEventListener("reset",b),()=>N.removeEventListener("reset",b)}},[p,v]),s.jsxs(Rne,{scope:n,state:y,disabled:l,children:[s.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":ao(y)?"mixed":y,"aria-required":i,"data-state":vL(y),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:x,onKeyDown:Ee(e.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:Ee(e.onClick,N=>{v(b=>ao(b)?!0:!b),w&&(f.current=N.isPropagationStopped(),f.current||N.stopPropagation())})}),w&&s.jsx(One,{control:p,bubbles:!f.current,name:r,value:c,checked:y,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:ao(o)?!1:o})]})});fL.displayName=rb;var gL="CheckboxIndicator",xL=h.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,o=Fne(gL,n);return s.jsx(ps,{present:r||ao(o.state)||o.state===!0,children:s.jsx(Fe.span,{"data-state":vL(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});xL.displayName=gL;var One=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:a,...o}=e,i=h.useRef(null),l=cg(n),c=Uf(t);h.useEffect(()=>{const u=i.current,m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&g){const x=new Event("click",{bubbles:r});u.indeterminate=ao(n),g.call(u,ao(n)?!1:n),u.dispatchEvent(x)}},[l,n,r]);const d=h.useRef(ao(n)?!1:n);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ao(e){return e==="indeterminate"}function vL(e){return ao(e)?"indeterminate":e?"checked":"unchecked"}var yL=fL,Ine=xL;const it=h.forwardRef(({className:e,...t},n)=>s.jsx(yL,{ref:n,className:ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Ine,{className:ce("flex items-center justify-center text-current"),children:s.jsx(Ci,{className:"h-4 w-4"})})}));it.displayName=yL.displayName;class Lne{async getAdapters(t){try{const n=t?`/adapter-monitoring/status?businessComponentId=${t}`:"/adapter-monitoring/status",r=await G.get(n);return r.success&&r.data?{success:!0,data:r.data.map(o=>({id:o.id,name:o.name,type:o.type,mode:o.mode,status:o.status,load:o.load||0,businessComponentId:o.businessComponentId,businessComponentName:o.businessComponentName,messagesProcessed:o.messagesProcessed||0,errorsCount:o.errorsCount||0,lastActivityTime:o.lastActivity,uptime:o.uptime}))}:r}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch adapters"}}}async getAdapterById(t){try{return await G.get(`/adapters/${t}`)}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch adapter"}}}async createAdapter(t){try{return await G.post("/adapters",t)}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to create adapter"}}}async updateAdapter(t,n){try{return await G.put(`/adapters/${t}`,n)}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to update adapter"}}}async activateAdapter(t){try{const n=await G.post(`/adapters/${t}/activate`);if(n.success){const r=await G.get(`/adapter-monitoring/status/${t}`);if(r.success&&r.data){const a=r.data;return{success:!0,data:{id:a.id,name:a.name,type:a.type,mode:a.mode,status:a.status,load:a.load||0,businessComponentId:a.businessComponentId,businessComponentName:a.businessComponentName,messagesProcessed:a.messagesProcessed||0,errorsCount:a.errorsCount||0,lastActivityTime:a.lastActivity,uptime:a.uptime}}}}return n}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to activate adapter"}}}async deactivateAdapter(t){try{const n=await G.post(`/adapters/${t}/deactivate`);if(n.success){const r=await G.get(`/adapter-monitoring/status/${t}`);if(r.success&&r.data){const a=r.data;return{success:!0,data:{id:a.id,name:a.name,type:a.type,mode:a.mode,status:a.status,load:a.load||0,businessComponentId:a.businessComponentId,businessComponentName:a.businessComponentName,messagesProcessed:a.messagesProcessed||0,errorsCount:a.errorsCount||0,lastActivityTime:a.lastActivity,uptime:a.uptime}}}}return n}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to deactivate adapter"}}}async deleteAdapter(t){try{return await G.delete(`/adapters/${t}`),{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to delete adapter"}}}async getAdapterLogs(t,n){try{const r=new URLSearchParams;r.append("page","0"),r.append("size",n?.limit?.toString()||"50"),n?.level?.length&&r.append("level",n.level.join(",")),n?.dateFrom&&r.append("dateFrom",n.dateFrom),n?.dateTo&&r.append("dateTo",n.dateTo),n?.search&&r.append("search",n.search);const a=r.toString()?`?${r.toString()}`:"",o=await G.get(`/adapters/${t}/logs${a}`);return o.success&&o.data?{success:!0,data:(o.data.content||[]).map(c=>({id:c.id,timestamp:c.timestamp,level:(c.level||"INFO").toLowerCase(),message:c.message,adapterId:t,details:c.details?typeof c.details=="string"?JSON.parse(c.details):c.details:void 0,adapterName:c.sourceName,correlationId:c.correlationId,duration:void 0}))}:o}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch adapter logs"}}}async getAvailableAdapterTypes(){try{return await G.get("/admin/adapter-types")}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to fetch available adapter types"}}}async testAdapterConnection(t){try{return await G.post(`/adapters/${t}/test`),{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to test adapter connection"}}}}const Lo=new Lne,To=()=>{const[e,t]=h.useState([]),[n,r]=h.useState(!0);h.useEffect(()=>{a()},[]);const a=async()=>{try{console.log("Loading businessComponent data...");const l=await Rr.getAllBusinessComponents();if(l.success&&l.data){console.log("API businessComponents loaded:",l.data);const c=Array.isArray(l.data)?l.data:[];console.log(`API returned ${c.length} business components`),t(c)}else console.log("API failed, showing empty business components list"),t([])}catch(l){console.error("Error loading business components:",l),t([])}finally{r(!1)}};return{businessComponents:e,loading:n,getAdaptersForBusinessComponent:async l=>{try{const c=await Lo.getAdapters(l);if(c.success&&c.data&&Array.isArray(c.data)){const d=c.data.map(u=>u?.id).filter(u=>u!=null);return[...new Set(d)]}}catch(c){console.error("Error getting adapters for business component:",c)}return[]},getStructuresForBusinessComponent:async l=>{try{const c=await Mn.getStructures();if(c.success&&c.data){const d=c.data.structures||c.data;return Array.isArray(d)?d.filter(u=>!u||typeof u!="object"?(console.warn("Invalid structure object:",u),!1):u.businessComponentId===l).map(u=>u.id).filter(u=>u!=null):(console.warn("Structures is not an array:",d),[])}}catch(c){console.error("Error getting structures for business component:",c)}return[]},refreshData:a}},$ne=({adapters:e,sourceBusinessComponent:t,targetBusinessComponent:n,sourceAdapter:r,targetAdapter:a,sourceAdapterActive:o,targetAdapterActive:i,onSourceBusinessComponentChange:l,onTargetBusinessComponentChange:c,onSourceAdapterChange:d,onTargetAdapterChange:u,onSourceAdapterActiveChange:m,onTargetAdapterActiveChange:p})=>{console.log("[AdapterConfigurationCard] Component rendered with props:",{adapters:e.length,sourceBusinessComponent:t,targetBusinessComponent:n,sourceAdapter:r,targetAdapter:a,sourceAdapterActive:o,targetAdapterActive:i});const{businessComponents:g,loading:x,getAdaptersForBusinessComponent:f}=To();console.log("[AdapterConfigurationCard] Hook data:",{businessComponents:g.length,loading:x});const w=S=>e.find(P=>P.id===S),[y,v]=h.useState([]);h.useEffect(()=>{t&&j(t)},[t]);const j=async S=>{const P=await f(S);v(P)},N=S=>S?e.filter(P=>y.includes(P.id)):e,b=async S=>{console.log("[AdapterConfigurationCard] Source business component changing:",S);try{l(S);const P=await f(S);console.log("[AdapterConfigurationCard] Available adapters for business component:",P),r&&!P.includes(r)&&(console.log("[AdapterConfigurationCard] Resetting source adapter - not available for new business component"),d(""))}catch(P){console.error("[AdapterConfigurationCard] Error handling source business component change:",P)}},E=async S=>{c(S);const P=await f(S);a&&!P.includes(a)&&u("")};return s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.1s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Source & Target Configuration"}),s.jsx(Ne,{children:"Select the source and target systems for your integration"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{children:"Source Business Component *"}),s.jsxs(se,{value:t,onValueChange:b,disabled:x,children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:"Select source business component"})}),s.jsx(te,{children:g.map(S=>s.jsx(F,{value:S.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:S.name}),S.description&&s.jsx(fe,{variant:"outline",className:"text-xs",children:S.description})]})},S.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{children:"Source Adapter *"}),s.jsxs(se,{value:r,onValueChange:d,disabled:!t,children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:"Select source system"})}),s.jsx(te,{children:N(t).map(S=>s.jsx(F,{value:S.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"h-4 w-4"}),s.jsx("span",{children:S.name}),s.jsx(fe,{variant:"outline",className:"text-xs",children:S.category})]})},S.id))})]}),r&&s.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:s.jsx("div",{className:"flex items-center gap-2",children:w(r)&&s.jsx(s.Fragment,{children:(()=>{const S=w(r),P=S.icon;return s.jsxs(s.Fragment,{children:[s.jsx(P,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"font-medium",children:S.name})]})})()})})})]}),r&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"sourceAdapterActive",checked:o,onCheckedChange:S=>m(S===!0)}),s.jsxs(C,{htmlFor:"sourceAdapterActive",className:"text-sm font-normal flex items-center gap-1",children:["Active source adapter",s.jsx(fe,{variant:o?"default":"secondary",className:"text-xs",children:o?"Active":"Inactive"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{children:"Target Business Component *"}),s.jsxs(se,{value:n,onValueChange:E,disabled:x,children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:"Select target business component"})}),s.jsx(te,{children:g.map(S=>s.jsx(F,{value:S.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:S.name}),S.description&&s.jsx(fe,{variant:"outline",className:"text-xs",children:S.description})]})},S.id))})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{children:"Target Adapter *"}),s.jsxs(se,{value:a,onValueChange:u,disabled:!n,children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:"Select target system"})}),s.jsx(te,{children:N(n).map(S=>s.jsx(F,{value:S.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S.icon,{className:"h-4 w-4"}),s.jsx("span",{children:S.name}),s.jsx(fe,{variant:"outline",className:"text-xs",children:S.category})]})},S.id))})]}),a&&s.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:s.jsx("div",{className:"flex items-center gap-2",children:w(a)&&s.jsx(s.Fragment,{children:(()=>{const S=w(a),P=S.icon;return s.jsxs(s.Fragment,{children:[s.jsx(P,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"font-medium",children:S.name})]})})()})})})]}),a&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"targetAdapterActive",checked:i,onCheckedChange:S=>p(S===!0)}),s.jsxs(C,{htmlFor:"targetAdapterActive",className:"text-sm font-normal flex items-center gap-1",children:["Active target adapter",s.jsx(fe,{variant:i?"default":"secondary",className:"text-xs",children:i?"Active":"Inactive"})]})]})]})]}),r&&a&&s.jsx("div",{className:"mt-6 p-4 bg-gradient-secondary rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("div",{className:"flex items-center gap-2 bg-card p-3 rounded-lg shadow-soft",children:w(r)&&s.jsx(s.Fragment,{children:(()=>{const S=w(r),P=S.icon;return s.jsxs(s.Fragment,{children:[s.jsx(P,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:S.name})]})})()})}),s.jsx(jp,{className:"h-6 w-6 text-primary animate-pulse"}),s.jsx("div",{className:"flex items-center gap-2 bg-card p-3 rounded-lg shadow-soft",children:w(a)&&s.jsx(s.Fragment,{children:(()=>{const S=w(a),P=S.icon;return s.jsxs(s.Fragment,{children:[s.jsx(P,{className:"h-5 w-5 text-primary"}),s.jsx("span",{className:"font-medium",children:S.name})]})})()})})]})})]})]})},_ne=e=>{switch(e){case"start-process":return So;case"http-sender":case"http-receiver":return kr;case"soap-sender":case"soap-receiver":return Lu;case"rest-sender":case"rest-receiver":return Tt;default:return ck}},Vne=e=>e==="start-process"?"Start Process":e.split("-").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),Rs=({id:e,data:t,selected:n})=>{console.log("[AdapterNode] Rendering node:",{id:e,data:t});const[r,a]=h.useState(!1),{setNodes:o,setEdges:i}=Jr(),[l,c]=h.useState(t.adapterConfig?.sourceBusinessComponent||""),[d,u]=h.useState(t.adapterConfig?.targetBusinessComponent||""),[m,p]=h.useState(t.adapterType),[g,x]=h.useState(t.adapterConfig?.targetAdapter||""),[f,w]=h.useState(t.adapterConfig?.sourceAdapterActive||!0),[y,v]=h.useState(t.adapterConfig?.targetAdapterActive||!1),j=_ne(t.adapterType),N=Vne(t.adapterType),b=t.adapterConfig&&Object.keys(t.adapterConfig).length>0;console.log("[AdapterNode] Node state:",{id:e,adapterType:t.adapterType,adapterName:N,isConfigured:b,configOpen:r});const E=()=>{o(S=>S.filter(P=>P.id!==e)),i(S=>S.filter(P=>P.source!==e&&P.target!==e))};return s.jsxs(s.Fragment,{children:[s.jsxs(K,{className:"min-w-[200px] shadow-lg border-2 hover:border-primary/20 transition-colors bg-black text-white relative group",children:[t.showDeleteButton&&s.jsx(z,{variant:"ghost",size:"sm",onClick:E,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete adapter",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsx(oe,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-5 w-5 text-white"}),s.jsx(ie,{className:"text-sm font-medium text-white",children:N})]}),s.jsx(fe,{variant:b?"default":"secondary",className:"text-xs bg-white text-black",children:b?"Configured":"Setup Required"})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs(z,{size:"sm",variant:"outline",className:"w-full bg-gray-800 text-white border-gray-700 hover:bg-gray-700",onClick:S=>{console.log("[AdapterNode] Configure button clicked:",{id:e,adapterType:t.adapterType}),S.stopPropagation(),S.preventDefault();try{a(!0),console.log("[AdapterNode] Dialog opened successfully")}catch(P){console.error("[AdapterNode] Error opening dialog:",P)}},onMouseDown:S=>{console.log("[AdapterNode] Configure button mousedown"),S.stopPropagation()},children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Configure"]})}),s.jsx(Qt,{type:"target",position:Pe.Left,className:"w-3 h-3 bg-blue-500 border-2 border-white"}),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-green-500 border-2 border-white"})]}),s.jsx(ft,{open:r,onOpenChange:S=>{console.log("[AdapterNode] Dialog state changing:",{open:S,id:e}),a(S)},children:s.jsxs(mt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto z-[9999]",style:{zIndex:9999},children:[s.jsx(gt,{children:s.jsxs(xt,{children:["Configure ",N]})}),s.jsx("div",{className:"mt-4",children:(console.log("[AdapterNode] Rendering AdapterConfigurationCard with props:",{adapters:[{id:t.adapterType,name:N,category:t.adapterType.split("-")[0].toUpperCase()}],sourceAdapter:t.adapterType}),s.jsx($ne,{adapters:[{id:t.adapterType,name:N,icon:j,category:t.adapterType.split("-")[0].toUpperCase()}],sourceBusinessComponent:l,targetBusinessComponent:d,sourceAdapter:m,targetAdapter:g,sourceAdapterActive:f,targetAdapterActive:y,onSourceBusinessComponentChange:S=>{console.log("[AdapterNode] Source business component changed:",S),c(S)},onTargetBusinessComponentChange:S=>{console.log("[AdapterNode] Target business component changed:",S),u(S)},onSourceAdapterChange:S=>{console.log("[AdapterNode] Source adapter changed:",S),p(S)},onTargetAdapterChange:S=>{console.log("[AdapterNode] Target adapter changed:",S),x(S)},onSourceAdapterActiveChange:S=>{console.log("[AdapterNode] Source adapter active changed:",S),w(S)},onTargetAdapterActiveChange:S=>{console.log("[AdapterNode] Target adapter active changed:",S),v(S)}}))})]})})]})},Une=({id:e,data:t,selected:n})=>{const[r,a]=h.useState(!1),{setNodes:o,setEdges:i}=Jr(),[l,c]=h.useState(t.senderComponent||""),[d,u]=h.useState(t.sourceAdapter||""),[m,p]=h.useState(t.isAsync??!0),[g,x]=h.useState([]),{businessComponents:f,adapters:w,getAdaptersForBusinessComponent:y}=To(),v=t.senderComponent&&t.sourceAdapter;h.useEffect(()=>{(async()=>{if(l){const P=await y(l);x(P)}else x([])})()},[l,y]);const j=()=>{o(S=>S.filter(P=>P.id!==e)),i(S=>S.filter(P=>P.source!==e&&P.target!==e))},N=async S=>{c(S);const P=await y(S),A=P.includes(d)?d:"";P.includes(d)||u(""),t.onConfigChange({senderComponent:S,sourceAdapter:A,isAsync:m,payload:t.payload})},b=S=>{u(S),t.onConfigChange({senderComponent:l,sourceAdapter:S,isAsync:m,payload:t.payload})},E=S=>{p(S),t.onConfigChange({senderComponent:l,sourceAdapter:d,isAsync:S,payload:t.payload})};return s.jsxs(s.Fragment,{children:[s.jsxs(K,{className:"min-w-[200px] shadow-lg border-2 hover:border-primary/20 transition-colors bg-black text-white relative group",children:[t.showDeleteButton&&s.jsx(z,{variant:"ghost",size:"sm",onClick:j,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete start process",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsx(oe,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(So,{className:"h-5 w-5 text-white"}),s.jsx(ie,{className:"text-sm font-medium text-white",children:"Start Process"})]}),s.jsx(fe,{variant:v?"default":"secondary",className:"text-xs bg-white text-black",children:v?"Configured":"Setup Required"})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs(z,{size:"sm",variant:"outline",className:"w-full bg-gray-800 text-white border-gray-700 hover:bg-gray-700",onClick:S=>{S.stopPropagation(),S.preventDefault(),a(!0)},onMouseDown:S=>S.stopPropagation(),children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Configure"]})}),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-green-500 border-2 border-white"})]}),s.jsx(ft,{open:r,onOpenChange:a,children:s.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto z-[9999]",style:{zIndex:9999},children:[s.jsx(gt,{children:s.jsx(xt,{children:"Configure Start Process"})}),s.jsxs("div",{className:"mt-4 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sender-component",children:"Sender Component"}),s.jsxs(se,{value:l,onValueChange:N,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a business component..."})}),s.jsx(te,{children:f.map(S=>s.jsx(F,{value:S.id,children:S.name},S.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"source-adapter",children:"Source Adapter"}),s.jsxs(se,{value:d,onValueChange:b,disabled:!l,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select an adapter..."})}),s.jsx(te,{children:g.map(S=>{const P=w.find(A=>A.id===S);return P?s.jsx(F,{value:P.id,children:P.name},P.id):null})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"execution-mode",children:"Execution Mode"}),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm",children:m?"Asynchronous":"Synchronous"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:m?"Process continues without waiting for response":"Process waits for complete response before continuing"})]}),s.jsx(bt,{checked:m,onCheckedChange:E,"aria-label":"Toggle execution mode"})]})]}),v&&s.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Output Payload"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["This start process will output the payload from the ",l," component using the ",w.find(S=>S.id===d)?.name," adapter."]})]})]})]})})]})},Bne=e=>{switch(e){case"field-mapping":return wl;case"custom-function":return vn;case"filter":return uc;case"enrichment":return es;default:return wl}},Hne=e=>{switch(e){case"field-mapping":return"Field Mapping";case"data-transformation":return"Data Transformation";case"format-conversion":return"Format Conversion";case"value-mapping":return"Value Mapping";case"structure-mapping":return"Structure Mapping";case"conditional-mapping":return"Conditional Mapping";case"aggregation":return"Aggregation";case"split-mapping":return"Split Mapping";case"csv-to-xml":return"CSV to XML";case"json-to-xml":return"JSON to XML";case"xml-to-json":return"XML to JSON";case"excel-to-csv":return"Excel to CSV";case"pdf-extractor":return"PDF Extractor";case"file-splitter":return"File Splitter";case"file-merger":return"File Merger";case"file-validator":return"File Validator";case"javascript-script":return"JavaScript Script";case"groovy-script":return"Groovy Script";case"xslt-transformation":return"XSLT Transformation";case"custom-function":return"Custom Function";case"lookup-function":return"Lookup Function";case"calculation-function":return"Calculation Function";case"validation-function":return"Validation Function";case"enrichment-function":return"Enrichment Function";case"task":return"Task";case"service-task":return"Service Task";case"user-task":return"User Task";case"script-task":return"Script Task";case"manual-task":return"Manual Task";case"business-rule-task":return"Business Rule Task";case"receive-task":return"Receive Task";case"send-task":return"Send Task";case"filter":return"Message Filter";case"enrichment":return"Data Enrichment";default:return"Transformation"}},tt=({id:e,data:t,selected:n})=>{const[r,a]=h.useState(!1),{setNodes:o,setEdges:i}=Jr(),l=Bne(t.transformationType),c=Hne(t.transformationType),d=t.transformationConfig&&Object.keys(t.transformationConfig).length>0,u=()=>{o(m=>m.filter(p=>p.id!==e)),i(m=>m.filter(p=>p.source!==e&&p.target!==e))};return s.jsxs(s.Fragment,{children:[s.jsxs(K,{className:"min-w-[200px] shadow-lg border-2 hover:border-primary/20 transition-colors bg-black text-white relative group",children:[t.showDeleteButton&&s.jsx(z,{variant:"ghost",size:"sm",onClick:u,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete transformation",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsx(oe,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{className:"h-5 w-5 text-white"}),s.jsx(ie,{className:"text-sm font-medium text-white",children:c})]}),s.jsx(fe,{variant:d?"default":"secondary",className:"text-xs bg-white text-black",children:d?"Configured":"Setup Required"})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs(z,{size:"sm",variant:"outline",className:"w-full bg-gray-800 text-white border-gray-700 hover:bg-gray-700",onClick:m=>{m.stopPropagation(),m.preventDefault(),console.log("[TransformationNode] Configure clicked:",{id:e,transformationType:t.transformationType,config:t.transformationConfig,isFieldMapping:t.transformationType==="field-mapping"}),a(!0)},onMouseDown:m=>m.stopPropagation(),children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Configure"]})}),s.jsx(Qt,{type:"target",position:Pe.Left,className:"w-3 h-3 bg-purple-500 border-2 border-white"}),s.jsx(Qt,{type:"source",position:Pe.Right,className:"w-3 h-3 bg-purple-500 border-2 border-white"})]}),t.transformationType==="field-mapping"?s.jsx(ft,{open:r,onOpenChange:a,children:s.jsx(mt,{className:"max-w-[95vw] max-h-[95vh] p-0 z-[9999]",style:{zIndex:9999},children:s.jsx(nb,{onClose:()=>a(!1),onSave:m=>{t.onConfigChange({fieldMappings:m}),a(!1)},initialMappingName:`${c} - ${e}`,sampleStructures:[]})})}):s.jsx(ft,{open:r,onOpenChange:a,children:s.jsxs(mt,{className:"max-w-2xl z-[9999]",style:{zIndex:9999},children:[s.jsx(gt,{children:s.jsxs(xt,{children:["Configure ",c]})}),s.jsx("div",{className:"mt-4 p-4 border border-dashed border-muted-foreground rounded-lg text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:[c," configuration panel coming soon..."]})})]})})]})},mn=({id:e,data:t,selected:n})=>{const[r,a]=h.useState(!1),[o,i]=h.useState(t.routingType||"conditional"),[l,c]=h.useState(t.conditions||[]),{setNodes:d,setEdges:u}=Jr(),m=()=>{d(y=>y.filter(v=>v.id!==e)),u(y=>y.filter(v=>v.source!==e&&v.target!==e))},p=()=>{c([...l,{field:"",operator:"equals",value:"",route:""}])},g=(y,v,j)=>{const N=[...l];N[y]={...N[y],[v]:j},c(N)},x=y=>{c(l.filter((v,j)=>j!==y))},f=()=>{t.onConfigChange?.(e,{routingType:o,conditions:l}),a(!1)},w=t.conditions&&t.conditions.length>0;return s.jsxs(s.Fragment,{children:[s.jsxs(K,{className:"min-w-[200px] shadow-lg border-2 hover:border-primary/20 transition-colors bg-black text-white relative group",children:[t.showDeleteButton&&s.jsx(z,{variant:"ghost",size:"sm",onClick:m,className:"absolute -top-2 -right-2 h-6 w-6 p-0 bg-destructive text-destructive-foreground opacity-100 transition-opacity rounded-full shadow-md hover:bg-destructive/80",title:"Delete routing node",children:s.jsx(jt,{className:"h-3 w-3"})}),s.jsx(oe,{className:"pb-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(km,{className:"h-5 w-5 text-white"}),s.jsx(ie,{className:"text-sm font-medium text-white",children:"Routing Logic"})]}),s.jsx(fe,{variant:w?"default":"secondary",className:"text-xs bg-white text-black",children:w?"Configured":"Setup Required"})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs(z,{variant:"outline",size:"sm",className:"w-full bg-gray-800 text-white border-gray-700 hover:bg-gray-700",onClick:y=>{y.stopPropagation(),y.preventDefault(),a(!0)},onMouseDown:y=>y.stopPropagation(),children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Configure"]})}),s.jsx(Qt,{type:"target",position:Pe.Left,className:"w-3 h-3 bg-orange-500 border-2 border-white"}),s.jsx(Qt,{type:"source",position:Pe.Right,id:"default",className:"w-3 h-3 bg-orange-500 border-2 border-white",style:{top:"30%"}}),s.jsx(Qt,{type:"source",position:Pe.Right,id:"route1",className:"w-3 h-3 bg-orange-500 border-2 border-white",style:{top:"50%"}}),s.jsx(Qt,{type:"source",position:Pe.Right,id:"route2",className:"w-3 h-3 bg-orange-500 border-2 border-white",style:{top:"70%"}})]}),s.jsx(ft,{open:r,onOpenChange:a,children:s.jsxs(mt,{className:"max-w-2xl z-[9999]",style:{zIndex:9999},children:[s.jsx(gt,{children:s.jsx(xt,{children:"Configure Routing Logic"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"routingType",children:"Routing Type"}),s.jsxs(se,{value:o,onValueChange:i,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select routing type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"conditional",children:"Conditional Routing"}),s.jsx(F,{value:"content-based",children:"Content-Based Routing"}),s.jsx(F,{value:"load-balance",children:"Load Balancing"}),s.jsx(F,{value:"round-robin",children:"Round Robin"})]})]})]}),o==="conditional"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"Routing Conditions"}),s.jsx(z,{onClick:p,size:"sm",variant:"outline",children:"Add Condition"})]}),l.map((y,v)=>s.jsxs("div",{className:"grid grid-cols-5 gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Field"}),s.jsx(U,{placeholder:"Field name",value:y.field,onChange:j=>g(v,"field",j.target.value)})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Operator"}),s.jsxs(se,{value:y.operator,onValueChange:j=>g(v,"operator",j),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"equals",children:"Equals"}),s.jsx(F,{value:"contains",children:"Contains"}),s.jsx(F,{value:"starts-with",children:"Starts With"}),s.jsx(F,{value:"greater-than",children:"Greater Than"}),s.jsx(F,{value:"less-than",children:"Less Than"})]})]})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Value"}),s.jsx(U,{placeholder:"Condition value",value:y.value,onChange:j=>g(v,"value",j.target.value)})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-xs",children:"Route"}),s.jsxs(se,{value:y.route,onValueChange:j=>g(v,"route",j),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"default",children:"Default"}),s.jsx(F,{value:"route1",children:"Route 1"}),s.jsx(F,{value:"route2",children:"Route 2"})]})]})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>x(v),children:s.jsx(jt,{className:"h-3 w-3"})})]},v))]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(z,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(z,{onClick:f,children:"Save Configuration"})]})]})]})})]})},qne=({onAddNode:e})=>{const t=[{category:"BPMN Events",icon:al,nodes:[{type:"start-process",label:"Start Process",icon:So},{type:"end-process",label:"End Process",icon:e8},{type:"start-event",label:"Start Event",icon:al},{type:"end-event",label:"End Event",icon:al},{type:"intermediate-event",label:"Intermediate Event",icon:al},{type:"timer-event",label:"Timer Event",icon:t8},{type:"message-event",label:"Message Event",icon:Xs},{type:"error-event",label:"Error Event",icon:Ps}]},{category:"BPMN Activities",icon:qt,nodes:[{type:"task",label:"Task",icon:qt},{type:"service-task",label:"Service Task",icon:sn},{type:"user-task",label:"User Task",icon:_s},{type:"script-task",label:"Script Task",icon:vn},{type:"manual-task",label:"Manual Task",icon:zy},{type:"business-rule-task",label:"Business Rule Task",icon:bx},{type:"receive-task",label:"Receive Task",icon:Xs},{type:"send-task",label:"Send Task",icon:Xs}]},{category:"BPMN Gateways",icon:Fi,nodes:[{type:"exclusive-gateway",label:"Exclusive Gateway",icon:Fi},{type:"parallel-gateway",label:"Parallel Gateway",icon:Fi},{type:"inclusive-gateway",label:"Inclusive Gateway",icon:Fi},{type:"event-gateway",label:"Event Gateway",icon:Fi},{type:"complex-gateway",label:"Complex Gateway",icon:Fi}]},{category:"Mapping & Transformation",icon:wl,nodes:[{type:"field-mapping",label:"Field Mapping",icon:wl},{type:"data-transformation",label:"Data Transformation",icon:Tt},{type:"format-conversion",label:"Format Conversion",icon:wl},{type:"value-mapping",label:"Value Mapping",icon:Ts},{type:"structure-mapping",label:"Structure Mapping",icon:Lu},{type:"conditional-mapping",label:"Conditional Mapping",icon:nr},{type:"aggregation",label:"Aggregation",icon:WC},{type:"split-mapping",label:"Split Mapping",icon:nr}]},{category:"File Transformations",icon:bs,nodes:[{type:"csv-to-xml",label:"CSV to XML",icon:bs},{type:"json-to-xml",label:"JSON to XML",icon:bs},{type:"xml-to-json",label:"XML to JSON",icon:bs},{type:"excel-to-csv",label:"Excel to CSV",icon:bs},{type:"pdf-extractor",label:"PDF Extractor",icon:bs},{type:"file-splitter",label:"File Splitter",icon:nr},{type:"file-merger",label:"File Merger",icon:WC},{type:"file-validator",label:"File Validator",icon:Ln}]},{category:"Scripts & Functions",icon:vn,nodes:[{type:"javascript-script",label:"JavaScript Script",icon:vn},{type:"groovy-script",label:"Groovy Script",icon:vn},{type:"xslt-transformation",label:"XSLT Transformation",icon:vn},{type:"custom-function",label:"Custom Function",icon:sn},{type:"lookup-function",label:"Lookup Function",icon:Ts},{type:"calculation-function",label:"Calculation Function",icon:zy},{type:"validation-function",label:"Validation Function",icon:Ln},{type:"enrichment-function",label:"Enrichment Function",icon:sn}]},{category:"Flow Routing",icon:km,nodes:[{type:"content-router",label:"Content Router",icon:km},{type:"recipient-list",label:"Recipient List",icon:_s},{type:"message-filter",label:"Message Filter",icon:uc},{type:"dynamic-router",label:"Dynamic Router",icon:km},{type:"load-balancer",label:"Load Balancer",icon:nr},{type:"failover-router",label:"Failover Router",icon:Tt},{type:"multicast",label:"Multicast",icon:nr},{type:"wire-tap",label:"Wire Tap",icon:Ts}]},{category:"Security",icon:Ln,nodes:[{type:"encryption",label:"Encryption",icon:ho},{type:"decryption",label:"Decryption",icon:oi},{type:"digital-signature",label:"Digital Signature",icon:bx},{type:"authentication",label:"Authentication",icon:_s},{type:"authorization",label:"Authorization",icon:Ln},{type:"certificate-validation",label:"Certificate Validation",icon:bx},{type:"secure-transport",label:"Secure Transport",icon:ho},{type:"access-control",label:"Access Control",icon:oi}]},{category:"Adapters & Connectors",icon:kr,nodes:[{type:"http-adapter",label:"HTTP Adapter",icon:kr},{type:"ftp-adapter",label:"FTP/SFTP Adapter",icon:ik},{type:"database-adapter",label:"Database Adapter",icon:Ds},{type:"mail-adapter",label:"Mail Adapter",icon:Iu},{type:"file-adapter",label:"File Adapter",icon:bs},{type:"jms-adapter",label:"JMS Adapter",icon:Xs},{type:"soap-adapter",label:"SOAP Adapter",icon:kr},{type:"rest-adapter",label:"REST Adapter",icon:kr}]}];return s.jsxs(K,{className:"w-64 h-full",children:[s.jsx(oe,{className:"pb-3",children:s.jsx(ie,{className:"text-sm",children:"Process Steps"})}),s.jsx(re,{className:"space-y-4 overflow-y-auto max-h-[calc(100vh-200px)]",children:t.map(n=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-muted-foreground",children:[s.jsx(n.icon,{className:"h-3 w-3"}),n.category]}),s.jsx("div",{className:"grid gap-1",children:n.nodes.map(r=>s.jsxs(z,{variant:"ghost",size:"sm",className:"justify-start h-8 text-xs",onClick:()=>e(r.type,n.category),children:[s.jsx(r.icon,{className:"h-3 w-3 mr-2"}),r.label]},r.type))}),s.jsx(pt,{})]},n.category))})]})},Wne=({selectedNode:e,flowStats:t})=>{const n=a=>({"http-receiver":"HTTP Receiver","http-sender":"HTTP Sender","content-router":"Content Router","data-mapper":"Data Mapper","message-filter":"Message Filter","error-handler":"Error Handler",delay:"Delay",retry:"Retry Logic","database-adapter":"Database Adapter","mail-adapter":"Mail Adapter","ftp-adapter":"FTP Adapter",enricher:"Data Enricher",validator:"Data Validator",splitter:"Message Splitter",aggregator:"Message Aggregator",conditional:"Conditional Logic",translator:"Data Translator","circuit-breaker":"Circuit Breaker","dead-letter":"Dead Letter Queue",start:"Start Node",stop:"Stop Node"})[a]||a,r=a=>{switch(a){case"Low":return"bg-green-100 text-success";case"Medium":return"bg-yellow-100 text-warning";case"High":return"bg-red-100 text-destructive";default:return"bg-gray-100 text-muted-foreground"}};return s.jsxs("div",{className:"w-64 space-y-4",children:[s.jsxs(K,{children:[s.jsx(oe,{className:"pb-3",children:s.jsxs(ie,{className:"text-sm flex items-center gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),"Properties"]})}),s.jsx(re,{className:"space-y-3",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium",children:"Node Type"}),s.jsx(fe,{variant:"secondary",className:"text-xs",children:n(e.type||"unknown")})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium",children:"Node ID"}),s.jsx("div",{className:"text-xs text-muted-foreground font-mono",children:e.id})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium",children:"Position"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["X: ",Math.round(e.position.x),", Y: ",Math.round(e.position.y)]})]}),e.data&&Object.keys(e.data).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium",children:"Configuration"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.data.configured?s.jsx(fe,{variant:"default",className:"text-xs",children:"Configured"}):s.jsx(fe,{variant:"outline",className:"text-xs",children:"Not Configured"})})]})]}):s.jsx("div",{className:"text-xs text-muted-foreground text-center py-4",children:"Select a node to view properties"})})]}),s.jsxs(K,{children:[s.jsx(oe,{className:"pb-3",children:s.jsxs(ie,{className:"text-sm flex items-center gap-2",children:[s.jsx(ds,{className:"h-4 w-4"}),"Flow Status"]})}),s.jsxs(re,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Nodes"}),s.jsx("div",{className:"text-sm font-semibold",children:t.totalNodes})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:"Connections"}),s.jsx("div",{className:"text-sm font-semibold",children:t.totalConnections})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-3 w-3"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Est. Execution"})]}),s.jsx("div",{className:"text-xs font-medium",children:t.estimatedExecutionTime})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-3 w-3"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"})]}),s.jsx(fe,{className:`text-xs ${r(t.complexity)}`,children:t.complexity})]})]})]})]})},zne={"start-process":Une,"end-process":Rs,"start-event":Rs,"end-event":Rs,"intermediate-event":Rs,"timer-event":Rs,"message-event":Rs,"error-event":Rs,task:tt,"service-task":tt,"user-task":tt,"script-task":tt,"manual-task":tt,"business-rule-task":tt,"receive-task":tt,"send-task":tt,"exclusive-gateway":mn,"parallel-gateway":mn,"inclusive-gateway":mn,"event-gateway":mn,"complex-gateway":mn,"field-mapping":tt,"data-transformation":tt,"format-conversion":tt,"value-mapping":tt,"structure-mapping":tt,"conditional-mapping":tt,aggregation:tt,"split-mapping":tt,"csv-to-xml":tt,"json-to-xml":tt,"xml-to-json":tt,"excel-to-csv":tt,"pdf-extractor":tt,"file-splitter":tt,"file-merger":tt,"file-validator":tt,"javascript-script":tt,"groovy-script":tt,"xslt-transformation":tt,"custom-function":tt,"lookup-function":tt,"calculation-function":tt,"validation-function":tt,"enrichment-function":tt,"content-router":mn,"recipient-list":mn,"message-filter":mn,"dynamic-router":mn,"load-balancer":mn,"failover-router":mn,multicast:mn,"wire-tap":mn,encryption:tt,decryption:tt,"digital-signature":tt,authentication:tt,authorization:tt,"certificate-validation":tt,"secure-transport":tt,"access-control":tt,"http-adapter":Rs,"ftp-adapter":Rs,"database-adapter":Rs,"mail-adapter":Rs,"file-adapter":Rs,"jms-adapter":Rs,"soap-adapter":Rs,"rest-adapter":Rs},Xne=()=>[{id:"start-process-1",type:"start-process",position:{x:100,y:200},data:{senderComponent:"",sourceAdapter:"",isAsync:!0,configured:!1,showDeleteButton:!1,onConfigChange:()=>{}}},{id:"end-process-1",type:"end-process",position:{x:500,y:200},data:{adapterType:"end-process",configured:!1,showDeleteButton:!1,onConfigChange:()=>{}}}],Yne=()=>[{id:"start-to-end",source:"start-process-1",target:"end-process-1",type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}}];function Kne({flowId:e,onFlowChange:t}){const[n,r,a]=kI(Xne()),[o,i,l]=MI(Yne()),[c,d]=h.useState(null),[u,m]=h.useState(null),p=h.useMemo(()=>n.filter(y=>y.selected).map(y=>y.id),[n]);h.useEffect(()=>{if(t){const y=n.map(v=>({id:v.id,type:v.type,position:v.position,data:v.data}));t({steps:y})}},[n,o,t]);const g=h.useCallback(y=>{const v={...y,type:"smoothstep",animated:!0,style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:ar.ArrowClosed,color:"hsl(var(--primary))"}};i(j=>Qp(v,j))},[i]),x=h.useCallback((y,v)=>{console.log("[VisualOrchestrationEditor] Node clicked:",{nodeId:v.id,nodeType:v.type}),d(v),m(v.id),setTimeout(()=>m(null),3e3)},[]),f=h.useCallback((y,v)=>{console.log("[VisualOrchestrationEditor] Adding new node:",{type:y,category:v});const j=`${y}-${Date.now()}`,N={id:j,type:y,position:{x:Math.random()*400+200,y:Math.random()*300+150},data:{adapterType:y,transformationType:y,routingType:y,configured:!1,showDeleteButton:!1,onConfigChange:b=>{console.log("[VisualOrchestrationEditor] Node config changed:",{nodeId:j,config:b}),r(E=>E.map(S=>S.id===j?{...S,data:{...S.data,...b,configured:!0}}:S))}}};console.log("[VisualOrchestrationEditor] Created new node:",N),r(b=>{const E=b.concat(N);return console.log("[VisualOrchestrationEditor] Updated nodes list:",E),E})},[r]);h.useCallback(()=>{r(y=>y.filter(v=>!v.selected)),i(y=>y.filter(v=>!p.includes(v.source)&&!p.includes(v.target)))},[p,r,i]);const w=h.useMemo(()=>{const y=n.length,v=o.length;let j="Low";y>10||v>15?j="High":(y>5||v>8)&&(j="Medium");const N=y*100+v*50,b=N<1e3?`${N}ms`:`${(N/1e3).toFixed(1)}s`;return{totalNodes:y,totalConnections:v,estimatedExecutionTime:b,complexity:j}},[n,o]);return s.jsxs("div",{className:"h-full w-full flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(qne,{onAddNode:f})}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(DI,{nodes:n.map(y=>({...y,data:{...y.data,showDeleteButton:u===y.id}})),edges:o,onNodesChange:a,onEdgesChange:l,onConnect:g,onNodeClick:x,nodeTypes:zne,fitView:!0,deleteKeyCode:"Delete",multiSelectionKeyCode:"Control",className:"bg-background",children:[s.jsx(II,{showInteractive:!1}),s.jsx($I,{}),s.jsx(FI,{variant:da.Dots,gap:12,size:1})]})}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Wne,{selectedNode:c,flowStats:w})})]})}function Gne(){as();const{navigateBack:e}=Sc(),{toast:t}=_e(),{user:n}=Kr(),[r,a]=h.useState(!0),[o,i]=h.useState(""),[l,c]=h.useState(""),[d,u]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(""),[f,w]=h.useState(""),[y,v]=h.useState(""),[j,N]=h.useState([]),[b,E]=h.useState([]),[S,P]=h.useState([]),[A,L]=h.useState(!0),[R,I]=h.useState(!1);h.useState(!1),RO(()=>{i(""),c(""),u(""),p(""),x(""),w(""),v(""),a(!0)}),h.useEffect(()=>{O()},[]);const O=async()=>{try{L(!0);const T=await Rr.getAllBusinessComponents();T.success&&T.data&&E(T.data);try{const D=await G.get("/adapters");D.data&&P(D.data)}catch(D){console.warn("Could not load adapters:",D),P([])}}catch(T){console.error("Error loading component data:",T),t({title:"Error",description:"Failed to load component data. Some features may not work properly.",variant:"destructive"})}finally{L(!1)}},k=async()=>{if(!l.trim()){t({title:"Validation Error",description:"Unique Flow ID is required.",variant:"destructive"});return}try{I(!0);const T={flowId:l.trim(),flowName:l.trim(),description:d.trim()||`Orchestration flow with ID: ${l.trim()}`,sourceBusinessComponentId:m||null,targetBusinessComponentId:g||null,sourceAdapterId:f||null,targetAdapterId:y||null,orchestrationSteps:j,createdBy:n?.id||n?.username||"unknown"};(await G.post("/flow-composition/orchestration",T)).data&&(t({title:"Success",description:`Orchestration flow "${l}" has been created successfully.`}),e("/dashboard"))}catch(T){console.error("Error saving orchestration flow:",T),t({title:"Save Failed",description:T.response?.data?.message||"Failed to save the orchestration flow. Please try again.",variant:"destructive"})}finally{I(!1)}};return r?s.jsxs("div",{className:"h-screen bg-background overflow-hidden",children:[s.jsxs("div",{className:"h-24 border-b border-border px-6 flex flex-col justify-center space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>e("/dashboard"),className:"gap-2",children:[s.jsx(Hy,{className:"h-4 w-4"}),"Back to Dashboard"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Visual Orchestration Editor"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Design complex workflows with multiple systems, routing, and business logic"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:k,disabled:R||!l.trim(),className:"flex items-center gap-2",children:[R?s.jsx(vt,{className:"h-4 w-4 animate-spin"}):s.jsx(tn,{className:"h-4 w-4"}),"Save Flow"]}),s.jsxs(z,{variant:"outline",onClick:()=>e("/dashboard"),className:"flex items-center gap-2",children:[s.jsx(jt,{className:"h-4 w-4"}),"Cancel"]})]}),s.jsxs(We,{className:"max-w-md",children:[s.jsx(OB,{className:"h-4 w-4"}),s.jsx(ze,{className:"text-xs",children:"The Visual Orchestration Flow Editor is currently under development. This includes drag-and-drop workflow design, message routing, and error handling capabilities."})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 max-w-md",children:[s.jsx(C,{htmlFor:"uniqueFlowId",className:"text-sm font-medium whitespace-nowrap",children:"Unique Flow ID:"}),s.jsx(U,{id:"uniqueFlowId",placeholder:"Enter unique orchestration flow ID",value:l,onChange:T=>c(T.target.value),className:"flex-1"})]})]}),s.jsx("div",{className:"h-[calc(100vh-96px)]",children:s.jsx(Kne,{flowId:l,onFlowChange:T=>{N(T.steps||[])}})})]}):null}var XE=1,Jne=.9,Qne=.8,Zne=.17,sv=.1,nv=.999,ere=.9999,tre=.99,sre=/[\\\/_+.#"@\[\(\{&]/,nre=/[\\\/_+.#"@\[\(\{&]/g,rre=/[\s-]/,jL=/[\s-]/g;function $j(e,t,n,r,a,o,i){if(o===t.length)return a===e.length?XE:tre;var l=`${a},${o}`;if(i[l]!==void 0)return i[l];for(var c=r.charAt(o),d=n.indexOf(c,a),u=0,m,p,g,x;d>=0;)m=$j(e,t,n,r,d+1,o+1,i),m>u&&(d===a?m*=XE:sre.test(e.charAt(d-1))?(m*=Qne,g=e.slice(a,d-1).match(nre),g&&a>0&&(m*=Math.pow(nv,g.length))):rre.test(e.charAt(d-1))?(m*=Jne,x=e.slice(a,d-1).match(jL),x&&a>0&&(m*=Math.pow(nv,x.length))):(m*=Zne,a>0&&(m*=Math.pow(nv,d-a))),e.charAt(d)!==t.charAt(o)&&(m*=ere)),(m<sv&&n.charAt(d-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(d-1)!==r.charAt(o))&&(p=$j(e,t,n,r,d+1,o+2,i),p*sv>m&&(m=p*sv)),m>u&&(u=m),d=n.indexOf(c,d+1);return i[l]=u,u}function YE(e){return e.toLowerCase().replace(jL," ")}function are(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,$j(e,t,YE(e),YE(t),0,0,{})}function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(null,arguments)}function Dl(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function ore(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function wL(...e){return t=>e.forEach(n=>ore(n,t))}function hh(...e){return h.useCallback(wL(...e),e)}function ire(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];function d(m){const{scope:p,children:g,...x}=m,f=p?.[e][c]||l,w=h.useMemo(()=>x,Object.values(x));return h.createElement(f.Provider,{value:w},g)}function u(m,p){const g=p?.[e][c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,lre(a,...t)]}function lre(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}const _j=globalThis?.document?h.useLayoutEffect:()=>{},cre=Au.useId||(()=>{});let dre=0;function rv(e){const[t,n]=h.useState(cre());return _j(()=>{e||n(r=>r??String(dre++))},[e]),e||(t?`radix-${t}`:"")}function gi(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function ure({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=hre({defaultProp:t,onChange:n}),o=e!==void 0,i=o?e:r,l=gi(n),c=h.useCallback(d=>{if(o){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[o,e,a,l]);return[i,c]}function hre({defaultProp:e,onChange:t}){const n=h.useState(e),[r]=n,a=h.useRef(r),o=gi(t);return h.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}const ab=h.forwardRef((e,t)=>{const{children:n,...r}=e,a=h.Children.toArray(n),o=a.find(pre);if(o){const i=o.props.children,l=a.map(c=>c===o?h.Children.count(i)>1?h.Children.only(null):h.isValidElement(i)?i.props.children:null:c);return h.createElement(Vj,Vs({},r,{ref:t}),h.isValidElement(i)?h.cloneElement(i,void 0,l):null)}return h.createElement(Vj,Vs({},r,{ref:t}),n)});ab.displayName="Slot";const Vj=h.forwardRef((e,t)=>{const{children:n,...r}=e;return h.isValidElement(n)?h.cloneElement(n,{...fre(r,n.props),ref:t?wL(t,n.ref):n.ref}):h.Children.count(n)>1?h.Children.only(null):null});Vj.displayName="SlotClone";const mre=({children:e})=>h.createElement(h.Fragment,null,e);function pre(e){return h.isValidElement(e)&&e.type===mre}function fre(e,t){const n={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...l)=>{o(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}const gre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kn=gre.reduce((e,t)=>{const n=h.forwardRef((r,a)=>{const{asChild:o,...i}=r,l=o?ab:t;return h.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),h.createElement(l,Vs({},i,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function xre(e,t){e&&jr.flushSync(()=>e.dispatchEvent(t))}function vre(e,t=globalThis?.document){const n=gi(e);h.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Uj="dismissableLayer.update",yre="dismissableLayer.pointerDownOutside",jre="dismissableLayer.focusOutside";let KE;const wre=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nre=h.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:l,onDismiss:c,...d}=e,u=h.useContext(wre),[m,p]=h.useState(null),g=(n=m?.ownerDocument)!==null&&n!==void 0?n:globalThis?.document,[,x]=h.useState({}),f=hh(t,P=>p(P)),w=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(y),j=m?w.indexOf(m):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,b=j>=v,E=bre(P=>{const A=P.target,L=[...u.branches].some(R=>R.contains(A));!b||L||(o?.(P),l?.(P),P.defaultPrevented||c?.())},g),S=Sre(P=>{const A=P.target;[...u.branches].some(R=>R.contains(A))||(i?.(P),l?.(P),P.defaultPrevented||c?.())},g);return vre(P=>{j===u.layers.size-1&&(a?.(P),!P.defaultPrevented&&c&&(P.preventDefault(),c()))},g),h.useEffect(()=>{if(m)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(KE=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),GE(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=KE)}},[m,g,r,u]),h.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),GE())},[m,u]),h.useEffect(()=>{const P=()=>x({});return document.addEventListener(Uj,P),()=>document.removeEventListener(Uj,P)},[]),h.createElement(Kn.div,Vs({},d,{ref:f,style:{pointerEvents:N?b?"auto":"none":void 0,...e.style},onFocusCapture:Dl(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Dl(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Dl(e.onPointerDownCapture,E.onPointerDownCapture)}))});function bre(e,t=globalThis?.document){const n=gi(e),r=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){NL(yre,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Sre(e,t=globalThis?.document){const n=gi(e),r=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!r.current&&NL(jre,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function GE(){const e=new CustomEvent(Uj);document.dispatchEvent(e)}function NL(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?xre(a,o):a.dispatchEvent(o)}const av="focusScope.autoFocusOnMount",ov="focusScope.autoFocusOnUnmount",JE={bubbles:!1,cancelable:!0},Cre=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=gi(a),u=gi(o),m=h.useRef(null),p=hh(t,f=>c(f)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let v=function(E){if(g.paused||!l)return;const S=E.target;l.contains(S)?m.current=S:_a(m.current,{select:!0})},j=function(E){if(g.paused||!l)return;const S=E.relatedTarget;S!==null&&(l.contains(S)||_a(m.current,{select:!0}))},N=function(E){if(document.activeElement===document.body)for(const P of E)P.removedNodes.length>0&&_a(l)};var f=v,w=j,y=N;document.addEventListener("focusin",v),document.addEventListener("focusout",j);const b=new MutationObserver(N);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",j),b.disconnect()}}},[r,l,g.paused]),h.useEffect(()=>{if(l){ZE.add(g);const f=document.activeElement;if(!l.contains(f)){const y=new CustomEvent(av,JE);l.addEventListener(av,d),l.dispatchEvent(y),y.defaultPrevented||(Ere(kre(bL(l)),{select:!0}),document.activeElement===f&&_a(l))}return()=>{l.removeEventListener(av,d),setTimeout(()=>{const y=new CustomEvent(ov,JE);l.addEventListener(ov,u),l.dispatchEvent(y),y.defaultPrevented||_a(f??document.body,{select:!0}),l.removeEventListener(ov,u),ZE.remove(g)},0)}}},[l,d,u,g]);const x=h.useCallback(f=>{if(!n&&!r||g.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,y=document.activeElement;if(w&&y){const v=f.currentTarget,[j,N]=Tre(v);j&&N?!f.shiftKey&&y===N?(f.preventDefault(),n&&_a(j,{select:!0})):f.shiftKey&&y===j&&(f.preventDefault(),n&&_a(N,{select:!0})):y===v&&f.preventDefault()}},[n,r,g.paused]);return h.createElement(Kn.div,Vs({tabIndex:-1},i,{ref:p,onKeyDown:x}))});function Ere(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(_a(r,{select:t}),document.activeElement!==n)return}function Tre(e){const t=bL(e),n=QE(t,e),r=QE(t.reverse(),e);return[n,r]}function bL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function QE(e,t){for(const n of e)if(!Pre(n,{upTo:t}))return n}function Pre(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Are(e){return e instanceof HTMLInputElement&&"select"in e}function _a(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Are(e)&&t&&e.select()}}const ZE=Dre();function Dre(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=eT(e,t),e.unshift(t)},remove(t){var n;e=eT(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function eT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function kre(e){return e.filter(t=>t.tagName!=="A")}const Mre=h.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...a}=e;return r?T0.createPortal(h.createElement(Kn.div,Vs({},a,{ref:t})),r):null});function Rre(e,t){return h.useReducer((n,r)=>{const a=t[n][r];return a??n},e)}const Dg=e=>{const{present:t,children:n}=e,r=Fre(t),a=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),o=hh(r.ref,a.ref);return typeof n=="function"||r.isPresent?h.cloneElement(a,{ref:o}):null};Dg.displayName="Presence";function Fre(e){const[t,n]=h.useState(),r=h.useRef({}),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=Rre(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=sm(r.current);o.current=l==="mounted"?d:"none"},[l]),_j(()=>{const d=r.current,u=a.current;if(u!==e){const p=o.current,g=sm(d);e?c("MOUNT"):g==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),_j(()=>{if(t){const d=m=>{const g=sm(r.current).includes(m.animationName);m.target===t&&g&&jr.flushSync(()=>c("ANIMATION_END"))},u=m=>{m.target===t&&(o.current=sm(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function sm(e){return e?.animationName||"none"}let iv=0;function Ore(){h.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:tT()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:tT()),iv++,()=>{iv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),iv--}},[])}function tT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var SL=lN(),lv=function(){},kg=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:lv,onWheelCapture:lv,onTouchMoveCapture:lv}),a=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,p=e.sideCar,g=e.noIsolation,x=e.inert,f=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,v=ng(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),j=p,N=iN([n,t]),b=Kt(Kt({},v),a);return h.createElement(h.Fragment,null,u&&h.createElement(j,{sideCar:SL,removeScrollBar:d,shards:m,noIsolation:g,inert:x,setCallbacks:o,allowPinchZoom:!!f,lockRef:n}),i?h.cloneElement(h.Children.only(l),Kt(Kt({},b),{ref:N})):h.createElement(y,Kt({},b,{className:c,ref:N}),l))});kg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kg.classNames={fullWidth:Cl,zeroRight:Sl};var Bj=!1;if(typeof window<"u")try{var nm=Object.defineProperty({},"passive",{get:function(){return Bj=!0,!0}});window.addEventListener("test",nm,nm),window.removeEventListener("test",nm,nm)}catch{Bj=!1}var _i=Bj?{passive:!1}:!1,Ire=function(e){return e.tagName==="TEXTAREA"},CL=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ire(e)&&n[t]==="visible")},Lre=function(e){return CL(e,"overflowY")},$re=function(e){return CL(e,"overflowX")},sT=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=EL(e,n);if(r){var a=TL(e,n),o=a[1],i=a[2];if(o>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},_re=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Vre=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},EL=function(e,t){return e==="v"?Lre(t):$re(t)},TL=function(e,t){return e==="v"?_re(t):Vre(t)},Ure=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bre=function(e,t,n,r,a){var o=Ure(e,window.getComputedStyle(t).direction),i=o*r,l=n.target,c=t.contains(l),d=!1,u=i>0,m=0,p=0;do{var g=TL(e,l),x=g[0],f=g[1],w=g[2],y=f-w-o*x;(x||y)&&EL(e,l)&&(m+=y,p+=x),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(m===0||!a)||!u&&(p===0||!a))&&(d=!0),d},rm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nT=function(e){return[e.deltaX,e.deltaY]},rT=function(e){return e&&"current"in e?e.current:e},Hre=function(e,t){return e[0]===t[0]&&e[1]===t[1]},qre=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wre=0,Vi=[];function zre(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),a=h.useState(Wre++)[0],o=h.useState(function(){return ag()})[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=oN([e.lockRef.current],(e.shards||[]).map(rT),!0).filter(Boolean);return f.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(f,w){if("touches"in f&&f.touches.length===2)return!i.current.allowPinchZoom;var y=rm(f),v=n.current,j="deltaX"in f?f.deltaX:v[0]-y[0],N="deltaY"in f?f.deltaY:v[1]-y[1],b,E=f.target,S=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in f&&S==="h"&&E.type==="range")return!1;var P=sT(S,E);if(!P)return!0;if(P?b=S:(b=S==="v"?"h":"v",P=sT(S,E)),!P)return!1;if(!r.current&&"changedTouches"in f&&(j||N)&&(r.current=b),!b)return!0;var A=r.current||b;return Bre(A,w,f,A==="h"?j:N,!0)},[]),c=h.useCallback(function(f){var w=f;if(!(!Vi.length||Vi[Vi.length-1]!==o)){var y="deltaY"in w?nT(w):rm(w),v=t.current.filter(function(b){return b.name===w.type&&b.target===w.target&&Hre(b.delta,y)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var j=(i.current.shards||[]).map(rT).filter(Boolean).filter(function(b){return b.contains(w.target)}),N=j.length>0?l(w,j[0]):!i.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(f,w,y,v){var j={name:f,delta:w,target:y,should:v};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),u=h.useCallback(function(f){n.current=rm(f),r.current=void 0},[]),m=h.useCallback(function(f){d(f.type,nT(f),f.target,l(f,e.lockRef.current))},[]),p=h.useCallback(function(f){d(f.type,rm(f),f.target,l(f,e.lockRef.current))},[]);h.useEffect(function(){return Vi.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,_i),document.addEventListener("touchmove",c,_i),document.addEventListener("touchstart",u,_i),function(){Vi=Vi.filter(function(f){return f!==o}),document.removeEventListener("wheel",c,_i),document.removeEventListener("touchmove",c,_i),document.removeEventListener("touchstart",u,_i)}},[]);var g=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(o,{styles:qre(a)}):null,g?h.createElement(dN,{gapMode:"margin"}):null)}const Xre=cN(SL,zre);var PL=h.forwardRef(function(e,t){return h.createElement(kg,Kt({},e,{ref:t,sideCar:Xre}))});PL.classNames=kg.classNames;const AL="Dialog",[DL,nye]=ire(AL),[Yre,Ai]=DL(AL),Kre=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=h.useRef(null),c=h.useRef(null),[d=!1,u]=ure({prop:r,defaultProp:a,onChange:o});return h.createElement(Yre,{scope:t,triggerRef:l,contentRef:c,contentId:rv(),titleId:rv(),descriptionId:rv(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(m=>!m),[u]),modal:i},n)},kL="DialogPortal",[Gre,ML]=DL(kL,{forceMount:void 0}),Jre=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,o=Ai(kL,t);return h.createElement(Gre,{scope:t,forceMount:n},h.Children.map(r,i=>h.createElement(Dg,{present:n||o.open},h.createElement(Mre,{asChild:!0,container:a},i))))},Hj="DialogOverlay",Qre=h.forwardRef((e,t)=>{const n=ML(Hj,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Ai(Hj,e.__scopeDialog);return o.modal?h.createElement(Dg,{present:r||o.open},h.createElement(Zre,Vs({},a,{ref:t}))):null}),Zre=h.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ai(Hj,n);return h.createElement(PL,{as:ab,allowPinchZoom:!0,shards:[a.contentRef]},h.createElement(Kn.div,Vs({"data-state":FL(a.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),xu="DialogContent",eae=h.forwardRef((e,t)=>{const n=ML(xu,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=Ai(xu,e.__scopeDialog);return h.createElement(Dg,{present:r||o.open},o.modal?h.createElement(tae,Vs({},a,{ref:t})):h.createElement(sae,Vs({},a,{ref:t})))}),tae=h.forwardRef((e,t)=>{const n=Ai(xu,e.__scopeDialog),r=h.useRef(null),a=hh(t,n.contentRef,r);return h.useEffect(()=>{const o=r.current;if(o)return qu(o)},[]),h.createElement(RL,Vs({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dl(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:Dl(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Dl(e.onFocusOutside,o=>o.preventDefault())}))}),sae=h.forwardRef((e,t)=>{const n=Ai(xu,e.__scopeDialog),r=h.useRef(!1),a=h.useRef(!1);return h.createElement(RL,Vs({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,o),!o.defaultPrevented){var l;r.current||(l=n.triggerRef.current)===null||l===void 0||l.focus(),o.preventDefault()}r.current=!1,a.current=!1},onInteractOutside:o=>{var i,l;(i=e.onInteractOutside)===null||i===void 0||i.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((l=n.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}}))}),RL=h.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Ai(xu,n),c=h.useRef(null),d=hh(t,c);return Ore(),h.createElement(h.Fragment,null,h.createElement(Cre,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o},h.createElement(Nre,Vs({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":FL(l.open)},i,{ref:d,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function FL(e){return e?"open":"closed"}const nae=Kre,rae=Jre,aae=Qre,oae=eae;var Zc='[cmdk-group=""]',cv='[cmdk-group-items=""]',iae='[cmdk-group-heading=""]',ob='[cmdk-item=""]',aT=`${ob}:not([aria-disabled="true"])`,qj="cmdk-item-select",$o="data-value",lae=(e,t,n)=>are(e,t,n),OL=h.createContext(void 0),mh=()=>h.useContext(OL),IL=h.createContext(void 0),ib=()=>h.useContext(IL),LL=h.createContext(void 0),$L=h.forwardRef((e,t)=>{let n=zi(()=>{var B,W;return{search:"",value:(W=(B=e.value)!=null?B:e.defaultValue)!=null?W:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=zi(()=>new Set),a=zi(()=>new Map),o=zi(()=>new Map),i=zi(()=>new Set),l=_L(e),{label:c,children:d,value:u,onValueChange:m,filter:p,shouldFilter:g,loop:x,disablePointerSelection:f=!1,vimBindings:w=!0,...y}=e,v=h.useId(),j=h.useId(),N=h.useId(),b=h.useRef(null),E=yae();xi(()=>{if(u!==void 0){let B=u.trim();n.current.value=B,S.emit()}},[u]),xi(()=>{E(6,V)},[]);let S=h.useMemo(()=>({subscribe:B=>(i.current.add(B),()=>i.current.delete(B)),snapshot:()=>n.current,setState:(B,W,q)=>{var Y,pe,J;if(!Object.is(n.current[B],W)){if(n.current[B]=W,B==="search")I(),L(),E(1,R);else if(B==="value"&&(q||E(5,V),((Y=l.current)==null?void 0:Y.value)!==void 0)){let ge=W??"";(J=(pe=l.current).onValueChange)==null||J.call(pe,ge);return}S.emit()}},emit:()=>{i.current.forEach(B=>B())}}),[]),P=h.useMemo(()=>({value:(B,W,q)=>{var Y;W!==((Y=o.current.get(B))==null?void 0:Y.value)&&(o.current.set(B,{value:W,keywords:q}),n.current.filtered.items.set(B,A(W,q)),E(2,()=>{L(),S.emit()}))},item:(B,W)=>(r.current.add(B),W&&(a.current.has(W)?a.current.get(W).add(B):a.current.set(W,new Set([B]))),E(3,()=>{I(),L(),n.current.value||R(),S.emit()}),()=>{o.current.delete(B),r.current.delete(B),n.current.filtered.items.delete(B);let q=O();E(4,()=>{I(),q?.getAttribute("id")===B&&R(),S.emit()})}),group:B=>(a.current.has(B)||a.current.set(B,new Set),()=>{o.current.delete(B),a.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:f,listId:v,inputId:N,labelId:j,listInnerRef:b}),[]);function A(B,W){var q,Y;let pe=(Y=(q=l.current)==null?void 0:q.filter)!=null?Y:lae;return B?pe(B,n.current.search,W):0}function L(){if(!n.current.search||l.current.shouldFilter===!1)return;let B=n.current.filtered.items,W=[];n.current.filtered.groups.forEach(Y=>{let pe=a.current.get(Y),J=0;pe.forEach(ge=>{let Q=B.get(ge);J=Math.max(Q,J)}),W.push([Y,J])});let q=b.current;k().sort((Y,pe)=>{var J,ge;let Q=Y.getAttribute("id"),he=pe.getAttribute("id");return((J=B.get(he))!=null?J:0)-((ge=B.get(Q))!=null?ge:0)}).forEach(Y=>{let pe=Y.closest(cv);pe?pe.appendChild(Y.parentElement===pe?Y:Y.closest(`${cv} > *`)):q.appendChild(Y.parentElement===q?Y:Y.closest(`${cv} > *`))}),W.sort((Y,pe)=>pe[1]-Y[1]).forEach(Y=>{let pe=b.current.querySelector(`${Zc}[${$o}="${encodeURIComponent(Y[0])}"]`);pe?.parentElement.appendChild(pe)})}function R(){let B=k().find(q=>q.getAttribute("aria-disabled")!=="true"),W=B?.getAttribute($o);S.setState("value",W||void 0)}function I(){var B,W,q,Y;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let pe=0;for(let J of r.current){let ge=(W=(B=o.current.get(J))==null?void 0:B.value)!=null?W:"",Q=(Y=(q=o.current.get(J))==null?void 0:q.keywords)!=null?Y:[],he=A(ge,Q);n.current.filtered.items.set(J,he),he>0&&pe++}for(let[J,ge]of a.current)for(let Q of ge)if(n.current.filtered.items.get(Q)>0){n.current.filtered.groups.add(J);break}n.current.filtered.count=pe}function V(){var B,W,q;let Y=O();Y&&(((B=Y.parentElement)==null?void 0:B.firstChild)===Y&&((q=(W=Y.closest(Zc))==null?void 0:W.querySelector(iae))==null||q.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function O(){var B;return(B=b.current)==null?void 0:B.querySelector(`${ob}[aria-selected="true"]`)}function k(){var B;return Array.from((B=b.current)==null?void 0:B.querySelectorAll(aT))}function T(B){let W=k()[B];W&&S.setState("value",W.getAttribute($o))}function D(B){var W;let q=O(),Y=k(),pe=Y.findIndex(ge=>ge===q),J=Y[pe+B];(W=l.current)!=null&&W.loop&&(J=pe+B<0?Y[Y.length-1]:pe+B===Y.length?Y[0]:Y[pe+B]),J&&S.setState("value",J.getAttribute($o))}function M(B){let W=O(),q=W?.closest(Zc),Y;for(;q&&!Y;)q=B>0?xae(q,Zc):vae(q,Zc),Y=q?.querySelector(aT);Y?S.setState("value",Y.getAttribute($o)):D(B)}let _=()=>T(k().length-1),H=B=>{B.preventDefault(),B.metaKey?_():B.altKey?M(1):D(1)},$=B=>{B.preventDefault(),B.metaKey?T(0):B.altKey?M(-1):D(-1)};return h.createElement(Kn.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:B=>{var W;if((W=y.onKeyDown)==null||W.call(y,B),!B.defaultPrevented)switch(B.key){case"n":case"j":{w&&B.ctrlKey&&H(B);break}case"ArrowDown":{H(B);break}case"p":case"k":{w&&B.ctrlKey&&$(B);break}case"ArrowUp":{$(B);break}case"Home":{B.preventDefault(),T(0);break}case"End":{B.preventDefault(),_();break}case"Enter":if(!B.nativeEvent.isComposing&&B.keyCode!==229){B.preventDefault();let q=O();if(q){let Y=new Event(qj);q.dispatchEvent(Y)}}}}},h.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:wae},c),Mg(e,B=>h.createElement(IL.Provider,{value:S},h.createElement(OL.Provider,{value:P},B))))}),cae=h.forwardRef((e,t)=>{var n,r;let a=h.useId(),o=h.useRef(null),i=h.useContext(LL),l=mh(),c=_L(e),d=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i?.forceMount;xi(()=>{if(!d)return l.item(a,i?.id)},[d]);let u=VL(a,o,[e.value,e.children,o],e.keywords),m=ib(),p=vi(E=>E.value&&E.value===u.current),g=vi(E=>d||l.filter()===!1?!0:E.search?E.filtered.items.get(a)>0:!0);h.useEffect(()=>{let E=o.current;if(!(!E||e.disabled))return E.addEventListener(qj,x),()=>E.removeEventListener(qj,x)},[g,e.onSelect,e.disabled]);function x(){var E,S;f(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function f(){m.setState("value",u.current,!0)}if(!g)return null;let{disabled:w,value:y,onSelect:v,forceMount:j,keywords:N,...b}=e;return h.createElement(Kn.div,{ref:vu([o,t]),...b,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!p,"data-disabled":!!w,"data-selected":!!p,onPointerMove:w||l.disablePointerSelection?void 0:f,onClick:w?void 0:x},e.children)}),dae=h.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...o}=e,i=h.useId(),l=h.useRef(null),c=h.useRef(null),d=h.useId(),u=mh(),m=vi(g=>a||u.filter()===!1?!0:g.search?g.filtered.groups.has(i):!0);xi(()=>u.group(i),[]),VL(i,l,[e.value,e.heading,c]);let p=h.useMemo(()=>({id:i,forceMount:a}),[a]);return h.createElement(Kn.div,{ref:vu([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&h.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),Mg(e,g=>h.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},h.createElement(LL.Provider,{value:p},g))))}),uae=h.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=h.useRef(null),o=vi(i=>!i.search);return!n&&!o?null:h.createElement(Kn.div,{ref:vu([a,t]),...r,"cmdk-separator":"",role:"separator"})}),hae=h.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,o=ib(),i=vi(u=>u.search),l=vi(u=>u.value),c=mh(),d=h.useMemo(()=>{var u;let m=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${ob}[${$o}="${encodeURIComponent(l)}"]`);return m?.getAttribute("id")},[]);return h.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),h.createElement(Kn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:a?e.value:i,onChange:u=>{a||o.setState("search",u.target.value),n?.(u.target.value)}})}),mae=h.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,o=h.useRef(null),i=h.useRef(null),l=mh();return h.useEffect(()=>{if(i.current&&o.current){let c=i.current,d=o.current,u,m=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let p=c.offsetHeight;d.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(c),()=>{cancelAnimationFrame(u),m.unobserve(c)}}},[]),h.createElement(Kn.div,{ref:vu([o,t]),...a,"cmdk-list":"",role:"listbox","aria-label":r,id:l.listId},Mg(e,c=>h.createElement("div",{ref:vu([i,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),pae=h.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:o,container:i,...l}=e;return h.createElement(nae,{open:n,onOpenChange:r},h.createElement(rae,{container:i},h.createElement(aae,{"cmdk-overlay":"",className:a}),h.createElement(oae,{"aria-label":e.label,"cmdk-dialog":"",className:o},h.createElement($L,{ref:t,...l}))))}),fae=h.forwardRef((e,t)=>vi(n=>n.filtered.count===0)?h.createElement(Kn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),gae=h.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...o}=e;return h.createElement(Kn.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Mg(e,i=>h.createElement("div",{"aria-hidden":!0},i)))}),cn=Object.assign($L,{List:mae,Item:cae,Input:hae,Group:dae,Separator:uae,Dialog:pae,Empty:fae,Loading:gae});function xae(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function vae(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function _L(e){let t=h.useRef(e);return xi(()=>{t.current=e}),t}var xi=typeof window>"u"?h.useEffect:h.useLayoutEffect;function zi(e){let t=h.useRef();return t.current===void 0&&(t.current=e()),t}function vu(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function vi(e){let t=ib(),n=()=>e(t.snapshot());return h.useSyncExternalStore(t.subscribe,n,n)}function VL(e,t,n,r=[]){let a=h.useRef(),o=mh();return xi(()=>{var i;let l=(()=>{var d;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=r.map(d=>d.trim());o.value(e,l,c),(i=t.current)==null||i.setAttribute($o,l),a.current=l}),a}var yae=()=>{let[e,t]=h.useState(),n=zi(()=>new Map);return xi(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function jae(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Mg({asChild:e,children:t},n){return e&&h.isValidElement(t)?h.cloneElement(jae(t),{ref:t.ref},n(t.props.children)):n(t)}var wae={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const lb=h.forwardRef(({className:e,...t},n)=>s.jsx(cn,{ref:n,className:ce("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));lb.displayName=cn.displayName;const UL=h.forwardRef(({className:e,...t},n)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Ts,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(cn.Input,{ref:n,className:ce("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));UL.displayName=cn.Input.displayName;const cb=h.forwardRef(({className:e,...t},n)=>s.jsx(cn.List,{ref:n,className:ce("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));cb.displayName=cn.List.displayName;const BL=h.forwardRef((e,t)=>s.jsx(cn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));BL.displayName=cn.Empty.displayName;const db=h.forwardRef(({className:e,...t},n)=>s.jsx(cn.Group,{ref:n,className:ce("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));db.displayName=cn.Group.displayName;const Nae=h.forwardRef(({className:e,...t},n)=>s.jsx(cn.Separator,{ref:n,className:ce("-mx-1 h-px bg-border",e),...t}));Nae.displayName=cn.Separator.displayName;const ub=h.forwardRef(({className:e,...t},n)=>s.jsx(cn.Item,{ref:n,className:ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));ub.displayName=cn.Item.displayName;function oo(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e?.(a),n===!1||!a.defaultPrevented)return t?.(a)}}function oT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function HL(...e){return t=>{let n=!1;const r=e.map(a=>{const o=oT(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():oT(e[a],null)}}}}function Po(...e){return h.useCallback(HL(...e),e)}function qL(e,t=[]){let n=[];function r(o,i){const l=h.createContext(i),c=n.length;n=[...n,i];const d=m=>{const{scope:p,children:g,...x}=m,f=p?.[e]?.[c]||l,w=h.useMemo(()=>x,Object.values(x));return s.jsx(f.Provider,{value:w,children:g})};d.displayName=o+"Provider";function u(m,p){const g=p?.[e]?.[c]||l,x=h.useContext(g);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=n.map(i=>h.createContext(i));return function(l){const c=l?.[e]||o;return h.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,bae(a,...t)]}function bae(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const m=c(o)[`__scope${d}`];return{...l,...m}},{});return h.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function WL(e){const t=Sae(e),n=h.forwardRef((r,a)=>{const{children:o,...i}=r,l=h.Children.toArray(o),c=l.find(Eae);if(c){const d=c.props.children,u=l.map(m=>m===c?h.Children.count(d)>1?h.Children.only(null):h.isValidElement(d)?d.props.children:null:m);return s.jsx(t,{...i,ref:a,children:h.isValidElement(d)?h.cloneElement(d,void 0,u):null})}return s.jsx(t,{...i,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function Sae(e){const t=h.forwardRef((n,r)=>{const{children:a,...o}=n;if(h.isValidElement(a)){const i=Pae(a),l=Tae(o,a.props);return a.type!==h.Fragment&&(l.ref=r?HL(r,i):i),h.cloneElement(a,l)}return h.Children.count(a)>1?h.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cae=Symbol("radix.slottable");function Eae(e){return h.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Cae}function Tae(e,t){const n={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...o}:r==="className"&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function Pae(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Aae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Aa=Aae.reduce((e,t)=>{const n=WL(`Primitive.${t}`),r=h.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Dae(e,t){e&&jr.flushSync(()=>e.dispatchEvent(t))}function Ql(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),h.useMemo(()=>(...n)=>t.current?.(...n),[])}function kae(e,t=globalThis?.document){const n=Ql(e);h.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Mae="DismissableLayer",Wj="dismissableLayer.update",Rae="dismissableLayer.pointerDownOutside",Fae="dismissableLayer.focusOutside",iT,zL=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),XL=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=h.useContext(zL),[u,m]=h.useState(null),p=u?.ownerDocument??globalThis?.document,[,g]=h.useState({}),x=Po(t,S=>m(S)),f=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=f.indexOf(w),v=u?f.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=v>=y,b=Lae(S=>{const P=S.target,A=[...d.branches].some(L=>L.contains(P));!N||A||(a?.(S),i?.(S),S.defaultPrevented||l?.())},p),E=$ae(S=>{const P=S.target;[...d.branches].some(L=>L.contains(P))||(o?.(S),i?.(S),S.defaultPrevented||l?.())},p);return kae(S=>{v===d.layers.size-1&&(r?.(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),h.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(iT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),lT(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=iT)}},[u,p,n,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),lT())},[u,d]),h.useEffect(()=>{const S=()=>g({});return document.addEventListener(Wj,S),()=>document.removeEventListener(Wj,S)},[]),s.jsx(Aa.div,{...c,ref:x,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:oo(e.onFocusCapture,E.onFocusCapture),onBlurCapture:oo(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:oo(e.onPointerDownCapture,b.onPointerDownCapture)})});XL.displayName=Mae;var Oae="DismissableLayerBranch",Iae=h.forwardRef((e,t)=>{const n=h.useContext(zL),r=h.useRef(null),a=Po(t,r);return h.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),s.jsx(Aa.div,{...e,ref:a})});Iae.displayName=Oae;function Lae(e,t=globalThis?.document){const n=Ql(e),r=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){YL(Rae,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function $ae(e,t=globalThis?.document){const n=Ql(e),r=h.useRef(!1);return h.useEffect(()=>{const a=o=>{o.target&&!r.current&&YL(Fae,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lT(){const e=new CustomEvent(Wj);document.dispatchEvent(e)}function YL(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Dae(a,o):a.dispatchEvent(o)}var dv=0;function _ae(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??cT()),document.body.insertAdjacentElement("beforeend",e[1]??cT()),dv++,()=>{dv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),dv--}},[])}function cT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var uv="focusScope.autoFocusOnMount",hv="focusScope.autoFocusOnUnmount",dT={bubbles:!1,cancelable:!0},Vae="FocusScope",KL=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=h.useState(null),d=Ql(a),u=Ql(o),m=h.useRef(null),p=Po(t,f=>c(f)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let f=function(j){if(g.paused||!l)return;const N=j.target;l.contains(N)?m.current=N:Va(m.current,{select:!0})},w=function(j){if(g.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||Va(m.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const b of j)b.removedNodes.length>0&&Va(l)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,g.paused]),h.useEffect(()=>{if(l){hT.add(g);const f=document.activeElement;if(!l.contains(f)){const y=new CustomEvent(uv,dT);l.addEventListener(uv,d),l.dispatchEvent(y),y.defaultPrevented||(Uae(zae(GL(l)),{select:!0}),document.activeElement===f&&Va(l))}return()=>{l.removeEventListener(uv,d),setTimeout(()=>{const y=new CustomEvent(hv,dT);l.addEventListener(hv,u),l.dispatchEvent(y),y.defaultPrevented||Va(f??document.body,{select:!0}),l.removeEventListener(hv,u),hT.remove(g)},0)}}},[l,d,u,g]);const x=h.useCallback(f=>{if(!n&&!r||g.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,y=document.activeElement;if(w&&y){const v=f.currentTarget,[j,N]=Bae(v);j&&N?!f.shiftKey&&y===N?(f.preventDefault(),n&&Va(j,{select:!0})):f.shiftKey&&y===j&&(f.preventDefault(),n&&Va(N,{select:!0})):y===v&&f.preventDefault()}},[n,r,g.paused]);return s.jsx(Aa.div,{tabIndex:-1,...i,ref:p,onKeyDown:x})});KL.displayName=Vae;function Uae(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Va(r,{select:t}),document.activeElement!==n)return}function Bae(e){const t=GL(e),n=uT(t,e),r=uT(t.reverse(),e);return[n,r]}function GL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uT(e,t){for(const n of e)if(!Hae(n,{upTo:t}))return n}function Hae(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function qae(e){return e instanceof HTMLInputElement&&"select"in e}function Va(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&qae(e)&&t&&e.select()}}var hT=Wae();function Wae(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=mT(e,t),e.unshift(t)},remove(t){e=mT(e,t),e[0]?.resume()}}}function mT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function zae(e){return e.filter(t=>t.tagName!=="A")}var vo=globalThis?.document?h.useLayoutEffect:()=>{},Xae=Au[" useId ".trim().toString()]||(()=>{}),Yae=0;function Kae(e){const[t,n]=h.useState(Xae());return vo(()=>{e||n(r=>r??String(Yae++))},[e]),e||(t?`radix-${t}`:"")}var Gae="Arrow",JL=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...o}=e;return s.jsx(Aa.svg,{...o,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});JL.displayName=Gae;var Jae=JL;function Qae(e){const[t,n]=h.useState(void 0);return vo(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var hb="Popper",[QL,ZL]=qL(hb),[Zae,e$]=QL(hb),t$=e=>{const{__scopePopper:t,children:n}=e,[r,a]=h.useState(null);return s.jsx(Zae,{scope:t,anchor:r,onAnchorChange:a,children:n})};t$.displayName=hb;var s$="PopperAnchor",n$=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,o=e$(s$,n),i=h.useRef(null),l=Po(t,i);return h.useEffect(()=>{o.onAnchorChange(r?.current||i.current)}),r?null:s.jsx(Aa.div,{...a,ref:l})});n$.displayName=s$;var mb="PopperContent",[eoe,toe]=QL(mb),r$=h.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...f}=e,w=e$(mb,n),[y,v]=h.useState(null),j=Po(t,J=>v(J)),[N,b]=h.useState(null),E=Qae(N),S=E?.width??0,P=E?.height??0,A=r+(o!=="center"?"-"+o:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(d)?d:[d],I=R.length>0,V={padding:L,boundary:R.filter(noe),altBoundary:I},{refs:O,floatingStyles:k,placement:T,isPositioned:D,middlewareData:M}=Rk({strategy:"fixed",placement:A,whileElementsMounted:(...J)=>kk(...J,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[Fk({mainAxis:a+P,alignmentAxis:i}),c&&Ok({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Ik():void 0,...V}),c&&Lk({...V}),$k({...V,apply:({elements:J,rects:ge,availableWidth:Q,availableHeight:he})=>{const{width:le,height:me}=ge.reference,Z=J.floating.style;Z.setProperty("--radix-popper-available-width",`${Q}px`),Z.setProperty("--radix-popper-available-height",`${he}px`),Z.setProperty("--radix-popper-anchor-width",`${le}px`),Z.setProperty("--radix-popper-anchor-height",`${me}px`)}}),N&&Vk({element:N,padding:l}),roe({arrowWidth:S,arrowHeight:P}),p&&_k({strategy:"referenceHidden",...V})]}),[_,H]=i$(T),$=Ql(x);vo(()=>{D&&$?.()},[D,$]);const B=M.arrow?.x,W=M.arrow?.y,q=M.arrow?.centerOffset!==0,[Y,pe]=h.useState();return vo(()=>{y&&pe(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:D?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[M.transformOrigin?.x,M.transformOrigin?.y].join(" "),...M.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(eoe,{scope:n,placedSide:_,onArrowChange:b,arrowX:B,arrowY:W,shouldHideArrow:q,children:s.jsx(Aa.div,{"data-side":_,"data-align":H,...f,ref:j,style:{...f.style,animation:D?void 0:"none"}})})})});r$.displayName=mb;var a$="PopperArrow",soe={top:"bottom",right:"left",bottom:"top",left:"right"},o$=h.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,o=toe(a$,r),i=soe[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(Jae,{...a,ref:n,style:{...a.style,display:"block"}})})});o$.displayName=a$;function noe(e){return e!==null}var roe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:a}=t,i=a.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,u]=i$(n),m={start:"0%",center:"50%",end:"100%"}[u],p=(a.arrow?.x??0)+l/2,g=(a.arrow?.y??0)+c/2;let x="",f="";return d==="bottom"?(x=i?m:`${p}px`,f=`${-c}px`):d==="top"?(x=i?m:`${p}px`,f=`${r.floating.height+c}px`):d==="right"?(x=`${-c}px`,f=i?m:`${g}px`):d==="left"&&(x=`${r.floating.width+c}px`,f=i?m:`${g}px`),{data:{x,y:f}}}});function i$(e){const[t,n="center"]=e.split("-");return[t,n]}var aoe=t$,l$=n$,ooe=r$,ioe=o$,loe="Portal",c$=h.forwardRef((e,t)=>{const{container:n,...r}=e,[a,o]=h.useState(!1);vo(()=>o(!0),[]);const i=n||a&&globalThis?.document?.body;return i?T0.createPortal(s.jsx(Aa.div,{...r,ref:t}),i):null});c$.displayName=loe;function coe(e,t){return h.useReducer((n,r)=>t[n][r]??n,e)}var pb=e=>{const{present:t,children:n}=e,r=doe(t),a=typeof n=="function"?n({present:r.isPresent}):h.Children.only(n),o=Po(r.ref,uoe(a));return typeof n=="function"||r.isPresent?h.cloneElement(a,{ref:o}):null};pb.displayName="Presence";function doe(e){const[t,n]=h.useState(),r=h.useRef(null),a=h.useRef(e),o=h.useRef("none"),i=e?"mounted":"unmounted",[l,c]=coe(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=am(r.current);o.current=l==="mounted"?d:"none"},[l]),vo(()=>{const d=r.current,u=a.current;if(u!==e){const p=o.current,g=am(d);e?c("MOUNT"):g==="none"||d?.display==="none"?c("UNMOUNT"):c(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),vo(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=g=>{const f=am(r.current).includes(g.animationName);if(g.target===t&&f&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=g=>{g.target===t&&(o.current=am(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:h.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function am(e){return e?.animationName||"none"}function uoe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var hoe=Au[" useInsertionEffect ".trim().toString()]||vo;function moe({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,o,i]=poe({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const u=h.useRef(e!==void 0);h.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=h.useCallback(u=>{if(l){const m=foe(u)?u(e):u;m!==e&&i.current?.(m)}else o(u)},[l,e,o,i]);return[c,d]}function poe({defaultProp:e,onChange:t}){const[n,r]=h.useState(e),a=h.useRef(n),o=h.useRef(t);return hoe(()=>{o.current=t},[t]),h.useEffect(()=>{a.current!==n&&(o.current?.(n),a.current=n)},[n,a]),[n,r,o]}function foe(e){return typeof e=="function"}var d$=lN(),mv=function(){},Rg=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:mv,onWheelCapture:mv,onTouchMoveCapture:mv}),a=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,p=e.sideCar,g=e.noRelative,x=e.noIsolation,f=e.inert,w=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,j=e.gapMode,N=ng(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,E=iN([n,t]),S=Kt(Kt({},N),a);return h.createElement(h.Fragment,null,u&&h.createElement(b,{sideCar:d$,removeScrollBar:d,shards:m,noRelative:g,noIsolation:x,inert:f,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:j}),i?h.cloneElement(h.Children.only(l),Kt(Kt({},S),{ref:E})):h.createElement(v,Kt({},S,{className:c,ref:E}),l))});Rg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rg.classNames={fullWidth:Cl,zeroRight:Sl};var zj=!1;if(typeof window<"u")try{var om=Object.defineProperty({},"passive",{get:function(){return zj=!0,!0}});window.addEventListener("test",om,om),window.removeEventListener("test",om,om)}catch{zj=!1}var Ui=zj?{passive:!1}:!1,goe=function(e){return e.tagName==="TEXTAREA"},u$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!goe(e)&&n[t]==="visible")},xoe=function(e){return u$(e,"overflowY")},voe=function(e){return u$(e,"overflowX")},pT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=h$(e,r);if(a){var o=m$(e,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},yoe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},joe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},h$=function(e,t){return e==="v"?xoe(t):voe(t)},m$=function(e,t){return e==="v"?yoe(t):joe(t)},woe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Noe=function(e,t,n,r,a){var o=woe(e,window.getComputedStyle(t).direction),i=o*r,l=n.target,c=t.contains(l),d=!1,u=i>0,m=0,p=0;do{if(!l)break;var g=m$(e,l),x=g[0],f=g[1],w=g[2],y=f-w-o*x;(x||y)&&h$(e,l)&&(m+=y,p+=x);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(p)<1||!a))&&(d=!0),d},im=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},fT=function(e){return[e.deltaX,e.deltaY]},gT=function(e){return e&&"current"in e?e.current:e},boe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Soe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Coe=0,Bi=[];function Eoe(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),a=h.useState(Coe++)[0],o=h.useState(ag)[0],i=h.useRef(e);h.useEffect(function(){i.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var f=oN([e.lockRef.current],(e.shards||[]).map(gT),!0).filter(Boolean);return f.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),f.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=h.useCallback(function(f,w){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!i.current.allowPinchZoom;var y=im(f),v=n.current,j="deltaX"in f?f.deltaX:v[0]-y[0],N="deltaY"in f?f.deltaY:v[1]-y[1],b,E=f.target,S=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in f&&S==="h"&&E.type==="range")return!1;var P=pT(S,E);if(!P)return!0;if(P?b=S:(b=S==="v"?"h":"v",P=pT(S,E)),!P)return!1;if(!r.current&&"changedTouches"in f&&(j||N)&&(r.current=b),!b)return!0;var A=r.current||b;return Noe(A,w,f,A==="h"?j:N,!0)},[]),c=h.useCallback(function(f){var w=f;if(!(!Bi.length||Bi[Bi.length-1]!==o)){var y="deltaY"in w?fT(w):im(w),v=t.current.filter(function(b){return b.name===w.type&&(b.target===w.target||w.target===b.shadowParent)&&boe(b.delta,y)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var j=(i.current.shards||[]).map(gT).filter(Boolean).filter(function(b){return b.contains(w.target)}),N=j.length>0?l(w,j[0]):!i.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=h.useCallback(function(f,w,y,v){var j={name:f,delta:w,target:y,should:v,shadowParent:Toe(y)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),u=h.useCallback(function(f){n.current=im(f),r.current=void 0},[]),m=h.useCallback(function(f){d(f.type,fT(f),f.target,l(f,e.lockRef.current))},[]),p=h.useCallback(function(f){d(f.type,im(f),f.target,l(f,e.lockRef.current))},[]);h.useEffect(function(){return Bi.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Ui),document.addEventListener("touchmove",c,Ui),document.addEventListener("touchstart",u,Ui),function(){Bi=Bi.filter(function(f){return f!==o}),document.removeEventListener("wheel",c,Ui),document.removeEventListener("touchmove",c,Ui),document.removeEventListener("touchstart",u,Ui)}},[]);var g=e.removeScrollBar,x=e.inert;return h.createElement(h.Fragment,null,x?h.createElement(o,{styles:Soe(a)}):null,g?h.createElement(dN,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Toe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Poe=cN(d$,Eoe);var p$=h.forwardRef(function(e,t){return h.createElement(Rg,Kt({},e,{ref:t,sideCar:Poe}))});p$.classNames=Rg.classNames;var Fg="Popover",[f$,rye]=qL(Fg,[ZL]),ph=ZL(),[Aoe,Ao]=f$(Fg),g$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=ph(t),c=h.useRef(null),[d,u]=h.useState(!1),[m,p]=moe({prop:r,defaultProp:a??!1,onChange:o,caller:Fg});return s.jsx(aoe,{...l,children:s.jsx(Aoe,{scope:t,contentId:Kae(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:h.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:i,children:n})})};g$.displayName=Fg;var x$="PopoverAnchor",Doe=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ao(x$,n),o=ph(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return h.useEffect(()=>(i(),()=>l()),[i,l]),s.jsx(l$,{...o,...r,ref:t})});Doe.displayName=x$;var v$="PopoverTrigger",y$=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ao(v$,n),o=ph(n),i=Po(t,a.triggerRef),l=s.jsx(Aa.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":S$(a.open),...r,ref:i,onClick:oo(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(l$,{asChild:!0,...o,children:l})});y$.displayName=v$;var fb="PopoverPortal",[koe,Moe]=f$(fb,{forceMount:void 0}),j$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,o=Ao(fb,t);return s.jsx(koe,{scope:t,forceMount:n,children:s.jsx(pb,{present:n||o.open,children:s.jsx(c$,{asChild:!0,container:a,children:r})})})};j$.displayName=fb;var Zl="PopoverContent",w$=h.forwardRef((e,t)=>{const n=Moe(Zl,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,o=Ao(Zl,e.__scopePopover);return s.jsx(pb,{present:r||o.open,children:o.modal?s.jsx(Foe,{...a,ref:t}):s.jsx(Ooe,{...a,ref:t})})});w$.displayName=Zl;var Roe=WL("PopoverContent.RemoveScroll"),Foe=h.forwardRef((e,t)=>{const n=Ao(Zl,e.__scopePopover),r=h.useRef(null),a=Po(t,r),o=h.useRef(!1);return h.useEffect(()=>{const i=r.current;if(i)return qu(i)},[]),s.jsx(p$,{as:Roe,allowPinchZoom:!0,children:s.jsx(N$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:oo(e.onCloseAutoFocus,i=>{i.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:oo(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:oo(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ooe=h.forwardRef((e,t)=>{const n=Ao(Zl,e.__scopePopover),r=h.useRef(!1),a=h.useRef(!1);return s.jsx(N$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;n.triggerRef.current?.contains(i)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),N$=h.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,p=Ao(Zl,n),g=ph(n);return _ae(),s.jsx(KL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o,children:s.jsx(XL,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(ooe,{"data-state":S$(p.open),role:"dialog",id:p.contentId,...g,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),b$="PopoverClose",Ioe=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ao(b$,n);return s.jsx(Aa.button,{type:"button",...r,ref:t,onClick:oo(e.onClick,()=>a.onOpenChange(!1))})});Ioe.displayName=b$;var Loe="PopoverArrow",$oe=h.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ph(n);return s.jsx(ioe,{...a,...r,ref:t})});$oe.displayName=Loe;function S$(e){return e?"open":"closed"}var _oe=g$,Voe=y$,Uoe=j$,C$=w$;const sf=_oe,nf=Voe,yu=h.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>s.jsx(Uoe,{children:s.jsx(C$,{ref:a,align:t,sideOffset:n,className:ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));yu.displayName=C$.displayName;function Boe({options:e,value:t,onValueChange:n,placeholder:r="Select option...",searchPlaceholder:a="Search...",emptyMessage:o="No option found.",className:i}){const[l,c]=h.useState(!1),d=e.find(u=>u.value===t);return s.jsxs(sf,{open:l,onOpenChange:c,children:[s.jsx(nf,{asChild:!0,children:s.jsxs(z,{variant:"outline",role:"combobox","aria-expanded":l,className:ce("w-full justify-between",i),children:[d?s.jsxs("div",{className:"flex items-center gap-2",children:[d.icon&&s.jsx(d.icon,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"truncate",children:d.label}),d.category&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",d.category,")"]})]}):r,s.jsx(nk,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(yu,{className:"w-full p-0 z-50",style:{width:"var(--radix-popover-trigger-width)"},children:s.jsxs(lb,{children:[s.jsx(UL,{placeholder:a}),s.jsxs(cb,{children:[s.jsx(BL,{children:o}),s.jsx(db,{children:e.map(u=>s.jsxs(ub,{value:`${u.label} ${u.category||""} ${u.description||""}`,onSelect:()=>{n?.(u.value),c(!1)},children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[u.icon&&s.jsx(u.icon,{className:"h-4 w-4 text-primary"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:u.label}),u.category&&s.jsx("span",{className:"text-xs text-muted-foreground px-1.5 py-0.5 bg-muted rounded",children:u.category})]}),u.description&&s.jsx("span",{className:"text-xs text-muted-foreground",children:u.description})]})]}),s.jsx(Ci,{className:ce("ml-auto h-4 w-4",t===u.value?"opacity-100":"opacity-0")})]},u.value))})]})]})})]})}function Hoe(e,t={}){const{minLength:n=8,requireUppercase:r=!1,requireLowercase:a=!1,requireNumbers:o=!1,requireSpecialChars:i=!1,allowEmpty:l=!0}=t,c=[];return l&&(!e||e.trim().length===0)?{isValid:!0,errors:[]}:(e.length<n&&c.push(`Password must be at least ${n} characters long`),r&&!/[A-Z]/.test(e)&&c.push("Password must contain at least one uppercase letter"),a&&!/[a-z]/.test(e)&&c.push("Password must contain at least one lowercase letter"),o&&!/\d/.test(e)&&c.push("Password must contain at least one number"),i&&!/[!@#$%^&*(),.?":{}|<>]/.test(e)&&c.push("Password must contain at least one special character"),{isValid:c.length===0,errors:c})}function qoe(e){return Hoe(e,{minLength:6,requireUppercase:!1,requireLowercase:!1,requireNumbers:!1,requireSpecialChars:!1,allowEmpty:!0})}const xs=h.forwardRef(({name:e,label:t,placeholder:n,required:r,value:a,onValueChange:o,className:i,showConfirmation:l=!0,validator:c=qoe},d)=>{const[u,m]=h.useState(a||""),[p,g]=h.useState(""),[x,f]=h.useState(!1),[w,y]=h.useState(!1),[v,j]=h.useState(!1),[N,b]=h.useState({isValid:!0,errors:[]});h.useEffect(()=>{a!==u&&m(a||"")},[a]);const E=u===p,S=v&&p.length>0&&!E,P=!N.isValid&&u.length>0,A=R=>{m(R),b(c(R)),o(R)},L=R=>{g(R),!v&&R.length>0&&j(!0)};return s.jsxs("div",{ref:d,className:ce("space-y-3",i),children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:e,className:"flex items-center gap-1",children:[t,r&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(U,{id:e,type:x?"text":"password",placeholder:n,value:u,onChange:R=>A(R.target.value),className:ce("pr-10 transition-all duration-300 focus:scale-[1.01]",P&&"border-destructive focus-visible:ring-destructive")}),s.jsx("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:x?s.jsx(YC,{className:"h-4 w-4"}):s.jsx(fa,{className:"h-4 w-4"})})]})]}),P&&s.jsx("div",{className:"space-y-1",children:N.errors.map((R,I)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),R]},I))}),N.isValid&&u.length>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[s.jsx(rs,{className:"h-4 w-4"}),"Password meets requirements"]}),l&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:`${e}_confirm`,className:"flex items-center gap-1",children:["Confirm ",t,r&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(U,{id:`${e}_confirm`,type:w?"text":"password",placeholder:`Confirm ${n||t.toLowerCase()}`,value:p,onChange:R=>L(R.target.value),className:ce("pr-10 transition-all duration-300 focus:scale-[1.01]",S&&"border-destructive focus-visible:ring-destructive")}),s.jsx("button",{type:"button",onClick:()=>y(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:w?s.jsx(YC,{className:"h-4 w-4"}):s.jsx(fa,{className:"h-4 w-4"})})]})]}),S&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),"Passwords do not match"]})]})]})});xs.displayName="PasswordConfirmation";const Woe=({selectedJarId:e,onJarSelect:t,label:n="Select JAR File",placeholder:r="Choose a driver JAR file...",driverTypeFilter:a})=>{const o=[{id:"1",name:"MySQL JDBC Driver",version:"8.0.33",fileName:"mysql-connector-java-8.0.33.jar",driverType:"Database"},{id:"2",name:"PostgreSQL JDBC Driver",version:"42.6.0",fileName:"postgresql-42.6.0.jar",driverType:"Database"},{id:"3",name:"ActiveMQ Client",version:"5.18.3",fileName:"activemq-client-5.18.3.jar",driverType:"Message Queue"}],i=a?o.filter(c=>c.driverType===a):o,l=o.find(c=>c.id===e);return s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-sm font-medium",children:n}),s.jsxs(se,{value:e,onValueChange:t,children:[s.jsx(ee,{className:"w-full",children:s.jsx(ne,{placeholder:r,children:l&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gd,{className:"h-4 w-4"}),s.jsx("span",{children:l.name}),s.jsxs(fe,{variant:"secondary",className:"text-xs",children:["v",l.version]})]})})}),s.jsxs(te,{className:"bg-card border-border shadow-lg z-50 max-h-60",children:[i.map(c=>s.jsx(F,{value:c.id,children:s.jsxs("div",{className:"flex items-center gap-2 w-full",children:[s.jsx(Gd,{className:"h-4 w-4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:c.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:c.fileName})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(fe,{variant:"secondary",className:"text-xs",children:["v",c.version]}),s.jsx(fe,{variant:"outline",className:"text-xs",children:c.driverType})]})]})},c.id)),i.length===0&&s.jsxs(F,{value:"no-jars-available",disabled:!0,children:["No JAR files available",a&&` for ${a}`]})]})]}),l&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Selected: ",l.fileName," (",l.driverType,")"]})]})},zoe=({selectedBusinessComponent:e,setSelectedBusinessComponent:t})=>{const{businessComponents:n,loading:r}=To();return s.jsxs(K,{className:"animate-scale-in",children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"h-5 w-5"}),"Business Component Selection"]}),s.jsx(Ne,{children:"Select the business component this adapter belongs to"})]}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component *"}),s.jsxs(se,{value:e?.id||"",onValueChange:a=>{const o=n.find(i=>i.id===a)||null;t(o)},disabled:r,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsx(te,{children:n.length===0?s.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No business components available"}):n.map(a=>s.jsx(F,{value:a.id,children:a.name},a.id))})]})]})})]})},fr=h.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:ce("w-full caption-bottom text-sm",e),...t})}));fr.displayName="Table";const gr=h.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:ce("[&_tr]:border-b",e),...t}));gr.displayName="TableHeader";const xr=h.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:ce("[&_tr:last-child]:border-0",e),...t}));xr.displayName="TableBody";const Xoe=h.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:ce("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Xoe.displayName="TableFooter";const Zt=h.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:ce("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Zt.displayName="TableRow";const De=h.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:ce("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));De.displayName="TableHead";const ke=h.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:ce("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ke.displayName="TableCell";const Yoe=h.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:ce("mt-4 text-sm text-muted-foreground",e),...t}));Yoe.displayName="TableCaption";const gb=({config:e,onChange:t})=>{const[n,r]=h.useState({fieldName:"",length:0}),a=(c,d)=>{t({...e,[c]:d})},o=()=>{if(n.fieldName&&n.length>0){const c=e.fieldLengths||{},d=e.fieldOrder||[];t({...e,fieldLengths:{...c,[n.fieldName]:n.length},fieldOrder:[...d,n.fieldName]}),r({fieldName:"",length:0})}},i=c=>{const{[c]:d,...u}=e.fieldLengths||{},m=(e.fieldOrder||[]).filter(p=>p!==c);t({...e,fieldLengths:u,fieldOrder:m})},l=()=>{switch(e.fileFormat){case"CSV":return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"CSV Configuration"}),s.jsx(Ne,{children:"Configure CSV file format settings"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"delimiter",children:"Delimiter"}),s.jsx(U,{id:"delimiter",value:e.delimiter||",",onChange:c=>a("delimiter",c.target.value),placeholder:",",maxLength:1})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"quoteCharacter",children:"Quote Character"}),s.jsx(U,{id:"quoteCharacter",value:e.quoteCharacter||'"',onChange:c=>a("quoteCharacter",c.target.value),placeholder:'"',maxLength:1})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"lineTerminator",children:"Line Terminator"}),s.jsxs(se,{value:e.lineTerminator||"\\n",onValueChange:c=>a("lineTerminator",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"\\n",children:"LF (\\n)"}),s.jsx(F,{value:"\\r\\n",children:"CRLF (\\r\\n)"}),s.jsx(F,{value:"\\r",children:"CR (\\r)"})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"encoding",children:"Encoding"}),s.jsxs(se,{value:e.encoding||"UTF-8",onValueChange:c=>a("encoding",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"UTF-16",children:"UTF-16"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"includeHeaders",checked:e.includeHeaders!==!1,onCheckedChange:c=>a("includeHeaders",c)}),s.jsx(C,{htmlFor:"includeHeaders",children:"Include Headers"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"quoteAllFields",checked:e.quoteAllFields===!0,onCheckedChange:c=>a("quoteAllFields",c)}),s.jsx(C,{htmlFor:"quoteAllFields",children:"Quote All Fields"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"skipEmptyLines",checked:e.skipEmptyLines===!0,onCheckedChange:c=>a("skipEmptyLines",c)}),s.jsx(C,{htmlFor:"skipEmptyLines",children:"Skip Empty Lines"})]})]})]})]});case"FIXED":return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Fixed-Length Configuration"}),s.jsx(Ne,{children:"Define field positions and lengths"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"padCharacter",children:"Pad Character"}),s.jsx(U,{id:"padCharacter",value:e.padCharacter||" ",onChange:c=>a("padCharacter",c.target.value),placeholder:" ",maxLength:1})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"padDirection",children:"Pad Direction"}),s.jsxs(se,{value:e.padDirection||"RIGHT",onValueChange:c=>a("padDirection",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"LEFT",children:"Left"}),s.jsx(F,{value:"RIGHT",children:"Right"})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"lineTerminator",children:"Line Terminator"}),s.jsxs(se,{value:e.lineTerminator||"\\n",onValueChange:c=>a("lineTerminator",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"\\n",children:"LF (\\n)"}),s.jsx(F,{value:"\\r\\n",children:"CRLF (\\r\\n)"}),s.jsx(F,{value:"\\r",children:"CR (\\r)"})]})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"encoding",children:"Encoding"}),s.jsxs(se,{value:e.encoding||"UTF-8",onValueChange:c=>a("encoding",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"UTF-16",children:"UTF-16"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(C,{children:"Field Definitions"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{placeholder:"Field Name",value:n.fieldName,onChange:c=>r({...n,fieldName:c.target.value})}),s.jsx(U,{type:"number",placeholder:"Length",value:n.length||"",onChange:c=>r({...n,length:parseInt(c.target.value)||0}),className:"w-32"}),s.jsx(z,{onClick:o,size:"sm",children:s.jsx(es,{className:"h-4 w-4"})})]}),e.fieldOrder&&e.fieldOrder.length>0&&s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Field Name"}),s.jsx(De,{children:"Length"}),s.jsx(De,{children:"Start Position"}),s.jsx(De,{className:"w-16"})]})}),s.jsx(xr,{children:e.fieldOrder.map((c,d)=>{const u=e.fieldOrder.slice(0,d).reduce((m,p)=>m+(e.fieldLengths?.[p]||0),1);return s.jsxs(Zt,{children:[s.jsx(ke,{children:c}),s.jsx(ke,{children:e.fieldLengths?.[c]}),s.jsx(ke,{children:u}),s.jsx(ke,{children:s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>i(c),children:s.jsx(Xn,{className:"h-4 w-4"})})})]},c)})})]})]})]})})]})]});case"JSON":return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"JSON Configuration"}),s.jsx(Ne,{children:"Configure JSON file format settings"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"dateFormat",children:"Date Format"}),s.jsx(U,{id:"dateFormat",value:e.dateFormat||"yyyy-MM-dd'T'HH:mm:ss.SSSZ",onChange:c=>a("dateFormat",c.target.value),placeholder:"yyyy-MM-dd'T'HH:mm:ss.SSSZ"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"encoding",children:"Encoding"}),s.jsxs(se,{value:e.encoding||"UTF-8",onValueChange:c=>a("encoding",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"UTF-16",children:"UTF-16"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"prettyPrint",checked:e.prettyPrint!==!1,onCheckedChange:c=>a("prettyPrint",c)}),s.jsx(C,{htmlFor:"prettyPrint",children:"Pretty Print"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"includeNullValues",checked:e.includeNullValues===!0,onCheckedChange:c=>a("includeNullValues",c)}),s.jsx(C,{htmlFor:"includeNullValues",children:"Include Null Values"})]})]})]})]});case"XML":return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"XML Configuration"}),s.jsx(Ne,{children:"XML format is handled in the XML Conversion tab"})]}),s.jsx(re,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Please configure XML-specific settings in the XML Conversion tab."})})]});default:return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Plain Text Configuration"}),s.jsx(Ne,{children:"Basic text file settings"})]}),s.jsx(re,{children:s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"encoding",children:"Encoding"}),s.jsxs(se,{value:e.encoding||"UTF-8",onValueChange:c=>a("encoding",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"UTF-16",children:"UTF-16"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]})]})})]})}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"File Format Type"}),s.jsx(Ne,{children:"Select the format of files this adapter will process"})]}),s.jsx(re,{children:s.jsxs(se,{value:e.fileFormat||"TEXT",onValueChange:c=>a("fileFormat",c),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"CSV",children:"CSV (Comma-Separated Values)"}),s.jsx(F,{value:"FIXED",children:"Fixed-Length"}),s.jsx(F,{value:"JSON",children:"JSON"}),s.jsx(F,{value:"XML",children:"XML"}),s.jsx(F,{value:"TEXT",children:"Plain Text"})]})]})})]}),l(),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Sample Preview"}),s.jsx(Ne,{children:"Example of how your file format will look"})]}),s.jsx(re,{children:s.jsxs("pre",{className:"text-xs bg-muted p-4 rounded overflow-x-auto",children:[e.fileFormat==="CSV"&&(e.includeHeaders!==!1?`orderId${e.delimiter||","}customer${e.delimiter||","}amount
12345${e.delimiter||","}John Doe${e.delimiter||","}99.99
12346${e.delimiter||","}Jane Smith${e.delimiter||","}149.99`:`12345${e.delimiter||","}John Doe${e.delimiter||","}99.99
12346${e.delimiter||","}Jane Smith${e.delimiter||","}149.99`),e.fileFormat==="FIXED"&&e.fieldOrder&&(e.fieldOrder.map(c=>c.padEnd(e.fieldLengths?.[c]||0,e.padCharacter||" ")).join("")||"Define fields above to see preview"),e.fileFormat==="JSON"&&(e.prettyPrint!==!1?`{
  "orderId": "12345",
  "customer": "John Doe",
  "amount": 99.99${e.includeNullValues?`,
  "discount": null`:""}
}`:`{"orderId":"12345","customer":"John Doe","amount":99.99${e.includeNullValues?',"discount":null':""}}`),(e.fileFormat==="XML"||e.fileFormat==="TEXT"||!e.fileFormat)&&"Sample data based on selected format will appear here"]})})]})]})},Di=({mode:e,config:t,onChange:n})=>{const r=(a,o)=>{n({...t,[a]:o})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(We,{children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{children:e==="SENDER"?"Configure how incoming data is converted to XML for mapping":"Configure how XML is converted back to the target format after mapping"})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Basic Settings"}),s.jsx(Ne,{children:"Core XML conversion configuration"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"rootElementName",children:"Root Element Name"}),s.jsx(U,{id:"rootElementName",value:t.rootElementName||"Message",onChange:a=>r("rootElementName",a.target.value),placeholder:"Message"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The root element that wraps the converted data"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"encoding",children:"Encoding"}),s.jsx(U,{id:"encoding",value:t.encoding||"UTF-8",onChange:a=>r("encoding",a.target.value),placeholder:"UTF-8"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"includeXmlDeclaration",checked:t.includeXmlDeclaration!==!1,onCheckedChange:a=>r("includeXmlDeclaration",a)}),s.jsx(C,{htmlFor:"includeXmlDeclaration",children:"Include XML Declaration"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"prettyPrint",checked:t.prettyPrint!==!1,onCheckedChange:a=>r("prettyPrint",a)}),s.jsx(C,{htmlFor:"prettyPrint",children:"Pretty Print (Format with indentation)"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Namespace Configuration"}),s.jsx(Ne,{children:"Optional XML namespace settings"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"targetNamespace",children:"Target Namespace"}),s.jsx(U,{id:"targetNamespace",value:t.targetNamespace||"",onChange:a=>r("targetNamespace",a.target.value),placeholder:"http://example.com/integration"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"XML namespace URI (optional)"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(C,{htmlFor:"namespacePrefix",children:"Namespace Prefix"}),s.jsx(U,{id:"namespacePrefix",value:t.namespacePrefix||"",onChange:a=>r("namespacePrefix",a.target.value),placeholder:"ns"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prefix for namespace (e.g., ns:Element)"})]})]})})]}),e==="RECEIVER"&&s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Receiver Options"}),s.jsx(Ne,{children:"Settings for converting XML back to target format"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"removeRootElement",checked:t.removeRootElement===!0,onCheckedChange:a=>r("removeRootElement",a)}),s.jsx(C,{htmlFor:"removeRootElement",children:"Remove Root Element"})]}),s.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Strip the wrapper element when converting from XML"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"handleNamespaces",checked:t.handleNamespaces!==!1,onCheckedChange:a=>r("handleNamespaces",a)}),s.jsx(C,{htmlFor:"handleNamespaces",children:"Handle Namespaces"})]}),s.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Process namespace declarations and prefixes"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bt,{id:"preserveAttributes",checked:t.preserveAttributes===!0,onCheckedChange:a=>r("preserveAttributes",a)}),s.jsx(C,{htmlFor:"preserveAttributes",children:"Preserve Attributes"})]}),s.jsx("p",{className:"text-sm text-muted-foreground ml-6",children:"Keep XML attributes as separate fields (instead of converting to elements)"})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Example"}),s.jsx(Ne,{children:"How your data will be converted"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"json",className:"w-full",children:[s.jsxs(Ke,{children:[s.jsx(xe,{value:"json",children:"JSON to XML"}),s.jsx(xe,{value:"csv",children:"CSV to XML"}),s.jsx(xe,{value:"sql",children:"SQL to XML"})]}),s.jsx(ye,{value:"json",className:"space-y-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{children:"Original JSON"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`{
  "orderId": "12345",
  "customer": "John Doe",
  "amount": 99.99
}`})]}),s.jsxs("div",{children:[s.jsx(C,{children:"Converted XML"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`<?xml version="1.0" encoding="${t.encoding||"UTF-8"}"?>
<${t.rootElementName||"Message"}${t.targetNamespace?` xmlns${t.namespacePrefix?`:${t.namespacePrefix}`:""}="${t.targetNamespace}"`:""}>
  <orderId>12345</orderId>
  <customer>John Doe</customer>
  <amount>99.99</amount>
</${t.rootElementName||"Message"}>`})]})]})}),s.jsx(ye,{value:"csv",className:"space-y-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{children:"Original CSV"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`orderId,customer,amount
12345,John Doe,99.99
12346,Jane Smith,149.99`})]}),s.jsxs("div",{children:[s.jsx(C,{children:"Converted XML"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`<?xml version="1.0" encoding="${t.encoding||"UTF-8"}"?>
<${t.rootElementName||"Message"}${t.targetNamespace?` xmlns${t.namespacePrefix?`:${t.namespacePrefix}`:""}="${t.targetNamespace}"`:""}>
  <record>
    <orderId>12345</orderId>
    <customer>John Doe</customer>
    <amount>99.99</amount>
  </record>
  <record>
    <orderId>12346</orderId>
    <customer>Jane Smith</customer>
    <amount>149.99</amount>
  </record>
</${t.rootElementName||"Message"}>`})]})]})}),s.jsx(ye,{value:"sql",className:"space-y-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{children:"SQL Result"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`SELECT * FROM orders
-----------------
orderId | customer    | amount
12345   | John Doe    | 99.99
12346   | Jane Smith  | 149.99`})]}),s.jsxs("div",{children:[s.jsx(C,{children:"Converted XML"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded",children:`<?xml version="1.0" encoding="${t.encoding||"UTF-8"}"?>
<${t.rootElementName||"Message"}${t.targetNamespace?` xmlns${t.namespacePrefix?`:${t.namespacePrefix}`:""}="${t.targetNamespace}"`:""}>
  <row>
    <orderId>12345</orderId>
    <customer>John Doe</customer>
    <amount>99.99</amount>
  </row>
  <row>
    <orderId>12346</orderId>
    <customer>Jane Smith</customer>
    <amount>149.99</amount>
  </row>
</${t.rootElementName||"Message"}>`})]})]})})]})})]})]})},E$=h.forwardRef(({value:e,onValueChange:t,options:n,className:r,size:a="md",disabled:o=!1},i)=>{const l={sm:"h-8 text-xs",md:"h-10 text-sm",lg:"h-12 text-base"},c=d=>{o||t(d.value)};return s.jsx("div",{ref:i,className:ce("inline-flex rounded-lg bg-muted p-1 text-muted-foreground",l[a],o&&"opacity-50 cursor-not-allowed",r),children:n.map(d=>s.jsxs("button",{type:"button",onClick:()=>c(d),disabled:o,className:ce("relative inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e===d.value?"bg-background text-foreground shadow-sm":"hover:text-foreground","flex-1"),children:[d.icon&&s.jsx("span",{className:"mr-2",children:d.icon}),d.label]},d.value))})});E$.displayName="SegmentedControl";const ki=({config:e,onChange:t,adapterType:n,dataStructures:r=[],disabled:a=!1})=>{const o=[{value:"transform",label:"Transform Data"},{value:"passthrough",label:"Passthrough"}],i=m=>{const p={...e,mode:m};m==="passthrough"?(p.dataStructureId=void 0,p.requiresStructure=!1):p.requiresStructure=c(n),t(p)},l=m=>{t({...e,dataStructureId:m})},c=m=>["FILE","FTP","SFTP","REST","HTTP","HTTPS","JSON","XML"].includes(m.toUpperCase()),d=()=>{const m=n.toUpperCase();return["REST","HTTP","HTTPS"].includes(m)?s.jsxs(We,{className:"mt-4",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:"For REST/HTTP adapters with transformation enabled, you must define the payload structure. The payload will be automatically converted to XML for mapping."})]}):["FILE","FTP","SFTP"].includes(m)?s.jsxs(We,{className:"mt-4",children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{children:"File adapters require an XML data structure when transformation is enabled. The file content will be converted to/from XML for processing."})]}):m==="SOAP"?s.jsxs(We,{className:"mt-4",children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{children:"SOAP adapters always require a WSDL which defines the data structures."})]}):null},u=r.filter(m=>["REST","HTTP","HTTPS"].includes(n.toUpperCase())?["JSON","XML"].includes(m.type):m.type==="XML");return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Transformation"}),s.jsx(Ne,{children:"Choose whether to transform data or pass it through unchanged"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Transformation Mode"}),s.jsx(E$,{value:e.mode,onValueChange:i,options:o,disabled:a})]}),e.mode==="transform"&&e.requiresStructure&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Data Structure *"}),s.jsxs(se,{value:e.dataStructureId,onValueChange:l,disabled:a,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a data structure"})}),s.jsx(te,{children:u.map(m=>s.jsxs(F,{value:m.id,children:[m.name," (",m.type,")"]},m.id))})]}),u.length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No compatible data structures found. Please create one first."})]}),e.mode==="passthrough"&&s.jsxs(We,{children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{children:"Passthrough mode transfers data without any transformation or XML conversion. This is ideal for binary files or when you need to preserve the exact file format."})]}),e.mode==="transform"&&d()]})]})},Koe=({mode:e,onConfigChange:t})=>{const[n,r]=h.useState({serverAddress:"",port:"",timeout:"",connectionSecurity:"",userName:"",password:"",connectionMode:"",sourceDirectory:"",fileName:"",sorting:"",advancedSelection:!1,exclusionMask:"",advancedEntries:[{directory:"",fileName:"",exclusionMask:""}],pollingInterval:"",processingMode:"",emptyFileHandling:"",enableDuplicateHandling:!1,duplicateMessageAlertThreshold:"",disableChannelOnExceed:!1,targetDirectory:"",targetFileName:"",fileConstructionMode:"",overwriteExistingFile:!1,createFileDirectory:!1,filePlacement:"",emptyMessageHandling_receiver:"",maxConcurrentConnections:"",fileFormatConfig:{fileFormat:"TEXT"},xmlConversion:{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0},transformationConfig:{mode:"passthrough",requiresStructure:!1}}),a=c=>{const d={...n,...c};r(d),t?.(d)},o=()=>{const c=[...n.advancedEntries,{directory:"",fileName:"",exclusionMask:""}];a({advancedEntries:c})},i=(c,d,u)=>{const m=[...n.advancedEntries];m[c]={...m[c],[d]:u},a({advancedEntries:m})},l=c=>{if(n.advancedEntries.length>1){const d=n.advancedEntries.filter((u,m)=>m!==c);a({advancedEntries:d})}};return s.jsxs(K,{className:"w-full",children:[s.jsxs(oe,{children:[s.jsxs(ie,{children:["FTP ",e==="sender"?"Sender":"Receiver"," Adapter Configuration"]}),s.jsxs(Ne,{children:["Configure your FTP ",e," adapter settings"]})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:e==="sender"?"source":"target",className:"w-full",children:[s.jsxs(Ke,{className:`grid w-full ${e==="sender"?"grid-cols-5":"grid-cols-4"}`,children:[s.jsx(xe,{value:e==="sender"?"source":"target",children:e==="sender"?"Source":"Target"}),s.jsx(xe,{value:"processing",children:"Processing"}),e==="sender"&&s.jsx(xe,{value:"transformation",children:"Transformation"}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(xe,{value:"fileFormat",children:"File Format"}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(xe,{value:"xmlConversion",children:"XML Conversion"})]}),e==="sender"&&s.jsxs(ye,{value:"source",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sourceDirectory",children:"Source Directory *"}),s.jsx(U,{id:"sourceDirectory",value:n.sourceDirectory,onChange:c=>a({sourceDirectory:c.target.value}),placeholder:"Enter source directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileName",children:"File Name *"}),s.jsx(U,{id:"fileName",value:n.fileName,onChange:c=>a({fileName:c.target.value}),placeholder:"Enter file name pattern"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sorting",children:"Sorting"}),s.jsxs(se,{value:n.sorting,onValueChange:c=>a({sorting:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select sorting option"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"timestamp-ascending",children:"Timestamp Ascending"}),s.jsx(F,{value:"timestamp-descending",children:"Timestamp Descending"}),s.jsx(F,{value:"file-size",children:"File Size"}),s.jsx(F,{value:"file-name",children:"File Name"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"advancedSelection",checked:n.advancedSelection,onCheckedChange:c=>a({advancedSelection:c===!0})}),s.jsx(C,{htmlFor:"advancedSelection",children:"Advanced selection for Source files"})]}),n.advancedSelection&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"exclusionMask",children:"Exclusion Mask"}),s.jsx(U,{id:"exclusionMask",value:n.exclusionMask,onChange:c=>a({exclusionMask:c.target.value}),placeholder:"Enter exclusion pattern (e.g., *.tmp, backup_*)"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(C,{className:"text-sm font-medium",children:"Multiple File Selection"}),s.jsx("button",{type:"button",onClick:o,className:"text-sm text-primary hover:underline",children:"+ Add Entry"})]}),n.advancedEntries.map((c,d)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Directory"}),s.jsx(U,{value:c.directory,onChange:u=>i(d,"directory",u.target.value),placeholder:"Directory path",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"File Name"}),s.jsx(U,{value:c.fileName,onChange:u=>i(d,"fileName",u.target.value),placeholder:"File name pattern",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Exclusion Mask"}),s.jsx(U,{value:c.exclusionMask,onChange:u=>i(d,"exclusionMask",u.target.value),placeholder:"Exclusion pattern",className:"text-sm"})]}),n.advancedEntries.length>1&&s.jsx("button",{type:"button",onClick:()=>l(d),className:"text-xs text-destructive hover:underline self-end pb-2",children:"Remove"})]},d))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connection Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serverAddress",children:"Server Address *"}),s.jsx(U,{id:"serverAddress",value:n.serverAddress,onChange:c=>a({serverAddress:c.target.value}),placeholder:"Enter server address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",value:n.port,onChange:c=>a({port:c.target.value}),placeholder:"Enter port number",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout"}),s.jsx(U,{id:"timeout",value:n.timeout,onChange:c=>a({timeout:c.target.value}),placeholder:"Timeout in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionSecurity",children:"Connection Security *"}),s.jsxs(se,{value:n.connectionSecurity,onValueChange:c=>a({connectionSecurity:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection security"})}),s.jsxs(te,{children:[s.jsx(F,{value:"explicit-ftps",children:"Explicit FTPS"}),s.jsx(F,{value:"implicit-ftps",children:"Implicit FTPS"}),s.jsx(F,{value:"plain-ftp",children:"Plain FTP - no encryption"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"userName",children:"User Name *"}),s.jsx(U,{id:"userName",value:n.userName,onChange:c=>a({userName:c.target.value}),placeholder:"Enter username"})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"Enter password",required:!0,value:n.password,onValueChange:c=>a({password:c})})}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"connectionMode",children:"Connection Mode *"}),s.jsxs(se,{value:n.connectionMode,onValueChange:c=>a({connectionMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"permanently",children:"Permanently"}),s.jsx(F,{value:"per-file-transfer",children:"Per File Transfer"})]})]})]})]})]})]}),e==="receiver"&&s.jsxs(ye,{value:"target",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetDirectory",children:"Target Directory *"}),s.jsx(U,{id:"targetDirectory",value:n.targetDirectory,onChange:c=>a({targetDirectory:c.target.value}),placeholder:"Enter target directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetFileName",children:"File Name *"}),s.jsx(U,{id:"targetFileName",value:n.targetFileName,onChange:c=>a({targetFileName:c.target.value}),placeholder:"Enter file name"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connection Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serverAddress",children:"Server Address *"}),s.jsx(U,{id:"serverAddress",value:n.serverAddress,onChange:c=>a({serverAddress:c.target.value}),placeholder:"Enter server address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",value:n.port,onChange:c=>a({port:c.target.value}),placeholder:"Enter port number",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout"}),s.jsx(U,{id:"timeout",value:n.timeout,onChange:c=>a({timeout:c.target.value}),placeholder:"Timeout in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionSecurity",children:"Connection Security *"}),s.jsxs(se,{value:n.connectionSecurity,onValueChange:c=>a({connectionSecurity:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection security"})}),s.jsxs(te,{children:[s.jsx(F,{value:"explicit-ftps",children:"Explicit FTPS"}),s.jsx(F,{value:"implicit-ftps",children:"Implicit FTPS"}),s.jsx(F,{value:"plain-ftp",children:"Plain FTP - no encryption"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"userName",children:"User Name *"}),s.jsx(U,{id:"userName",value:n.userName,onChange:c=>a({userName:c.target.value}),placeholder:"Enter username"})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"Enter password",required:!0,value:n.password,onValueChange:c=>a({password:c})})}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"connectionMode",children:"Connection Mode *"}),s.jsxs(se,{value:n.connectionMode,onValueChange:c=>a({connectionMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"permanently",children:"Permanently"}),s.jsx(F,{value:"per-file-transfer",children:"Per File Transfer"})]})]})]})]})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Processing Parameters"}),s.jsx(pt,{className:"mb-4"})]}),e==="sender"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"pollingInterval",children:"Polling Interval (Secs) *"}),s.jsx(U,{id:"pollingInterval",value:n.pollingInterval,onChange:c=>a({pollingInterval:c.target.value}),placeholder:"Enter polling interval in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"processingMode",children:"Processing Mode *"}),s.jsxs(se,{value:n.processingMode,onValueChange:c=>a({processingMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select processing mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"archive",children:"Archive"}),s.jsx(F,{value:"delete",children:"Delete"}),s.jsx(F,{value:"test",children:"Test"})]})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"emptyFileHandling",children:"Empty File Handling *"}),s.jsxs(se,{value:n.emptyFileHandling,onValueChange:c=>a({emptyFileHandling:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty file handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"do-not-create",children:"Do not create message"}),s.jsx(F,{value:"process-empty",children:"Process empty files"}),s.jsx(F,{value:"skip-empty",children:"Skip empty files"})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"createFileDirectory",checked:n.createFileDirectory,onCheckedChange:c=>a({createFileDirectory:c===!0})}),s.jsx(C,{htmlFor:"createFileDirectory",children:"Create File Directory"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"overwriteExistingFile",checked:n.overwriteExistingFile,onCheckedChange:c=>a({overwriteExistingFile:c===!0})}),s.jsx(C,{htmlFor:"overwriteExistingFile",children:"Overwrite Existing File"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileConstructionMode",children:"File Construction Mode *"}),s.jsxs(se,{value:n.fileConstructionMode,onValueChange:c=>a({fileConstructionMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file construction mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"create",children:"Create"}),s.jsx(F,{value:"append",children:"Append"}),s.jsx(F,{value:"add-time-stamp",children:"Add Time Stamp"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"filePlacement",children:"File Placement *"}),s.jsxs(se,{value:n.filePlacement,onValueChange:c=>a({filePlacement:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file placement"})}),s.jsxs(te,{children:[s.jsx(F,{value:"use-temporary-file",children:"Use Temporary File"}),s.jsx(F,{value:"write-out-directly",children:"Write Out Directly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emptyMessageHandling_receiver",children:"Empty-Message Handling *"}),s.jsxs(se,{value:n.emptyMessageHandling_receiver,onValueChange:c=>a({emptyMessageHandling_receiver:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty message handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"write-out-empty-file",children:"Write Out Empty File"}),s.jsx(F,{value:"ignore-empty-file",children:"Ignore Empty File"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"maxConcurrentConnections",children:"Maximum Concurrent Connections"}),s.jsx(U,{id:"maxConcurrentConnections",value:n.maxConcurrentConnections,onChange:c=>a({maxConcurrentConnections:c.target.value}),placeholder:"Enter maximum concurrent connections",type:"number"})]})]})]})]}),e==="sender"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Duplicate Handling"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"enableDuplicateHandling",checked:n.enableDuplicateHandling,onCheckedChange:c=>a({enableDuplicateHandling:c===!0})}),s.jsx(C,{htmlFor:"enableDuplicateHandling",children:"Enable Duplicate Handling"})]}),n.enableDuplicateHandling&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"duplicateThreshold",children:"Duplicate Message Alert Threshold *"}),s.jsx(U,{id:"duplicateThreshold",value:n.duplicateMessageAlertThreshold,onChange:c=>a({duplicateMessageAlertThreshold:c.target.value}),placeholder:"Enter threshold value",type:"number"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"disableChannelOnExceed",checked:n.disableChannelOnExceed,onCheckedChange:c=>a({disableChannelOnExceed:c===!0})}),s.jsx(C,{htmlFor:"disableChannelOnExceed",children:"Disable Channel if Duplicate threshold has been exceeded"})]})]})]})]})]}),e==="sender"&&s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:n.transformationConfig||{mode:"passthrough"},onChange:c=>a({transformationConfig:c}),adapterType:"FTP",disabled:!1})}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"fileFormat",className:"mt-6",children:s.jsx(gb,{config:n.fileFormatConfig||{},onChange:c=>a({fileFormatConfig:c})})}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:e==="sender"?"SENDER":"RECEIVER",config:n.xmlConversion||{},onChange:c=>a({xmlConversion:c})})})]})})]})},Goe=({mode:e,onConfigChange:t})=>{const[n,r]=h.useState({serverAddress:"",port:"22",timeout:"",authenticationType:"",userName:"",password:"",publicKey:"",privateKey:"",passphrase:"",maxConcurrentConnections:"",retryConnection:"",retryConnectionDelay:"",connectionMode:"",sourceDirectory:"",fileName:"",advancedSelection:!1,exclusionMask:"",advancedEntries:[{directory:"",fileName:"",exclusionMask:""}],pollingInterval:"",processingMode:"",emptyFileHandling:"",enableDuplicateHandling:!1,duplicateMessageAlertThreshold:"",disableChannelOnExceed:!1,targetDirectory:"",targetFileName:"",fileConstructionMode:"",overwriteExistingFile:!1,createFileDirectory:!1,filePlacement:"",emptyMessageHandling_receiver:"",fileFormatConfig:{fileFormat:"TEXT"},xmlConversion:{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0},transformationConfig:{mode:"passthrough",requiresStructure:!1}}),a=d=>{const u={...n,...d};r(u),t?.(u)},o=()=>{const d=[...n.advancedEntries,{directory:"",fileName:"",exclusionMask:""}];a({advancedEntries:d})},i=(d,u,m)=>{const p=[...n.advancedEntries];p[d]={...p[d],[u]:m},a({advancedEntries:p})},l=d=>{if(n.advancedEntries.length>1){const u=n.advancedEntries.filter((m,p)=>p!==d);a({advancedEntries:u})}},c=()=>{switch(n.authenticationType){case"public-key":return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"keyPairSelection",children:"Key Pair Selection *"}),s.jsxs(se,{value:n.publicKey,onValueChange:d=>a({publicKey:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a key pair from system"})}),s.jsxs(te,{children:[s.jsx(F,{value:"rsa-key-prod-01",children:"RSA Production Key 01"}),s.jsx(F,{value:"rsa-key-dev-01",children:"RSA Development Key 01"}),s.jsx(F,{value:"ecdsa-key-prod-01",children:"ECDSA Production Key 01"}),s.jsx(F,{value:"ed25519-key-prod-01",children:"Ed25519 Production Key 01"}),s.jsx(F,{value:"rsa-key-staging-01",children:"RSA Staging Key 01"}),s.jsx(F,{value:"custom-key-pair-01",children:"Custom Key Pair 01"})]})]})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"passphrase",label:"Passphrase (optional)",placeholder:"Enter passphrase for selected key pair",required:!1,value:n.passphrase,onValueChange:d=>a({passphrase:d})})})]});case"username-password":return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"userName",children:"User Name *"}),s.jsx(U,{id:"userName",value:n.userName,onChange:d=>a({userName:d.target.value}),placeholder:"Enter username"})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"Enter password",required:!0,value:n.password,onValueChange:d=>a({password:d})})})]});case"dual":return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"userName",children:"User Name *"}),s.jsx(U,{id:"userName",value:n.userName,onChange:d=>a({userName:d.target.value}),placeholder:"Enter username"})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"Enter password",required:!0,value:n.password,onValueChange:d=>a({password:d})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"keyPairSelection",children:"Key Pair Selection *"}),s.jsxs(se,{value:n.publicKey,onValueChange:d=>a({publicKey:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a key pair from system"})}),s.jsxs(te,{children:[s.jsx(F,{value:"rsa-key-prod-01",children:"RSA Production Key 01"}),s.jsx(F,{value:"rsa-key-dev-01",children:"RSA Development Key 01"}),s.jsx(F,{value:"ecdsa-key-prod-01",children:"ECDSA Production Key 01"}),s.jsx(F,{value:"ed25519-key-prod-01",children:"Ed25519 Production Key 01"}),s.jsx(F,{value:"rsa-key-staging-01",children:"RSA Staging Key 01"}),s.jsx(F,{value:"custom-key-pair-01",children:"Custom Key Pair 01"})]})]})]}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(xs,{name:"passphrase",label:"Passphrase (optional)",placeholder:"Enter passphrase for selected key pair",required:!1,value:n.passphrase,onValueChange:d=>a({passphrase:d})})})]});case"dynamic":return s.jsx("div",{className:"md:col-span-2 p-4 border rounded-lg bg-muted/20",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dynamic authentication will be configured at runtime based on message content."})});default:return null}};return s.jsxs(K,{className:"w-full",children:[s.jsxs(oe,{children:[s.jsxs(ie,{children:["SFTP ",e==="sender"?"Sender":"Receiver"," Adapter Configuration"]}),s.jsxs(Ne,{children:["Configure your SFTP ",e," adapter settings"]})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:e==="sender"?"source":"target",className:"w-full",children:[s.jsxs(Ke,{className:`grid w-full ${e==="sender"?"grid-cols-5":"grid-cols-4"}`,children:[s.jsx(xe,{value:e==="sender"?"source":"target",children:e==="sender"?"Source":"Target"}),s.jsx(xe,{value:"processing",children:"Processing"}),e==="sender"&&s.jsx(xe,{value:"transformation",children:"Transformation"}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(xe,{value:"fileFormat",children:"File Format"}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(xe,{value:"xmlConversion",children:"XML Conversion"})]}),e==="sender"&&s.jsxs(ye,{value:"source",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sourceDirectory",children:"Source Directory *"}),s.jsx(U,{id:"sourceDirectory",value:n.sourceDirectory,onChange:d=>a({sourceDirectory:d.target.value}),placeholder:"Enter source directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileName",children:"File Name *"}),s.jsx(U,{id:"fileName",value:n.fileName,onChange:d=>a({fileName:d.target.value}),placeholder:"Enter file name pattern"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"advancedSelection",checked:n.advancedSelection,onCheckedChange:d=>a({advancedSelection:d===!0})}),s.jsx(C,{htmlFor:"advancedSelection",children:"Advanced selection for Source files"})]}),n.advancedSelection&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"exclusionMask",children:"Exclusion Mask"}),s.jsx(U,{id:"exclusionMask",value:n.exclusionMask,onChange:d=>a({exclusionMask:d.target.value}),placeholder:"Enter exclusion pattern (e.g., *.tmp, backup_*)"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(C,{className:"text-sm font-medium",children:"Multiple File Selection"}),s.jsx("button",{type:"button",onClick:o,className:"text-sm text-primary hover:underline",children:"+ Add Entry"})]}),n.advancedEntries.map((d,u)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Directory"}),s.jsx(U,{value:d.directory,onChange:m=>i(u,"directory",m.target.value),placeholder:"Directory path",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"File Name"}),s.jsx(U,{value:d.fileName,onChange:m=>i(u,"fileName",m.target.value),placeholder:"File name pattern",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Exclusion Mask"}),s.jsx(U,{value:d.exclusionMask,onChange:m=>i(u,"exclusionMask",m.target.value),placeholder:"Exclusion pattern",className:"text-sm"})]}),n.advancedEntries.length>1&&s.jsx("button",{type:"button",onClick:()=>l(u),className:"text-xs text-destructive hover:underline self-end pb-2",children:"Remove"})]},u))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connection Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serverAddress",children:"Server Address *"}),s.jsx(U,{id:"serverAddress",value:n.serverAddress,onChange:d=>a({serverAddress:d.target.value}),placeholder:"Enter server address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",value:n.port,onChange:d=>a({port:d.target.value}),placeholder:"Enter port number (default: 22)",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout"}),s.jsx(U,{id:"timeout",value:n.timeout,onChange:d=>a({timeout:d.target.value}),placeholder:"Timeout in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication *"}),s.jsxs(se,{value:n.authenticationType,onValueChange:d=>a({authenticationType:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"public-key",children:"Public Key"}),s.jsx(F,{value:"username-password",children:"User Name/Password"}),s.jsx(F,{value:"dual",children:"Dual"}),s.jsx(F,{value:"dynamic",children:"Dynamic"})]})]})]}),c(),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"maxConcurrentConnections",children:"Maximum Concurrent Connections"}),s.jsx(U,{id:"maxConcurrentConnections",value:n.maxConcurrentConnections,onChange:d=>a({maxConcurrentConnections:d.target.value}),placeholder:"Enter max concurrent connections",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retryConnection",children:"Retry Connection"}),s.jsx(U,{id:"retryConnection",value:n.retryConnection,onChange:d=>a({retryConnection:d.target.value}),placeholder:"Number of retry attempts",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retryConnectionDelay",children:'Retry Connection Delay "in sec"'}),s.jsx(U,{id:"retryConnectionDelay",value:n.retryConnectionDelay,onChange:d=>a({retryConnectionDelay:d.target.value}),placeholder:"Delay between retries in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionMode",children:"Connection Mode *"}),s.jsxs(se,{value:n.connectionMode,onValueChange:d=>a({connectionMode:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"permanently",children:"Permanently"}),s.jsx(F,{value:"per-file-transfer",children:"Per File Transfer"})]})]})]})]})]})]}),e==="receiver"&&s.jsxs(ye,{value:"target",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetDirectory",children:"Target Directory *"}),s.jsx(U,{id:"targetDirectory",value:n.targetDirectory,onChange:d=>a({targetDirectory:d.target.value}),placeholder:"Enter target directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetFileName",children:"File Name *"}),s.jsx(U,{id:"targetFileName",value:n.targetFileName,onChange:d=>a({targetFileName:d.target.value}),placeholder:"Enter file name"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connection Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serverAddress",children:"Server Address *"}),s.jsx(U,{id:"serverAddress",value:n.serverAddress,onChange:d=>a({serverAddress:d.target.value}),placeholder:"Enter server address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",value:n.port,onChange:d=>a({port:d.target.value}),placeholder:"Enter port number (default: 22)",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout"}),s.jsx(U,{id:"timeout",value:n.timeout,onChange:d=>a({timeout:d.target.value}),placeholder:"Timeout in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication *"}),s.jsxs(se,{value:n.authenticationType,onValueChange:d=>a({authenticationType:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"public-key",children:"Public Key"}),s.jsx(F,{value:"username-password",children:"User Name/Password"}),s.jsx(F,{value:"dual",children:"Dual"}),s.jsx(F,{value:"dynamic",children:"Dynamic"})]})]})]}),c(),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"connectionMode",children:"Connection Mode *"}),s.jsxs(se,{value:n.connectionMode,onValueChange:d=>a({connectionMode:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"permanently",children:"Permanently"}),s.jsx(F,{value:"per-file-transfer",children:"Per File Transfer"})]})]})]})]})]})]}),s.jsx(ye,{value:"processing",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Processing Parameters"}),s.jsx(pt,{className:"mb-4"})]}),e==="sender"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"pollingInterval",children:'Polling Interval "Secs" *'}),s.jsx(U,{id:"pollingInterval",value:n.pollingInterval,onChange:d=>a({pollingInterval:d.target.value}),placeholder:"Enter polling interval in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"processingMode",children:"Processing Mode *"}),s.jsxs(se,{value:n.processingMode,onValueChange:d=>a({processingMode:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select processing mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"archive",children:"Archive"}),s.jsx(F,{value:"delete",children:"Delete"}),s.jsx(F,{value:"keep-file",children:"Keep File"})]})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"emptyFileHandling",children:"Empty File Handling *"}),s.jsxs(se,{value:n.emptyFileHandling,onValueChange:d=>a({emptyFileHandling:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty file handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"do-not-create-message",children:"Do not create message"}),s.jsx(F,{value:"process-empty-files",children:"Process empty files"}),s.jsx(F,{value:"skip-empty-files",children:"Skip empty files"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Duplicate Handling"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"enableDuplicateHandling",checked:n.enableDuplicateHandling,onCheckedChange:d=>a({enableDuplicateHandling:d===!0})}),s.jsx(C,{htmlFor:"enableDuplicateHandling",children:"Enable Duplicate Handling"})]}),n.enableDuplicateHandling&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"duplicateMessageAlertThreshold",children:"Duplicate message alert threshold"}),s.jsx(U,{id:"duplicateMessageAlertThreshold",value:n.duplicateMessageAlertThreshold,onChange:d=>a({duplicateMessageAlertThreshold:d.target.value}),placeholder:"Enter threshold value",type:"number"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"disableChannelOnExceed",checked:n.disableChannelOnExceed,onCheckedChange:d=>a({disableChannelOnExceed:d===!0})}),s.jsx(C,{htmlFor:"disableChannelOnExceed",children:"Disable Channel if Duplicate threshold has been exceeded"})]})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"createFileDirectory",checked:n.createFileDirectory,onCheckedChange:d=>a({createFileDirectory:d===!0})}),s.jsx(C,{htmlFor:"createFileDirectory",children:"Create File Directory"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"overwriteExistingFile",checked:n.overwriteExistingFile,onCheckedChange:d=>a({overwriteExistingFile:d===!0})}),s.jsx(C,{htmlFor:"overwriteExistingFile",children:"Overwrite Existing File"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileConstructionMode",children:"File Construction Mode *"}),s.jsxs(se,{value:n.fileConstructionMode,onValueChange:d=>a({fileConstructionMode:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file construction mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"create",children:"Create"}),s.jsx(F,{value:"append",children:"Append"}),s.jsx(F,{value:"add-time-stamp",children:"Add Time Stamp"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"filePlacement",children:"File Placement *"}),s.jsxs(se,{value:n.filePlacement,onValueChange:d=>a({filePlacement:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file placement"})}),s.jsxs(te,{children:[s.jsx(F,{value:"use-temporary-file",children:"Use Temporary File"}),s.jsx(F,{value:"write-out-directly",children:"Write Out Directly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emptyMessageHandling_receiver",children:"Empty-Message Handling *"}),s.jsxs(se,{value:n.emptyMessageHandling_receiver,onValueChange:d=>a({emptyMessageHandling_receiver:d}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty message handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"write-out-empty-file",children:"Write Out Empty File"}),s.jsx(F,{value:"ignore-empty-file",children:"Ignore Empty File"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"maxConcurrentConnections",children:"Maximum Concurrent Connections"}),s.jsx(U,{id:"maxConcurrentConnections",value:n.maxConcurrentConnections,onChange:d=>a({maxConcurrentConnections:d.target.value}),placeholder:"Enter max concurrent connections",type:"number"})]})]})]})]})}),e==="sender"&&s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:n.transformationConfig||{mode:"passthrough"},onChange:d=>a({transformationConfig:d}),adapterType:"SFTP",disabled:!1})}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"fileFormat",className:"mt-6",children:s.jsx(gb,{config:n.fileFormatConfig||{},onChange:d=>a({fileFormatConfig:d})})}),e==="sender"&&n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:e==="sender"?"SENDER":"RECEIVER",config:n.xmlConversion||{},onChange:d=>a({xmlConversion:d})})})]})})]})},Joe=({mode:e,onConfigChange:t})=>{const[n,r]=h.useState({sourceDirectory:"",fileName:"",sorting:"",advancedSelection:!1,exclusionMask:"",advancedEntries:[{directory:"",fileName:"",exclusionMask:""}],pollingInterval:"",processingMode:"",emptyFileHandling:"",enableDuplicateHandling:!1,duplicateMessageAlertThreshold:"",disableChannelOnExceed:!1,targetDirectory:"",targetFileName:"",fileConstructionMode:"",overwriteExistingFile:!1,createFileDirectory:!1,filePlacement:"",emptyMessageHandling_receiver:"",maxConcurrentConnections:"",fileFormatConfig:{fileFormat:"TEXT"},xmlConversion:{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0},transformationConfig:{mode:"transform",requiresStructure:!0}}),a=c=>{const d={...n,...c};r(d),t?.(d)},o=()=>{const c=[...n.advancedEntries,{directory:"",fileName:"",exclusionMask:""}];a({advancedEntries:c})},i=(c,d,u)=>{const m=[...n.advancedEntries];m[c]={...m[c],[d]:u},a({advancedEntries:m})},l=c=>{if(n.advancedEntries.length>1){const d=n.advancedEntries.filter((u,m)=>m!==c);a({advancedEntries:d})}};return s.jsxs(K,{className:"w-full",children:[s.jsxs(oe,{children:[s.jsxs(ie,{children:["File ",e==="sender"?"Sender":"Receiver"," Adapter Configuration"]}),s.jsxs(Ne,{children:["Configure your File ",e," adapter settings"]})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:e==="sender"?"source":"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:e==="sender"?"source":"target",children:e==="sender"?"Source":"Target"}),s.jsx(xe,{value:"processing",children:"Processing"}),s.jsx(xe,{value:"transformation",children:"Transformation"}),s.jsx(xe,{value:"fileFormat",children:"File Format"}),s.jsx(xe,{value:"xmlConversion",children:"XML Conversion"})]}),e==="sender"&&s.jsx(ye,{value:"source",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sourceDirectory",children:"Source Directory *"}),s.jsx(U,{id:"sourceDirectory",value:n.sourceDirectory,onChange:c=>a({sourceDirectory:c.target.value}),placeholder:"Enter source directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileName",children:"File Name *"}),s.jsx(U,{id:"fileName",value:n.fileName,onChange:c=>a({fileName:c.target.value}),placeholder:"Enter file name pattern"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sorting",children:"Sorting"}),s.jsxs(se,{value:n.sorting,onValueChange:c=>a({sorting:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select sorting option"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"timestamp-ascending",children:"Timestamp Ascending"}),s.jsx(F,{value:"timestamp-descending",children:"Timestamp Descending"}),s.jsx(F,{value:"file-size",children:"File Size"}),s.jsx(F,{value:"file-name",children:"File Name"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"advancedSelection",checked:n.advancedSelection,onCheckedChange:c=>a({advancedSelection:c===!0})}),s.jsx(C,{htmlFor:"advancedSelection",children:"Advanced selection for Source files"})]}),n.advancedSelection&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"exclusionMask",children:"Exclusion Mask"}),s.jsx(U,{id:"exclusionMask",value:n.exclusionMask,onChange:c=>a({exclusionMask:c.target.value}),placeholder:"Enter exclusion pattern (e.g., *.tmp, backup_*)"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(C,{className:"text-sm font-medium",children:"Multiple File Selection"}),s.jsx("button",{type:"button",onClick:o,className:"text-sm text-primary hover:underline",children:"+ Add Entry"})]}),n.advancedEntries.map((c,d)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Directory"}),s.jsx(U,{value:c.directory,onChange:u=>i(d,"directory",u.target.value),placeholder:"Directory path",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"File Name"}),s.jsx(U,{value:c.fileName,onChange:u=>i(d,"fileName",u.target.value),placeholder:"File name pattern",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Exclusion Mask"}),s.jsx(U,{value:c.exclusionMask,onChange:u=>i(d,"exclusionMask",u.target.value),placeholder:"Exclusion pattern",className:"text-sm"})]}),n.advancedEntries.length>1&&s.jsx("button",{type:"button",onClick:()=>l(d),className:"text-xs text-destructive hover:underline self-end pb-2",children:"Remove"})]},d))]})]})]})}),e==="receiver"&&s.jsx(ye,{value:"target",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"File Access Parameters"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetDirectory",children:"Target Directory *"}),s.jsx(U,{id:"targetDirectory",value:n.targetDirectory,onChange:c=>a({targetDirectory:c.target.value}),placeholder:"Enter target directory path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetFileName",children:"File Name *"}),s.jsx(U,{id:"targetFileName",value:n.targetFileName,onChange:c=>a({targetFileName:c.target.value}),placeholder:"Enter file name"})]})]})]})}),s.jsxs(ye,{value:"processing",className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Processing Parameters"}),s.jsx(pt,{className:"mb-4"})]}),e==="sender"?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"pollingInterval",children:"Polling Interval (Secs) *"}),s.jsx(U,{id:"pollingInterval",value:n.pollingInterval,onChange:c=>a({pollingInterval:c.target.value}),placeholder:"Enter polling interval in seconds",type:"number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"processingMode",children:"Processing Mode *"}),s.jsxs(se,{value:n.processingMode,onValueChange:c=>a({processingMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select processing mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"archive",children:"Archive"}),s.jsx(F,{value:"delete",children:"Delete"}),s.jsx(F,{value:"test",children:"Test"})]})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"emptyFileHandling",children:"Empty File Handling *"}),s.jsxs(se,{value:n.emptyFileHandling,onValueChange:c=>a({emptyFileHandling:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty file handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"do-not-create",children:"Do not create message"}),s.jsx(F,{value:"process-empty",children:"Process empty files"}),s.jsx(F,{value:"skip-empty",children:"Skip empty files"})]})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"createFileDirectory",checked:n.createFileDirectory,onCheckedChange:c=>a({createFileDirectory:c===!0})}),s.jsx(C,{htmlFor:"createFileDirectory",children:"Create File Directory"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"overwriteExistingFile",checked:n.overwriteExistingFile,onCheckedChange:c=>a({overwriteExistingFile:c===!0})}),s.jsx(C,{htmlFor:"overwriteExistingFile",children:"Overwrite Existing File"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fileConstructionMode",children:"File Construction Mode *"}),s.jsxs(se,{value:n.fileConstructionMode,onValueChange:c=>a({fileConstructionMode:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file construction mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"create",children:"Create"}),s.jsx(F,{value:"append",children:"Append"}),s.jsx(F,{value:"add-time-stamp",children:"Add Time Stamp"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"filePlacement",children:"File Placement *"}),s.jsxs(se,{value:n.filePlacement,onValueChange:c=>a({filePlacement:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select file placement"})}),s.jsxs(te,{children:[s.jsx(F,{value:"use-temporary-file",children:"Use Temporary File"}),s.jsx(F,{value:"write-out-directly",children:"Write Out Directly"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emptyMessageHandling_receiver",children:"Empty-Message Handling *"}),s.jsxs(se,{value:n.emptyMessageHandling_receiver,onValueChange:c=>a({emptyMessageHandling_receiver:c}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select empty message handling"})}),s.jsxs(te,{children:[s.jsx(F,{value:"write-out-empty-file",children:"Write Out Empty File"}),s.jsx(F,{value:"ignore-empty-file",children:"Ignore Empty File"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"maxConcurrentConnections",children:"Maximum Concurrent Connections"}),s.jsx(U,{id:"maxConcurrentConnections",value:n.maxConcurrentConnections,onChange:c=>a({maxConcurrentConnections:c.target.value}),placeholder:"Enter maximum concurrent connections",type:"number"})]})]})]})]}),e==="sender"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Duplicate Handling"}),s.jsx(pt,{className:"mb-4"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"enableDuplicateHandling",checked:n.enableDuplicateHandling,onCheckedChange:c=>a({enableDuplicateHandling:c===!0})}),s.jsx(C,{htmlFor:"enableDuplicateHandling",children:"Enable Duplicate Handling"})]}),n.enableDuplicateHandling&&s.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/20",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"duplicateThreshold",children:"Duplicate Message Alert Threshold *"}),s.jsx(U,{id:"duplicateThreshold",value:n.duplicateMessageAlertThreshold,onChange:c=>a({duplicateMessageAlertThreshold:c.target.value}),placeholder:"Enter threshold value",type:"number"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"disableChannelOnExceed",checked:n.disableChannelOnExceed,onCheckedChange:c=>a({disableChannelOnExceed:c===!0})}),s.jsx(C,{htmlFor:"disableChannelOnExceed",children:"Disable Channel if Duplicate threshold has been exceeded"})]})]})]})]})]}),s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:n.transformationConfig||{mode:"transform"},onChange:c=>a({transformationConfig:c}),adapterType:"FILE",disabled:!1})}),n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"fileFormat",className:"mt-6",children:s.jsx(gb,{config:n.fileFormatConfig||{},onChange:c=>a({fileFormatConfig:c})})}),n.transformationConfig?.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:e==="sender"?"SENDER":"RECEIVER",config:n.xmlConversion||{},onChange:c=>a({xmlConversion:c})})})]})})]})},Og=({config:e,onChange:t,adapterType:n,mode:r,disabled:a=!1})=>{const[o,i]=h.useState(""),l=x=>{const f=[];try{JSON.parse(x)}catch(w){f.push(`Invalid JSON: ${w.message}`)}return f},c=x=>{const f=[];try{new DOMParser().parseFromString(x,"text/xml").querySelector("parsererror")&&f.push("Invalid XML format")}catch(w){f.push(`XML parsing error: ${w.message}`)}return f},d=x=>{const f={...e,samplePayload:x};if(x){const w=e.format==="JSON"?l(x):c(x);if(f.validationErrors=w,e.format==="JSON"&&w.length===0)try{const y=JSON.parse(x),v=u(y);i(v),f.convertedXml=v}catch(y){console.error("Error converting to XML preview:",y)}}t(f)},u=x=>{const f=(w,y="")=>{let v="";return Array.isArray(w)?w.forEach(j=>{v+=`${y}<item>
${f(j,y+"  ")}${y}</item>
`}):typeof w=="object"&&w!==null?Object.entries(w).forEach(([j,N])=>{const b=j.replace(/[^a-zA-Z0-9_-]/g,"_");typeof N=="object"&&N!==null?v+=`${y}<${b}>
${f(N,y+"  ")}${y}</${b}>
`:v+=`${y}<${b}>${m(String(N))}</${b}>
`}):v+=`${y}${m(String(w))}
`,v};return`<?xml version="1.0" encoding="UTF-8"?>
<Message>
${f(x,"  ")}</Message>`},m=x=>x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),p=()=>{if(!(!e.samplePayload||e.format!=="JSON"))try{const x=JSON.parse(e.samplePayload),f=g(x);t({...e,jsonSchema:JSON.stringify(f,null,2)})}catch(x){console.error("Error generating schema:",x)}},g=x=>{const f={$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{}},w=y=>{if(y===null)return{type:"null"};if(typeof y=="string")return{type:"string"};if(typeof y=="number")return{type:"number"};if(typeof y=="boolean")return{type:"boolean"};if(Array.isArray(y))return y.length>0?{type:"array",items:w(y[0])}:{type:"array"};if(typeof y=="object"){const v={type:"object",properties:{}};return Object.entries(y).forEach(([j,N])=>{v.properties[j]=w(N)}),v}return{type:"string"}};return Object.entries(x).forEach(([y,v])=>{f.properties[y]=w(v)}),f};return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Payload Structure Definition"}),s.jsxs(Ne,{children:["Define the structure of ",r==="sender"?"incoming":"outgoing"," payloads for your ",n," adapter"]})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsxs(ze,{children:["For REST/HTTP adapters, the payload structure will be automatically converted to XML for mapping.",e.format==="JSON"&&" JSON payloads will be transformed to XML with appropriate element names."]})]}),s.jsxs(et,{defaultValue:"sample",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsx(xe,{value:"sample",children:"Sample Payload"}),s.jsx(xe,{value:"schema",children:"Schema Definition"}),s.jsx(xe,{value:"preview",disabled:!e.samplePayload||e.format!=="JSON",children:"XML Preview"})]}),s.jsxs(ye,{value:"sample",className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{children:["Sample ",e.format," Payload"]}),s.jsx(Re,{placeholder:e.format==="JSON"?`{
  "orderId": "12345",
  "customer": {
    "name": "John Doe",
    "email": "john@example.com"
  },
  "items": [...]
}`:`<Order>
  <OrderId>12345</OrderId>
  <Customer>
    <Name>John Doe</Name>
  </Customer>
</Order>`,className:"font-mono text-sm min-h-[300px]",value:e.samplePayload||"",onChange:x=>d(x.target.value),disabled:a}),e.validationErrors&&e.validationErrors.length>0&&s.jsx("div",{className:"space-y-1",children:e.validationErrors.map((x,f)=>s.jsx("p",{className:"text-sm text-destructive",children:x},f))}),e.samplePayload&&(!e.validationErrors||e.validationErrors.length===0)&&s.jsxs("p",{className:"text-sm text-success flex items-center gap-1",children:[s.jsx(rs,{className:"h-3 w-3"}),"Valid ",e.format," payload"]})]}),e.format==="JSON"&&e.samplePayload&&(!e.validationErrors||e.validationErrors.length===0)&&s.jsxs(z,{variant:"outline",size:"sm",onClick:p,disabled:a,children:[s.jsx(O0,{className:"h-4 w-4 mr-2"}),"Generate JSON Schema"]})]}),s.jsx(ye,{value:"schema",className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{children:[e.format," Schema"]}),s.jsx(Re,{placeholder:e.format==="JSON"?"JSON Schema (optional)":"XSD Schema (optional)",className:"font-mono text-sm min-h-[300px]",value:e.format==="JSON"?e.jsonSchema:e.xmlSchema,onChange:x=>t({...e,[e.format==="JSON"?"jsonSchema":"xmlSchema"]:x.target.value}),disabled:a}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Schema definition is optional but helps with validation and documentation"})]})}),s.jsxs(ye,{value:"preview",className:"space-y-4",children:[s.jsxs(We,{children:[s.jsx(R0,{className:"h-4 w-4"}),s.jsx(ze,{children:"This preview shows how your JSON payload will be converted to XML for mapping"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"XML Conversion Preview"}),s.jsx(Re,{className:"font-mono text-sm min-h-[300px] bg-muted",value:o,readOnly:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This XML structure will be used in the mapping screen"})]})]})]})]})]})};function Qoe({configuration:e,onConfigurationChange:t}){const{businessComponents:n,loading:r}=To(),{structures:a}=ah(),[o,i]=h.useState(""),[l,c]=h.useState([]),[d,u]=h.useState(e.transformationConfig||{mode:"transform",requiresStructure:!0}),[m,p]=h.useState(e.payloadStructureConfig||{format:"JSON"});h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS")},[]),h.useEffect(()=>{if(o){const f=a.filter(w=>w.usage==="source");c(f)}else c([])},[o,a]);const g=f=>{u(f),t("transformationConfig",f)},x=f=>{p(f),t("payloadStructureConfig",f)};return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"HTTP Sender Configuration"}),s.jsx(Ne,{children:"Configure your HTTP sender adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"}),s.jsx(xe,{value:"transformation",children:"Transformation"}),s.jsx(xe,{value:"payload",disabled:d.mode!=="transform",children:"Payload Structure"}),s.jsx(xe,{value:"xmlConversion",disabled:d.mode!=="transform",children:"XML Conversion"})]}),s.jsx(ye,{value:"source",className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Connection Details"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"endpointUrl",children:"Endpoint URL"}),s.jsx(U,{id:"endpointUrl",type:"text",placeholder:"The URL where the 3rd party sends requests",value:e.endpointUrl||"",onChange:f=>t("endpointUrl",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"httpMethod",children:"HTTP Method"}),s.jsxs(se,{value:e.httpMethod||"",onValueChange:f=>t("httpMethod",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select HTTP method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"GET",children:"GET"}),s.jsx(F,{value:"POST",children:"POST"}),s.jsx(F,{value:"PUT",children:"PUT"}),s.jsx(F,{value:"DELETE",children:"DELETE"}),s.jsx(F,{value:"PATCH",children:"PATCH"}),s.jsx(F,{value:"HEAD",children:"HEAD"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"contentType",children:"Content-Type"}),s.jsxs(se,{value:e.contentType||"",onValueChange:f=>t("contentType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select media type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"application/json",children:"application/json"}),s.jsx(F,{value:"application/xml",children:"application/xml"}),s.jsx(F,{value:"text/xml",children:"text/xml"}),s.jsx(F,{value:"application/x-www-form-urlencoded",children:"application/x-www-form-urlencoded"}),s.jsx(F,{value:"text/plain",children:"text/plain"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sslConfig",children:"SSL/TLS Configuration"}),s.jsx(Re,{id:"sslConfig",placeholder:"SSL certificates/truststore info for HTTPS",value:e.sslConfig||"",onChange:f=>t("sslConfig",f.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiVersion",children:"API Version"}),s.jsx(U,{id:"apiVersion",type:"text",placeholder:"Version of the API being called",value:e.apiVersion||"",onChange:f=>t("apiVersion",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rateLimits",children:"Throttling/Rate Limits"}),s.jsx(U,{id:"rateLimits",type:"text",placeholder:"Limits on calls per time period",value:e.rateLimits||"",onChange:f=>t("rateLimits",f.target.value)})]})]})}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Return immediate acknowledgment (HTTP 202), process in background":"Wait for complete processing before sending response back to caller"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:f=>t("processingMode",f?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseTimeout",children:"Async Response Timeout (ms)"}),s.jsx(U,{id:"asyncResponseTimeout",type:"number",placeholder:"30000",value:e.asyncResponseTimeout||"",onChange:f=>t("asyncResponseTimeout",parseInt(f.target.value)||3e4)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseFormat",children:"Async Response Format"}),s.jsxs(se,{value:e.asyncResponseFormat||"HTTP_202",onValueChange:f=>t("asyncResponseFormat",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select response format"})}),s.jsxs(te,{children:[s.jsx(F,{value:"HTTP_202",children:"HTTP 202 Accepted"}),s.jsx(F,{value:"CUSTOM_RESPONSE",children:"Custom Response"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCallbackUrl",children:"Callback URL (Optional)"}),s.jsx(U,{id:"asyncCallbackUrl",type:"url",placeholder:"https://callback-endpoint.example.com/webhook",value:e.asyncCallbackUrl||"",onChange:f=>t("asyncCallbackUrl",f.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Data Handling"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component"}),s.jsxs(se,{value:o,onValueChange:f=>{i(f),t("businessComponentId",f)},disabled:r,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsx(te,{className:"bg-background border z-50",children:n.map(f=>s.jsx(F,{value:f.id,children:f.name},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"requestPayloadFormat",children:"Request Payload Format"}),s.jsxs(se,{value:e.requestPayloadFormat||"",onValueChange:f=>t("requestPayloadFormat",f),disabled:!o||l.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select request structure"})}),s.jsx(te,{className:"bg-background border z-50",children:l.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseFormat",children:"Response Format"}),s.jsxs(se,{value:e.responseFormat||"",onValueChange:f=>t("responseFormat",f),disabled:!o||l.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select response structure"})}),s.jsx(te,{className:"bg-background border z-50",children:l.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"customHeaders",children:"Custom Headers"}),s.jsx(Re,{id:"customHeaders",placeholder:"Additional HTTP headers needed (e.g., correlation ID)",value:e.customHeaders||"",onChange:f=>t("customHeaders",f.target.value),className:"min-h-[80px]"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Security"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authenticationType||"",onValueChange:f=>t("authenticationType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"oauth2-bearer",children:"OAuth2 Bearer Token"}),s.jsx(F,{value:"api-key",children:"API Key"}),s.jsx(F,{value:"jwt",children:"JWT"})]})]})]}),e.authenticationType==="basic"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicUsername",children:"Username"}),s.jsx(U,{id:"basicUsername",type:"text",placeholder:"Basic auth username",value:e.basicUsername||"",onChange:f=>t("basicUsername",f.target.value)})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(xs,{name:"basicPassword",label:"Password",placeholder:"Basic auth password",value:e.basicPassword||"",onValueChange:f=>t("basicPassword",f),showConfirmation:!1})})]}),e.authenticationType==="oauth2-bearer"&&s.jsx("div",{className:"space-y-2",children:s.jsx(xs,{name:"bearerToken",label:"Bearer Token",placeholder:"OAuth2 bearer token",value:e.bearerToken||"",onValueChange:f=>t("bearerToken",f),showConfirmation:!1})}),e.authenticationType==="api-key"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyName",children:"API Key Name"}),s.jsx(U,{id:"apiKeyName",type:"text",placeholder:"API key header name (e.g., X-API-Key)",value:e.apiKeyName||"",onChange:f=>t("apiKeyName",f.target.value)})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(xs,{name:"apiKeyValue",label:"API Key Value",placeholder:"API key value",value:e.apiKeyValue||"",onValueChange:f=>t("apiKeyValue",f),showConfirmation:!1})})]}),e.authenticationType==="jwt"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"jwtToken",children:"JWT Token"}),s.jsx(Re,{id:"jwtToken",placeholder:"JWT token or signing key",value:e.jwtToken||"",onChange:f=>t("jwtToken",f.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"jwtAlgorithm",children:"JWT Algorithm"}),s.jsxs(se,{value:e.jwtAlgorithm||"",onValueChange:f=>t("jwtAlgorithm",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select JWT algorithm"})}),s.jsxs(te,{children:[s.jsx(F,{value:"HS256",children:"HS256"}),s.jsx(F,{value:"HS384",children:"HS384"}),s.jsx(F,{value:"HS512",children:"HS512"}),s.jsx(F,{value:"RS256",children:"RS256"}),s.jsx(F,{value:"RS384",children:"RS384"}),s.jsx(F,{value:"RS512",children:"RS512"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Response & Error Handling"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"errorHandling",children:"Error Handling"}),s.jsx(Re,{id:"errorHandling",placeholder:"Expected error codes and their meanings",value:e.errorHandling||"",onChange:f=>t("errorHandling",f.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retryPolicy",children:"Retry Policy"}),s.jsx(Re,{id:"retryPolicy",placeholder:"Instructions on retries or idempotency",value:e.retryPolicy||"",onChange:f=>t("retryPolicy",f.target.value),className:"min-h-[80px]"})]})]})]}),s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:d,onChange:g,adapterType:"HTTP",dataStructures:l,disabled:!1})}),d.mode==="transform"&&s.jsx(ye,{value:"payload",className:"mt-6",children:s.jsx(Og,{config:m,onChange:x,adapterType:"HTTP",mode:"sender",disabled:!1})}),d.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:"SENDER",config:e.xmlConversion||{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0},onChange:f=>t("xmlConversion",f)})})]})})]})}class Zoe{async getAllCertificates(t){const n=t?`?businessComponentId=${t}`:"";return G.get(`/certificates${n}`)}async getCertificateById(t){return G.get(`/certificates/${t}`)}async createCertificate(t){return G.post("/certificates",t)}async updateCertificate(t,n){return G.put(`/certificates/${t}`,n)}async deleteCertificate(t){return G.delete(`/certificates/${t}`)}async uploadCertificate(t,n){const r=new FormData;return r.append("file",t),r.append("name",n.name),r.append("type",n.type),r.append("usage",n.usage),G.post("/certificates/upload",r,{headers:{"Content-Type":"multipart/form-data"}})}async downloadCertificate(t){const n=await fetch(`${G.baseURL}/certificates/${t}/download`,{method:"GET",headers:G.getAuthHeaders()});if(!n.ok)throw new Error("Failed to download certificate");return n.blob()}async getCertificatesByBusinessComponent(t){return G.get(`/business-components/${t}/certificates`)}async validateCertificate(t){return G.get(`/certificates/${t}/validate`)}async getExpiringCertificates(t=30){return G.get(`/certificates/expiring?days=${t}`)}}const T$=new Zoe,xb=({id:e,label:t,value:n,onChange:r,businessComponentId:a,placeholder:o="Select certificate",required:i=!1})=>{const[l,c]=h.useState([]),[d,u]=h.useState(!0);h.useEffect(()=>{(async()=>{try{u(!0);const g=await T$.getAllCertificates(a);g.success&&g.data?c(g.data):(console.error("Failed to fetch certificates:",g.error),c([]))}catch(g){console.error("Error fetching certificates:",g),c([]),Ar({title:"Error",description:"Failed to load certificates",variant:"destructive"})}finally{u(!1)}})()},[a]);const m=l.filter(p=>p.status==="active");return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:e,className:"flex items-center gap-1",children:[t,i&&s.jsx("span",{className:"text-destructive",children:"*"})]}),d?s.jsx(nt,{className:"h-10 w-full"}):s.jsxs(se,{value:n,onValueChange:r,children:[s.jsx(ee,{id:e,children:s.jsx(ne,{placeholder:o})}),s.jsx(te,{children:m.length===0?s.jsxs(F,{value:"",disabled:!0,children:["No certificates available ",a?"for this business component":""]}):m.map(p=>s.jsx(F,{value:p.id,children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:p.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[p.type," • ",p.issuer]})]})},p.id))})]})]})};function eie({configuration:e,onConfigurationChange:t,businessComponentId:n}){const[r,a]=h.useState(e.transformationConfig||{mode:"transform",requiresStructure:!0}),[o,i]=h.useState(e.payloadStructureConfig||{format:"JSON"}),l=d=>{a(d),t("transformationConfig",d)},c=d=>{i(d),t("payloadStructureConfig",d)};return h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS")},[]),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"HTTP Receiver Configuration"}),s.jsx(Ne,{children:"Configure your HTTP receiver adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"}),s.jsx(xe,{value:"transformation",children:"Transformation"}),s.jsx(xe,{value:"payload",disabled:r.mode!=="transform",children:"Payload Structure"}),s.jsx(xe,{value:"xmlConversion",disabled:r.mode!=="transform",children:"XML Conversion"})]}),s.jsx(ye,{value:"target",className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Connection"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetEndpointUrl",children:"Target Endpoint URL"}),s.jsx(U,{id:"targetEndpointUrl",type:"text",placeholder:"Full URL of the 3rd party API endpoint",value:e.targetEndpointUrl||"",onChange:d=>t("targetEndpointUrl",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"httpMethod",children:"HTTP Method"}),s.jsxs(se,{value:e.httpMethod||"",onValueChange:d=>t("httpMethod",d),children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select HTTP method"})}),s.jsxs(te,{className:"bg-background border z-50",children:[s.jsx(F,{value:"GET",children:"GET"}),s.jsx(F,{value:"POST",children:"POST"}),s.jsx(F,{value:"PUT",children:"PUT"}),s.jsx(F,{value:"DELETE",children:"DELETE"}),s.jsx(F,{value:"PATCH",children:"PATCH"}),s.jsx(F,{value:"HEAD",children:"HEAD"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionTimeout",children:"Connection Timeout"}),s.jsx(U,{id:"connectionTimeout",type:"number",placeholder:"Max time to wait to establish connection (seconds)",value:e.connectionTimeout||"",onChange:d=>t("connectionTimeout",parseInt(d.target.value)||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"readTimeout",children:"Read Timeout"}),s.jsx(U,{id:"readTimeout",type:"number",placeholder:"Max time to wait for response (seconds)",value:e.readTimeout||"",onChange:d=>t("readTimeout",parseInt(d.target.value)||0)})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"useProxy",checked:e.useProxy||!1,onCheckedChange:d=>t("useProxy",d)}),s.jsx(C,{htmlFor:"useProxy",children:"Use Proxy Settings"})]}),e.useProxy&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"proxyServer",children:"Server"}),s.jsx(U,{id:"proxyServer",type:"text",placeholder:"Proxy server address",value:e.proxyServer||"",onChange:d=>t("proxyServer",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"proxyPort",children:"Port"}),s.jsx(U,{id:"proxyPort",type:"number",placeholder:"Proxy port",value:e.proxyPort||"",onChange:d=>t("proxyPort",parseInt(d.target.value)||0)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"proxyUsername",children:"User Name"}),s.jsx(U,{id:"proxyUsername",type:"text",placeholder:"Proxy username",value:e.proxyUsername||"",onChange:d=>t("proxyUsername",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"proxyPassword",children:"Password"}),s.jsx(U,{id:"proxyPassword",type:"password",placeholder:"Proxy password",value:e.proxyPassword||"",onChange:d=>t("proxyPassword",d.target.value)})]})]})]})]})}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Fire-and-forget: don't wait for response from target system":"Wait for complete response from target system before continuing flow"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:d=>t("processingMode",d?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="SYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseTimeout",children:"Response Timeout (ms)"}),s.jsx(U,{id:"responseTimeout",type:"number",placeholder:"30000",value:e.responseTimeout||"",onChange:d=>t("responseTimeout",parseInt(d.target.value)||3e4)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"waitForResponse",checked:e.waitForResponse!==!1,onCheckedChange:d=>t("waitForResponse",d)}),s.jsx(C,{htmlFor:"waitForResponse",className:"text-sm",children:"Wait for response in synchronous mode"})]})]}),e.processingMode==="ASYNCHRONOUS"&&s.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCorrelationId",children:"Correlation ID (Optional)"}),s.jsx(U,{id:"asyncCorrelationId",type:"text",placeholder:"Unique identifier for async processing",value:e.asyncCorrelationId||"",onChange:d=>t("asyncCorrelationId",d.target.value)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Security"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authenticationType||"",onValueChange:d=>t("authenticationType",d),children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select authentication method"})}),s.jsxs(te,{className:"bg-background border z-50",children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic"}),s.jsx(F,{value:"oauth2-client-credentials",children:"OAuth2 Client Credentials"}),s.jsx(F,{value:"client-certificate",children:"Client Certificate"})]})]})]}),e.authenticationType==="basic"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicUsername",children:"Username"}),s.jsx(U,{id:"basicUsername",type:"text",placeholder:"Basic auth username",value:e.basicUsername||"",onChange:d=>t("basicUsername",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicPassword",children:"Password"}),s.jsx(U,{id:"basicPassword",type:"password",placeholder:"Basic auth password",value:e.basicPassword||"",onChange:d=>t("basicPassword",d.target.value)})]})]}),e.authenticationType==="oauth2-client-credentials"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientId",children:"Client ID"}),s.jsx(U,{id:"clientId",type:"text",placeholder:"OAuth2 client ID",value:e.clientId||"",onChange:d=>t("clientId",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientSecret",children:"Client Secret"}),s.jsx(U,{id:"clientSecret",type:"password",placeholder:"OAuth2 client secret",value:e.clientSecret||"",onChange:d=>t("clientSecret",d.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"tokenUrl",children:"Token URL"}),s.jsx(U,{id:"tokenUrl",type:"text",placeholder:"OAuth2 token endpoint URL",value:e.tokenUrl||"",onChange:d=>t("tokenUrl",d.target.value)})]})]}),e.authenticationType==="client-certificate"&&s.jsx("div",{className:"space-y-4",children:s.jsx(xb,{id:"certificate",label:"Client Certificate",value:e.certificateId||"",onChange:d=>t("certificateId",d),businessComponentId:n,placeholder:"Select client certificate",required:!0})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Request"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"requestHeaders",children:"Request Headers"}),s.jsx(Re,{id:"requestHeaders",placeholder:"Headers to send with the HTTP request",value:e.requestHeaders||"",onChange:d=>t("requestHeaders",d.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"requestPayloadFormat",children:"Request Payload Format"}),s.jsx(Re,{id:"requestPayloadFormat",placeholder:"Expected format/schema for request body",value:e.requestPayloadFormat||"",onChange:d=>t("requestPayloadFormat",d.target.value),className:"min-h-[80px]"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Response"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseHandling",children:"Response Handling"}),s.jsx(Re,{id:"responseHandling",placeholder:"Expected response format and handling logic",value:e.responseHandling||"",onChange:d=>t("responseHandling",d.target.value),className:"min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retryPolicy",children:"Retry Policy"}),s.jsx(Re,{id:"retryPolicy",placeholder:"Rules for retrying failed requests",value:e.retryPolicy||"",onChange:d=>t("retryPolicy",d.target.value),className:"min-h-[80px]"})]})]})]}),s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:r,onChange:l,adapterType:"HTTP",disabled:!1})}),r.mode==="transform"&&s.jsx(ye,{value:"payload",className:"mt-6",children:s.jsx(Og,{config:o,onChange:c,adapterType:"HTTP",mode:"receiver",disabled:!1})}),r.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:"RECEIVER",config:e.xmlConversion||{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0,removeRootElement:!0,handleNamespaces:!0},onChange:d=>t("xmlConversion",d)})})]})})]})}const tie=["TCP/IP","Gateway"];function sie({configuration:e,onConfigurationChange:t}){return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"IDOC Sender Configuration"}),s.jsx(Ne,{children:"Configure your IDOC sender adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"source",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"SAP System Identification"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemId",children:"SAP System ID (SID)"}),s.jsx(U,{id:"sapSystemId",type:"text",placeholder:"e.g., PRD, DEV",value:e.sapSystemId||"",onChange:n=>t("sapSystemId",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapClientNumber",children:"SAP Client Number"}),s.jsx(U,{id:"sapClientNumber",type:"text",placeholder:"Client number within SAP system",value:e.sapClientNumber||"",onChange:n=>t("sapClientNumber",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemNumber",children:"SAP System Number"}),s.jsx(U,{id:"sapSystemNumber",type:"text",placeholder:"Two-digit SAP system number",value:e.sapSystemNumber||"",onChange:n=>t("sapSystemNumber",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Connection Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapApplicationServerHost",children:"SAP Application Server Host"}),s.jsx(U,{id:"sapApplicationServerHost",type:"text",placeholder:"Hostname or IP of SAP application server",value:e.sapApplicationServerHost||"",onChange:n=>t("sapApplicationServerHost",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayHost",children:"SAP Gateway Host"}),s.jsx(U,{id:"sapGatewayHost",type:"text",placeholder:"Hostname/IP of SAP gateway (optional)",value:e.sapGatewayHost||"",onChange:n=>t("sapGatewayHost",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayService",children:"SAP Gateway Service"}),s.jsx(U,{id:"sapGatewayService",type:"text",placeholder:"Gateway service/port (optional)",value:e.sapGatewayService||"",onChange:n=>t("sapGatewayService",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"portNumber",children:"Port Number"}),s.jsx(U,{id:"portNumber",type:"number",placeholder:"Network port if applicable",value:e.portNumber||"",onChange:n=>t("portNumber",parseInt(n.target.value)||0)})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionType",children:"Connection Type"}),s.jsxs(se,{value:e.connectionType||"",onValueChange:n=>t("connectionType",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection type"})}),s.jsx(te,{children:tie.map(n=>s.jsx(F,{value:n,children:n},n))})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Authentication"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapUser",children:"SAP User"}),s.jsx(U,{id:"sapUser",type:"text",placeholder:"User ID for RFC connection",value:e.sapUser||"",onChange:n=>t("sapUser",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapPassword",children:"SAP Password"}),s.jsx(U,{id:"sapPassword",type:"password",placeholder:"Password for RFC user",value:e.sapPassword||"",onChange:n=>t("sapPassword",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"RFC Destination"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rfcDestinationName",children:"RFC Destination Name"}),s.jsx(U,{id:"rfcDestinationName",type:"text",placeholder:"SAP RFC destination (optional)",value:e.rfcDestinationName||"",onChange:n=>t("rfcDestinationName",n.target.value)})]})})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"IDoc Transmission"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"idocPort",children:"IDoc Port"}),s.jsx(U,{id:"idocPort",type:"text",placeholder:"Logical port configured in SAP for receiving IDocs from middleware",value:e.idocPort||"",onChange:n=>t("idocPort",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"listenerServiceName",children:"Listener Service Name"}),s.jsx(U,{id:"listenerServiceName",type:"text",placeholder:"Middleware service or process name sending the IDoc",value:e.listenerServiceName||"",onChange:n=>t("listenerServiceName",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"IDoc Identification"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"idocType",children:"IDoc Type"}),s.jsx(U,{id:"idocType",type:"text",placeholder:"e.g., ORDERS05",value:e.idocType||"",onChange:n=>t("idocType",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"messageType",children:"Message Type"}),s.jsx(U,{id:"messageType",type:"text",placeholder:"e.g., ORDERS",value:e.messageType||"",onChange:n=>t("messageType",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"processCode",children:"Process Code"}),s.jsx(U,{id:"processCode",type:"text",placeholder:"SAP process code used for sending the IDoc",value:e.processCode||"",onChange:n=>t("processCode",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Security / Encryption"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sncSecuritySettings",children:"SNC / Security Settings"}),s.jsx(Re,{id:"sncSecuritySettings",placeholder:"Secure Network Communications parameters (optional)",value:e.sncSecuritySettings||"",onChange:n=>t("sncSecuritySettings",n.target.value),rows:4})]})})]})]})]})})]})}const nie=["TCP/IP","Gateway"];function rie({configuration:e,onConfigurationChange:t}){return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"IDOC Receiver Configuration"}),s.jsx(Ne,{children:"Configure your IDOC receiver adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"target",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"SAP System Identification"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemId",children:"SAP System ID (SID)"}),s.jsx(U,{id:"sapSystemId",type:"text",placeholder:"e.g., PRD, DEV",value:e.sapSystemId||"",onChange:n=>t("sapSystemId",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapClientNumber",children:"SAP Client Number"}),s.jsx(U,{id:"sapClientNumber",type:"text",placeholder:"Client number within SAP system",value:e.sapClientNumber||"",onChange:n=>t("sapClientNumber",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemNumber",children:"SAP System Number"}),s.jsx(U,{id:"sapSystemNumber",type:"text",placeholder:"Two-digit SAP system number",value:e.sapSystemNumber||"",onChange:n=>t("sapSystemNumber",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Connection Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapApplicationServerHost",children:"SAP Application Server Host"}),s.jsx(U,{id:"sapApplicationServerHost",type:"text",placeholder:"Hostname or IP of SAP application server",value:e.sapApplicationServerHost||"",onChange:n=>t("sapApplicationServerHost",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayHost",children:"SAP Gateway Host"}),s.jsx(U,{id:"sapGatewayHost",type:"text",placeholder:"Hostname/IP of SAP gateway (optional)",value:e.sapGatewayHost||"",onChange:n=>t("sapGatewayHost",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayService",children:"SAP Gateway Service"}),s.jsx(U,{id:"sapGatewayService",type:"text",placeholder:"Gateway service/port (optional)",value:e.sapGatewayService||"",onChange:n=>t("sapGatewayService",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"portNumber",children:"Port Number"}),s.jsx(U,{id:"portNumber",type:"number",placeholder:"Network port if applicable",value:e.portNumber||"",onChange:n=>t("portNumber",parseInt(n.target.value)||0)})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionType",children:"Connection Type"}),s.jsxs(se,{value:e.connectionType||"",onValueChange:n=>t("connectionType",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection type"})}),s.jsx(te,{children:nie.map(n=>s.jsx(F,{value:n,children:n},n))})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Authentication"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapUser",children:"SAP User"}),s.jsx(U,{id:"sapUser",type:"text",placeholder:"User ID for RFC connection",value:e.sapUser||"",onChange:n=>t("sapUser",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapPassword",children:"SAP Password"}),s.jsx(U,{id:"sapPassword",type:"password",placeholder:"Password for RFC user",value:e.sapPassword||"",onChange:n=>t("sapPassword",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"RFC Destination"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rfcDestinationName",children:"RFC Destination Name"}),s.jsx(U,{id:"rfcDestinationName",type:"text",placeholder:"SAP RFC destination (optional)",value:e.rfcDestinationName||"",onChange:n=>t("rfcDestinationName",n.target.value)})]})})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"IDoc Transmission"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"idocPort",children:"IDoc Port"}),s.jsx(U,{id:"idocPort",type:"text",placeholder:"Logical port configured in SAP for receiving IDocs from middleware",value:e.idocPort||"",onChange:n=>t("idocPort",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"listenerServiceName",children:"Listener Service Name"}),s.jsx(U,{id:"listenerServiceName",type:"text",placeholder:"Middleware service or process name sending the IDoc",value:e.listenerServiceName||"",onChange:n=>t("listenerServiceName",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"IDoc Identification"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"idocType",children:"IDoc Type"}),s.jsx(U,{id:"idocType",type:"text",placeholder:"e.g., ORDERS05",value:e.idocType||"",onChange:n=>t("idocType",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"messageType",children:"Message Type"}),s.jsx(U,{id:"messageType",type:"text",placeholder:"e.g., ORDERS",value:e.messageType||"",onChange:n=>t("messageType",n.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"processCode",children:"Process Code"}),s.jsx(U,{id:"processCode",type:"text",placeholder:"SAP process code used for sending the IDoc",value:e.processCode||"",onChange:n=>t("processCode",n.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium border-b pb-2",children:"Security / Encryption"}),s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sncSecuritySettings",children:"SNC / Security Settings"}),s.jsx(Re,{id:"sncSecuritySettings",placeholder:"Secure Network Communications parameters (optional)",value:e.sncSecuritySettings||"",onChange:n=>t("sncSecuritySettings",n.target.value),rows:4})]})})]})]})]})})]})}function aie({adapter:e,onUpdate:t}){const n=(r,a)=>{t({...e,configuration:{...e.configuration,[r]:a}})};return s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing Details"})]}),s.jsx(ye,{value:"source",className:"space-y-6",children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Connection Details"})}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionFactoryClass",children:"Connection Factory class"}),s.jsx(U,{id:"connectionFactoryClass",placeholder:"com.ibm.mq.jms.MQConnectionFactory",value:e.configuration.connectionFactoryClass||"",onChange:r=>n("connectionFactoryClass",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueClass",children:"Queue class"}),s.jsx(U,{id:"queueClass",placeholder:"com.ibm.mq.jms.MQQueue",value:e.configuration.queueClass||"",onChange:r=>n("queueClass",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueManager",children:"Queue Manager Name *"}),s.jsx(U,{id:"queueManager",placeholder:"QM1",value:e.configuration.queueManager||"",onChange:r=>n("queueManager",r.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"host",children:"Host Name / IP *"}),s.jsx(U,{id:"host",placeholder:"mqserver.example.com",value:e.configuration.host||"",onChange:r=>n("host",r.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",type:"number",placeholder:"1414",value:e.configuration.port||"",onChange:r=>n("port",parseInt(r.target.value)),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"channel",children:"Channel Name *"}),s.jsx(U,{id:"channel",placeholder:"CHANNEL.SVRCONN",value:e.configuration.channel||"",onChange:r=>n("channel",r.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionFactory",children:"Connection Factory JNDI Name"}),s.jsx(U,{id:"connectionFactory",placeholder:"jms/ConnectionFactory",value:e.configuration.connectionFactory||"",onChange:r=>n("connectionFactory",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"transportType",children:"Transport Type *"}),s.jsxs(se,{value:e.configuration.transportType||"CLIENT",onValueChange:r=>n("transportType",r),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select transport type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"CLIENT",children:"Remote TCP/IP"}),s.jsx(F,{value:"BINDINGS",children:"Local (in-memory)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"username",children:"User Name"}),s.jsx(U,{id:"username",placeholder:"MQ Username",value:e.configuration.username||"",onChange:r=>n("username",r.target.value)})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"MQ Password",required:!1,value:e.configuration.password||"",onValueChange:r=>n("password",r)})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"useSSL",checked:e.configuration.useSSL||!1,onCheckedChange:r=>n("useSSL",r)}),s.jsx(C,{htmlFor:"useSSL",children:"Use SSL/TLS"})]}),e.configuration.useSSL&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sslKeystore",children:"SSL Keystore Path"}),s.jsx(U,{id:"sslKeystore",placeholder:"/path/to/keystore",value:e.configuration.sslKeystore||"",onChange:r=>n("sslKeystore",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sslPassword",children:"SSL Keystore Password"}),s.jsx(U,{id:"sslPassword",type:"password",placeholder:"Keystore Password",value:e.configuration.sslPassword||"",onChange:r=>n("sslPassword",r.target.value)})]})]})]})]})}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Processing Details"})}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueName",children:"Queue Name *"}),s.jsx(U,{id:"queueName",placeholder:"INBOUND.FILE.QUEUE",value:e.configuration.queueName||"",onChange:r=>n("queueName",r.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"destinationType",children:"JMS Destination Type *"}),s.jsxs(se,{value:e.configuration.destinationType||"",onValueChange:r=>n("destinationType",r),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select destination type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"Queue",children:"Queue"}),s.jsx(F,{value:"Topic",children:"Topic"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"messageSelector",children:"Message Selector"}),s.jsx(U,{id:"messageSelector",placeholder:"JMSType='FileMessage'",value:e.configuration.messageSelector||"",onChange:r=>n("messageSelector",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientId",children:"Client ID"}),s.jsx(U,{id:"clientId",placeholder:"Optional Client ID",value:e.configuration.clientId||"",onChange:r=>n("clientId",r.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"ackMode",children:"Acknowledgement Mode *"}),s.jsxs(se,{value:e.configuration.ackMode||"AUTO_ACKNOWLEDGE",onValueChange:r=>n("ackMode",r),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select acknowledgement mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"AUTO_ACKNOWLEDGE",children:"AUTO_ACKNOWLEDGE"}),s.jsx(F,{value:"CLIENT_ACKNOWLEDGE",children:"CLIENT_ACKNOWLEDGE"})]})]})]})]})})]})})]})})}function oie({adapter:e,onUpdate:t,businessComponentId:n}){const r=(a,o)=>{t({...e,configuration:{...e.configuration,[a]:o}})};return s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing Details"})]}),s.jsx(ye,{value:"target",className:"space-y-6",children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Connection Details"})}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionFactoryClass",children:"Connection Factory class"}),s.jsx(U,{id:"connectionFactoryClass",placeholder:"com.ibm.mq.jms.MQConnectionFactory",value:e.configuration.connectionFactoryClass||"",onChange:a=>r("connectionFactoryClass",a.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueClass",children:"Queue class"}),s.jsx(U,{id:"queueClass",placeholder:"com.ibm.mq.jms.MQQueue",value:e.configuration.queueClass||"",onChange:a=>r("queueClass",a.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueManager",children:"Queue Manager Name *"}),s.jsx(U,{id:"queueManager",placeholder:"QM1",value:e.configuration.queueManager||"",onChange:a=>r("queueManager",a.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"host",children:"Host Name / IP *"}),s.jsx(U,{id:"host",placeholder:"mqserver.example.com",value:e.configuration.host||"",onChange:a=>r("host",a.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"port",children:"Port *"}),s.jsx(U,{id:"port",type:"number",placeholder:"1414",value:e.configuration.port||"",onChange:a=>r("port",parseInt(a.target.value)),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"channel",children:"Channel Name *"}),s.jsx(U,{id:"channel",placeholder:"CHANNEL.SVRCONN",value:e.configuration.channel||"",onChange:a=>r("channel",a.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionFactory",children:"Connection Factory JNDI Name"}),s.jsx(U,{id:"connectionFactory",placeholder:"jms/ConnectionFactory",value:e.configuration.connectionFactory||"",onChange:a=>r("connectionFactory",a.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"transportType",children:"Transport Type *"}),s.jsxs(se,{value:e.configuration.transportType||"CLIENT",onValueChange:a=>r("transportType",a),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select transport type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"CLIENT",children:"Remote TCP/IP"}),s.jsx(F,{value:"BINDINGS",children:"Local (in-memory)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"username",children:"User Name"}),s.jsx(U,{id:"username",placeholder:"MQ Username",value:e.configuration.username||"",onChange:a=>r("username",a.target.value)})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(xs,{name:"password",label:"Password",placeholder:"MQ Password",required:!1,value:e.configuration.password||"",onValueChange:a=>r("password",a)})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"useSSL",checked:e.configuration.useSSL||!1,onCheckedChange:a=>r("useSSL",a)}),s.jsx(C,{htmlFor:"useSSL",children:"Use SSL/TLS"})]}),e.configuration.useSSL&&s.jsx("div",{className:"space-y-4",children:s.jsx(xb,{id:"sslCertificate",label:"SSL Certificate",value:e.configuration.sslCertificateId||"",onChange:a=>r("sslCertificateId",a),businessComponentId:n,placeholder:"Select SSL certificate",required:!0})})]})]})}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Processing Details"})}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queueName",children:"Queue Name *"}),s.jsx(U,{id:"queueName",placeholder:"INBOUND.FILE.QUEUE",value:e.configuration.queueName||"",onChange:a=>r("queueName",a.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"destinationType",children:"JMS Destination Type *"}),s.jsxs(se,{value:e.configuration.destinationType||"",onValueChange:a=>r("destinationType",a),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select destination type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"Queue",children:"Queue"}),s.jsx(F,{value:"Topic",children:"Topic"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"messageSelector",children:"Message Selector"}),s.jsx(U,{id:"messageSelector",placeholder:"JMSType='FileMessage'",value:e.configuration.messageSelector||"",onChange:a=>r("messageSelector",a.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientId",children:"Client ID"}),s.jsx(U,{id:"clientId",placeholder:"Optional Client ID",value:e.configuration.clientId||"",onChange:a=>r("clientId",a.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"ackMode",children:"Acknowledgement Mode *"}),s.jsxs(se,{value:e.configuration.ackMode||"AUTO_ACKNOWLEDGE",onValueChange:a=>r("ackMode",a),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select acknowledgement mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"AUTO_ACKNOWLEDGE",children:"AUTO_ACKNOWLEDGE"}),s.jsx(F,{value:"CLIENT_ACKNOWLEDGE",children:"CLIENT_ACKNOWLEDGE"})]})]})]})]})})]})})]})})}function iie({configuration:e,onConfigurationChange:t}){const{businessComponents:n,loading:r}=To(),{structures:a}=ah(),[o,i]=h.useState(""),[l,c]=h.useState([]),[d,u]=h.useState(e.transformationConfig||{mode:"transform",requiresStructure:!0}),[m,p]=h.useState(e.payloadStructureConfig||{format:"JSON"});h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS")},[]),h.useEffect(()=>{if(o){const f=a.filter(w=>w.usage==="source");c(f)}else c([])},[o,a]);const g=f=>{u(f),t("transformationConfig",f)},x=f=>{p(f),t("payloadStructureConfig",f)};return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"REST Sender Configuration"}),s.jsx(Ne,{children:"Configure your REST sender adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"}),s.jsx(xe,{value:"transformation",children:"Transformation"}),s.jsx(xe,{value:"payload",disabled:d.mode!=="transform",children:"Payload Structure"}),s.jsx(xe,{value:"xmlConversion",disabled:d.mode!=="transform",children:"XML Conversion"})]}),s.jsxs(ye,{value:"source",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Endpoint Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"baseEndpointUrl",children:"Base Endpoint URL"}),s.jsx(U,{id:"baseEndpointUrl",type:"text",placeholder:"https://api.yourdomain.com/integration",value:e.baseEndpointUrl||"",onChange:f=>t("baseEndpointUrl",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Base URL of your REST API"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"resourcePath",children:"Resource Path"}),s.jsx(U,{id:"resourcePath",type:"text",placeholder:"/orders, /status, /submit",value:e.resourcePath||"",onChange:f=>t("resourcePath",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Specific REST resource or path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiVersion",children:"API Version"}),s.jsx(U,{id:"apiVersion",type:"text",placeholder:"v1, v2",value:e.apiVersion||"",onChange:f=>t("apiVersion",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Versioning info for API"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Request Method and Format"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"httpMethod",children:"HTTP Method"}),s.jsxs(se,{value:e.httpMethod||"",onValueChange:f=>t("httpMethod",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select HTTP method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"GET",children:"GET"}),s.jsx(F,{value:"POST",children:"POST"}),s.jsx(F,{value:"PUT",children:"PUT"}),s.jsx(F,{value:"DELETE",children:"DELETE"}),s.jsx(F,{value:"PATCH",children:"PATCH"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"HTTP verb to call"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"contentType",children:"Content-Type"}),s.jsxs(se,{value:e.contentType||"",onValueChange:f=>t("contentType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select media type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"application/json",children:"application/json"}),s.jsx(F,{value:"application/xml",children:"application/xml"}),s.jsx(F,{value:"application/x-www-form-urlencoded",children:"application/x-www-form-urlencoded"}),s.jsx(F,{value:"text/plain",children:"text/plain"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected media type for request"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"acceptType",children:"Accept"}),s.jsxs(se,{value:e.acceptType||"",onValueChange:f=>t("acceptType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select expected response type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"application/json",children:"application/json"}),s.jsx(F,{value:"application/xml",children:"application/xml"}),s.jsx(F,{value:"text/plain",children:"text/plain"}),s.jsx(F,{value:"text/html",children:"text/html"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected media type of response"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Request Parameters"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queryParameters",children:"Query Parameters"}),s.jsx(Re,{id:"queryParameters",placeholder:"?page=1&size=10",value:e.queryParameters||"",onChange:f=>t("queryParameters",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected query params for filtering/pagination"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeoutSettings",children:"Timeout Settings (seconds)"}),s.jsx(U,{id:"timeoutSettings",type:"number",placeholder:"30",value:e.timeoutSettings||"",onChange:f=>t("timeoutSettings",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connection and read timeout limits"})]})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Return immediate acknowledgment (HTTP 202), process in background":"Wait for complete processing before sending response back to caller"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:f=>t("processingMode",f?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseTimeout",children:"Async Response Timeout (ms)"}),s.jsx(U,{id:"asyncResponseTimeout",type:"number",placeholder:"30000",value:e.asyncResponseTimeout||"",onChange:f=>t("asyncResponseTimeout",parseInt(f.target.value)||3e4)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseFormat",children:"Async Response Format"}),s.jsxs(se,{value:e.asyncResponseFormat||"HTTP_202",onValueChange:f=>t("asyncResponseFormat",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select response format"})}),s.jsxs(te,{children:[s.jsx(F,{value:"HTTP_202",children:"HTTP 202 Accepted"}),s.jsx(F,{value:"CUSTOM_RESPONSE",children:"Custom Response"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCallbackUrl",children:"Callback URL (Optional)"}),s.jsx(U,{id:"asyncCallbackUrl",type:"url",placeholder:"https://callback-endpoint.example.com/webhook",value:e.asyncCallbackUrl||"",onChange:f=>t("asyncCallbackUrl",f.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Authentication"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authenticationType||"",onValueChange:f=>t("authenticationType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"oauth2-bearer",children:"OAuth2 Bearer Token"}),s.jsx(F,{value:"api-key",children:"API Key"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Security method required"})]}),e.authenticationType==="basic"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicUsername",children:"Username"}),s.jsx(U,{id:"basicUsername",type:"text",placeholder:"Basic auth username",value:e.basicUsername||"",onChange:f=>t("basicUsername",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicPassword",children:"Password"}),s.jsx(U,{id:"basicPassword",type:"password",placeholder:"Basic auth password",value:e.basicPassword||"",onChange:f=>t("basicPassword",f.target.value)})]})]}),e.authenticationType==="oauth2-bearer"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"bearerToken",children:"Bearer Token"}),s.jsx(U,{id:"bearerToken",type:"password",placeholder:"OAuth2 bearer token",value:e.bearerToken||"",onChange:f=>t("bearerToken",f.target.value)})]}),e.authenticationType==="api-key"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyName",children:"API Key Name"}),s.jsx(U,{id:"apiKeyName",type:"text",placeholder:"X-API-Key",value:e.apiKeyName||"",onChange:f=>t("apiKeyName",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyValue",children:"API Key Value"}),s.jsx(U,{id:"apiKeyValue",type:"password",placeholder:"API key value",value:e.apiKeyValue||"",onChange:f=>t("apiKeyValue",f.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Payload and Headers"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component"}),s.jsxs(se,{value:o,onValueChange:f=>{i(f),t("businessComponentId",f)},disabled:r,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsx(te,{className:"bg-background border z-50",children:n.map(f=>s.jsx(F,{value:f.id,children:f.name},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"requestPayload",children:"Request Payload"}),s.jsxs(se,{value:e.requestPayload||"",onValueChange:f=>t("requestPayload",f),disabled:!o||l.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select request structure"})}),s.jsx(te,{className:"bg-background border z-50",children:l.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Format JSON or XML schema expected in request body"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseFormat",children:"Response Format"}),s.jsxs(se,{value:e.responseFormat||"",onValueChange:f=>t("responseFormat",f),disabled:!o||l.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select response structure"})}),s.jsx(te,{className:"bg-background border z-50",children:l.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Format of API response"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"customHeaders",children:"Headers"}),s.jsx(Re,{id:"customHeaders",placeholder:"X-Correlation-ID: <UUID>",value:e.customHeaders||"",onChange:f=>t("customHeaders",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Required custom HTTP headers"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Error Handling and Throttling"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"errorHandling",children:"Error Handling"}),s.jsx(Re,{id:"errorHandling",placeholder:"4xx/5xx codes, JSON error payload",value:e.errorHandling||"",onChange:f=>t("errorHandling",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected HTTP status codes and error message formats"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rateLimiting",children:"Rate Limiting / Throttling"}),s.jsx(U,{id:"rateLimiting",type:"text",placeholder:"1000 requests/minute",value:e.rateLimiting||"",onChange:f=>t("rateLimiting",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Limits on API calls per time interval"})]})]})]}),s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:d,onChange:g,adapterType:"REST",dataStructures:l,disabled:!1})}),d.mode==="transform"&&s.jsx(ye,{value:"payload",className:"mt-6",children:s.jsx(Og,{config:m,onChange:x,adapterType:"REST",mode:"sender",disabled:!1})}),d.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:"SENDER",config:e.xmlConversion||{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0},onChange:f=>t("xmlConversion",f)})})]})})]})}function lie({configuration:e,onConfigurationChange:t}){const[n,r]=h.useState(e.transformationConfig||{mode:"transform",requiresStructure:!0}),[a,o]=h.useState(e.payloadStructureConfig||{format:"JSON"}),i=f=>{r(f),t("transformationConfig",f)},l=f=>{o(f),t("payloadStructureConfig",f)},{businessComponents:c,loading:d}=To(),{structures:u}=ah(),[m,p]=h.useState(""),[g,x]=h.useState([]);return h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS")},[]),h.useEffect(()=>{if(m){const f=u.filter(w=>w.usage==="target");x(f)}else x([])},[m,u]),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"REST Receiver Configuration"}),s.jsx(Ne,{children:"Configure your REST receiver adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"}),s.jsx(xe,{value:"transformation",children:"Transformation"}),s.jsx(xe,{value:"payload",disabled:n.mode!=="transform",children:"Payload Structure"}),s.jsx(xe,{value:"xmlConversion",disabled:n.mode!=="transform",children:"XML Conversion"})]}),s.jsxs(ye,{value:"target",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Endpoint Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"targetEndpointUrl",children:"Target Endpoint URL"}),s.jsx(U,{id:"targetEndpointUrl",type:"text",placeholder:"https://api.thirdparty.com/endpoint",value:e.targetEndpointUrl||"",onChange:f=>t("targetEndpointUrl",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Full URL of the 3rd party API"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"resourcePath",children:"Resource Path"}),s.jsx(U,{id:"resourcePath",type:"text",placeholder:"/submit, /orders",value:e.resourcePath||"",onChange:f=>t("resourcePath",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Specific API resource or path"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiVersion",children:"API Version"}),s.jsx(U,{id:"apiVersion",type:"text",placeholder:"v1, v2",value:e.apiVersion||"",onChange:f=>t("apiVersion",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"API version info"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Request Method and Format"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"httpMethod",children:"HTTP Method"}),s.jsxs(se,{value:e.httpMethod||"",onValueChange:f=>t("httpMethod",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select HTTP method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"POST",children:"POST"}),s.jsx(F,{value:"PUT",children:"PUT"}),s.jsx(F,{value:"GET",children:"GET"}),s.jsx(F,{value:"DELETE",children:"DELETE"}),s.jsx(F,{value:"PATCH",children:"PATCH"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"HTTP verb to use"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"contentType",children:"Content-Type"}),s.jsxs(se,{value:e.contentType||"",onValueChange:f=>t("contentType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select media type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"application/json",children:"application/json"}),s.jsx(F,{value:"application/xml",children:"application/xml"}),s.jsx(F,{value:"application/x-www-form-urlencoded",children:"application/x-www-form-urlencoded"}),s.jsx(F,{value:"text/plain",children:"text/plain"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Media type sent in request body"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"acceptType",children:"Accept"}),s.jsxs(se,{value:e.acceptType||"",onValueChange:f=>t("acceptType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select expected response type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"application/json",children:"application/json"}),s.jsx(F,{value:"application/xml",children:"application/xml"}),s.jsx(F,{value:"text/plain",children:"text/plain"}),s.jsx(F,{value:"text/html",children:"text/html"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected media type in response"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Request Parameters"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queryParameters",children:"Query Parameters"}),s.jsx(Re,{id:"queryParameters",placeholder:"?page=1&size=10",value:e.queryParameters||"",onChange:f=>t("queryParameters",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional query params for filtering/pagination"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeoutSettings",children:"Timeout Settings (seconds)"}),s.jsx(U,{id:"timeoutSettings",type:"number",placeholder:"30",value:e.timeoutSettings||"",onChange:f=>t("timeoutSettings",f.target.value)}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connection and read timeout limits"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"proxySettings",children:"Proxy Settings"}),s.jsx(Re,{id:"proxySettings",placeholder:"Proxy host, port",value:e.proxySettings||"",onChange:f=>t("proxySettings",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional HTTP proxy configuration"})]})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Fire-and-forget: don't wait for response from target system":"Wait for complete response from target system before continuing flow"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:f=>t("processingMode",f?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="SYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseTimeout",children:"Response Timeout (ms)"}),s.jsx(U,{id:"responseTimeout",type:"number",placeholder:"30000",value:e.responseTimeout||"",onChange:f=>t("responseTimeout",parseInt(f.target.value)||3e4)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"waitForResponse",checked:e.waitForResponse!==!1,onCheckedChange:f=>t("waitForResponse",f)}),s.jsx(C,{htmlFor:"waitForResponse",className:"text-sm",children:"Wait for response in synchronous mode"})]})]}),e.processingMode==="ASYNCHRONOUS"&&s.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCorrelationId",children:"Correlation ID (Optional)"}),s.jsx(U,{id:"asyncCorrelationId",type:"text",placeholder:"Unique identifier for async processing",value:e.asyncCorrelationId||"",onChange:f=>t("asyncCorrelationId",f.target.value)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Authentication"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authenticationType||"",onValueChange:f=>t("authenticationType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication method"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"oauth2-bearer",children:"OAuth2 Bearer Token"}),s.jsx(F,{value:"api-key",children:"API Key"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Security method for outbound calls"})]}),e.authenticationType==="basic"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicUsername",children:"Username"}),s.jsx(U,{id:"basicUsername",type:"text",placeholder:"Basic auth username",value:e.basicUsername||"",onChange:f=>t("basicUsername",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"basicPassword",children:"Password"}),s.jsx(U,{id:"basicPassword",type:"password",placeholder:"Basic auth password",value:e.basicPassword||"",onChange:f=>t("basicPassword",f.target.value)})]})]}),e.authenticationType==="oauth2-bearer"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"bearerToken",children:"Bearer Token"}),s.jsx(U,{id:"bearerToken",type:"password",placeholder:"OAuth2 bearer token",value:e.bearerToken||"",onChange:f=>t("bearerToken",f.target.value)})]}),e.authenticationType==="api-key"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyName",children:"API Key Name"}),s.jsx(U,{id:"apiKeyName",type:"text",placeholder:"X-API-Key",value:e.apiKeyName||"",onChange:f=>t("apiKeyName",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyValue",children:"API Key Value"}),s.jsx(U,{id:"apiKeyValue",type:"password",placeholder:"API key value",value:e.apiKeyValue||"",onChange:f=>t("apiKeyValue",f.target.value)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Payload and Headers"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component"}),s.jsxs(se,{value:m,onValueChange:f=>{p(f),t("businessComponentId",f)},disabled:d,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsx(te,{className:"bg-background border z-50",children:c.map(f=>s.jsx(F,{value:f.id,children:f.name},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"requestPayloadFormat",children:"Request Payload Format"}),s.jsxs(se,{value:e.requestPayloadFormat||"",onValueChange:f=>t("requestPayloadFormat",f),disabled:!m||g.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select request structure"})}),s.jsx(te,{className:"bg-background border z-50",children:g.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Schema and format of data sent"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseFormat",children:"Response Format"}),s.jsxs(se,{value:e.responseFormat||"",onValueChange:f=>t("responseFormat",f),disabled:!m||g.length===0,children:[s.jsx(ee,{className:"bg-background",children:s.jsx(ne,{placeholder:"Select response structure"})}),s.jsx(te,{className:"bg-background border z-50",children:g.map(f=>s.jsxs(F,{value:f.id,children:[f.name," (",f.type,")"]},f.id))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected format of API response"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"customHeaders",children:"Custom Headers"}),s.jsx(Re,{id:"customHeaders",placeholder:"X-Request-ID, Authorization",value:e.customHeaders||"",onChange:f=>t("customHeaders",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"HTTP headers sent with requests"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Error Handling and Retry"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"errorHandling",children:"Error Handling"}),s.jsx(Re,{id:"errorHandling",placeholder:"HTTP 4xx/5xx codes, error JSON",value:e.errorHandling||"",onChange:f=>t("errorHandling",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expected error codes and handling logic"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retryPolicy",children:"Retry Policy"}),s.jsx(Re,{id:"retryPolicy",placeholder:"Number of retries, backoff strategy",value:e.retryPolicy||"",onChange:f=>t("retryPolicy",f.target.value),className:"min-h-[80px]"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rules for retrying failed requests"})]})]})]}),s.jsx(ye,{value:"transformation",className:"mt-6",children:s.jsx(ki,{config:n,onChange:i,adapterType:"REST",disabled:!1})}),n.mode==="transform"&&s.jsx(ye,{value:"payload",className:"mt-6",children:s.jsx(Og,{config:a,onChange:l,adapterType:"REST",mode:"receiver",disabled:!1})}),n.mode==="transform"&&s.jsx(ye,{value:"xmlConversion",className:"mt-6",children:s.jsx(Di,{mode:"RECEIVER",config:e.xmlConversion||{rootElementName:"Message",encoding:"UTF-8",includeXmlDeclaration:!0,prettyPrint:!0,removeRootElement:!0,handleNamespaces:!0},onChange:f=>t("xmlConversion",f)})})]})})]})}function cie({configuration:e,onConfigurationChange:t,businessComponentId:n}){_e();const[r,a]=h.useState([]),[o,i]=h.useState(!1),[l,c]=h.useState({}),[d,u]=h.useState([]),[m,p]=h.useState(!1);h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS"),e.connectionMode||t("connectionMode","PUSH")},[]),h.useEffect(()=>{n&&g()},[n]),h.useEffect(()=>{e.selectedWsdl?x(e.selectedWsdl):(u([]),c({}))},[e.selectedWsdl]);const g=async()=>{try{i(!0);const f=await G.get("/flow-structures"),w=[];if(f.data){console.log("SOAP Sender - Raw flow structures response:",f),console.log("SOAP Sender - Flow structures data:",f.data),console.log("SOAP Sender - Business Component ID filter:",n);let y=[];Array.isArray(f.data)?y=f.data:f.data.flowStructures?y=f.data.flowStructures:f.data.content?y=f.data.content:f.data.data&&(y=f.data.data),console.log("SOAP Sender - Total flow structures found:",y.length),y.forEach((j,N)=>{console.log(`SOAP Sender - Flow Structure [${N}]:`,{name:j.name,id:j.id,direction:j.direction,wsdlContent:!!j.wsdlContent,generatedWsdl:!!j.generatedWsdl,businessComponentId:j.businessComponentId,businessComponent:j.businessComponent,sourceType:j.sourceType})});const v=y.filter(j=>{const N=j.wsdlContent||j.generatedWsdl,b=!n||j.businessComponentId===n||j.businessComponent?.id===n,E=j.direction==="SOURCE"||j.direction==="source",S=N&&b&&E;return console.log(`SOAP Sender - Flow Structure ${j.name}: hasWsdl=${N}, matchesComponent=${b}, direction=${j.direction}, isSourceDirection=${E}, included=${S}`),S}).map(j=>({id:`fs_${j.id}`,name:`[FlowStructure] ${j.name}`,endpointUrl:j.endpoint||"",type:"flowstructure",originalId:j.id}));w.push(...v)}console.log("SOAP Sender - Combined WSDL list:",w),a(w)}catch(f){console.error("Error fetching WSDLs:",f),a([])}finally{i(!1)}},x=async f=>{try{p(!0);const w=f.replace(/^fs_/,""),y=await G.get(`/flow-structures/${w}`);if(y.data){const v=y.data;console.log("SOAP Sender - WSDL Structure:",v),console.log("SOAP Sender - WSDL Metadata:",v.metadata);const j=v.wsdlContent||v.generatedWsdl||"";if(j){const P=BO(j);u(P),console.log("SOAP Sender - Extracted SOAP actions:",P),P.length===1&&t("soapAction",P[0].soapAction);try{const R=new DOMParser().parseFromString(j,"text/xml").querySelectorAll("portType, wsdl\\:portType");let I=!1;R.forEach(V=>{V.querySelectorAll("operation, wsdl\\:operation").forEach(k=>{const T=!!k.querySelector("input, wsdl\\:input"),D=!!k.querySelector("output, wsdl\\:output");T&&D&&(I=!0)})}),I?(console.log("SOAP Sender - WSDL has synchronous operations (request/response), setting to SYNCHRONOUS"),t("processingMode","SYNCHRONOUS")):(console.log("SOAP Sender - WSDL appears to have one-way operations only, setting to ASYNCHRONOUS"),t("processingMode","ASYNCHRONOUS"))}catch(A){console.error("Error parsing WSDL for sync/async detection:",A),t("processingMode","SYNCHRONOUS")}}else u([]),console.warn("SOAP Sender - No WSDL content found in structure");const N={};(v.metadata?.requestStructure||v.metadata?.operationInfo?.request)&&(N.request=v.metadata?.requestStructure||v.metadata?.operationInfo?.request),(v.metadata?.responseStructure||v.metadata?.operationInfo?.response)&&(N.response=v.metadata?.responseStructure||v.metadata?.operationInfo?.response),(v.metadata?.faultStructure||v.metadata?.operationInfo?.fault)&&(N.fault=v.metadata?.faultStructure||v.metadata?.operationInfo?.fault),c(N),console.log("SOAP Sender - Extracted structures:",N);const b=v.metadata?.hasInput||v.metadata?.operationInfo?.hasInput,E=v.metadata?.hasOutput||v.metadata?.operationInfo?.hasOutput,S=v.metadata?.hasFault||v.metadata?.operationInfo?.hasFault;console.log(`SOAP Sender - WSDL Analysis from metadata: hasInput=${b}, hasOutput=${E}, hasFault=${S}`)}}catch(w){console.error("Error checking WSDL structure:",w),t("processingMode","ASYNCHRONOUS"),c({}),u([])}finally{p(!1)}};return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"SOAP Sender Configuration"}),s.jsx(Ne,{children:"Configure your SOAP sender adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"source",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Connection Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"connectionMode",className:"text-sm font-medium",children:(e.connectionMode||"PUSH")==="PUSH"?"Push Mode (Inbound)":"Poll Mode (Outbound)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.connectionMode||"PUSH")==="PUSH"?"Receive SOAP requests at the configured endpoint":"Poll and send requests to external SOAP service"})]}),s.jsx(bt,{id:"connectionMode",checked:(e.connectionMode||"PUSH")==="PUSH",onCheckedChange:f=>t("connectionMode",f?"PUSH":"POLL")})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Endpoint Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"service-endpoint",children:(e.connectionMode||"PUSH")==="PUSH"?"Service Endpoint Path":"External Service URL"}),s.jsx(U,{id:"service-endpoint",value:e.serviceEndpointUrl||"",onChange:f=>t("serviceEndpointUrl",f.target.value),placeholder:(e.connectionMode||"PUSH")==="PUSH"?"/tempconvert or /soap/tempconvert":"https://api.external.com/soap/service"}),(e.connectionMode||"PUSH")==="PUSH"&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"This path will be used as the service endpoint (e.g., http://localhost:8080/soap/tempconvert)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"soap-action",children:"SOAP Action"}),d.length>0?s.jsxs(s.Fragment,{children:[s.jsxs(se,{value:e.soapAction||"none",onValueChange:f=>t("soapAction",f==="none"?"":f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:m?"Loading SOAP actions...":"Select SOAP action"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None (Leave blank)"}),d.map((f,w)=>s.jsxs(F,{value:f.soapAction||`action_${w}`,children:[f.operationName," - ",f.soapAction||"(empty)"]},w))]})]}),d.length>1&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["This WSDL contains ",d.length," operations. Select the operation you want to use."]})]}):s.jsx(U,{id:"soap-action",value:e.soapAction||"",onChange:f=>t("soapAction",f.target.value),placeholder:"urn:getOrderDetails",disabled:m})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"content-type",children:"Content-Type"}),s.jsxs(se,{value:e.contentType||"",onValueChange:f=>t("contentType",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select content type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"text/xml",children:"text/xml"}),s.jsx(F,{value:"application/soap+xml",children:"application/soap+xml"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"soap-version",children:"SOAP Version"}),s.jsxs(se,{value:e.soapVersion||"",onValueChange:f=>{t("soapVersion",f),f==="1.1"?t("contentType","text/xml"):f==="1.2"&&t("contentType","application/soap+xml")},children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select SOAP version"})}),s.jsxs(te,{children:[s.jsx(F,{value:"1.1",children:"SOAP 1.1"}),s.jsx(F,{value:"1.2",children:"SOAP 1.2"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Source Message"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"source-wsdl",children:"Select WSDL"}),s.jsxs(se,{value:e.selectedWsdl||"",onValueChange:f=>t("selectedWsdl",f),disabled:o||!n,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:n?o?"Loading WSDLs...":"Select a WSDL":"Select a business component first"})}),s.jsx(te,{children:r.map(f=>s.jsx(F,{value:f.id,children:f.name},f.id))})]})]})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Return immediate acknowledgment (HTTP 202), process in background":"Wait for complete processing before sending response back to caller"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:f=>t("processingMode",f?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseTimeout",children:"Async Response Timeout (ms)"}),s.jsx(U,{id:"asyncResponseTimeout",type:"number",placeholder:"30000",value:e.asyncResponseTimeout||"",onChange:f=>t("asyncResponseTimeout",parseInt(f.target.value)||3e4)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncResponseFormat",children:"Async Response Format"}),s.jsxs(se,{value:e.asyncResponseFormat||"HTTP_202",onValueChange:f=>t("asyncResponseFormat",f),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select response format"})}),s.jsxs(te,{children:[s.jsx(F,{value:"HTTP_202",children:"HTTP 202 Accepted"}),s.jsx(F,{value:"CUSTOM_RESPONSE",children:"Custom Response"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCallbackUrl",children:"Callback URL (Optional)"}),s.jsx(U,{id:"asyncCallbackUrl",type:"url",placeholder:"https://callback-endpoint.example.com/webhook",value:e.asyncCallbackUrl||"",onChange:f=>t("asyncCallbackUrl",f.target.value)})]})]})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Response Format and Error Handling"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"response-message",children:"Response Message"}),s.jsx(Re,{id:"response-message",value:e.responseMessage||"",onChange:f=>t("responseMessage",f.target.value),placeholder:"Expected SOAP response XML schema",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"error-handling",children:"Error Handling"}),s.jsx(Re,{id:"error-handling",value:e.errorHandling||"",onChange:f=>t("errorHandling",f.target.value),placeholder:"Expected SOAP fault codes and error handling",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout Settings (seconds)"}),s.jsx(U,{id:"timeout",type:"number",value:e.timeout||"",onChange:f=>t("timeout",f.target.value),placeholder:"60"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Custom Headers"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"custom-headers",children:"Custom SOAP Headers"}),s.jsx(Re,{id:"custom-headers",value:e.customHeaders||"",onChange:f=>t("customHeaders",f.target.value),placeholder:"Additional SOAP headers in XML format (e.g., WS-Addressing, Custom security headers)",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter custom SOAP headers that will be included in the request envelope"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Additional Settings"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retry-count",children:"Retry Count"}),s.jsx(U,{id:"retry-count",type:"number",value:e.retryCount||"",onChange:f=>t("retryCount",f.target.value),placeholder:"3"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retry-interval",children:"Retry Interval (seconds)"}),s.jsx(U,{id:"retry-interval",type:"number",value:e.retryInterval||"",onChange:f=>t("retryInterval",f.target.value),placeholder:"5"})]})]})]}),e.selectedWsdl&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"WSDL Structure Details"}),l.request&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Request Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.request=="string"?l.request:JSON.stringify(l.request,null,2)})})]}),(e.processingMode||"ASYNCHRONOUS")==="SYNCHRONOUS"&&l.response&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Response Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.response=="string"?l.response:JSON.stringify(l.response,null,2)})})]}),l.fault&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Fault Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.fault=="string"?l.fault:JSON.stringify(l.fault,null,2)})})]}),!l.request&&!l.response&&!l.fault&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No structure details available in WSDL metadata"})]})]})]})})]})}function die({configuration:e,onConfigurationChange:t,businessComponentId:n}){_e();const[r,a]=h.useState([]),[o,i]=h.useState(!1),[l,c]=h.useState({}),[d,u]=h.useState([]),[m,p]=h.useState(!1);h.useEffect(()=>{e.processingMode||t("processingMode","ASYNCHRONOUS")},[]),h.useEffect(()=>{n&&g()},[n]),h.useEffect(()=>{e.selectedWsdl?x(e.selectedWsdl):(u([]),c({}))},[e.selectedWsdl]);const g=async()=>{try{i(!0);const v=await G.get("/flow-structures"),j=[];if(v.data){console.log("SOAP Receiver - Raw flow structures from API:",v.data);const N=(Array.isArray(v.data)?v.data:v.data.content||v.data.flowStructures||[]).filter(b=>{const E=b.wsdlContent||b.generatedWsdl,S=!n||b.businessComponentId===n||b.businessComponent?.id===n,P=b.direction==="TARGET"||b.direction==="target",A=E&&S&&P;return console.log(`SOAP Receiver - Flow Structure ${b.name}: hasWsdl=${E}, matchesComponent=${S}, direction=${b.direction}, isTargetDirection=${P}, included=${A}`),A}).map(b=>({id:`fs_${b.id}`,name:`[FlowStructure] ${b.name}`,endpointUrl:b.endpoint||"",type:"flowstructure",originalId:b.id}));j.push(...N)}console.log("SOAP Receiver - Combined WSDL list:",j),a(j)}catch(v){console.error("Error fetching WSDLs:",v),a([])}finally{i(!1)}},x=async v=>{try{p(!0);const j=v.replace(/^fs_/,""),N=await G.get(`/flow-structures/${j}`);if(N.data){console.log("SOAP Receiver - WSDL Structure:",N.data),console.log("SOAP Receiver - WSDL Structure:",N.data),console.log("SOAP Receiver - WSDL Metadata:",N.data.metadata),console.log("SOAP Receiver - WSDL Namespace:",N.data.namespace),console.log("SOAP Receiver - Full response data:",JSON.stringify(N.data,null,2));const b=N.data.wsdlContent||N.data.generatedWsdl||"";if(b){const L=BO(b);u(L),console.log("SOAP Receiver - Extracted SOAP actions:",L),L.length===1&&t("soapAction",L[0].soapAction);try{const V=new DOMParser().parseFromString(b,"text/xml").querySelectorAll("portType, wsdl\\:portType");let O=!1;V.forEach(k=>{k.querySelectorAll("operation, wsdl\\:operation").forEach(D=>{const M=!!D.querySelector("input, wsdl\\:input"),_=!!D.querySelector("output, wsdl\\:output");M&&_&&(O=!0)})}),O?(console.log("SOAP Receiver - WSDL has synchronous operations (request/response), setting to SYNCHRONOUS"),t("processingMode","SYNCHRONOUS")):(console.log("SOAP Receiver - WSDL appears to have one-way operations only, setting to ASYNCHRONOUS"),t("processingMode","ASYNCHRONOUS"))}catch(R){console.error("Error parsing WSDL for sync/async detection:",R),t("processingMode","SYNCHRONOUS")}}else u([]),console.warn("SOAP Receiver - No WSDL content found in structure");const E={};if((N.data.metadata?.requestStructure||N.data.metadata?.operationInfo?.request)&&(E.request=N.data.metadata?.requestStructure||N.data.metadata?.operationInfo?.request),(N.data.metadata?.responseStructure||N.data.metadata?.operationInfo?.response)&&(E.response=N.data.metadata?.responseStructure||N.data.metadata?.operationInfo?.response),(N.data.metadata?.faultStructure||N.data.metadata?.operationInfo?.fault)&&(E.fault=N.data.metadata?.faultStructure||N.data.metadata?.operationInfo?.fault),c(E),console.log("SOAP Receiver - Extracted structures:",E),N.data.metadata?.endpointUrl)t("targetEndpointUrl",N.data.metadata.endpointUrl),console.log("SOAP Receiver - Using endpoint URL from metadata:",N.data.metadata.endpointUrl);else if(N.data.namespace?.schemaLocation)t("targetEndpointUrl",N.data.namespace.schemaLocation),console.log("SOAP Receiver - Using endpoint URL from namespace.schemaLocation:",N.data.namespace.schemaLocation);else if(N.data.namespace&&typeof N.data.namespace=="string")try{const L=JSON.parse(N.data.namespace);L.schemaLocation&&(t("targetEndpointUrl",L.schemaLocation),console.log("SOAP Receiver - Using endpoint URL from parsed namespace:",L.schemaLocation))}catch{console.log("SOAP Receiver - Could not parse namespace string")}else if(N.data.wsdlContent||N.data.originalContent)try{const L=N.data.wsdlContent||N.data.originalContent,V=new DOMParser().parseFromString(L,"text/xml").querySelectorAll('address, soap\\:address, soap12\\:address, wsdl\\:address, *[name()="soap:address"], *[name()="soap12:address"]');if(V.length>0){const O=V[0].getAttribute("location");O&&(t("targetEndpointUrl",O),console.log("SOAP Receiver - Extracted endpoint URL from WSDL:",O))}}catch(L){console.error("Error parsing WSDL for endpoint URL:",L)}const S=N.data.metadata?.hasInput||N.data.metadata?.operationInfo?.hasInput,P=N.data.metadata?.hasOutput||N.data.metadata?.operationInfo?.hasOutput,A=N.data.metadata?.hasFault||N.data.metadata?.operationInfo?.hasFault;console.log(`SOAP Receiver - WSDL Analysis from metadata: hasInput=${S}, hasOutput=${P}, hasFault=${A}`)}}catch(j){console.error("Error fetching WSDL details:",j),t("processingMode","ASYNCHRONOUS"),c({}),u([])}finally{p(!1)}},f=v=>{t("authentication.type",v),t("authentication.credentials",{})},w=(v,j)=>{const N={...e.authentication?.credentials||{}};N[v]=j,t("authentication.credentials",N)},y=()=>{const v=e.authentication?.type,j=e.authentication?.credentials||{};switch(v){case"basic":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-username",children:"Username"}),s.jsx(U,{id:"auth-username",value:j.username||"",onChange:N=>w("username",N.target.value),placeholder:"Enter username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-password",children:"Password"}),s.jsx(U,{id:"auth-password",type:"password",value:j.password||"",onChange:N=>w("password",N.target.value),placeholder:"Enter password"})]})]});case"ws-security":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-muted-foreground",children:"Authentication Credentials"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-username",children:"Username"}),s.jsx(U,{id:"auth-username",value:j.username||"",onChange:N=>w("username",N.target.value),placeholder:"Enter username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-password",children:"Password"}),s.jsx(U,{id:"auth-password",type:"password",value:j.password||"",onChange:N=>w("password",N.target.value),placeholder:"Enter password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"password-type",children:"Password Type"}),s.jsxs(se,{value:j.passwordType||"digest",onValueChange:N=>w("passwordType",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select password type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"digest",children:"Password Digest"}),s.jsx(F,{value:"plaintext",children:"Plain Text"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-muted-foreground",children:"WS-Security Policies"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"security-policy",children:"Security Policy"}),s.jsxs(se,{value:j.securityPolicy||"",onValueChange:N=>w("securityPolicy",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select security policy"})}),s.jsxs(te,{children:[s.jsx(F,{value:"usernametoken",children:"Username Token Only"}),s.jsx(F,{value:"timestamp",children:"Timestamp"}),s.jsx(F,{value:"usernametoken-timestamp",children:"Username Token + Timestamp"}),s.jsx(F,{value:"sign",children:"Digital Sign"}),s.jsx(F,{value:"encrypt",children:"Encrypt"}),s.jsx(F,{value:"sign-encrypt",children:"Sign + Encrypt"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"ws-addressing",children:"WS-Addressing"}),s.jsxs(se,{value:j.wsAddressing||"disabled",onValueChange:N=>w("wsAddressing",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select WS-Addressing"})}),s.jsxs(te,{children:[s.jsx(F,{value:"disabled",children:"Disabled"}),s.jsx(F,{value:"optional",children:"Optional"}),s.jsx(F,{value:"required",children:"Required"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timestamp-ttl",children:"Timestamp TTL (seconds)"}),s.jsx(U,{id:"timestamp-ttl",type:"number",value:j.timestampTTL||"",onChange:N=>w("timestampTTL",N.target.value),placeholder:"300"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"security-algorithm",children:"Security Algorithm"}),s.jsxs(se,{value:j.securityAlgorithm||"",onValueChange:N=>w("securityAlgorithm",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select algorithm"})}),s.jsxs(te,{children:[s.jsx(F,{value:"aes128",children:"AES-128"}),s.jsx(F,{value:"aes256",children:"AES-256"}),s.jsx(F,{value:"3des",children:"Triple DES"}),s.jsx(F,{value:"rsa15",children:"RSA 1.5"}),s.jsx(F,{value:"rsa-oaep",children:"RSA-OAEP"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-muted-foreground",children:"Certificate & Key Management"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsx(xb,{id:"soapCertificate",label:"SOAP Certificate",value:e.certificateId||"",onChange:N=>t("certificateId",N),businessComponentId:n,placeholder:"Select SOAP certificate",required:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"verify-server-certificate",children:"Verify Server Certificate"}),s.jsxs(se,{value:e.verifyServerCertificate||"true",onValueChange:N=>t("verifyServerCertificate",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select verification"})}),s.jsxs(te,{children:[s.jsx(F,{value:"true",children:"Yes"}),s.jsx(F,{value:"false",children:"No"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-medium text-muted-foreground",children:"Advanced Settings"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"custom-policy",children:"Custom Security Policy"}),s.jsx(Re,{id:"custom-policy",value:j.customPolicy||"",onChange:N=>w("customPolicy",N.target.value),placeholder:"Enter custom WS-Security policy XML if needed",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"security-token-reference",children:"Security Token Reference"}),s.jsxs(se,{value:j.securityTokenReference||"binarySecurityToken",onValueChange:N=>w("securityTokenReference",N),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select token reference"})}),s.jsxs(te,{children:[s.jsx(F,{value:"binarySecurityToken",children:"Binary Security Token"}),s.jsx(F,{value:"keyIdentifier",children:"Key Identifier"}),s.jsx(F,{value:"x509Data",children:"X509 Data"}),s.jsx(F,{value:"thumbprint",children:"Thumbprint Reference"})]})]})]})]})]})]});case"oauth":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-client-id",children:"Client ID"}),s.jsx(U,{id:"auth-client-id",value:j.clientId||"",onChange:N=>w("clientId",N.target.value),placeholder:"Enter client ID"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-client-secret",children:"Client Secret"}),s.jsx(U,{id:"auth-client-secret",type:"password",value:j.clientSecret||"",onChange:N=>w("clientSecret",N.target.value),placeholder:"Enter client secret"})]})]});default:return null}};return s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"SOAP Receiver Configuration"}),s.jsx(Ne,{children:"Configure your SOAP receiver adapter settings"})]}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"target",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Endpoint Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"target-endpoint",children:"Target Endpoint URL"}),s.jsx(U,{id:"target-endpoint",value:e.targetEndpointUrl||"",onChange:v=>t("targetEndpointUrl",v.target.value),placeholder:"https://api.thirdparty.com/soap/service"}),e.selectedWsdl&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-populated from selected WSDL"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"soap-action",children:"SOAP Action"}),d.length>0?s.jsxs(s.Fragment,{children:[s.jsxs(se,{value:e.soapAction||"none",onValueChange:v=>t("soapAction",v==="none"?"":v),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:m?"Loading SOAP actions...":"Select SOAP action"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None (Leave blank)"}),d.map((v,j)=>s.jsxs(F,{value:v.soapAction||`action_${j}`,children:[v.operationName," - ",v.soapAction||"(empty)"]},j))]})]}),d.length>1&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["This WSDL contains ",d.length," operations. Select the operation you want to use."]})]}):s.jsx(U,{id:"soap-action",value:e.soapAction||"",onChange:v=>t("soapAction",v.target.value),placeholder:"urn:submitOrder",disabled:m})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"content-type",children:"Content-Type"}),s.jsxs(se,{value:e.contentType||"",onValueChange:v=>t("contentType",v),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select content type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"text/xml",children:"text/xml"}),s.jsx(F,{value:"application/soap+xml",children:"application/soap+xml"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"soap-version",children:"SOAP Version"}),s.jsxs(se,{value:e.soapVersion||"",onValueChange:v=>{t("soapVersion",v),v==="1.1"?t("contentType","text/xml"):v==="1.2"&&t("contentType","application/soap+xml")},children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select SOAP version"})}),s.jsxs(te,{children:[s.jsx(F,{value:"1.1",children:"SOAP 1.1"}),s.jsx(F,{value:"1.2",children:"SOAP 1.2"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Target Message"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"target-wsdl",children:"Select WSDL"}),s.jsxs(se,{value:e.selectedWsdl||"",onValueChange:v=>t("selectedWsdl",v),disabled:o||!n,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:n?o?"Loading WSDLs...":"Select a WSDL":"Select a business component first"})}),s.jsx(te,{children:r.map(v=>s.jsx(F,{value:v.id,children:v.name},v.id))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Connection Parameters"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connection-timeout",children:"Connection Timeout (seconds)"}),s.jsx(U,{id:"connection-timeout",type:"number",value:e.connectionTimeout||"",onChange:v=>t("connectionTimeout",parseInt(v.target.value)||0),placeholder:"30"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"read-timeout",children:"Read Timeout (seconds)"}),s.jsx(U,{id:"read-timeout",type:"number",value:e.readTimeout||"",onChange:v=>t("readTimeout",parseInt(v.target.value)||0),placeholder:"30"})]})]})]})]}),s.jsxs(ye,{value:"processing",className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Processing Mode"}),s.jsxs("div",{className:"flex items-center justify-between space-x-4 p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{htmlFor:"processingMode",className:"text-sm font-medium",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Asynchronous Processing":"Synchronous Processing"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"?"Fire-and-forget: don't wait for response from target system":"Wait for complete response from target system before continuing flow"})]}),s.jsx(bt,{id:"processingMode",checked:(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS",onCheckedChange:v=>t("processingMode",v?"ASYNCHRONOUS":"SYNCHRONOUS")})]}),(e.processingMode||"ASYNCHRONOUS")==="SYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"responseTimeout",children:"Response Timeout (ms)"}),s.jsx(U,{id:"responseTimeout",type:"number",placeholder:"30000",value:e.responseTimeout||"",onChange:v=>t("responseTimeout",parseInt(v.target.value)||3e4)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"waitForResponse",checked:e.waitForResponse!==!1,onCheckedChange:v=>t("waitForResponse",v)}),s.jsx(C,{htmlFor:"waitForResponse",className:"text-sm",children:"Wait for response in synchronous mode"})]})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-muted",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"asyncCorrelationId",children:"Correlation ID (Optional)"}),s.jsx(U,{id:"asyncCorrelationId",type:"text",placeholder:"Unique identifier for async processing",value:e.asyncCorrelationId||"",onChange:v=>t("asyncCorrelationId",v.target.value)})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Authentication & Security"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"auth-type",children:"Authentication Type"}),s.jsxs(se,{value:e.authentication?.type||"none",onValueChange:f,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select authentication type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"ws-security",children:"WS-Security UsernameToken"}),s.jsx(F,{value:"oauth",children:"OAuth"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"ws-security-policies",children:"WS-Security Policies:"}),s.jsxs(se,{value:e.wsSecurityPolicyType||"",onValueChange:v=>t("wsSecurityPolicyType",v),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Define Parameter"})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"manual",children:"Via Manual Configuration in Channel"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Security policies applied"})]}),y()]})]}),(e.processingMode||"ASYNCHRONOUS")==="ASYNCHRONOUS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Response Format and Error Handling"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"response-message",children:"Response Message"}),s.jsx(Re,{id:"response-message",value:e.responseMessage||"",onChange:v=>t("responseMessage",v.target.value),placeholder:"Expected SOAP response XML schema",rows:4})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"error-handling",children:"Error Handling"}),s.jsx(Re,{id:"error-handling",value:e.errorHandling||"",onChange:v=>t("errorHandling",v.target.value),placeholder:"Expected SOAP fault codes and error handling",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retry-policy",children:"Retry Policy"}),s.jsx(Re,{id:"retry-policy",value:e.retryPolicy||"",onChange:v=>t("retryPolicy",v.target.value),placeholder:"Rules for retrying failed SOAP calls (Number of retries, backoff strategy)",rows:3})]})]})]}),e.selectedWsdl&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"WSDL Structure Details"}),l.request&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Request Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.request=="string"?l.request:JSON.stringify(l.request,null,2)})})]}),(e.processingMode||"ASYNCHRONOUS")==="SYNCHRONOUS"&&l.response&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Response Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.response=="string"?l.response:JSON.stringify(l.response,null,2)})})]}),l.fault&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Fault Structure"}),s.jsx("div",{className:"bg-muted p-4 rounded-md",children:s.jsx("pre",{className:"text-sm overflow-auto max-h-40",children:typeof l.fault=="string"?l.fault:JSON.stringify(l.fault,null,2)})})]}),!l.request&&!l.response&&!l.fault&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No structure details available in WSDL metadata"})]})]})]})})]})}const uie=({configuration:e,onConfigurationChange:t})=>{const n=()=>{switch(e.authentication?.type||"none"){case"basic":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"username",children:"Username"}),s.jsx(U,{id:"username",value:e.authentication?.credentials?.username||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,username:a.target.value}}),placeholder:"Enter username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"password",children:"Password"}),s.jsx(U,{id:"password",type:"password",value:e.authentication?.credentials?.password||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,password:a.target.value}}),placeholder:"Enter password"})]})]});case"oauth2":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientId",children:"Client ID"}),s.jsx(U,{id:"clientId",value:e.authentication?.credentials?.clientId||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,clientId:a.target.value}}),placeholder:"Enter client ID"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientSecret",children:"Client Secret"}),s.jsx(U,{id:"clientSecret",type:"password",value:e.authentication?.credentials?.clientSecret||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,clientSecret:a.target.value}}),placeholder:"Enter client secret"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"tokenUrl",children:"Token URL"}),s.jsx(U,{id:"tokenUrl",value:e.authentication?.credentials?.tokenUrl||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,tokenUrl:a.target.value}}),placeholder:"https://oauth.example.com/token"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"scope",children:"Scope"}),s.jsx(U,{id:"scope",value:e.authentication?.credentials?.scope||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,scope:a.target.value}}),placeholder:"read write"})]})]});case"api-key":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKey",children:"API Key"}),s.jsx(U,{id:"apiKey",type:"password",value:e.authentication?.credentials?.apiKey||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,apiKey:a.target.value}}),placeholder:"Enter API key"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyHeader",children:"API Key Header"}),s.jsx(U,{id:"apiKeyHeader",value:e.authentication?.credentials?.apiKeyHeader||"X-API-Key",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,apiKeyHeader:a.target.value}}),placeholder:"X-API-Key"})]})]});default:return null}};return s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsx(ye,{value:"target",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Service Connection"}),s.jsx(Ne,{children:"Configure OData service connection parameters"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serviceBaseUrl",children:"Service Base URL"}),s.jsx(U,{id:"serviceBaseUrl",value:e.baseUrl||"",onChange:r=>t("baseUrl",r.target.value),placeholder:"https://odata.example.com/service"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Base URL of the OData service"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"entitySetName",children:"Entity Set Name"}),s.jsx(U,{id:"entitySetName",value:e.entitySetName||"",onChange:r=>t("entitySetName",r.target.value),placeholder:"Products, Orders"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Specific OData entity set to query"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiVersion",children:"API Version"}),s.jsxs(se,{value:e.apiVersion||"",onValueChange:r=>t("apiVersion",r),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select OData version"})}),s.jsxs(te,{children:[s.jsx(F,{value:"v2",children:"v2"}),s.jsx(F,{value:"v4",children:"v4"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"OData protocol version"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authentication?.type||"none",onValueChange:r=>t("authentication",{type:r,credentials:{}}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"oauth2",children:"OAuth2"}),s.jsx(F,{value:"api-key",children:"API Key"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Method to authenticate"})]}),n(),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"queryOptions",children:"Query Options"}),s.jsx(Re,{id:"queryOptions",value:e.queryOptions||"",onChange:r=>t("queryOptions",r.target.value),placeholder:"$filter=Price gt 100&$top=10",rows:3}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"OData query parameters (e.g., $filter, $top)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout Settings (seconds)"}),s.jsx(U,{id:"timeout",type:"number",value:e.timeout||"",onChange:r=>t("timeout",parseInt(r.target.value)||30),placeholder:"30"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connection and read timeout limits"})]})]})]})}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Handling"}),s.jsx(Ne,{children:"Configure data processing and validation"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataMappingRules",children:"Data Mapping Rules"}),s.jsx(Re,{id:"dataMappingRules",value:e.dataMappingRules||"",onChange:r=>t("dataMappingRules",r.target.value),placeholder:"Map ProductID to id",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mapping OData fields to middleware objects"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataValidationRules",children:"Data Validation Rules"}),s.jsx(Re,{id:"dataValidationRules",value:e.dataValidationRules||"",onChange:r=>t("dataValidationRules",r.target.value),placeholder:"Required fields, format checks",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Validation on received data"})]})]})]})})]})})},hie=({configuration:e,onConfigurationChange:t})=>{const n=()=>{switch(e.authentication?.type||"none"){case"basic":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"username",children:"Username"}),s.jsx(U,{id:"username",value:e.authentication?.credentials?.username||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,username:a.target.value}}),placeholder:"Enter username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"password",children:"Password"}),s.jsx(U,{id:"password",type:"password",value:e.authentication?.credentials?.password||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,password:a.target.value}}),placeholder:"Enter password"})]})]});case"oauth2":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientId",children:"Client ID"}),s.jsx(U,{id:"clientId",value:e.authentication?.credentials?.clientId||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,clientId:a.target.value}}),placeholder:"Enter client ID"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"clientSecret",children:"Client Secret"}),s.jsx(U,{id:"clientSecret",type:"password",value:e.authentication?.credentials?.clientSecret||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,clientSecret:a.target.value}}),placeholder:"Enter client secret"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"tokenUrl",children:"Token URL"}),s.jsx(U,{id:"tokenUrl",value:e.authentication?.credentials?.tokenUrl||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,tokenUrl:a.target.value}}),placeholder:"https://oauth.example.com/token"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"scope",children:"Scope"}),s.jsx(U,{id:"scope",value:e.authentication?.credentials?.scope||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,scope:a.target.value}}),placeholder:"read write"})]})]});case"api-key":return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKey",children:"API Key"}),s.jsx(U,{id:"apiKey",type:"password",value:e.authentication?.credentials?.apiKey||"",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,apiKey:a.target.value}}),placeholder:"Enter API key"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiKeyHeader",children:"API Key Header"}),s.jsx(U,{id:"apiKeyHeader",value:e.authentication?.credentials?.apiKeyHeader||"X-API-Key",onChange:a=>t("authentication",{...e.authentication,credentials:{...e.authentication?.credentials,apiKeyHeader:a.target.value}}),placeholder:"X-API-Key"})]})]});default:return null}};return s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsx(ye,{value:"source",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Service Connection"}),s.jsx(Ne,{children:"Configure OData service connection parameters"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"serviceBaseUrl",children:"Service Base URL"}),s.jsx(U,{id:"serviceBaseUrl",value:e.baseUrl||"",onChange:r=>t("baseUrl",r.target.value),placeholder:"https://odata.example.com/service"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Base URL of the OData service"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"entitySetName",children:"Entity Set Name"}),s.jsx(U,{id:"entitySetName",value:e.entitySetName||"",onChange:r=>t("entitySetName",r.target.value),placeholder:"Orders, Customers"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"OData entity set to update/create"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apiVersion",children:"API Version"}),s.jsxs(se,{value:e.apiVersion||"",onValueChange:r=>t("apiVersion",r),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select OData version"})}),s.jsxs(te,{children:[s.jsx(F,{value:"v2",children:"v2"}),s.jsx(F,{value:"v4",children:"v4"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"OData protocol version"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"authenticationType",children:"Authentication Type"}),s.jsxs(se,{value:e.authentication?.type||"none",onValueChange:r=>t("authentication",{type:r,credentials:{}}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"none",children:"None"}),s.jsx(F,{value:"basic",children:"Basic Auth"}),s.jsx(F,{value:"oauth2",children:"OAuth2"}),s.jsx(F,{value:"api-key",children:"API Key"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Authentication method"})]}),n(),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Timeout Settings (seconds)"}),s.jsx(U,{id:"timeout",type:"number",value:e.timeout||"",onChange:r=>t("timeout",parseInt(r.target.value)||30),placeholder:"30"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connection and read timeout limits"})]})]})]})}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Preparation"}),s.jsx(Ne,{children:"Configure data processing and validation before sending"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataMappingRules",children:"Data Mapping Rules"}),s.jsx(Re,{id:"dataMappingRules",value:e.dataMappingRules||"",onChange:r=>t("dataMappingRules",r.target.value),placeholder:"Map OrderID to OrderId",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mapping middleware objects to OData fields"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataValidationRules",children:"Data Validation Rules"}),s.jsx(Re,{id:"dataValidationRules",value:e.dataValidationRules||"",onChange:r=>t("dataValidationRules",r.target.value),placeholder:"Required fields, format checks",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Validate data before sending"})]})]})]})})]})})},mie=({configuration:e,onConfigurationChange:t})=>s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"target",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"target",children:"Target"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"target",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"SAP System Identification"}),s.jsx(Ne,{children:"SAP system connection details"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemId",children:"SAP System ID (SID)"}),s.jsx(U,{id:"sapSystemId",value:e.sapSystemId||"",onChange:n=>t("sapSystemId",n.target.value),placeholder:"PRD, DEV"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SAP system identifier"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapClientNumber",children:"SAP Client Number"}),s.jsx(U,{id:"sapClientNumber",value:e.sapClientNumber||"",onChange:n=>t("sapClientNumber",n.target.value),placeholder:"100"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SAP client number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemNumber",children:"SAP System Number"}),s.jsx(U,{id:"sapSystemNumber",value:e.sapSystemNumber||"",onChange:n=>t("sapSystemNumber",n.target.value),placeholder:"00"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Two-digit system number"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Connection Details"}),s.jsx(Ne,{children:"SAP application server and gateway configuration"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapApplicationServerHost",children:"SAP Application Server Host"}),s.jsx(U,{id:"sapApplicationServerHost",value:e.sapApplicationServerHost||"",onChange:n=>t("sapApplicationServerHost",n.target.value),placeholder:"sapserver.example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hostname or IP of SAP application server"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayHost",children:"SAP Gateway Host"}),s.jsx(U,{id:"sapGatewayHost",value:e.sapGatewayHost||"",onChange:n=>t("sapGatewayHost",n.target.value),placeholder:"sapgw.example.com"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gateway host (optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayService",children:"SAP Gateway Service"}),s.jsx(U,{id:"sapGatewayService",value:e.sapGatewayService||"",onChange:n=>t("sapGatewayService",n.target.value),placeholder:"sapgw00"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gateway service/port (optional)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"portNumber",children:"Port Number"}),s.jsx(U,{id:"portNumber",type:"number",value:e.portNumber||"",onChange:n=>t("portNumber",n.target.value),placeholder:"3300"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Port number (optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionType",children:"Connection Type"}),s.jsxs(se,{value:e.connectionType||"",onValueChange:n=>t("connectionType",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"TCP",children:"TCP/IP"}),s.jsx(F,{value:"Gateway",children:"Gateway"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCP/IP or Gateway"})]})]})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Authentication"}),s.jsx(Ne,{children:"SAP user credentials"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapUser",children:"SAP User"}),s.jsx(U,{id:"sapUser",value:e.sapUser||"",onChange:n=>t("sapUser",n.target.value),placeholder:"sapuser"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"User for RFC connection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapPassword",children:"SAP Password"}),s.jsx(U,{id:"sapPassword",type:"password",value:e.sapPassword||"",onChange:n=>t("sapPassword",n.target.value),placeholder:"secret"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Password for RFC user"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"RFC Configuration"}),s.jsx(Ne,{children:"RFC-specific settings"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rfcDestinationName",children:"RFC Destination Name"}),s.jsx(U,{id:"rfcDestinationName",value:e.rfcDestinationName||"",onChange:n=>t("rfcDestinationName",n.target.value),placeholder:"MIDDLEWARE_DEST"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"RFC destination configured in SAP"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"listenerServiceName",children:"Listener Service Name"}),s.jsx(U,{id:"listenerServiceName",value:e.listenerServiceName||"",onChange:n=>t("listenerServiceName",n.target.value),placeholder:"RfcReceiverService"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Middleware service listening for RFC"})]})]})})]})]}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Handling"}),s.jsx(Ne,{children:"Configuration for handling received RFC data"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataMappingRules",children:"Data Mapping Rules"}),s.jsx(Re,{id:"dataMappingRules",value:e.dataMappingRules||"",onChange:n=>t("dataMappingRules",n.target.value),placeholder:"Map VBELN to SalesOrderNumber",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mapping SAP RFC fields to middleware data structures"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"validationRules",children:"Validation Rules"}),s.jsx(Re,{id:"validationRules",value:e.validationRules||"",onChange:n=>t("validationRules",n.target.value),placeholder:"Mandatory fields, formats",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Validation on incoming data"})]})]})]})})]})}),pie=({configuration:e,onConfigurationChange:t})=>s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"source",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"SAP System Identification"}),s.jsx(Ne,{children:"SAP system connection details"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemId",children:"SAP System ID (SID)"}),s.jsx(U,{id:"sapSystemId",value:e.sapSystemId||"",onChange:n=>t("sapSystemId",n.target.value),placeholder:"PRD, DEV"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SAP system identifier"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapClientNumber",children:"SAP Client Number"}),s.jsx(U,{id:"sapClientNumber",value:e.sapClientNumber||"",onChange:n=>t("sapClientNumber",n.target.value),placeholder:"100"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SAP client number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapSystemNumber",children:"SAP System Number"}),s.jsx(U,{id:"sapSystemNumber",value:e.sapSystemNumber||"",onChange:n=>t("sapSystemNumber",n.target.value),placeholder:"00"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Two-digit system number"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Connection Details"}),s.jsx(Ne,{children:"SAP application server and gateway configuration"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapApplicationServerHost",children:"SAP Application Server Host"}),s.jsx(U,{id:"sapApplicationServerHost",value:e.sapApplicationServerHost||"",onChange:n=>t("sapApplicationServerHost",n.target.value),placeholder:"sapserver.example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hostname or IP of SAP application server"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayHost",children:"SAP Gateway Host"}),s.jsx(U,{id:"sapGatewayHost",value:e.sapGatewayHost||"",onChange:n=>t("sapGatewayHost",n.target.value),placeholder:"sapgw.example.com"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gateway host (optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapGatewayService",children:"SAP Gateway Service"}),s.jsx(U,{id:"sapGatewayService",value:e.sapGatewayService||"",onChange:n=>t("sapGatewayService",n.target.value),placeholder:"sapgw00"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Gateway service/port (optional)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"portNumber",children:"Port Number"}),s.jsx(U,{id:"portNumber",type:"number",value:e.portNumber||"",onChange:n=>t("portNumber",n.target.value),placeholder:"3300"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Port number (optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionType",children:"Connection Type"}),s.jsxs(se,{value:e.connectionType||"",onValueChange:n=>t("connectionType",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select connection type"})}),s.jsxs(te,{children:[s.jsx(F,{value:"TCP",children:"TCP/IP"}),s.jsx(F,{value:"Gateway",children:"Gateway"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"TCP/IP or Gateway"})]})]})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Authentication"}),s.jsx(Ne,{children:"SAP user credentials"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"sapUser",children:"SAP User"}),s.jsx(U,{id:"sapUser",value:e.sapUser||"",onChange:n=>t("sapUser",n.target.value),placeholder:"sapuser"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"User for RFC connection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xs,{name:"sapPassword",label:"SAP Password",placeholder:"secret",value:e.sapPassword||"",onValueChange:n=>t("sapPassword",n),showConfirmation:!1}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Password for RFC user"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"RFC Configuration"}),s.jsx(Ne,{children:"RFC-specific settings"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"rfcDestinationName",children:"RFC Destination Name"}),s.jsx(U,{id:"rfcDestinationName",value:e.rfcDestinationName||"",onChange:n=>t("rfcDestinationName",n.target.value),placeholder:"MIDDLEWARE_DEST"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"RFC destination configured in SAP"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"callerServiceName",children:"Caller Service Name"}),s.jsx(U,{id:"callerServiceName",value:e.callerServiceName||"",onChange:n=>t("callerServiceName",n.target.value),placeholder:"RfcSenderService"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Middleware service calling the RFC"})]})]})})]})]}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Data Preparation"}),s.jsx(Ne,{children:"Configuration for preparing data before sending to SAP"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dataMappingRules",children:"Data Mapping Rules"}),s.jsx(Re,{id:"dataMappingRules",value:e.dataMappingRules||"",onChange:n=>t("dataMappingRules",n.target.value),placeholder:"Map OrderID to VBELN",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Map middleware data to SAP RFC parameters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"validationRules",children:"Validation Rules"}),s.jsx(Re,{id:"validationRules",value:e.validationRules||"",onChange:n=>t("validationRules",n.target.value),placeholder:"Mandatory fields, formats",rows:4}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Validate data before sending"})]})]})]})})]})}),fie=({configuration:e,onConfigurationChange:t})=>s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsxs(ye,{value:"source",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Mail Server Connection"}),s.jsx(Ne,{children:"Configure connection to the incoming mail server"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"mailServerHost",children:"Mail Server Host"}),s.jsx(U,{id:"mailServerHost",value:e.mailServerHost||"",onChange:n=>t("mailServerHost",n.target.value),placeholder:"imap.mailserver.com, pop3.mail.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hostname or IP of the incoming mail server"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"mailServerPort",children:"Mail Server Port"}),s.jsx(U,{id:"mailServerPort",type:"number",value:e.mailServerPort||"",onChange:n=>t("mailServerPort",n.target.value),placeholder:"993 for IMAP SSL, 995 for POP3 SSL"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Port number for IMAP/POP3 service"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"mailProtocol",children:"Protocol"}),s.jsxs(se,{value:e.mailProtocol||"",onValueChange:n=>t("mailProtocol",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select mail protocol"})}),s.jsxs(te,{children:[s.jsx(F,{value:"IMAP",children:"IMAP"}),s.jsx(F,{value:"POP3",children:"POP3"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mail protocol used"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"mailUsername",children:"Username"}),s.jsx(U,{id:"mailUsername",value:e.mailUsername||"",onChange:n=>t("mailUsername",n.target.value),placeholder:"user@example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail account username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xs,{name:"mailPassword",label:"Password",placeholder:"password",value:e.mailPassword||"",onValueChange:n=>t("mailPassword",n),showConfirmation:!1}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Mail account password"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"useSSLTLS",checked:e.useSSLTLS||!1,onCheckedChange:n=>t("useSSLTLS",n)}),s.jsx(C,{htmlFor:"useSSLTLS",className:"text-sm font-normal",children:"Use SSL/TLS"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable secure connection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"folderName",children:"Folder Name"}),s.jsx(U,{id:"folderName",value:e.folderName||"INBOX",onChange:n=>t("folderName",n.target.value),placeholder:"INBOX"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Mail folder to poll"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"pollingInterval",children:"Polling Interval (ms)"}),s.jsx(U,{id:"pollingInterval",type:"number",value:e.pollingInterval||"",onChange:n=>t("pollingInterval",n.target.value),placeholder:"60000"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Frequency of checking for new emails"})]})]})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Message Filtering and Fetching"}),s.jsx(Ne,{children:"Configure email search criteria and limits"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"searchCriteria",children:"Search Criteria"}),s.jsx(U,{id:"searchCriteria",value:e.searchCriteria||"",onChange:n=>t("searchCriteria",n.target.value),placeholder:"UNSEEN or FROM:support@example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email search/filter criteria (subject, sender, flags)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"maxMessages",children:"Max Messages"}),s.jsx(U,{id:"maxMessages",type:"number",value:e.maxMessages||"",onChange:n=>t("maxMessages",n.target.value),placeholder:"100"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Maximum number of emails to fetch per poll"})]})]})]})]}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Message Processing"}),s.jsx(Ne,{children:"Configure how emails are processed after retrieval"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"contentHandling",children:"Content Handling"}),s.jsx(Re,{id:"contentHandling",value:e.contentHandling||"",onChange:n=>t("contentHandling",n.target.value),placeholder:"Save attachments, parse body text",rows:3}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"How to handle email content (plain text, HTML, attachments)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"mailEncoding",children:"Encoding"}),s.jsxs(se,{value:e.mailEncoding||"",onValueChange:n=>t("mailEncoding",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select encoding"})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Character encoding used"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"deleteAfterFetch",checked:e.deleteAfterFetch||!1,onCheckedChange:n=>t("deleteAfterFetch",n)}),s.jsx(C,{htmlFor:"deleteAfterFetch",className:"text-sm font-normal",children:"Delete After Fetch"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Delete emails after processing"})]})]})]})]})})]})}),gie=({configuration:e,onConfigurationChange:t})=>s.jsx("div",{className:"space-y-6",children:s.jsxs(et,{defaultValue:"source",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"source",children:"Source"}),s.jsx(xe,{value:"processing",children:"Processing"})]}),s.jsx(ye,{value:"source",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"SMTP Server Connection"}),s.jsx(Ne,{children:"Configure connection to the SMTP server for sending emails"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"smtpServerHost",children:"SMTP Server Host"}),s.jsx(U,{id:"smtpServerHost",value:e.smtpServerHost||"",onChange:n=>t("smtpServerHost",n.target.value),placeholder:"smtp.mailserver.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Hostname or IP of the SMTP server"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"smtpServerPort",children:"SMTP Server Port"}),s.jsx(U,{id:"smtpServerPort",type:"number",value:e.smtpServerPort||"",onChange:n=>t("smtpServerPort",n.target.value),placeholder:"587 (TLS), 465 (SSL)"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Port number for SMTP service"})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-7",children:[s.jsx(it,{id:"smtpUseSSLTLS",checked:e.smtpUseSSLTLS||!1,onCheckedChange:n=>t("smtpUseSSLTLS",n)}),s.jsx(C,{htmlFor:"smtpUseSSLTLS",className:"text-sm font-normal",children:"Use SSL/TLS"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable secure connection"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"smtpUsername",children:"Username"}),s.jsx(U,{id:"smtpUsername",value:e.smtpUsername||"",onChange:n=>t("smtpUsername",n.target.value),placeholder:"user@example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"SMTP authentication username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xs,{name:"smtpPassword",label:"Password",placeholder:"password",value:e.smtpPassword||"",onValueChange:n=>t("smtpPassword",n),showConfirmation:!1}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"SMTP authentication password"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connectionTimeout",children:"Connection Timeout (ms)"}),s.jsx(U,{id:"connectionTimeout",type:"number",value:e.connectionTimeout||"",onChange:n=>t("connectionTimeout",n.target.value),placeholder:"30000"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connection timeout in milliseconds"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"readTimeout",children:"Read Timeout (ms)"}),s.jsx(U,{id:"readTimeout",type:"number",value:e.readTimeout||"",onChange:n=>t("readTimeout",n.target.value),placeholder:"30000"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Read timeout in milliseconds"})]})]})]})]})}),s.jsx(ye,{value:"processing",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Message Preparation"}),s.jsx(Ne,{children:"Configure email content and recipients"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fromAddress",children:"From Address"}),s.jsx(U,{id:"fromAddress",value:e.fromAddress||"",onChange:n=>t("fromAddress",n.target.value),placeholder:"sender@example.com"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sender's email address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"toAddresses",children:"To Addresses"}),s.jsx(Re,{id:"toAddresses",value:e.toAddresses||"",onChange:n=>t("toAddresses",n.target.value),placeholder:"recipient1@example.com, recipient2@example.com",rows:2}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recipient email addresses (comma-separated)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"ccAddresses",children:"CC Addresses"}),s.jsx(Re,{id:"ccAddresses",value:e.ccAddresses||"",onChange:n=>t("ccAddresses",n.target.value),placeholder:"cc1@example.com, cc2@example.com",rows:2}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"CC recipients (optional)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"bccAddresses",children:"BCC Addresses"}),s.jsx(Re,{id:"bccAddresses",value:e.bccAddresses||"",onChange:n=>t("bccAddresses",n.target.value),placeholder:"bcc1@example.com, bcc2@example.com",rows:2}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"BCC recipients (optional)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emailSubject",children:"Subject"}),s.jsx(U,{id:"emailSubject",value:e.emailSubject||"",onChange:n=>t("emailSubject",n.target.value),placeholder:"Order Confirmation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email subject line"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emailBody",children:"Body"}),s.jsx(Re,{id:"emailBody",value:e.emailBody||"",onChange:n=>t("emailBody",n.target.value),placeholder:"Email content - plain text or HTML",rows:6}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Email body (plain text or HTML content)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emailAttachments",children:"Attachments"}),s.jsx(Re,{id:"emailAttachments",value:e.emailAttachments||"",onChange:n=>t("emailAttachments",n.target.value),placeholder:"PDF, images, etc.",rows:2}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Files to attach"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"emailEncoding",children:"Encoding"}),s.jsxs(se,{value:e.emailEncoding||"",onValueChange:n=>t("emailEncoding",n),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select encoding"})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTF-8",children:"UTF-8"}),s.jsx(F,{value:"ISO-8859-1",children:"ISO-8859-1"}),s.jsx(F,{value:"ASCII",children:"ASCII"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Character encoding used"})]})]})]})]})})]})});class xie{async createAdapter(t){return G.post("/adapters",t)}async getAdapters(t){const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&n.append(a,o.toString())});const r=`/adapters${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async getAdapter(t){return G.get(`/adapters/${t}`)}async updateAdapter(t,n){return G.put(`/adapters/${t}`,n)}async deleteAdapter(t){return G.delete(`/adapters/${t}`)}async cloneAdapter(t,n){return G.post(`/adapters/${t}/clone`,{name:n})}}class vie{async testAdapter(t,n){return G.post(`/adapters/${t}/test`,{testData:n})}async testAdapterConfiguration(t,n){return G.post("/adapters/test-config",{configuration:t,type:n})}async validateAdapterConfig(t,n){return G.post("/adapters/validate-config",{type:t,configuration:n})}}let yie=class{websocket=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=3e3;logListeners=[];statsListeners=[];async getAdapterStats(t,n){const r=`/adapters/${t}/stats${n?`?timeRange=${n}`:""}`;return G.get(r)}async getAdapterLogs(t,n){const r=new URLSearchParams;n&&Object.entries(n).forEach(([o,i])=>{i!==void 0&&r.append(o,i.toString())});const a=`/adapters/${t}/logs${r.toString()?`?${r.toString()}`:""}`;return G.get(a)}connectWebSocket(t){if(this.websocket?.readyState===WebSocket.OPEN)return;const n=`ws://localhost:8080/ws/adapters${t?`/${t}/logs`:"/logs"}`;try{this.websocket=new WebSocket(n),this.websocket.onopen=()=>{console.log("WebSocket connected for adapter monitoring"),this.reconnectAttempts=0},this.websocket.onmessage=r=>{try{const a=JSON.parse(r.data);a.type==="new_log"?this.logListeners.forEach(o=>o(a.log)):a.type==="stats_update"&&this.statsListeners.forEach(o=>o(a.stats))}catch(a){console.error("Error parsing WebSocket message:",a)}},this.websocket.onclose=()=>{console.log("WebSocket connection closed"),this.attemptReconnect(t)},this.websocket.onerror=r=>{console.error("WebSocket error:",r)}}catch(r){console.error("Failed to create WebSocket connection:",r)}}attemptReconnect(t){this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`Attempting to reconnect WebSocket (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connectWebSocket(t)},this.reconnectInterval*this.reconnectAttempts))}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=null),this.logListeners=[],this.statsListeners=[],this.reconnectAttempts=0}onLogUpdate(t){return this.logListeners.push(t),()=>{const n=this.logListeners.indexOf(t);n>-1&&this.logListeners.splice(n,1)}}onStatsUpdate(t){return this.statsListeners.push(t),()=>{const n=this.statsListeners.indexOf(t);n>-1&&this.statsListeners.splice(n,1)}}sendCommand(t,n){this.websocket?.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({command:t,data:n}))}};class jie{async getAdapterTypes(t){const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&n.append(a,o.toString())});const r=`/adapters/types${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async getAdapterType(t){return G.get(`/adapters/types/${t}`)}async createAdapterType(t){return G.post("/adapters/types",t)}async updateAdapterType(t,n){return G.put(`/adapters/types/${t}`,n)}async deleteAdapterType(t){return G.delete(`/adapters/types/${t}`)}async cloneAdapterType(t,n){return G.post(`/adapters/types/${t}/clone`,{name:n})}async getAdapterTypesByCategory(t){return G.get(`/adapters/types?category=${t}`)}async updateAdapterTypeStatus(t,n){return G.patch(`/adapters/types/${t}/status`,{isActive:n})}async validateAdapterTypeConfiguration(t,n){return G.post("/adapters/types/validate",{configuration:t,category:n})}async searchAdapterTypes(t,n){const r=new URLSearchParams({q:t,...n?.category&&{category:n.category},...n?.isActive!==void 0&&{isActive:n.isActive.toString()},page:(n?.page||1).toString(),limit:(n?.limit||50).toString()});return G.get(`/adapters/types/search?${r}`)}async getAdapterTypeUsage(t){return G.get(`/adapters/types/${t}/usage`)}}class wie{mockServers=new Map;async validateAdapter(t){const n=Date.now(),r=[],a=[],o=[];try{const i=this.validateConfiguration(t);i.isValid||(r.push(...i.errors),a.push(...i.warnings)),await this.setupMockServers(t.adapterType);for(const c of t.testScenarios){const d=await this.runTestScenario(t,c);o.push(d),d.status==="failed"&&r.push(`Test '${c.name}' failed: ${d.message}`)}await this.cleanupMockServers(t.adapterType);const l=Date.now()-n;return Ar({title:"Adapter Validation Complete",description:`${o.length} tests completed in ${l}ms`,variant:o.some(c=>c.status==="failed")?"destructive":"default"}),{isValid:r.length===0,errors:r,warnings:a,testResults:o}}catch(i){return r.push(`Validation failed: ${i instanceof Error?i.message:"Unknown error"}`),{isValid:!1,errors:r,warnings:a,testResults:o}}}validateConfiguration(t){const n=[],r=[],a=this.getRequiredFields(t.adapterType);for(const o of a)t.configuration[o]||n.push(`Required field '${o}' is missing`);switch(t.adapterType){case"http_sender":case"http_receiver":this.validateHttpConfiguration(t.configuration,n,r);break;case"ftp":case"sftp":this.validateFtpConfiguration(t.configuration,n,r);break;case"jdbc_sender":case"jdbc_receiver":this.validateJdbcConfiguration(t.configuration,n,r);break;case"soap_sender":case"soap_receiver":this.validateSoapConfiguration(t.configuration,n,r);break}return{isValid:n.length===0,errors:n,warnings:r}}validateHttpConfiguration(t,n,r){if(t.url)try{new URL(t.url)}catch{n.push("Invalid URL format")}t.authentication==="basic"&&(!t.username||!t.password)&&n.push("Username and password required for basic authentication"),t.timeout&&(t.timeout<1e3||t.timeout>3e5)&&r.push("Timeout should be between 1000ms and 300000ms")}validateFtpConfiguration(t,n,r){t.host||n.push("FTP host is required"),t.port&&(t.port<1||t.port>65535)&&n.push("Invalid port number"),t.username||r.push("Anonymous FTP access may not be secure")}validateJdbcConfiguration(t,n,r){t.connectionUrl||n.push("JDBC connection URL is required"),t.driverClass||n.push("JDBC driver class is required"),t.connectionUrl&&!t.connectionUrl.startsWith("jdbc:")&&n.push("Invalid JDBC URL format")}validateSoapConfiguration(t,n,r){if(!t.wsdlUrl&&!t.endpointUrl&&n.push("Either WSDL URL or endpoint URL is required"),t.wsdlUrl)try{new URL(t.wsdlUrl)}catch{n.push("Invalid WSDL URL format")}}async runTestScenario(t,n){const r=Date.now();try{switch(n.type){case"connection":return await this.testConnection(t,n);case"authentication":return await this.testAuthentication(t,n);case"data_transmission":return await this.testDataTransmission(t,n);case"error_handling":return await this.testErrorHandling(t,n);default:throw new Error(`Unknown test scenario type: ${n.type}`)}}catch(a){return{testName:n.name,status:"failed",message:a instanceof Error?a.message:"Unknown error",duration:Date.now()-r}}}async testConnection(t,n){const r=Date.now();await new Promise(i=>setTimeout(i,1e3));const o=this.mockServers.get(t.adapterType)?.isRunning()??!0;return{testName:n.name,status:o?"passed":"failed",message:o?"Connection successful":"Connection failed",duration:Date.now()-r}}async testAuthentication(t,n){const r=Date.now();await new Promise(o=>setTimeout(o,800));const a=t.configuration.username&&t.configuration.password;return{testName:n.name,status:a?"passed":"failed",message:a?"Authentication successful":"Authentication failed",duration:Date.now()-r}}async testDataTransmission(t,n){const r=Date.now();return await new Promise(a=>setTimeout(a,1500)),{testName:n.name,status:"passed",message:"Data transmission successful",duration:Date.now()-r}}async testErrorHandling(t,n){const r=Date.now();return await new Promise(a=>setTimeout(a,600)),{testName:n.name,status:"passed",message:"Error handling working correctly",duration:Date.now()-r}}async setupMockServers(t){const n=new Nie(t);await n.start(),this.mockServers.set(t,n)}async cleanupMockServers(t){const n=this.mockServers.get(t);n&&(await n.stop(),this.mockServers.delete(t))}getRequiredFields(t){return{http_sender:["url","method"],http_receiver:["port"],ftp:["host","port"],sftp:["host","port","username"],jdbc_sender:["connectionUrl","driverClass"],jdbc_receiver:["connectionUrl","driverClass"],soap_sender:["wsdlUrl"],soap_receiver:["wsdlUrl"],rest_sender:["url","method"],rest_receiver:["port"],jms_sender:["connectionFactory","destination"],jms_receiver:["connectionFactory","destination"],mail_sender:["smtpHost","port"],mail_receiver:["host","port"],file:["directory"],rfc_sender:["host","systemNumber"],rfc_receiver:["host","systemNumber"],idoc_sender:["host","systemNumber"],idoc_receiver:["host","systemNumber"],odata_sender:["serviceUrl"],odata_receiver:["serviceUrl"]}[t]||[]}}class Nie{constructor(t){this.adapterType=t}running=!1;async start(){await new Promise(t=>setTimeout(t,500)),this.running=!0}async stop(){this.running=!1}isRunning(){return this.running}}const P$=new wie;class bie{api;testing;monitoring;types;constructor(){this.api=new xie,this.testing=new vie,this.monitoring=new yie,this.types=new jie}async createAdapter(...t){return this.api.createAdapter(...t)}async getAdapters(...t){return this.api.getAdapters(...t)}async getAdapter(...t){return this.api.getAdapter(...t)}async updateAdapter(...t){return this.api.updateAdapter(...t)}async deleteAdapter(...t){return this.api.deleteAdapter(...t)}async cloneAdapter(...t){return this.api.cloneAdapter(...t)}async testAdapter(...t){return this.testing.testAdapter(...t)}async testAdapterConfiguration(...t){return this.testing.testAdapterConfiguration(...t)}async validateAdapterConfig(...t){return this.testing.validateAdapterConfig(...t)}async getAdapterStats(...t){return this.monitoring.getAdapterStats(...t)}async getAdapterLogs(...t){return this.monitoring.getAdapterLogs(...t)}async getAdapterTypes(...t){return this.types.getAdapterTypes(...t)}async validateAdapter(t){return P$.validateAdapter(t)}}const qo=new bie,Sie=({adapterType:e,configuration:t,children:n})=>{const[r,a]=h.useState(!1),[o,i]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(0),m=[{name:"Connection Test",type:"connection",expectedResult:"success"},{name:"Authentication Test",type:"authentication",expectedResult:"success"},{name:"Data Transmission Test",type:"data_transmission",expectedResult:"success"},{name:"Error Handling Test",type:"error_handling",expectedResult:"success"}],p=async()=>{if(!t||Object.keys(t).length===0){Ar({title:"Validation Error",description:"No configuration found to validate",variant:"destructive"});return}i(!0),u(0),c(null);try{const f={adapterType:e,configuration:t,testScenarios:m},w=setInterval(()=>{u(v=>Math.min(v+20,90))},500),y=await P$.validateAdapter(f);clearInterval(w),u(100),c(y)}catch(f){Ar({title:"Validation Failed",description:f instanceof Error?f.message:"Unknown error occurred",variant:"destructive"})}finally{i(!1),setTimeout(()=>u(0),1e3)}},g=f=>{switch(f){case"passed":return s.jsx(rs,{className:"h-4 w-4 text-success"});case"failed":return s.jsx(en,{className:"h-4 w-4 text-destructive"});case"warning":return s.jsx(Ps,{className:"h-4 w-4 text-warning"});default:return null}},x=f=>{const w={passed:"default",failed:"destructive",warning:"secondary"};return s.jsx(fe,{variant:w[f]||"outline",children:f})};return s.jsxs(ft,{open:r,onOpenChange:a,children:[s.jsx(rh,{asChild:!0,children:n}),s.jsxs(mt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsx(gt,{children:s.jsxs(xt,{className:"flex items-center gap-2",children:[s.jsx(zC,{className:"h-5 w-5"}),"Adapter Validation - ",e.replace("_"," ").toUpperCase()]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{className:"text-lg",children:"Validation Controls"})}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Run comprehensive validation tests for this adapter configuration"}),s.jsx(z,{onClick:p,disabled:o,className:"flex items-center gap-2",children:o?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Validating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(zC,{className:"h-4 w-4"}),"Run Validation"]})})]}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Validation Progress"}),s.jsxs("span",{children:[d,"%"]})]}),s.jsx(nh,{value:d,className:"h-2"})]})]})]}),l&&s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[l.isValid?s.jsx(rs,{className:"h-5 w-5 text-success"}):s.jsx(en,{className:"h-5 w-5 text-destructive"}),"Validation Results"]})}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"summary",className:"w-full",children:[s.jsxs(Ke,{children:[s.jsx(xe,{value:"summary",children:"Summary"}),s.jsx(xe,{value:"tests",children:"Test Results"}),s.jsx(xe,{value:"errors",children:"Issues"})]}),s.jsxs(ye,{value:"summary",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(K,{children:s.jsxs(re,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-center",children:l.testResults?.filter(f=>f.status==="passed").length||0}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Passed"})]})}),s.jsx(K,{children:s.jsxs(re,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-center text-destructive",children:l.testResults?.filter(f=>f.status==="failed").length||0}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Failed"})]})}),s.jsx(K,{children:s.jsxs(re,{className:"pt-6",children:[s.jsx("div",{className:"text-2xl font-bold text-center text-warning",children:l.warnings.length}),s.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Warnings"})]})})]}),s.jsx(We,{children:s.jsx(ze,{children:l.isValid?"All validation tests passed successfully. This adapter configuration is ready for deployment.":"Some validation tests failed. Please review the issues before proceeding."})})]}),s.jsx(ye,{value:"tests",className:"space-y-4",children:l.testResults?.map((f,w)=>s.jsx(K,{children:s.jsx(re,{className:"pt-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[g(f.status),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:f.testName}),s.jsx("p",{className:"text-sm text-muted-foreground",children:f.message})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[x(f.status),f.duration&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:[f.duration,"ms"]})]})]})})},w))}),s.jsxs(ye,{value:"errors",className:"space-y-4",children:[l.errors.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-destructive",children:"Errors"}),l.errors.map((f,w)=>s.jsxs(We,{variant:"destructive",children:[s.jsx(en,{className:"h-4 w-4"}),s.jsx(ze,{children:f})]},w))]}),l.warnings.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-warning",children:"Warnings"}),l.warnings.map((f,w)=>s.jsxs(We,{children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx(ze,{children:f})]},w))]}),l.errors.length===0&&l.warnings.length===0&&s.jsxs(We,{children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx(ze,{children:"No issues found. The adapter configuration is valid."})]})]})]})})]})]})]})]})},xT=[{id:"sms-gateway",name:"SMS Gateway",icon:ZB,description:"Send SMS messages via gateway API",category:"SMS",fields:[{name:"provider",label:"SMS Provider",type:"select",required:!0,options:["Twilio","AWS SNS","Nexmo","Custom"]},{name:"apiKey",label:"API Key",type:"password",required:!0,placeholder:"Your API Key"},{name:"apiSecret",label:"API Secret",type:"password",required:!0,placeholder:"Your API Secret"},{name:"endpoint",label:"API Endpoint",type:"text",required:!0,placeholder:"https://api.twilio.com/2010-04-01"},{name:"fromNumber",label:"From Number",type:"text",required:!0,placeholder:"+1234567890"},{name:"region",label:"Region",type:"select",required:!1,options:["US","EU","APAC"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"file",name:"FILE",icon:bs,description:"File system operations and transfers",category:"File System",fields:[{name:"basePath",label:"Base Path",type:"text",required:!0,placeholder:"/data/files"},{name:"encoding",label:"File Encoding",type:"select",required:!1,options:["UTF-8","ASCII","ISO-8859-1","UTF-16"]},{name:"permissions",label:"File Permissions",type:"text",required:!1,placeholder:"755"},{name:"createDirs",label:"Create Directories",type:"select",required:!1,options:["true","false"]}]},{id:"ftp",name:"FTP",icon:lk,description:"File Transfer Protocol connections",category:"File Transfer",fields:[{name:"host",label:"FTP Host",type:"text",required:!0,placeholder:"ftp.example.com"},{name:"port",label:"Port",type:"number",required:!1,placeholder:"21"},{name:"username",label:"Username",type:"text",required:!0,placeholder:"ftpuser"},{name:"password",label:"Password",type:"password",required:!0,placeholder:"FTP Password"},{name:"passiveMode",label:"Passive Mode",type:"select",required:!1,options:["true","false"]},{name:"transferMode",label:"Transfer Mode",type:"select",required:!1,options:["binary","ascii"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"sftp",name:"SFTP",icon:ho,description:"Secure File Transfer Protocol",category:"File Transfer",fields:[{name:"host",label:"SFTP Host",type:"text",required:!0,placeholder:"sftp.example.com"},{name:"port",label:"Port",type:"number",required:!1,placeholder:"22"},{name:"username",label:"Username",type:"text",required:!0,placeholder:"sftpuser"},{name:"password",label:"Password",type:"password",required:!1,placeholder:"SFTP Password"},{name:"privateKey",label:"Private Key Path",type:"text",required:!1,placeholder:"/path/to/private/key"},{name:"keyPassphrase",label:"Key Passphrase",type:"password",required:!1,placeholder:"Key passphrase"},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"http",name:"HTTP",icon:ii,description:"HTTP/HTTPS protocol connections",category:"HTTP",fields:[{name:"protocol",label:"Protocol",type:"select",required:!0,options:["HTTP","HTTPS"]},{name:"url",label:"URL",type:"text",required:!0,placeholder:"https://api.example.com/endpoint"},{name:"method",label:"HTTP Method",type:"select",required:!0,options:["POST","PUT","PATCH","GET"]},{name:"contentType",label:"Content Type",type:"select",required:!0,options:["application/json","application/xml","application/x-www-form-urlencoded"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]},{name:"authValue",label:"Auth Value",type:"password",required:!1,placeholder:"Token or credentials"},{name:"timeout",label:"Timeout (ms)",type:"number",required:!1,placeholder:"30000"}]},{id:"rest",name:"REST",icon:kr,description:"REST API integrations",category:"API",fields:[{name:"url",label:"REST API URL",type:"text",required:!0,placeholder:"https://api.example.com/v1/endpoint"},{name:"method",label:"HTTP Method",type:"select",required:!0,options:["POST","PUT","PATCH","GET"]},{name:"contentType",label:"Content Type",type:"select",required:!0,options:["application/json","application/xml","application/x-www-form-urlencoded"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]},{name:"authValue",label:"Auth Value",type:"password",required:!1,placeholder:"Token or credentials"},{name:"timeout",label:"Timeout (ms)",type:"number",required:!1,placeholder:"30000"}]},{id:"soap",name:"SOAP",icon:Sa,description:"SOAP web services integration",category:"Web Services",fields:[{name:"senderAddress",label:"Address",type:"text",required:!0,placeholder:"/UtilitiesDeviceERPSmartMeterRegisterBulkCreateConfirmation",conditionalField:"sender"},{name:"receiverAddress",label:"Target Address",type:"text",required:!0,placeholder:"https://api.example.com/soap",conditionalField:"receiver"},{name:"wsdl",label:"WSDL",type:"select",required:!0,options:["Select WSDL...","UserService.wsdl","PaymentService.wsdl","NotificationService.wsdl"],conditionalField:"receiver"},{name:"receiverAuthentication",label:"Authentication",type:"select",required:!0,options:["None","Basic","Client Certificate","OAuth","OAuth 2"],conditionalField:"receiver"},{name:"username",label:"Username",type:"text",required:!0,placeholder:"Enter username",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"Basic"},{name:"password",label:"Password",type:"password",required:!0,placeholder:"Enter password",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"Basic"},{name:"clientCertificate",label:"Client Certificate",type:"certificate-dropdown",required:!0,conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"Client Certificate"},{name:"oauthClientId",label:"Client ID",type:"text",required:!0,placeholder:"Enter OAuth client ID",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth"},{name:"oauthClientSecret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter OAuth client secret",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth"},{name:"oauthTokenUrl",label:"Token URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth/token",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth"},{name:"oauth2ClientId",label:"Client ID",type:"text",required:!0,placeholder:"Enter OAuth 2 client ID",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth 2"},{name:"oauth2ClientSecret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter OAuth 2 client secret",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth 2"},{name:"oauth2TokenUrl",label:"Token URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth2/token",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth 2"},{name:"oauth2Scope",label:"Scope",type:"text",required:!1,placeholder:"read write",conditionalField:"receiver",parentField:"receiverAuthentication",parentValue:"OAuth 2"},{name:"receiverTimeout",label:"Timeout (seconds)",type:"number",required:!1,placeholder:"30",conditionalField:"receiver"},{name:"connectionType",label:"Connection Type",type:"select",required:!0,options:["Synchronous","Asynchronous"],conditionalField:"receiver"}]},{id:"jms",name:"JMS",icon:Xs,description:"Java Message Service connections",category:"Messaging",fields:[{name:"driverJar",label:"JMS Driver JAR",type:"jar-selector",required:!0,driverTypeFilter:"Message Queue"},{name:"brokerUrl",label:"Broker URL",type:"text",required:!0,placeholder:"tcp://localhost:61616"},{name:"queueName",label:"Queue Name",type:"text",required:!1,placeholder:"myqueue"},{name:"topicName",label:"Topic Name",type:"text",required:!1,placeholder:"mytopic"},{name:"username",label:"Username",type:"text",required:!1,placeholder:"JMS Username"},{name:"password",label:"Password",type:"password",required:!1,placeholder:"JMS Password"},{name:"connectionFactory",label:"Connection Factory",type:"text",required:!1,placeholder:"ConnectionFactory"},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"odata",name:"ODATA",icon:Ko,description:"Open Data Protocol services",category:"API",fields:[{name:"serviceUrl",label:"Service URL",type:"text",required:!0,placeholder:"https://services.odata.org/V4/service"},{name:"version",label:"OData Version",type:"select",required:!0,options:["V4","V3","V2"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","SSL Certificate"]},{name:"authValue",label:"Auth Value",type:"password",required:!1,placeholder:"Token or credentials"},{name:"maxPageSize",label:"Max Page Size",type:"number",required:!1,placeholder:"1000"}]},{id:"idoc",name:"IDOC",icon:LB,description:"SAP Intermediate Document format",category:"SAP",fields:[{name:"sapHost",label:"SAP Host",type:"text",required:!0,placeholder:"sap.example.com"},{name:"systemNumber",label:"System Number",type:"text",required:!0,placeholder:"00"},{name:"client",label:"Client",type:"text",required:!0,placeholder:"100"},{name:"username",label:"Username",type:"text",required:!0,placeholder:"SAP Username"},{name:"password",label:"Password",type:"password",required:!0,placeholder:"SAP Password"},{name:"language",label:"Language",type:"text",required:!1,placeholder:"EN"},{name:"idocType",label:"IDOC Type",type:"text",required:!1,placeholder:"ORDERS05"},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"jdbc",name:"JDBC",icon:Ds,description:"Java Database Connectivity",category:"Database",fields:[{name:"driverJar",label:"JDBC Driver JAR",type:"jar-selector",required:!0,driverTypeFilter:"Database"},{name:"jdbcUrl",label:"JDBC URL",type:"text",required:!0,placeholder:"jdbc:postgresql://localhost:5432/mydb"},{name:"username",label:"Username",type:"text",required:!0,placeholder:"dbuser"},{name:"password",label:"Password",type:"password",required:!0,placeholder:"Database Password"},{name:"maxPoolSize",label:"Max Pool Size",type:"number",required:!1,placeholder:"10"},{name:"connectionTimeout",label:"Connection Timeout (ms)",type:"number",required:!1,placeholder:"30000"}]},{id:"as2",name:"AS2",icon:MB,description:"Applicability Statement 2 protocol",category:"EDI",fields:[{name:"as2Url",label:"AS2 URL",type:"text",required:!0,placeholder:"https://partner.example.com/as2"},{name:"as2From",label:"AS2 From",type:"text",required:!0,placeholder:"MyCompany"},{name:"as2To",label:"AS2 To",type:"text",required:!0,placeholder:"PartnerCompany"},{name:"certificate",label:"Certificate",type:"certificate-dropdown",required:!0,placeholder:"Select certificate"},{name:"encryptionAlgorithm",label:"Encryption Algorithm",type:"select",required:!1,options:["3DES","AES128","AES192","AES256"]},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"rfc",name:"RFC",icon:ek,description:"SAP Remote Function Call protocol",category:"SAP",fields:[{name:"sapSystemId",label:"SAP System ID (SID)",type:"text",required:!0,placeholder:"PRD, DEV"},{name:"sapClientNumber",label:"SAP Client Number",type:"text",required:!0,placeholder:"100"},{name:"sapSystemNumber",label:"SAP System Number",type:"text",required:!0,placeholder:"00"},{name:"sapApplicationServerHost",label:"SAP Application Server Host",type:"text",required:!0,placeholder:"sapserver.example.com"},{name:"sapUser",label:"SAP User",type:"text",required:!0,placeholder:"sapuser"},{name:"sapPassword",label:"SAP Password",type:"password",required:!0,placeholder:"secret"},{name:"rfcDestinationName",label:"RFC Destination Name",type:"text",required:!0,placeholder:"MIDDLEWARE_DEST"}]},{id:"kafka",name:"KAFKA",icon:dc,description:"Apache Kafka messaging platform",category:"Streaming",fields:[{name:"bootstrapServers",label:"Bootstrap Servers",type:"text",required:!0,placeholder:"localhost:9092"},{name:"topicName",label:"Topic Name",type:"text",required:!0,placeholder:"my-topic"},{name:"groupId",label:"Consumer Group ID",type:"text",required:!1,placeholder:"my-consumer-group"},{name:"securityProtocol",label:"Security Protocol",type:"select",required:!1,options:["PLAINTEXT","SSL","SASL_PLAINTEXT","SASL_SSL"]},{name:"saslMechanism",label:"SASL Mechanism",type:"select",required:!1,options:["PLAIN","SCRAM-SHA-256","SCRAM-SHA-512"]},{name:"username",label:"Username",type:"text",required:!1,placeholder:"Kafka Username"},{name:"password",label:"Password",type:"password",required:!1,placeholder:"Kafka Password"},{name:"authType",label:"Authentication",type:"select",required:!1,options:["None","Basic Auth","Bearer Token","API Key","OAuth","OAuth 2.0","SSL Certificate"]}]},{id:"mail",name:"MAIL",icon:Iu,description:"Email communication via IMAP/POP3/SMTP",category:"Email",fields:[{name:"mailServerHost",label:"Mail Server Host",type:"text",required:!0,placeholder:"imap.mailserver.com"},{name:"mailServerPort",label:"Mail Server Port",type:"number",required:!0,placeholder:"993"},{name:"mailProtocol",label:"Protocol",type:"select",required:!0,options:["IMAP","POP3"]},{name:"mailUsername",label:"Username",type:"text",required:!0,placeholder:"user@example.com"},{name:"mailPassword",label:"Password",type:"password",required:!0,placeholder:"password"},{name:"useSSLTLS",label:"Use SSL/TLS",type:"checkbox",required:!1},{name:"folderName",label:"Folder Name",type:"text",required:!1,placeholder:"INBOX"}]}],vT=()=>{as();const e=Ms(),{navigateBack:t}=Sc(),[n,r]=h.useState(null),[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState("sender"),[u,m]=h.useState(""),[p,g]=h.useState(!0),[x,f]=h.useState({}),[w,y]=h.useState(!1),[v,j]=h.useState("idle"),[N,b]=h.useState(!1),[E,S]=h.useState(!1),[P,A]=h.useState(null),{toast:L}=_e(),R=xT.find(T=>T.id===a);h.useEffect(()=>{if(e.state?.adapter&&e.state?.isEdit){const T=e.state.adapter;console.log("[CreateCommunicationAdapter] Loading adapter for edit:",T),S(!0),A(T.id),l(T.name||""),m(T.description||""),g(T.active!==!1);const D=T.mode==="SENDER"?"sender":"receiver";d(D);const M=T.type.toLowerCase();if(o(M),T.configJson)try{const _=JSON.parse(T.configJson);f(_)}catch(_){console.error("Error parsing adapter configuration:",_)}T.businessComponentId&&r({id:T.businessComponentId,name:T.businessComponentName||"",description:""})}},[e.state]);const I=T=>{switch(T){case"Basic Auth":return[{name:"authUsername",label:"Username",type:"text",required:!0,placeholder:"Enter username"},{name:"authPassword",label:"Password",type:"password",required:!0,placeholder:"Enter password"}];case"Bearer Token":return[{name:"bearerToken",label:"Bearer Token",type:"password",required:!0,placeholder:"Enter bearer token"}];case"API Key":return[{name:"apiKeyValue",label:"API Key",type:"password",required:!0,placeholder:"Enter API key"},{name:"apiKeyLocation",label:"API Key Location",type:"select",required:!0,options:["Header","Query Parameter"]},{name:"apiKeyName",label:"API Key Name",type:"text",required:!0,placeholder:"e.g., X-API-Key or api_key"}];case"OAuth":return[{name:"oauthClientId",label:"Client ID",type:"text",required:!0,placeholder:"Enter client ID"},{name:"oauthClientSecret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter client secret"},{name:"oauthAuthUrl",label:"Authorization URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth/authorize"},{name:"oauthTokenUrl",label:"Token URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth/token"},{name:"oauthScope",label:"Scope",type:"text",required:!1,placeholder:"read write"}];case"OAuth 2.0":return[{name:"oauth2ClientId",label:"Client ID",type:"text",required:!0,placeholder:"Enter client ID"},{name:"oauth2ClientSecret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter client secret"},{name:"oauth2AuthUrl",label:"Authorization URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth2/authorize"},{name:"oauth2TokenUrl",label:"Token URL",type:"text",required:!0,placeholder:"https://auth.example.com/oauth2/token"},{name:"oauth2GrantType",label:"Grant Type",type:"select",required:!0,options:["authorization_code","client_credentials","password","refresh_token"]},{name:"oauth2Scope",label:"Scope",type:"text",required:!1,placeholder:"read write"}];case"SSL Certificate":return[{name:"sslCertPath",label:"Certificate Path",type:"text",required:!0,placeholder:"/path/to/certificate.pem"},{name:"sslKeyPath",label:"Private Key Path",type:"text",required:!0,placeholder:"/path/to/private-key.pem"},{name:"sslKeyPassword",label:"Key Password",type:"password",required:!1,placeholder:"Private key password (if encrypted)"},{name:"sslCaPath",label:"CA Certificate Path",type:"text",required:!1,placeholder:"/path/to/ca-certificate.pem"},{name:"sslVerifyPeer",label:"Verify Peer",type:"select",required:!1,options:["true","false"]}];default:return[]}},V=(T,D)=>{console.log("[CreateCommunicationAdapter] Configuration change:",T,"=",D),f(M=>{const _={...M,[T]:D};return console.log("[CreateCommunicationAdapter] New configuration state:",_),_})},O=async()=>{if(!a){L({title:"No Adapter Selected",description:"Please select a communication adapter first",variant:"destructive"});return}y(!0),j("idle");try{await new Promise(D=>setTimeout(D,2e3)),Math.random()>.3?(j("success"),L({title:"Connection Successful",description:`Successfully connected to ${R?.name}`,variant:"default"})):(j("error"),L({title:"Connection Failed",description:"Please check your configuration and try again",variant:"destructive"}))}catch{j("error"),L({title:"Connection Error",description:"An error occurred while testing the connection",variant:"destructive"})}finally{y(!1)}},k=async()=>{if(!n||!n.id){L({title:"Validation Error",description:"Business Component is required. Please select a business component for this adapter.",variant:"destructive"});return}if(!i||!a||!c){L({title:"Validation Error",description:"Please provide adapter name, select a type, and choose adapter mode",variant:"destructive"});return}if(console.log("[CreateCommunicationAdapter] Validating adapter:",{name:i,type:a,mode:c,businessComponent:n.id,configuration:x}),c==="receiver"){if(a==="rest"){if(!x.targetEndpointUrl){L({title:"Validation Error",description:"Target Endpoint URL is required for REST Receiver adapter",variant:"destructive"});return}if(!x.httpMethod){L({title:"Validation Error",description:"HTTP Method is required for REST Receiver adapter",variant:"destructive"});return}if(!x.contentType){L({title:"Validation Error",description:"Content Type is required for REST Receiver adapter",variant:"destructive"});return}}}else if(c==="sender"){if(a==="rest"){if(!x.port){L({title:"Validation Error",description:"Port is required for REST Sender adapter",variant:"destructive"});return}}else if(a==="soap"&&!x.serviceEndpointUrl){L({title:"Validation Error",description:"Endpoint URL is required for SOAP Sender adapter",variant:"destructive"});return}}if(a!=="rest"&&a!=="soap"){const H=(R?.fields.filter($=>!(!$.required||$.conditionalField==="receiver"&&c==="sender"||$.conditionalField==="sender"&&c==="receiver"||$.parentField&&$.parentValue&&x[$.parentField]!==$.parentValue))||[]).filter($=>!x[$.name]);if(H.length>0){console.log("[CreateCommunicationAdapter] Missing required fields:",H),L({title:"Missing Required Fields",description:`Please fill in: ${H.map($=>$.label).join(", ")}`,variant:"destructive"});return}}const T=c==="sender"?"SENDER":"RECEIVER",D=c==="sender"?"OUTBOUND":"INBOUND",M={name:i,type:a.toUpperCase(),mode:T,direction:D,description:u,active:p,businessComponentId:n.id,configJson:JSON.stringify(x)};try{console.log("[CreateCommunicationAdapter] Sending adapter data to backend:",M);const _=E&&P?await qo.updateAdapter(P,M):await qo.createAdapter(M);_.success?(L({title:E?"Adapter Updated Successfully":"Adapter Saved Successfully",description:`Communication adapter "${i}" has been ${E?"updated":"created"}`,variant:"default"}),setTimeout(()=>{t("/communication-adapters")},500)):(console.log("[CreateCommunicationAdapter] Error response from backend:",_),L({title:"Save Failed",description:_.error||"Failed to save adapter configuration",variant:"destructive"}))}catch(_){console.error("[CreateCommunicationAdapter] Error saving adapter:",_),console.error("[CreateCommunicationAdapter] Error details:",{message:_?.message,response:_?.response,data:_?.response?.data});const H=_?.response?.data?.message||_?.response?.data?.error||_?.message||"An error occurred while saving the adapter";L({title:"Save Error",description:H,variant:"destructive"})}};return s.jsx(MO,{children:s.jsxs(s.Fragment,{children:[N&&s.jsx(nb,{onClose:()=>b(!1)}),s.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"animate-slide-up",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(I0,{className:"h-8 w-8"}),E?"Edit":"Create"," Communication Adapter"]}),s.jsx("p",{className:"text-muted-foreground",children:"Configure communication channels for sending messages, emails, and notifications"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(zoe,{selectedBusinessComponent:n,setSelectedBusinessComponent:r}),s.jsxs(K,{className:"animate-scale-in",children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Adapter Details"}),s.jsx(Ne,{children:"Basic information for your communication adapter"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"adapterName",children:"Adapter Name *"}),s.jsx(U,{id:"adapterName",placeholder:"e.g., Production Email Server",value:i,onChange:T=>l(T.target.value),className:"transition-all duration-300 focus:scale-[1.01]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",placeholder:"Describe the purpose of this communication adapter...",value:u,onChange:T=>m(T.target.value),className:"transition-all duration-300 focus:scale-[1.01]",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"isActive",checked:p,onCheckedChange:T=>g(T===!0)}),s.jsxs(C,{htmlFor:"isActive",className:"text-sm font-normal flex items-center gap-1",children:["Active adapter",s.jsx(fe,{variant:p?"default":"secondary",className:"text-xs",children:p?"Active":"Inactive"})]})]})]})]}),s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.1s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Adapter Type Selection"}),s.jsx(Ne,{children:"Choose the type of communication adapter to configure"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"adapterType",children:"Adapter Type *"}),s.jsx(Boe,{options:xT.map(T=>({value:T.id,label:T.name,icon:T.icon,category:T.category,description:T.description})),value:a,onValueChange:T=>{o(T),console.log("[CreateCommunicationAdapter] Adapter type changed to:",T),a&&a!==T&&(console.log("[CreateCommunicationAdapter] Clearing configuration due to adapter type change"),f({}))},placeholder:"Select communication adapter type",searchPlaceholder:"Search adapters...",emptyMessage:"No adapter found.",className:"transition-all duration-300 hover:bg-accent/50"})]}),R&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(R.icon,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"font-medium",children:R.name}),s.jsx(fe,{variant:"outline",className:"text-xs",children:R.category})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"adapterMode",children:"Adapter Mode *"}),s.jsxs(se,{value:c,onValueChange:T=>{d(T),console.log("[CreateCommunicationAdapter] Adapter mode changed to:",T)},children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:"Select adapter mode"})}),s.jsxs(te,{children:[s.jsx(F,{value:"sender",children:"Sender"}),s.jsx(F,{value:"receiver",children:"Receiver"})]})]})]})]})]})]}),R&&c&&s.jsx(s.Fragment,{children:a==="ftp"?s.jsx(Koe,{mode:c,onConfigChange:f}):a==="sftp"?s.jsx(Goe,{mode:c,onConfigChange:f}):a==="file"?s.jsx(Joe,{mode:c,onConfigChange:f}):a==="http"&&c==="sender"?s.jsx(Qoe,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="http"&&c==="receiver"?s.jsx(eie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="idoc"&&c==="sender"?s.jsx(sie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="idoc"&&c==="receiver"?s.jsx(rie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="jms"&&c==="sender"?s.jsx(aie,{adapter:{name:"",type:"jms",mode:"outbound",configuration:x,status:"inactive"},onUpdate:T=>f(T.configuration)}):a==="jms"&&c==="receiver"?s.jsx(oie,{adapter:{name:"",type:"jms",mode:"inbound",configuration:x,status:"inactive"},onUpdate:T=>f(T.configuration)}):a==="rest"&&c==="sender"?s.jsx(iie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="rest"&&c==="receiver"?s.jsx(lie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="soap"&&c==="sender"?s.jsx(cie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D),businessComponentId:n?.id}):a==="soap"&&c==="receiver"?s.jsx(die,{configuration:x,onConfigurationChange:(T,D)=>V(T,D),businessComponentId:n?.id}):a==="odata"&&c==="sender"?s.jsx(hie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="odata"&&c==="receiver"?s.jsx(uie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="rfc"&&c==="sender"?s.jsx(pie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="rfc"&&c==="receiver"?s.jsx(mie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="mail"&&c==="sender"?s.jsx(gie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):a==="mail"&&c==="receiver"?s.jsx(fie,{configuration:x,onConfigurationChange:(T,D)=>V(T,D)}):s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(R.icon,{className:"h-5 w-5"}),R.name," Configuration"]}),s.jsx(Ne,{children:"Configure the connection parameters and authentication"})]}),s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.fields.filter(T=>!(T.conditionalField==="receiver"&&c==="sender"||T.conditionalField==="sender"&&c==="receiver"||T.parentField&&T.parentValue&&x[T.parentField]!==T.parentValue)).map(T=>s.jsx("div",{className:T.name==="url"||T.name==="webhookUrl"||T.name==="customHeaders"||T.type==="password"?"md:col-span-2":"",children:T.type==="jar-selector"?s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Woe,{selectedJarId:x[T.name]||"",onJarSelect:D=>V(T.name,D),label:"",placeholder:`Choose ${T.label}`,driverTypeFilter:T.driverTypeFilter||void 0})]}):T.type==="select"?s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(se,{value:x[T.name]||"",onValueChange:D=>V(T.name,D),children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:`Select ${T.label}`})}),s.jsx(te,{className:"bg-card border-border shadow-lg z-50",children:T.options?.map(D=>s.jsx(F,{value:D,children:D},D))})]})]}):T.type==="textarea"?s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Re,{id:T.name,placeholder:T.placeholder,value:x[T.name]||"",onChange:D=>V(T.name,D.target.value),className:"transition-all duration-300 focus:scale-[1.01]",rows:3})]}):T.type==="checkbox"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{id:T.name,type:"checkbox",checked:x[T.name]==="true"||x[T.name]===!0||x[T.name]==="on",onChange:D=>V(T.name,D.target.checked.toString()),className:"h-4 w-4 rounded border-border"}),s.jsx(C,{htmlFor:T.name,className:"text-sm font-normal",children:T.label})]}):T.type==="password"?s.jsx(xs,{name:T.name,label:T.label,placeholder:T.placeholder,required:T.required,value:x[T.name]||"",onValueChange:D=>V(T.name,D)}):s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(U,{id:T.name,type:T.type,placeholder:T.placeholder,value:x[T.name]||"",onChange:D=>V(T.name,D.target.value),className:"transition-all duration-300 focus:scale-[1.01]"})]})},T.name)),x.authType&&x.authType!=="None"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(pt,{className:"my-4"}),s.jsxs("h4",{className:"font-medium text-sm text-muted-foreground mb-4",children:[x.authType," Configuration"]})]}),I(x.authType).map(T=>s.jsx("div",{className:T.name.includes("Url")||T.name.includes("url")||T.type==="password"?"md:col-span-2":"",children:T.type==="select"?s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(se,{value:x[T.name]||"",onValueChange:D=>V(T.name,D),children:[s.jsx(ee,{className:"transition-all duration-300 hover:bg-accent/50",children:s.jsx(ne,{placeholder:`Select ${T.label}`})}),s.jsx(te,{className:"bg-card border-border shadow-lg z-50",children:T.options?.map(D=>s.jsx(F,{value:D,children:D},D))})]})]}):T.type==="password"?s.jsx(xs,{name:T.name,label:T.label,placeholder:T.placeholder,required:T.required,value:x[T.name]||"",onValueChange:D=>V(T.name,D)}):s.jsxs(s.Fragment,{children:[s.jsxs(C,{htmlFor:T.name,className:"flex items-center gap-1",children:[T.label,T.required&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(U,{id:T.name,type:T.type,placeholder:T.placeholder,value:x[T.name]||"",onChange:D=>V(T.name,D.target.value),className:"transition-all duration-300 focus:scale-[1.01]"})]})},T.name))]})]})})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.3s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Connection Testing"}),s.jsx(Ne,{children:"Test your adapter configuration"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsx(z,{onClick:O,disabled:!a||w,className:"w-full bg-accent hover:opacity-90 transition-all duration-300",variant:"outline",children:w?s.jsxs(s.Fragment,{children:[s.jsx(Mm,{className:"h-4 w-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Mm,{className:"h-4 w-4 mr-2"}),"Test Connection"]})}),a==="soap"&&s.jsxs(z,{onClick:()=>b(!0),className:"w-full bg-primary hover:opacity-90 transition-all duration-300",variant:"outline",children:[s.jsx(ek,{className:"h-4 w-4 mr-2"}),"Configure Field Mapping"]}),v!=="idle"&&s.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${v==="success"?"bg-success/10 text-success":"bg-destructive/10 text-destructive"}`,children:[v==="success"?s.jsx(rs,{className:"h-4 w-4"}):s.jsx(yt,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:v==="success"?"Connection Successful":"Connection Failed"})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Sie,{adapterType:R?.id||"",configuration:x,children:s.jsxs(z,{variant:"outline",className:"w-full",disabled:!R,children:[s.jsx(Mm,{className:"h-4 w-4 mr-2"}),"Validate Configuration"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>t("/communication-adapters"),className:"flex-1",children:"Cancel"}),s.jsxs(z,{onClick:k,className:"flex-1 bg-primary hover:opacity-90 transition-all duration-300",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),E?"Update":"Save"," Adapter"]})]})]})]})]}),s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.4s"},children:[s.jsx(oe,{children:s.jsx(ie,{children:"Configuration Summary"})}),s.jsx(re,{className:"space-y-3",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status:"}),s.jsx(fe,{variant:"secondary",children:"Draft"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{children:R?.name||"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Mode:"}),s.jsx("span",{children:c||"Not selected"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Category:"}),s.jsx("span",{children:R?.category||"N/A"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Connection:"}),s.jsx(fe,{variant:v==="success"?"default":v==="error"?"destructive":"secondary",children:v==="success"?"Verified":v==="error"?"Failed":"Not tested"})]})]})})]}),s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.5s"},children:[s.jsx(oe,{children:s.jsx(ie,{children:"Security Notes"})}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ln,{className:"h-4 w-4 mt-0.5 text-primary"}),s.jsx("span",{children:"Credentials are encrypted and stored securely"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ds,{className:"h-4 w-4 mt-0.5 text-primary"}),s.jsx("span",{children:"Test connections before using in production"})]}),s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(oi,{className:"h-4 w-4 mt-0.5 text-primary"}),s.jsx("span",{children:"Use environment-specific configurations"})]})]})})]})]})]})]})]})})},Cie=["FILE","FTP","HTTP","IDOC","JDBC","JMS","MAIL","ODATA","REST","RFC","SFTP","SOAP"],Eie=["SENDER","RECEIVER"];function Tie(){const e=as(),{toast:t}=_e(),{isDevelopment:n}=Pi(),[r,a]=h.useState([]),[o,i]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!0),[m,p]=h.useState(""),[g,x]=h.useState("all"),[f,w]=h.useState("all"),[y,v]=h.useState("all"),[j,N]=h.useState(!1),[b,E]=h.useState(null),[S,P]=h.useState(null);h.useEffect(()=>{A(),L()},[]),h.useEffect(()=>{R()},[r,m,g,f,y]);const A=async()=>{try{u(!0),console.log("Fetching adapters...");const $=await G.get("/adapters");console.log("Adapters response:",$),$.success&&$.data?a(Array.isArray($.data)?$.data:[]):(console.warn("No adapter data in response"),a([]))}catch($){console.error("Error fetching adapters:",$),t({title:"Error",description:"Failed to load communication adapters",variant:"destructive"}),a([])}finally{u(!1)}},L=async()=>{try{console.log("Fetching business components...");const $=await G.get("/business-components");console.log("Business components response:",$),$.success&&$.data?c(Array.isArray($.data)?$.data:[]):c([])}catch($){console.error("Error fetching business components:",$),c([])}},R=()=>{let $=[...r];m&&($=$.filter(B=>B.name.toLowerCase().includes(m.toLowerCase())||B.description?.toLowerCase().includes(m.toLowerCase()))),g!=="all"&&($=$.filter(B=>B.businessComponentId===g)),f!=="all"&&($=$.filter(B=>B.type===f)),y!=="all"&&($=$.filter(B=>B.mode===y)),i($)},I=()=>{A(),t({title:"Success",description:"Adapters refreshed"})},V=$=>{e("/create-communication-adapter",{state:{adapter:$,isEdit:!0,viewMode:!0}})},O=$=>{e("/create-communication-adapter",{state:{adapter:$,isEdit:!0}})},k=async $=>{try{const B=await qo.cloneAdapter($.id,`${$.name} (Copy)`);if(B.success)t({title:"Success",description:"Adapter cloned successfully"}),A();else throw new Error(B.error||"Failed to clone adapter")}catch(B){t({title:"Error",description:B instanceof Error?B.message:"Failed to clone adapter",variant:"destructive"})}},T=async()=>{if(b)try{const $=await qo.deleteAdapter(b.id);if($.success)t({title:"Success",description:"Adapter deleted successfully"}),a(r.filter(B=>B.id!==b.id)),N(!1),E(null);else throw new Error($.error||"Failed to delete adapter")}catch($){t({title:"Error",description:$ instanceof Error?$.message:"Failed to delete adapter",variant:"destructive"})}},D=async $=>{try{P($.id);const B=await qo.testAdapter($.id,"{}");if(B.success&&B.data)t({title:"Success",description:B.data.message||"Connection test successful"});else throw new Error(B.error||"Connection test failed")}catch(B){t({title:"Error",description:B instanceof Error?B.message:"Failed to test adapter connection",variant:"destructive"})}finally{P(null)}},M=async $=>{try{const B={...$,active:!$.active},W=await qo.updateAdapter($.id,B);if(W.success)t({title:"Success",description:`Adapter ${$.active?"deactivated":"activated"} successfully`}),A();else throw new Error(W.error||"Failed to update adapter")}catch(B){t({title:"Error",description:B instanceof Error?B.message:"Failed to update adapter status",variant:"destructive"})}},_=$=>s.jsx(fe,{className:$?"bg-green-500":"bg-gray-500",children:$?"Active":"Inactive"}),H=$=>{const B={SENDER:"bg-blue-500",RECEIVER:"bg-purple-500"},W={SENDER:"Sender (Inbound)",RECEIVER:"Receiver (Outbound)"};return s.jsx(fe,{variant:"outline",className:`${B[$]||""}`,children:W[$]||$})};return s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Communication Adapters"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage and monitor all communication adapters"})]}),n&&s.jsxs(z,{onClick:()=>e("/create-communication-adapter"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create Adapter"]})]}),s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(uc,{className:"h-5 w-5"}),"Filters"]})}),s.jsx(re,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(U,{placeholder:"Search by name...",value:m,onChange:$=>p($.target.value),className:"pl-10"})]}),s.jsxs(se,{value:g,onValueChange:x,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Business Components"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Business Components"}),l.map($=>s.jsx(F,{value:$.id,children:$.name},$.id))]})]}),s.jsxs(se,{value:f,onValueChange:w,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Types"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Types"}),Cie.map($=>s.jsx(F,{value:$,children:$},$))]})]}),s.jsxs(se,{value:y,onValueChange:v,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Modes"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Modes"}),Eie.map($=>s.jsx(F,{value:$,children:$},$))]})]})]})})]}),s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(I0,{className:"h-5 w-5"}),"Adapters (",o.length,")"]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:I,children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsx(re,{children:d?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading adapters..."})}):o.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"No adapters found"})}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Type"}),s.jsx(De,{children:"Mode"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Business Component"}),s.jsx(De,{children:"Created"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:o.map($=>s.jsxs(Zt,{children:[s.jsx(ke,{className:"font-medium",children:$.name}),s.jsx(ke,{children:s.jsx(fe,{variant:"outline",children:$.type})}),s.jsx(ke,{children:H($.mode)}),s.jsx(ke,{children:_($.active)}),s.jsx(ke,{children:l.find(B=>B.id===$.businessComponentId)?.name||"-"}),s.jsx(ke,{children:new Date($.createdAt).toLocaleDateString()}),s.jsx(ke,{children:s.jsxs(Xu,{children:[s.jsx(Yu,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(rk,{className:"h-4 w-4"})})}),s.jsxs(Nc,{align:"end",children:[s.jsx(yN,{children:"Actions"}),s.jsx(Mr,{}),s.jsx(Rt,{onClick:()=>V($),children:"View Details"}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(Rt,{onClick:()=>O($),children:[s.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(Rt,{onClick:()=>D($),disabled:S===$.id,children:[S===$.id?s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(Mm,{className:"h-4 w-4 mr-2"}),"Test Connection"]}),s.jsx(Rt,{onClick:()=>M($),children:$.active?s.jsxs(s.Fragment,{children:[s.jsx(QB,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(uk,{className:"h-4 w-4 mr-2"}),"Activate"]})}),s.jsxs(Rt,{onClick:()=>k($),children:[s.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Clone"]}),s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>{E($),N(!0)},className:"text-red-600",children:[s.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},$.id))})]})})})]}),s.jsx(ft,{open:j,onOpenChange:N,children:s.jsxs(mt,{children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Delete Adapter"}),s.jsxs(ks,{children:['Are you sure you want to delete "',b?.name,'"? This action cannot be undone.']})]}),s.jsxs(Wn,{children:[s.jsx(z,{variant:"outline",onClick:()=>{N(!1),E(null)},children:"Cancel"}),s.jsx(z,{variant:"destructive",onClick:T,children:"Delete"})]})]})})]})}const Ig=({selectedBusinessComponent:e,setSelectedBusinessComponent:t,disabled:n=!1})=>{const[r,a]=h.useState([]),[o,i]=h.useState(!0);h.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const c=await Rr.getAllBusinessComponents();if(c.success&&c.data){const d=Array.isArray(c.data)?c.data:[];a(d)}}catch(c){console.error("Error loading business components:",c),a([])}finally{i(!1)}};return s.jsxs(K,{className:"animate-scale-in",children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"h-5 w-5"}),"Business Component Selection"]}),s.jsx(Ne,{children:"Select the business component this data structure belongs to"})]}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component *"}),s.jsxs(se,{value:e?.id||"",onValueChange:c=>{const d=r.find(u=>u.id===c)||null;t(d)},disabled:o||n,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsx(te,{children:r.length===0?s.jsx("div",{className:"p-2 text-sm text-muted-foreground text-center",children:"No business components available"}):r.map(c=>s.jsx(F,{value:c.id,children:c.name},c.id))})]})]})})]})},Pie=()=>{const[e,t]=h.useState([]),[n,r]=h.useState(!0),[a,o]=h.useState(null);return h.useEffect(()=>{(async()=>{try{r(!0);const l=await G.get("/business-components");l.success&&l.data?t(l.data):o("Failed to load business components")}catch(l){o("Failed to load business components"),console.error("Error fetching business components:",l)}finally{r(!1)}})()},[]),{businessComponents:e,loading:n,error:a}},Aie=({open:e,onOpenChange:t,onImportComplete:n})=>{const{toast:r}=_e(),{businessComponents:a}=Pie(),[o,i]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState("upload"),[m,p]=h.useState([]),[g,x]=h.useState(null),[f,w]=h.useState({current:0,total:0,message:""});Nt.useEffect(()=>{e&&(b(),a.length>0&&!g&&x(a[0]))},[e,a]);const y=async A=>{const L=A.target.files;if(!L||L.length===0)return;const R=[];for(let I=0;I<L.length;I++){const V=L[I];if(!V.name.endsWith(".xsd")){r({title:"Invalid File",description:`${V.name} is not an XSD file.`,variant:"destructive"});continue}const O=V.name.replace(/\.xsd$/i,"");R.push({file:V,name:O,status:"pending"})}R.length>0&&(i(R),u("validate"),await v(R))},v=async A=>{c(!0);try{console.log(`Starting validation of ${A.length} files`),w({current:0,total:A.length,message:`Analyzing dependencies for all ${A.length} files...`});const L=new FormData;A.forEach(k=>{L.append("files",k.file)});let R=[];try{const k=await G.post("/message-structures/validate-xsd",L);k.success&&k.data&&(R=k.data,console.log("Successfully validated all files in one request"))}catch{console.log("Failed to validate all files at once, will try in smaller chunks");const T=new Map,D=new Map;for(const $ of A)try{const B=await $.file.text();T.set($.file.name,B);const W=[],q=B.matchAll(/schemaLocation="([^"]+\.xsd)"/g);for(const Y of q)W.push(Y[1]);D.set($.file.name,W)}catch(B){console.error(`Failed to read file ${$.file.name}:`,B)}const M=[...A].sort(($,B)=>{const W=D.get($.file.name)?.length||0,q=D.get(B.file.name)?.length||0;return W-q});console.log("Files sorted by dependency count:",M.map($=>`${$.file.name} (${D.get($.file.name)?.length||0} deps)`));const _=5,H=[];for(let $=0;$<M.length;$+=_)H.push(M.slice($,$+_));for(let $=0;$<H.length;$++){const B=H[$];console.log(`Processing chunk ${$+1}/${H.length} with ${B.length} files`),w({current:$*_,total:M.length,message:`Validating files ${$*_+1} to ${Math.min(($+1)*_,M.length)}...`});const W=new FormData;B.forEach(q=>{W.append("files",q.file)});try{const q=await G.post("/message-structures/validate-xsd",W);q.success&&q.data&&R.push(...q.data)}catch(q){console.error(`Error validating chunk ${$+1}:`,q),B.forEach(Y=>{R.push({fileName:Y.file.name,valid:!1,errors:["Failed to validate in chunk"]})})}}}const I=new Set(A.map(k=>k.file.name)),V=A.map(k=>{const T=R.find(D=>D.fileName===k.file.name);if(T){if(T.missingDependencies&&T.missingDependencies.length>0){const D=T.missingDependencies.filter(M=>{const _=M.substring(M.lastIndexOf("/")+1);return!I.has(_)});return D.length===0?{...k,status:"valid",dependencies:T.dependencies,resolvedDependencies:T.dependencies,missingDependencies:[]}:{...k,status:"invalid",errors:T.errors,dependencies:T.dependencies,resolvedDependencies:T.resolvedDependencies,missingDependencies:D}}return{...k,status:T.valid?"valid":"invalid",errors:T.errors,dependencies:T.dependencies,resolvedDependencies:T.resolvedDependencies,missingDependencies:T.missingDependencies}}return{...k,status:"error",errors:["File was not processed"]}});i(V);const O=V.filter(k=>k.status==="valid").length;O>0&&r({title:"Validation Complete",description:`${O} of ${A.length} files are valid and ready to import`})}catch(L){console.error("Validation error:",L),r({title:"Validation Failed",description:"Failed to validate XSD files",variant:"destructive"});const R=A.map(I=>({...I,status:"error"}));i(R)}finally{c(!1)}},j=async()=>{const A=o.filter(R=>R.status==="valid");if(A.length===0)return;if(!g){r({title:"Business Component Required",description:"Please select a business component",variant:"destructive"});return}c(!0),u("import");let L=[];try{const I=[];for(let k=0;k<A.length;k+=5)I.push(A.slice(k,k+5));console.log(`Importing ${A.length} files in ${I.length} chunks`);const V=N(A);console.log("Sorted files by dependencies:",V.map(k=>k.name));for(let k=0;k<V.length;k+=5)I.push(V.slice(k,k+5));for(let k=0;k<I.length;k++){const T=I[k];console.log(`Importing chunk ${k+1}/${I.length} with ${T.length} files`),w({current:k*5,total:V.length,message:`Importing files ${k*5+1} to ${Math.min((k+1)*5,V.length)}...`});const D=new FormData;T.forEach(M=>{D.append("files",M.file)}),D.append("businessComponentId",g.id);try{const M=await G.post("/message-structures/import-xsd",D);M.success&&M.data&&(L=[...L,...M.data])}catch(M){console.error(`Error importing chunk ${k+1}:`,M),T.forEach(_=>{L.push({fileName:_.file.name,structureName:_.name,success:!1,message:"Failed to import in chunk"})})}}p(L),u("complete");const O=L.filter(k=>k.success).length;O>0?(r({title:"Import Successful",description:`Successfully imported ${O} of ${A.length} message structure(s)`}),n&&n()):r({title:"Import Failed",description:"No files were successfully imported",variant:"destructive"})}catch(R){r({title:"Import Failed",description:R.message||"Failed to import XSD files",variant:"destructive"}),u("validate")}finally{c(!1)}},N=A=>{const L=new Map;A.forEach(V=>L.set(V.file.name,V));const R=[],I=[];return A.forEach(V=>{!V.dependencies||V.dependencies.length===0?R.push(V):I.push(V)}),I.sort((V,O)=>(V.dependencies?.length||0)-(O.dependencies?.length||0)),[...R,...I]},b=()=>{i([]),p([]),u("upload"),w({current:0,total:0,message:""})},E=A=>{switch(A){case"valid":return s.jsx(rs,{className:"h-4 w-4 text-success"});case"invalid":case"error":return s.jsx(en,{className:"h-4 w-4 text-destructive"});case"imported":return s.jsx(rs,{className:"h-4 w-4 text-success"});case"validating":return s.jsx(vt,{className:"h-4 w-4 animate-spin"});default:return s.jsx($B,{className:"h-4 w-4 text-muted-foreground"})}},S=o.some(A=>A.status==="valid"),P=o.some(A=>A.status==="invalid"||A.status==="error");return s.jsx(ft,{open:e,onOpenChange:A=>{A||b(),t(A)},children:s.jsxs(mt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Import XSD Message Structures"}),s.jsx(ks,{children:"Import one or more XSD files to create message structures. Dependencies between XSD files will be automatically resolved."})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Ig,{selectedBusinessComponent:g,setSelectedBusinessComponent:x}),d==="upload"&&s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[s.jsx("input",{type:"file",accept:".xsd",multiple:!0,onChange:y,className:"hidden",id:"xsd-import-file",disabled:!g}),s.jsxs("label",{htmlFor:"xsd-import-file",className:`cursor-pointer flex flex-col items-center gap-3 ${g?"":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(ok,{className:"h-12 w-12 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:g?"Click to select XSD files":"Please select a business component first"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g&&"You can select multiple files at once"})]})]})]}),(d==="validate"||d==="import")&&s.jsx(s.Fragment,{children:l&&d==="validate"?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[s.jsx(vt,{className:"h-8 w-8 animate-spin"}),s.jsxs("span",{className:"text-center",children:[s.jsx("div",{children:"Validating XSD files..."}),f.total>0&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[f.message,s.jsxs("div",{className:"mt-1",children:["Progress: ",f.current," / ",f.total," files"]})]})]})]}):l&&d==="import"?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[s.jsx(vt,{className:"h-8 w-8 animate-spin"}),s.jsxs("span",{className:"text-center",children:[s.jsx("div",{children:"Importing message structures..."}),f.total>0&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:[f.message,s.jsxs("div",{className:"mt-1",children:["Progress: ",f.current," / ",f.total," files"]})]})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Selected Files"}),o.map((A,L)=>s.jsxs("div",{className:"rounded-lg border p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[E(A.status),s.jsx("span",{className:"font-medium",children:A.file.name})]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[(A.file.size/1024).toFixed(2)," KB"]})]}),A.errors&&A.errors.length>0&&s.jsxs(We,{variant:"destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:"Validation Errors"}),s.jsx(ze,{children:s.jsx("ul",{className:"list-disc list-inside",children:A.errors.map((R,I)=>s.jsx("li",{children:R},I))})})]}),A.dependencies&&A.dependencies.length>0&&s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"Dependencies:"}),s.jsx("ul",{className:"list-disc list-inside ml-2",children:A.dependencies.map((R,I)=>s.jsx("li",{className:A.missingDependencies?.includes(R)?"text-destructive":"text-success",children:R},I))})]}),A.missingDependencies&&A.missingDependencies.length>0&&s.jsxs(We,{variant:"destructive",children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsxs(ze,{children:["Missing dependencies: ",A.missingDependencies.join(", ")]})]})]},L)),P&&s.jsxs(We,{variant:"destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:"Validation Issues"}),s.jsx(ze,{children:"Some files have validation errors or missing dependencies. Only valid files will be imported."})]})]})}),d==="complete"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs(We,{children:[s.jsx(rs,{className:"h-4 w-4 text-success"}),s.jsx($r,{children:"Import Complete"}),s.jsx(ze,{children:"The XSD import process has completed. See the results below."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Import Results"}),m.map((A,L)=>s.jsxs("div",{className:"rounded-lg border p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[A.success?s.jsx(rs,{className:"h-4 w-4 text-success"}):s.jsx(en,{className:"h-4 w-4 text-destructive"}),s.jsx("span",{className:"font-medium",children:A.fileName})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:A.success?s.jsxs("span",{children:["Created: ",A.structureName]}):s.jsx("span",{className:"text-destructive",children:A.message})})]},L))]})]})]}),s.jsxs(Wn,{children:[d==="upload"&&s.jsx(z,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),d==="validate"&&s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"outline",onClick:b,children:"Back"}),s.jsxs(z,{onClick:j,disabled:!S||l,children:[s.jsx(Ca,{className:"mr-2 h-4 w-4"}),"Import Valid Files (",o.filter(A=>A.status==="valid").length,")"]})]}),d==="complete"&&s.jsxs(s.Fragment,{children:[s.jsx(z,{variant:"outline",onClick:b,children:"Import More"}),s.jsx(z,{onClick:()=>t(!1),children:"Close"})]})]})]})})},Die=()=>{const e=as(),{toast:t}=_e(),{isDevelopment:n}=Pi(),[r,a]=h.useState([]),[o,i]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!0),[m,p]=h.useState(""),[g,x]=h.useState("all"),[f,w]=h.useState(!1),[y,v]=h.useState(null),[j,N]=h.useState(!1),[b,E]=h.useState("internal"),S=h.useRef(null),[P,A]=h.useState(!1),[L,R]=h.useState([]),[I,V]=h.useState("");h.useEffect(()=>{O(),k()},[]),h.useEffect(()=>{T()},[r,m,g,b]),h.useEffect(()=>{f&&S.current&&setTimeout(()=>{S.current?.focus()},50)},[f]);const O=async()=>{try{u(!0);const q=await G.get("/message-structures?size=100&sort=name,asc");if(q.success&&q.data){const Y=q.data.content||q.data||[];a(Array.isArray(Y)?Y:[])}else a([])}catch(q){console.error("Error fetching message structures:",q),t({title:"Error",description:"Failed to fetch message structures",variant:"destructive"}),a([])}finally{u(!1)}},k=async()=>{try{const q=await G.get("/business-components");q.success&&q.data&&c(Array.isArray(q.data)?q.data:[])}catch(q){console.error("Error fetching business components:",q),c([])}},T=()=>{let q=[...r];b==="internal"?q=q.filter(Y=>Y.sourceType==="INTERNAL"||!Y.sourceType):b==="external"&&(q=q.filter(Y=>Y.sourceType==="EXTERNAL")),m&&(q=q.filter(Y=>Y.name.toLowerCase().includes(m.toLowerCase())||Y.description?.toLowerCase().includes(m.toLowerCase())||Array.isArray(Y.tags)&&Y.tags.some(pe=>pe.toLowerCase().includes(m.toLowerCase())))),g!=="all"&&(q=q.filter(Y=>Y.businessComponent?.id===g)),i(q)},D=()=>{O(),t({title:"Success",description:"Message structures refreshed"})},M=q=>{e(`/message-structures/${q}`)},_=q=>{e(`/message-structures/${q.id}/edit`)},H=q=>{const Y=new Blob([q.xsdContent],{type:"text/xml"}),pe=window.URL.createObjectURL(Y),J=document.createElement("a");J.href=pe,J.download=`${q.name}.xsd`,document.body.appendChild(J),J.click(),window.URL.revokeObjectURL(pe),document.body.removeChild(J),t({title:"Success",description:`Exported ${q.name}.xsd`})},$=q=>{v(q),w(!0)},B=async()=>{if(y)try{(await G.delete(`/message-structures/${y.id}`)).success?(t({title:"Success",description:"Message structure deleted successfully"}),O()):t({title:"Error",description:"Failed to delete message structure",variant:"destructive"})}catch(q){if(console.error("Error deleting structure:",q),q.message?.includes("foreign key constraint fails")||q.message?.includes("CONSTRAINT")||q.message?.includes("flow_structure_messages")){q.message,V("This message structure cannot be deleted because it is being used by one or more flow structures. Please check all flow structures and remove references to this message structure before deleting."),A(!0);try{const Y=await G.get(`/flow-structures/by-message-structure/${y.id}`);if(Y.success&&Y.data&&Y.data.length>0){const pe=Y.data.map(J=>({...J,messageTypes:J.metadata?.messageTypes||[]}));R(pe)}}catch(Y){console.error("Error fetching flow structures using this message structure:",Y)}}else t({title:"Error",description:q.message||"Failed to delete message structure",variant:"destructive"})}finally{w(!1),v(null)}},W=q=>q?.isDraft===!0?s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Draft"}):s.jsx(fe,{variant:"default",className:"text-xs bg-green-500",children:"Active"});return s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(Sa,{className:"h-5 w-5"}),"Message Structures"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",size:"sm",onClick:D,children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(z,{variant:"outline",onClick:()=>N(!0),children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Import XSD"]}),s.jsxs(z,{onClick:()=>e("/create-message-structure"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create Message Structure"]})]})]})]})}),s.jsx(re,{className:"space-y-4",children:s.jsxs(et,{value:b,onValueChange:E,className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"internal",children:"Internal Structures"}),s.jsx(xe,{value:"external",children:"External Structures"})]}),s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search by name or tags...",value:m,onChange:q=>p(q.target.value),className:"pl-10"})]}),s.jsxs(se,{value:g,onValueChange:x,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Business Components"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Business Components"}),l.map(q=>s.jsx(F,{value:q.id,children:q.name},q.id))]})]})]}),d?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading message structures..."})}):o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ds,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No message structures found"}),n&&s.jsxs(z,{variant:"outline",className:"mt-4",onClick:()=>e("/create-message-structure"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create your first message structure"]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Description"}),s.jsx(De,{children:"Type"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Business Component"}),s.jsx(De,{children:"Version"}),s.jsx(De,{children:"Tags"}),s.jsx(De,{children:"Updated"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:o.map(q=>s.jsxs(Zt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>M(q.id),children:[s.jsx(ke,{className:"font-medium",children:q.name}),s.jsx(ke,{className:"max-w-xs truncate",children:q.description||"-"}),s.jsx(ke,{children:s.jsx(fe,{variant:q.sourceType==="EXTERNAL"?"outline":"default",className:"text-xs",children:q.sourceType==="EXTERNAL"?"External":"Internal"})}),s.jsx(ke,{children:W(q.metadata)}),s.jsx(ke,{children:q.businessComponent?.name||"-"}),s.jsxs(ke,{children:["v",q.version]}),s.jsx(ke,{children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(q.tags)&&q.tags.map((Y,pe)=>s.jsx(fe,{variant:"secondary",className:"text-xs",children:Y},pe))})}),s.jsx(ke,{children:new Date(q.updatedAt).toLocaleDateString()}),s.jsx(ke,{onClick:Y=>Y.stopPropagation(),children:s.jsxs(Xu,{children:[s.jsx(Yu,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(ak,{className:"h-4 w-4"})})}),s.jsxs(Nc,{align:"end",children:[s.jsx(Rt,{onClick:()=>M(q.id),children:"View Details"}),n&&s.jsxs(s.Fragment,{children:[q.sourceType==="INTERNAL"&&s.jsxs(Rt,{onClick:()=>H(q),children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export XSD"]}),q.isEditable!==!1&&s.jsxs(Rt,{onClick:()=>_(q),children:[s.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>$(q),className:"text-destructive",children:[s.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},q.id))})]})})]})]})})]}),s.jsx(th,{open:f,onOpenChange:w,children:s.jsxs(Cc,{onOpenAutoFocus:q=>{q.preventDefault();const Y=q.currentTarget.querySelector("[data-delete-button]");Y instanceof HTMLElement&&Y.focus()},children:[s.jsxs(Ec,{children:[s.jsx(Pc,{children:"Delete Message Structure"}),s.jsxs(Ac,{children:['Are you sure you want to delete "',y?.name,'"? This action cannot be undone.']})]}),s.jsxs(Tc,{children:[s.jsx(sh,{children:"Cancel"}),s.jsx(Dc,{onClick:B,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-delete-button":!0,children:"Delete"})]})]})}),s.jsx(Aie,{open:j,onOpenChange:N,onImportComplete:()=>{N(!1),O()}}),s.jsx(ft,{open:P,onOpenChange:A,children:s.jsxs(mt,{className:"max-w-2xl",children:[s.jsxs(gt,{children:[s.jsxs(xt,{className:"flex items-center gap-2",children:[s.jsx(Ps,{className:"h-5 w-5 text-yellow-500"}),"Cannot Delete Message Structure"]}),s.jsx(ks,{children:"This message structure is currently being used and cannot be deleted."})]}),s.jsx("div",{className:"space-y-4",children:L.length>0?s.jsxs(s.Fragment,{children:[s.jsxs(We,{children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx(ze,{children:"This message structure is being used by the following flow structures. You must remove it from these flows before it can be deleted."})]}),s.jsx("div",{className:"border rounded-md",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Flow Structure Name"}),s.jsx(De,{children:"Processing Mode"}),s.jsx(De,{children:"Message Type"}),s.jsx(De,{className:"text-right",children:"Action"})]})}),s.jsx(xr,{children:L.map(q=>s.jsxs(Zt,{children:[s.jsx(ke,{className:"font-medium",children:q.name}),s.jsx(ke,{children:s.jsx(fe,{variant:"outline",children:q.processingMode})}),s.jsx(ke,{children:q.messageTypes?.join(", ")||"Unknown"}),s.jsx(ke,{className:"text-right",children:s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>{e(`/flow-structures/${q.id}/edit`),A(!1)},children:[s.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Edit Flow"]})})]},q.id))})]})})]}):s.jsxs(We,{children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx(ze,{children:I||"This message structure cannot be deleted because it is being used by one or more flow structures. Please remove this message structure from all flow structures before deleting."})]})}),s.jsx(Wn,{children:s.jsx(z,{variant:"outline",onClick:()=>{A(!1),R([]),V("")},children:"Close"})})]})})]})};var vb="Radio",[kie,A$]=ln(vb),[Mie,Rie]=kie(vb),D$=h.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...u}=e,[m,p]=h.useState(null),g=Xe(t,w=>p(w)),x=h.useRef(!1),f=m?d||!!m.closest("form"):!0;return s.jsxs(Mie,{scope:n,checked:a,disabled:i,children:[s.jsx(Fe.button,{type:"button",role:"radio","aria-checked":a,"data-state":R$(a),"data-disabled":i?"":void 0,disabled:i,value:l,...u,ref:g,onClick:Ee(e.onClick,w=>{a||c?.(),f&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),f&&s.jsx(Fie,{control:m,bubbles:!x.current,name:r,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});D$.displayName=vb;var k$="RadioIndicator",M$=h.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,o=Rie(k$,n);return s.jsx(ps,{present:r||o.checked,children:s.jsx(Fe.span,{"data-state":R$(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});M$.displayName=k$;var Fie=e=>{const{control:t,checked:n,bubbles:r=!0,...a}=e,o=h.useRef(null),i=cg(n),l=Uf(t);return h.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[i,n,r]),s.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function R$(e){return e?"checked":"unchecked"}var Oie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],yb="RadioGroup",[Iie,oye]=ln(yb,[wc,A$]),F$=wc(),O$=A$(),[Lie,$ie]=Iie(yb),I$=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...p}=e,g=F$(n),x=jc(d),[f,w]=qn({prop:o,defaultProp:a,onChange:m});return s.jsx(Lie,{scope:n,name:r,required:i,disabled:l,value:f,onValueChange:w,children:s.jsx(rN,{asChild:!0,...g,orientation:c,dir:x,loop:u,children:s.jsx(Fe.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:x,...p,ref:t})})})});I$.displayName=yb;var L$="RadioGroupItem",$$=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,o=$ie(L$,n),i=o.disabled||r,l=F$(n),c=O$(n),d=h.useRef(null),u=Xe(t,d),m=o.value===a.value,p=h.useRef(!1);return h.useEffect(()=>{const g=f=>{Oie.includes(f.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),s.jsx(aN,{asChild:!0,...l,focusable:!i,active:m,children:s.jsx(D$,{disabled:i,required:o.required,checked:m,...c,...a,name:o.name,ref:u,onCheck:()=>o.onValueChange(a.value),onKeyDown:Ee(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Ee(a.onFocus,()=>{p.current&&d.current?.click()})})})});$$.displayName=L$;var _ie="RadioGroupIndicator",_$=h.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=O$(n);return s.jsx(M$,{...a,...r,ref:t})});_$.displayName=_ie;var V$=I$,U$=$$,Vie=_$;const ec=h.forwardRef(({className:e,...t},n)=>s.jsx(V$,{className:ce("grid gap-2",e),...t,ref:n}));ec.displayName=V$.displayName;const ir=h.forwardRef(({className:e,...t},n)=>s.jsx(U$,{ref:n,className:ce("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Vie,{className:"flex items-center justify-center",children:s.jsx(al,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ir.displayName=U$.displayName;const pv=(e,t)=>{let n=e.querySelector(`message[name="${t}"]`);if(!n){const r=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message");for(let a=0;a<r.length;a++)if(r[a].getAttribute("name")===t){n=r[a];break}}return n},fv=(e,t)=>{const n=[];let r=e.querySelectorAll("part");return r.length===0&&(r=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part")),Array.from(r).forEach(a=>{const o=a.getAttribute("name")||"part",i=a.getAttribute("element"),l=a.getAttribute("type"),c={name:o,type:"object",required:!0,description:"",isComplexType:!0,children:[]};if(i){const d=i.split(":").pop()||"";c.description=`element: ${d}`;const u=Uie(t,d);if(u){const m=u.getAttribute("type");if(m){const p=m.split(":").pop()||"";c.description+=` (${p})`;const g=Xj(t,p);g?c.children=Cd(g,t):(c.type=Yj(p),c.isComplexType=!1,c.children=void 0)}else{const p=u.querySelector("complexType")||u.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType")[0];p&&(c.children=Cd(p,t))}}}else if(l){const d=l.split(":").pop()||"";c.description=`type: ${d}`;const u=Xj(t,d);u?c.children=Cd(u,t):(c.type=Yj(d),c.isComplexType=!1,c.children=void 0)}n.push(c)}),n},Uie=(e,t)=>{const n=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","types")[0];if(!n)return null;const r=n.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(let a=0;a<r.length;a++){const o=r[a].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");for(let i=0;i<o.length;i++)if(o[i].getAttribute("name")===t)return o[i]}return null},Xj=(e,t)=>{const n=e.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","types")[0];if(!n)return null;const r=n.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(let a=0;a<r.length;a++){const o=r[a].getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType");for(let i=0;i<o.length;i++)if(o[i].getAttribute("name")===t)return o[i]}return null},Cd=(e,t)=>{const n=[],r=e.querySelector("sequence")||e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","sequence")[0],a=e.querySelector("all")||e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","all")[0],o=e.querySelector("choice")||e.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","choice")[0],i=r||a||o;if(i){const l=i.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");Array.from(l).forEach(c=>{const d=c.getAttribute("name")||"element",u=c.getAttribute("type"),m=c.getAttribute("minOccurs"),p={name:d,type:"string",required:m!=="0",description:""};if(u){const g=u.split(":").pop()||"";p.type=Yj(g),p.description=g;const x=Xj(t,g);x&&(p.type="object",p.isComplexType=!0,p.children=Cd(x,t))}else{const g=c.querySelector("complexType")||c.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","complexType")[0];g&&(p.type="object",p.isComplexType=!0,p.children=Cd(g,t))}n.push(p)})}return n},Yj=e=>({string:"string",int:"number",integer:"number",long:"number",short:"number",decimal:"number",float:"number",double:"number",boolean:"boolean",dateTime:"datetime",date:"date",time:"time",base64Binary:"string",hexBinary:"string",anyURI:"string",QName:"string",NOTATION:"string"})[e]||"string",Kj=e=>{console.log("[wsdlParser] Starting to parse WSDL structure");try{const n=new DOMParser().parseFromString(e,"text/xml"),r=n.querySelector("parsererror");if(r)return console.error("[wsdlParser] WSDL parsing error:",r),[];const a=[];let o=n.querySelector("service");o||(o=n.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","service")[0]);const i=o?.getAttribute("name")||"Service";console.log("[wsdlParser] Service name:",i);const l={name:i,type:"object",required:!0,description:"WSDL Service",isComplexType:!0,children:[]};let c=n.querySelectorAll("portType");c.length===0&&(c=n.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","portType")),console.log("[wsdlParser] Found port types:",c.length),Array.from(c).forEach(p=>{const g=p.getAttribute("name")||"PortType",x={name:g,type:"object",required:!0,description:"Port Type",isComplexType:!0,children:[]};let f=p.querySelectorAll("operation");f.length===0&&(f=p.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","operation")),console.log("[wsdlParser] Port type",g,"has operations:",f.length),Array.from(f).forEach(w=>{const v={name:w.getAttribute("name")||"Operation",type:"object",required:!0,description:"Operation",isComplexType:!0,children:[]};let j=w.querySelector("input");if(j||(j=w.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","input")[0]),j){const E=j.getAttribute("message"),S=E?.split(":").pop()||"Input",P={name:"input",type:"object",required:!0,description:S,isComplexType:!0,children:[]};if(E){const A=pv(n,S);if(A){const L=fv(A,n);P.children=L}}v.children?.push(P)}let N=w.querySelector("output");if(N||(N=w.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","output")[0]),N){const E=N.getAttribute("message"),S=E?.split(":").pop()||"Output",P={name:"output",type:"object",required:!0,description:S,isComplexType:!0,children:[]};if(E){const A=pv(n,S);if(A){const L=fv(A,n);P.children=L}}v.children?.push(P)}let b=w.querySelectorAll("fault");b.length===0&&(b=w.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","fault")),Array.from(b).forEach(E=>{const S=E.getAttribute("name")||"fault",P=E.getAttribute("message"),A=P?.split(":").pop()||"Fault",L={name:S,type:"object",required:!1,description:A,isComplexType:!0,children:[]};if(P){const R=pv(n,A);if(R){const I=fv(R,n);L.children=I}}v.children?.push(L)}),x.children?.push(v)}),l.children?.push(x)});let d=n.querySelectorAll("binding");d.length===0&&(d=n.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","binding")),console.log("[wsdlParser] Found bindings:",d.length),Array.from(d).forEach(p=>{const g=p.getAttribute("name")||"Binding",x=p.getAttribute("type")?.split(":").pop()||"",f={name:g,type:"object",required:!0,description:`Binding for ${x}`,isComplexType:!0,children:[]};l.children?.push(f)});let u=n.querySelectorAll("message");u.length===0&&(u=n.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message")),console.log("[wsdlParser] Found messages:",u.length);const m={name:"Messages",type:"object",required:!0,description:"WSDL Messages",isComplexType:!0,children:[]};return Array.from(u).forEach(p=>{const x={name:p.getAttribute("name")||"Message",type:"object",required:!0,description:"Message",isComplexType:!0,children:[]};let f=p.querySelectorAll("part");f.length===0&&(f=p.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part")),Array.from(f).forEach(w=>{const y=w.getAttribute("name")||"part",v=w.getAttribute("element")?.split(":").pop()||w.getAttribute("type")?.split(":").pop()||"any";x.children?.push({name:y,type:"string",required:!0,description:v})}),m.children?.push(x)}),m.children&&m.children.length>0&&l.children?.push(m),a.push(l),console.log("[wsdlParser] Final parsed fields:",a),a}catch(t){return console.error("[wsdlParser] Error parsing WSDL:",t),[]}},Bie=({open:e,onOpenChange:t,businessComponents:n,onImportSuccess:r})=>{const a=as(),{toast:o}=_e(),[i,l]=h.useState(null),[c,d]=h.useState(null),[u,m]=h.useState(""),[p,g]=h.useState(!1),[x,f]=h.useState("SOURCE"),[w,y]=h.useState(""),[v,j]=h.useState([]),[N,b]=h.useState(!0),E=h.useCallback(V=>{const O=V.target.files?.[0];if(O){if(!O.name.endsWith(".wsdl")&&!O.name.endsWith(".xml")){m("Please select a WSDL file (.wsdl or .xml)");return}l(O),m(""),d(null),S(O)}},[]),S=async V=>{console.log("[WsdlImportDialog] Starting to parse file:",V.name),g(!0),m("");try{const O=await V.text();console.log("[WsdlImportDialog] File content length:",O.length),console.log("[WsdlImportDialog] First 500 chars:",O.substring(0,500));const T=new DOMParser().parseFromString(O,"text/xml"),D=T.querySelector("parsererror");if(D)throw console.error("[WsdlImportDialog] Parser error:",D.textContent),new Error("Invalid WSDL file: Unable to parse XML");let M=T.querySelector("definitions");if(M||(M=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","definitions")[0]),!M)throw console.error("[WsdlImportDialog] No definitions element found"),new Error("Invalid WSDL file: Missing definitions element");console.log("[WsdlImportDialog] Found definitions element"),console.log("[WsdlImportDialog] Parsing WSDL structure...");const _=Kj(O);console.log("[WsdlImportDialog] Parsed structure:",_);const H=M.getAttribute("targetNamespace")||"";console.log("[WsdlImportDialog] Target namespace:",H);let $=T.querySelector("service");$||($=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","service")[0]);const B=$?.getAttribute("name")||V.name.replace(".wsdl","");console.log("[WsdlImportDialog] Service name:",B),console.log("[WsdlImportDialog] Looking for port types and operations...");let W=T.querySelectorAll("portType");W.length===0&&(W=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","portType")),console.log("[WsdlImportDialog] Found port types:",W.length);const q={};for(let he=0;he<W.length;he++){const le=W[he],me=le.getAttribute("name")||"";if(console.log("[WsdlImportDialog] Processing port type:",me),me.toLowerCase().includes("http")){console.log("[WsdlImportDialog] Skipping HTTP port type");continue}let Z=le.querySelectorAll("operation");if(Z.length===0&&(Z=le.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","operation")),console.log("[WsdlImportDialog] Found operations:",Z.length),Z.length>0){const ae=Z[0],we=ae.getAttribute("name");console.log("[WsdlImportDialog] Processing operation:",we);let Ve=ae.querySelector("input");if(Ve||(Ve=ae.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","input")[0]),Ve){const $e=Ve.getAttribute("message");if(console.log("[WsdlImportDialog] Input message ref:",$e),$e){const Ge=$e.split(":").pop();let Oe=T.querySelector(`message[name="${Ge}"]`);if(!Oe){const at=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message");for(let st=0;st<at.length;st++)if(at[st].getAttribute("name")===Ge){Oe=at[st];break}}if(Oe){console.log("[WsdlImportDialog] Found input message element:",Ge);const at=Oe.querySelector("part")||Oe.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part")[0];q.input={name:Ge,element:at?.getAttribute("element")||"",type:at?.getAttribute("type")||""},console.log("[WsdlImportDialog] Input message details:",q.input)}}}let Ue=ae.querySelector("output");if(Ue||(Ue=ae.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","output")[0]),Ue){const $e=Ue.getAttribute("message");if(console.log("[WsdlImportDialog] Output message ref:",$e),$e){const Ge=$e.split(":").pop();let Oe=T.querySelector(`message[name="${Ge}"]`);if(!Oe){const at=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message");for(let st=0;st<at.length;st++)if(at[st].getAttribute("name")===Ge){Oe=at[st];break}}if(Oe){console.log("[WsdlImportDialog] Found output message element:",Ge);const at=Oe.querySelector("part")||Oe.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part")[0];q.output={name:Ge,element:at?.getAttribute("element")||"",type:at?.getAttribute("type")||""},console.log("[WsdlImportDialog] Output message details:",q.output)}}}let ct=ae.querySelector("fault");if(ct||(ct=ae.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","fault")[0]),ct){const $e=ct.getAttribute("message");if(console.log("[WsdlImportDialog] Fault message ref:",$e),$e){const Ge=$e.split(":").pop();let Oe=T.querySelector(`message[name="${Ge}"]`);if(!Oe){const at=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","message");for(let st=0;st<at.length;st++)if(at[st].getAttribute("name")===Ge){Oe=at[st];break}}if(Oe){console.log("[WsdlImportDialog] Found fault message element:",Ge);const at=Oe.querySelector("part")||Oe.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","part")[0];q.fault={name:Ge,element:at?.getAttribute("element")||"",type:at?.getAttribute("type")||""},console.log("[WsdlImportDialog] Fault message details:",q.fault)}}}if(Object.keys(q).length>0)break}}let Y="";console.log("[WsdlImportDialog] Looking for SOAP address...");let pe=T.querySelector("service port address");if(!pe){const he=$?.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","port")||[];for(let le=0;le<he.length;le++){const me=he[le].getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/soap/","address");if(me.length>0){pe=me[0];break}}}pe?(Y=pe.getAttribute("location")||"",console.log("[WsdlImportDialog] Found SOAP address:",Y)):console.log("[WsdlImportDialog] No SOAP address found"),console.log("[WsdlImportDialog] Extracting XSD schemas from WSDL types...");const J={},ge=T.getElementsByTagNameNS("http://schemas.xmlsoap.org/wsdl/","types")[0];if(ge){const he=ge.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");if(console.log("[WsdlImportDialog] Found schemas:",he.length),q.input&&q.input.element){const le=q.input.element.split(":").pop();console.log("[WsdlImportDialog] Looking for input element:",le);for(let me=0;me<he.length;me++){const Z=he[me];if(Array.from(Z.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element")).find(we=>we.getAttribute("name")===le)){console.log("[WsdlImportDialog] Found input element definition");const we=new XMLSerializer().serializeToString(Z);J.input={elementName:le,schema:we,targetNamespace:Z.getAttribute("targetNamespace")||H};break}}}if(q.output&&q.output.element){const le=q.output.element.split(":").pop();console.log("[WsdlImportDialog] Looking for output element:",le);for(let me=0;me<he.length;me++){const Z=he[me];if(Array.from(Z.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element")).find(we=>we.getAttribute("name")===le)){console.log("[WsdlImportDialog] Found output element definition");const we=new XMLSerializer().serializeToString(Z);J.output={elementName:le,schema:we,targetNamespace:Z.getAttribute("targetNamespace")||H};break}}}if(q.fault&&q.fault.element){const le=q.fault.element.split(":").pop();console.log("[WsdlImportDialog] Looking for fault element:",le);for(let me=0;me<he.length;me++){const Z=he[me];if(Array.from(Z.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element")).find(we=>we.getAttribute("name")===le)){console.log("[WsdlImportDialog] Found fault element definition");const we=new XMLSerializer().serializeToString(Z);J.fault={elementName:le,schema:we,targetNamespace:Z.getAttribute("targetNamespace")||H};break}}}}console.log("[WsdlImportDialog] Extracted schemas:",J);const Q={fileName:V.name,serviceName:B,targetNamespace:H,content:O,structure:_,messages:q,soapAddress:Y,schemas:J};console.log("[WsdlImportDialog] Final parsed data:",Q),d(Q)}catch(O){console.error("[WsdlImportDialog] Error parsing WSDL:",O),m(O instanceof Error?O.message:"Failed to parse WSDL file"),d(null)}finally{g(!1)}},P=()=>{if(!c)return;if(!w){o({title:"Validation Error",description:"Please select a business component",variant:"destructive"});return}const V=v.find(O=>O.id===w);a("/create-flow-structure",{state:{importedWsdl:{name:c.serviceName,targetNamespace:c.targetNamespace,wsdlContent:c.content,structure:c.structure,direction:x,messages:c.messages,soapAddress:c.soapAddress,businessComponentId:w,businessComponent:V,schemas:c.schemas}}}),t(!1),r&&r()},A=h.useCallback(V=>{V.preventDefault(),V.stopPropagation();const O=V.dataTransfer.files?.[0];if(O){if(!O.name.endsWith(".wsdl")&&!O.name.endsWith(".xml")){m("Please select a WSDL file (.wsdl or .xml)");return}l(O),m(""),d(null),S(O)}},[]),L=h.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]),R=()=>{l(null),d(null),m(""),g(!1),y("")};h.useEffect(()=>{e&&I()},[e]);const I=async()=>{try{b(!0);const V=await Rr.getAllBusinessComponents();if(V.success&&V.data){const O=Array.isArray(V.data)?V.data:[];j(O)}}catch(V){console.error("Error loading business components:",V),j([])}finally{b(!1)}};return s.jsx(ft,{open:e,onOpenChange:V=>{V||R(),t(V)},children:s.jsxs(mt,{className:"sm:max-w-[525px]",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Import WSDL File"}),s.jsx(ks,{children:"Import a WSDL file to create a new flow structure"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer",onDrop:A,onDragOver:L,onClick:()=>document.getElementById("wsdl-file-input")?.click(),children:[s.jsx(Sa,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Drop WSDL file here or click to browse"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supports .wsdl and .xml files"}),s.jsx("input",{id:"wsdl-file-input",type:"file",className:"hidden",accept:".wsdl,.xml",onChange:E})]}),i&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[s.jsx("p",{className:"text-sm font-medium",children:"Selected file:"}),s.jsx("p",{className:"text-sm text-gray-600",children:i.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"business-component",children:"Business Component *"}),s.jsxs(se,{value:w,onValueChange:y,children:[s.jsx(ee,{id:"business-component",children:s.jsx(ne,{placeholder:"Select a business component..."})}),s.jsx(te,{children:N?s.jsx(F,{value:"loading",disabled:!0,children:"Loading..."}):v.length===0?s.jsx(F,{value:"none",disabled:!0,children:"No business components available"}):v.map(V=>s.jsx(F,{value:V.id,children:V.name},V.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Direction *"}),s.jsxs(ec,{value:x,onValueChange:V=>f(V),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"SOURCE",id:"import-source"}),s.jsx(C,{htmlFor:"import-source",className:"cursor-pointer",children:"Source (Outbound - Sends data out)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"TARGET",id:"import-target"}),s.jsx(C,{htmlFor:"import-target",className:"cursor-pointer",children:"Target (Inbound - Receives data in)"})]})]})]}),p&&s.jsx("div",{className:"text-center py-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:"Parsing WSDL file..."})}),c&&s.jsxs("div",{className:"bg-green-50 p-3 rounded-md",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"WSDL parsed successfully!"}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("p",{className:"text-xs text-green-700",children:["Service: ",c.serviceName]}),c.targetNamespace&&s.jsxs("p",{className:"text-xs text-green-700",children:["Namespace: ",c.targetNamespace]}),c.messages?.input&&s.jsxs("p",{className:"text-xs text-green-700",children:["Input: ",c.messages.input.name]}),c.messages?.output&&s.jsxs("p",{className:"text-xs text-green-700",children:["Output: ",c.messages.output.name]}),c.messages?.fault&&s.jsxs("p",{className:"text-xs text-green-700",children:["Fault: ",c.messages.fault.name]}),s.jsxs("p",{className:"text-xs text-green-700",children:["Processing Mode: ",c.messages?.input&&c.messages?.output?"Synchronous":"Asynchronous"]}),x==="TARGET"&&c.soapAddress&&s.jsxs("p",{className:"text-xs text-green-700",children:["SOAP Address: ",c.soapAddress]})]})]}),u&&s.jsxs(We,{variant:"destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:u})]})]}),s.jsxs(Wn,{children:[s.jsx(z,{variant:"outline",onClick:()=>{R(),t(!1)},children:"Cancel"}),s.jsxs(z,{onClick:P,disabled:!c||p||!w,children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Import WSDL"]})]})]})})},Hie=()=>{const e=as(),{toast:t}=_e(),{isDevelopment:n}=Pi(),[r,a]=h.useState([]),[o,i]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!0),[m,p]=h.useState(""),[g,x]=h.useState("all"),[f,w]=h.useState("all"),[y,v]=h.useState("all"),[j,N]=h.useState(!1),[b,E]=h.useState(null),[S,P]=h.useState(!1),[A,L]=h.useState("internal");h.useEffect(()=>{R(),I()},[]),h.useEffect(()=>{V()},[r,m,g,f,y,A]);const R=async()=>{try{u(!0);const W=await G.get("/flow-structures");if(W.success&&W.data){const q=W.data.content||W.data||[];a(Array.isArray(q)?q:[])}else a([])}catch(W){console.error("Error fetching flow structures:",W),t({title:"Error",description:"Failed to fetch flow structures",variant:"destructive"}),a([])}finally{u(!1)}},I=async()=>{try{const W=await G.get("/business-components");W.success&&W.data&&c(Array.isArray(W.data)?W.data:[])}catch(W){console.error("Error fetching business components:",W),c([])}},V=()=>{if(!Array.isArray(r)){i([]);return}let W=[...r];A==="internal"?W=W.filter(q=>q.sourceType==="INTERNAL"||!q.sourceType):A==="external"&&(W=W.filter(q=>q.sourceType==="EXTERNAL")),m&&(W=W.filter(q=>q.name.toLowerCase().includes(m.toLowerCase())||q.description?.toLowerCase().includes(m.toLowerCase())||q.tags?.some(Y=>Y.toLowerCase().includes(m.toLowerCase())))),g!=="all"&&(W=W.filter(q=>q.businessComponent?.id===g)),f!=="all"&&(W=W.filter(q=>q.processingMode===f)),y!=="all"&&(W=W.filter(q=>q.direction===y)),i(W)},O=()=>{R(),t({title:"Success",description:"Flow structures refreshed"})},k=W=>{e(`/flow-structures/${W}`)},T=W=>{e(`/flow-structures/${W.id}/edit`)},D=W=>{E(W),N(!0)},M=async W=>{try{(await G.post(`/flow-structures/${W.id}/regenerate-wsdl`)).data&&(t({title:"Success",description:`WSDL regenerated for ${W.name}`}),R())}catch(q){console.error("Error regenerating WSDL:",q),t({title:"Error",description:"Failed to regenerate WSDL",variant:"destructive"})}},_=async()=>{if(b)try{(await G.delete(`/flow-structures/${b.id}`)).success?(t({title:"Success",description:"Flow structure deleted successfully"}),R()):t({title:"Error",description:"Failed to delete flow structure",variant:"destructive"})}catch(W){console.error("Error deleting structure:",W),t({title:"Error",description:"Failed to delete flow structure",variant:"destructive"})}finally{N(!1),E(null)}},H=W=>W==="SYNC"?s.jsxs(fe,{className:"bg-blue-500 text-white",children:[s.jsx(sn,{className:"h-3 w-3 mr-1"}),"Sync"]}):s.jsxs(fe,{className:"bg-orange-500 text-white",children:[s.jsx(js,{className:"h-3 w-3 mr-1"}),"Async"]}),$=W=>W==="SOURCE"?s.jsx(fe,{variant:"outline",className:"text-green-600 border-green-600",children:"Source"}):s.jsx(fe,{variant:"outline",className:"text-purple-600 border-purple-600",children:"Target"}),B=W=>!W.flowStructureMessages||W.flowStructureMessages.length===0?s.jsx("span",{className:"text-muted-foreground",children:"No messages defined"}):s.jsx("div",{className:"flex flex-col gap-1",children:W.flowStructureMessages.map((q,Y)=>s.jsxs("div",{className:"text-sm",children:[s.jsx(fe,{variant:"secondary",className:"text-xs mr-2",children:q.messageType}),s.jsx("span",{className:"text-muted-foreground",children:q.messageStructure.name})]},Y))});return s.jsxs(s.Fragment,{children:[s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(nr,{className:"h-5 w-5"}),"Flow Structures"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",size:"sm",onClick:O,children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(z,{variant:"outline",onClick:()=>P(!0),children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),"Import"]}),s.jsxs(z,{onClick:()=>e("/create-flow-structure"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create Flow Structure"]})]})]})]})}),s.jsx(re,{className:"space-y-4",children:s.jsxs(et,{value:A,onValueChange:L,className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"internal",children:"Internal Structures"}),s.jsx(xe,{value:"external",children:"External Structures"})]}),s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search by name or tags...",value:m,onChange:W=>p(W.target.value),className:"pl-10"})]}),s.jsxs(se,{value:g,onValueChange:x,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Business Components"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Business Components"}),l.map(W=>s.jsx(F,{value:W.id,children:W.name},W.id))]})]}),s.jsxs(se,{value:f,onValueChange:w,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Processing Modes"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Processing Modes"}),s.jsx(F,{value:"SYNC",children:"Synchronous"}),s.jsx(F,{value:"ASYNC",children:"Asynchronous"})]})]}),s.jsxs(se,{value:y,onValueChange:v,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All Directions"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Directions"}),s.jsx(F,{value:"SOURCE",children:"Source"}),s.jsx(F,{value:"TARGET",children:"Target"})]})]})]}),d?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading flow structures..."})}):o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(nr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No flow structures found"}),n&&s.jsxs(z,{variant:"outline",className:"mt-4",onClick:()=>e("/create-flow-structure"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create your first flow structure"]})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Processing Mode"}),s.jsx(De,{children:"Direction"}),s.jsx(De,{children:"Message Structures"}),s.jsx(De,{children:"Business Component"}),s.jsx(De,{children:"Version"}),s.jsx(De,{children:"Updated"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:o.map(W=>s.jsxs(Zt,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>k(W.id),children:[s.jsx(ke,{className:"font-medium",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{children:W.name}),!W.wsdlContent&&W.sourceType==="INTERNAL"&&s.jsx(fe,{variant:"outline",className:"text-yellow-600 border-yellow-600 text-xs",children:"No WSDL"})]}),W.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:W.description})]})}),s.jsx(ke,{children:H(W.processingMode)}),s.jsx(ke,{children:$(W.direction)}),s.jsx(ke,{children:B(W)}),s.jsx(ke,{children:W.businessComponent?.name||"-"}),s.jsxs(ke,{children:["v",W.version]}),s.jsx(ke,{children:new Date(W.updatedAt).toLocaleDateString()}),s.jsx(ke,{onClick:q=>q.stopPropagation(),children:s.jsxs(Xu,{children:[s.jsx(Yu,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(ak,{className:"h-4 w-4"})})}),s.jsxs(Nc,{align:"end",children:[s.jsx(Rt,{onClick:()=>k(W.id),children:"View Details"}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(Rt,{onClick:()=>T(W),children:[s.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Edit"]}),W.sourceType==="INTERNAL"&&s.jsxs(Rt,{onClick:()=>M(W),children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Regenerate WSDL"]}),s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>D(W),className:"text-destructive",children:[s.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},W.id))})]})})]})]})})]}),s.jsx(th,{open:j,onOpenChange:N,children:s.jsxs(Cc,{children:[s.jsxs(Ec,{children:[s.jsx(Pc,{children:"Delete Flow Structure"}),s.jsxs(Ac,{children:['Are you sure you want to delete "',b?.name,'"? This action cannot be undone.']})]}),s.jsxs(Tc,{children:[s.jsx(sh,{children:"Cancel"}),s.jsx(Dc,{onClick:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),s.jsx(Bie,{open:S,onOpenChange:P,businessComponents:l,onImportSuccess:()=>{t({title:"Success",description:"WSDL imported successfully. You can now configure the flow structure."})}})]})},qie=()=>{pg("Data Structures"),fg("Manage message structures and flow structures for your integration flows. Define XSD schemas and WSDL service contracts in Integrix Flow Bridge."),as();const[e,t]=h.useState("message-structures");return s.jsxs(kc,{children:[s.jsx(Mc,{title:"Data Structures",description:"Manage message definitions and flow service contracts",icon:s.jsx(Ko,{})}),s.jsxs(et,{value:e,onValueChange:t,className:"space-y-4",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"message-structures",children:"Message Structures"}),s.jsx(xe,{value:"flow-structures",children:"Flow Structures"})]}),s.jsx(ye,{value:"message-structures",className:"space-y-4",children:s.jsx(Die,{})}),s.jsx(ye,{value:"flow-structures",className:"space-y-4",children:s.jsx(Hie,{})})]})]})};var Rc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yi=typeof window>"u"||"Deno"in globalThis;function Os(){}function Wie(e,t){return typeof e=="function"?e(t):e}function Gj(e){return typeof e=="number"&&e>=0&&e!==1/0}function B$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function io(e,t){return typeof e=="function"?e(t):e}function Rn(e,t){return typeof e=="function"?e(t):e}function yT(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==jb(i,t.options))return!1}else if(!ju(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function jT(e,t){const{exact:n,status:r,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ji(t.options.mutationKey)!==ji(o))return!1}else if(!ju(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function jb(e,t){return(t?.queryKeyHashFn||ji)(e)}function ji(e){return JSON.stringify(e,(t,n)=>Jj(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function ju(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ju(e[n],t[n])):!1}function H$(e,t){if(e===t)return e;const n=wT(e)&&wT(t);if(n||Jj(e)&&Jj(t)){const r=n?e:Object.keys(e),a=r.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{},c=new Set(r);let d=0;for(let u=0;u<i;u++){const m=n?u:o[u];(!n&&c.has(m)||n)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,d++):(l[m]=H$(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&d++)}return a===i&&d===a?e:l}return t}function rf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function wT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Jj(e){if(!NT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!NT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NT(e){return Object.prototype.toString.call(e)==="[object Object]"}function zie(e){return new Promise(t=>{setTimeout(t,e)})}function Qj(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?H$(e,t):t}function Xie(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Yie(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var wb=Symbol();function q$(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===wb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function W$(e,t){return typeof e=="function"?e(...t):!!e}var Kie=class extends Rc{#t;#e;#s;constructor(){super(),this.#s=e=>{if(!yi&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#s=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},Nb=new Kie,Gie=class extends Rc{#t=!0;#e;#s;constructor(){super(),this.#s=e=>{if(!yi&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#s=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#t}},af=new Gie;function Zj(){let e,t;const n=new Promise((a,o)=>{e=a,t=o});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function Jie(e){return Math.min(1e3*2**e,3e4)}function z$(e){return(e??"online")==="online"?af.isOnline():!0}var X$=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function gv(e){return e instanceof X$}function Y$(e){let t=!1,n=0,r=!1,a;const o=Zj(),i=f=>{r||(p(new X$(f)),e.abort?.())},l=()=>{t=!0},c=()=>{t=!1},d=()=>Nb.isFocused()&&(e.networkMode==="always"||af.isOnline())&&e.canRun(),u=()=>z$(e.networkMode)&&e.canRun(),m=f=>{r||(r=!0,e.onSuccess?.(f),a?.(),o.resolve(f))},p=f=>{r||(r=!0,e.onError?.(f),a?.(),o.reject(f))},g=()=>new Promise(f=>{a=w=>{(r||d())&&f(w)},e.onPause?.()}).then(()=>{a=void 0,r||e.onContinue?.()}),x=()=>{if(r)return;let f;const w=n===0?e.initialPromise:void 0;try{f=w??e.fn()}catch(y){f=Promise.reject(y)}Promise.resolve(f).then(m).catch(y=>{if(r)return;const v=e.retry??(yi?0:3),j=e.retryDelay??Jie,N=typeof j=="function"?j(n,y):j,b=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(t||!b){p(y);return}n++,e.onFail?.(n,y),zie(N).then(()=>d()?void 0:g()).then(()=>{t?p(y):x()})})};return{promise:o,cancel:i,continue:()=>(a?.(),o),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():g().then(x),o)}}var Qie=e=>setTimeout(e,0);function Zie(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=Qie;const o=l=>{t?e.push(l):a(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var ls=Zie(),K$=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Gj(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yi?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},ele=class extends K${#t;#e;#s;#n;#r;#o;#i;constructor(e){super(),this.#i=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#s=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=tle(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){const n=Qj(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(Os).catch(Os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Rn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>io(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!B$(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#i?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},a=()=>{const c=q$(this.options,t),u=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return r(m),m})();return this.#i=!1,this.options.persister?this.options.persister(c,u,this):c(u)},i=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return r(c),c})();this.options.behavior?.onFetch(i,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#a({type:"fetch",meta:i.fetchOptions?.meta});const l=c=>{gv(c)&&c.silent||this.#a({type:"error",error:c}),gv(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.scheduleGc()};return this.#r=Y$({initialPromise:t?.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:c=>{if(c===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(c)}catch(d){l(d);return}this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.scheduleGc()},onError:l,onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}),this.#r.start()}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...G$(n.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return gv(r)&&r.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),ls.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function G$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:z$(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function tle(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sle=class extends Rc{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,n){const r=t.queryKey,a=t.queryHash??jb(r,t);let o=this.get(a);return o||(o=new ele({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ls.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>yT(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>yT(e,n)):t}notify(e){ls.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ls.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ls.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},nle=class extends K${#t;#e;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||J$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})};this.#s=Y$({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#n({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const n=this.state.status==="pending",r=!this.#s.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:r}),await this.#e.config.onMutate?.(e,this);const o=await this.options.onMutate?.(e);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:r})}const a=await this.#s.start();return await this.#e.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#e.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#e.config.onError?.(a,e,this.state.context,this),await this.options.onError?.(a,e,this.state.context),await this.#e.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,e,this.state.context),a}finally{this.#n({type:"error",error:a})}}finally{this.#e.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ls.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function J$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rle=class extends Rc{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(e,t,n){const r=new nle({mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#t.add(e);const t=lm(e);if(typeof t=="string"){const n=this.#e.get(t);n?n.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=lm(e);if(typeof t=="string"){const n=this.#e.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=lm(e);if(typeof t=="string"){const r=this.#e.get(t)?.find(a=>a.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=lm(e);return typeof t=="string"?this.#e.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ls.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>jT(t,n))}findAll(e={}){return this.getAll().filter(t=>jT(e,t))}notify(e){ls.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ls.batch(()=>Promise.all(e.map(t=>t.continue().catch(Os))))}};function lm(e){return e.options.scope?.id}function bT(e){return{onFetch:(t,n)=>{const r=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const m=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},p=q$(t.options,t.fetchOptions),g=async(x,f,w)=>{if(u)return Promise.reject();if(f==null&&x.pages.length)return Promise.resolve(x);const v=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:f,direction:w?"backward":"forward",meta:t.options.meta};return m(E),E})(),j=await p(v),{maxPages:N}=t.options,b=w?Yie:Xie;return{pages:b(x.pages,j,N),pageParams:b(x.pageParams,f,N)}};if(a&&o.length){const x=a==="backward",f=x?ale:ST,w={pages:o,pageParams:i},y=f(r,w);l=await g(w,y,x)}else{const x=e??o.length;do{const f=c===0?i[0]??r.initialPageParam:ST(r,l);if(c>0&&f==null)break;l=await g(l,f),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=d}}}function ST(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function ale(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Q$=class{#t;#e;#s;#n;#r;#o;#i;#a;constructor(e={}){this.#t=e.queryCache||new sle,this.#e=e.mutationCache||new rle,this.#s=e.defaultOptions||{},this.#n=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Nb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=af.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#t.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(io(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=this.#t.get(r.queryHash)?.state.data,i=Wie(t,o);if(i!==void 0)return this.#t.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return ls.batch(()=>this.#t.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;ls.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#t;return ls.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=ls.batch(()=>this.#t.findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Os).catch(Os)}invalidateQueries(e,t={}){return ls.batch(()=>(this.#t.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=ls.batch(()=>this.#t.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(Os)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Os)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#t.build(this,t);return n.isStaleByTime(io(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Os).catch(Os)}fetchInfiniteQuery(e){return e.behavior=bT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Os).catch(Os)}ensureInfiniteQueryData(e){return e.behavior=bT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return af.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#n.set(ji(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],n={};return t.forEach(r=>{ju(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(ji(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{ju(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=jb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===wb&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},ole=class extends Rc{constructor(e,t){super(),this.options=t,this.#t=e,this.#a=null,this.#i=Zj(),this.options.experimental_prefetchInRender||this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#s=void 0;#n=void 0;#r;#o;#i;#a;#f;#h;#m;#c;#d;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),CT(this.#e,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ew(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ew(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#j(),this.#w(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,n=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Rn(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#e.setOptions(this.options),t._defaulted&&!rf(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&ET(this.#e,n,this.options,t)&&this.#u(),this.updateResult(),r&&(this.#e!==n||Rn(this.options.enabled,this.#e)!==Rn(t.enabled,this.#e)||io(this.options.staleTime,this.#e)!==io(t.staleTime,this.#e))&&this.#g();const a=this.#x();r&&(this.#e!==n||Rn(this.options.enabled,this.#e)!==Rn(t.enabled,this.#e)||a!==this.#l)&&this.#v(a)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),n=this.createResult(t,e);return lle(this,n)&&(this.#n=n,this.#o=this.options,this.#r=this.#e.state),n}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),Reflect.get(n,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),n=this.#t.getQueryCache().build(this.#t,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(e){this.#N();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Os)),t}#g(){this.#j();const e=io(this.options.staleTime,this.#e);if(yi||this.#n.isStale||!Gj(e))return;const n=B$(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(yi||Rn(this.options.enabled,this.#e)===!1||!Gj(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Nb.isFocused())&&this.#u()},this.#l))}#y(){this.#g(),this.#v(this.#x())}#j(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const n=this.#e,r=this.options,a=this.#n,o=this.#r,i=this.#o,c=e!==n?e.state:this.#s,{state:d}=e;let u={...d},m=!1,p;if(t._optimisticResults){const P=this.hasListeners(),A=!P&&CT(e,t),L=P&&ET(e,n,t,r);(A||L)&&(u={...u,...G$(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:f}=u;p=u.data;let w=!1;if(t.placeholderData!==void 0&&p===void 0&&f==="pending"){let P;a?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(P=a.data,w=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,P!==void 0&&(f="success",p=Qj(a?.data,P,t),m=!0)}if(t.select&&p!==void 0&&!w)if(a&&p===o?.data&&t.select===this.#f)p=this.#h;else try{this.#f=t.select,p=t.select(p),p=Qj(a?.data,p,t),this.#h=p,this.#a=null}catch(P){this.#a=P}this.#a&&(g=this.#a,p=this.#h,x=Date.now(),f="error");const y=u.fetchStatus==="fetching",v=f==="pending",j=f==="error",N=v&&y,b=p!==void 0,S={status:f,fetchStatus:u.fetchStatus,isPending:v,isSuccess:f==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:j&&!b,isPaused:u.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&b,isStale:bb(e,t),refetch:this.refetch,promise:this.#i,isEnabled:Rn(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=R=>{S.status==="error"?R.reject(S.error):S.data!==void 0&&R.resolve(S.data)},A=()=>{const R=this.#i=S.promise=Zj();P(R)},L=this.#i;switch(L.status){case"pending":e.queryHash===n.queryHash&&P(L);break;case"fulfilled":(S.status==="error"||S.data!==L.value)&&A();break;case"rejected":(S.status!=="error"||S.error!==L.reason)&&A();break}}return S}updateResult(){const e=this.#n,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#o=this.options,this.#r.data!==void 0&&(this.#m=this.#e),rf(t,e))return;this.#n=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#p.size)return!0;const o=new Set(a??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(i=>{const l=i;return this.#n[l]!==e[l]&&o.has(l)})};this.#b({listeners:n()})}#N(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#b(e){ls.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function ile(e,t){return Rn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function CT(e,t){return ile(e,t)||e.state.data!==void 0&&ew(e,t,t.refetchOnMount)}function ew(e,t,n){if(Rn(t.enabled,e)!==!1&&io(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&bb(e,t)}return!1}function ET(e,t,n,r){return(e!==t||Rn(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&bb(e,n)}function bb(e,t){return Rn(t.enabled,e)!==!1&&e.isStaleByTime(io(t.staleTime,e))}function lle(e,t){return!rf(e.getCurrentResult(),t)}var cle=class extends Rc{#t;#e=void 0;#s;#n;constructor(t,n){super(),this.#t=t,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#t.defaultMutationOptions(t),rf(this.options,n)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),n?.mutationKey&&this.options.mutationKey&&ji(n.mutationKey)!==ji(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#o(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#o()}mutate(t,n){return this.#n=n,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#r(){const t=this.#s?.state??J$();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){ls.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#e.variables,r=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#e)})})}},Z$=h.createContext(void 0),Sb=e=>{const t=h.useContext(Z$);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},dle=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Z$.Provider,{value:e,children:t})),e_=h.createContext(!1),ule=()=>h.useContext(e_);e_.Provider;function hle(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mle=h.createContext(hle()),ple=()=>h.useContext(mle),fle=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gle=e=>{h.useEffect(()=>{e.clearReset()},[e])},xle=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||W$(n,[e.error,r])),vle=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yle=(e,t)=>e.isLoading&&e.isFetching&&!t,jle=(e,t)=>e?.suspense&&t.isPending,TT=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function wle(e,t,n){const r=ule(),a=ple(),o=Sb(),i=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=r?"isRestoring":"optimistic",vle(i),fle(i,a),gle(a);const l=!o.getQueryCache().get(i.queryHash),[c]=h.useState(()=>new t(o,i)),d=c.getOptimisticResult(i),u=!r&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(m=>{const p=u?c.subscribe(ls.batchCalls(m)):Os;return c.updateResult(),p},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(i)},[i,c]),jle(i,d))throw TT(i,c,a);if(xle({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(i,d),i.experimental_prefetchInRender&&!yi&&yle(d,r)&&(l?TT(i,c,a):o.getQueryCache().get(i.queryHash)?.promise)?.catch(Os).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?d:c.trackResult(d)}function tw(e,t){return wle(e,ole)}function Bm(e,t){const n=Sb(),[r]=h.useState(()=>new cle(n,e));h.useEffect(()=>{r.setOptions(e)},[r,e]);const a=h.useSyncExternalStore(h.useCallback(i=>r.subscribe(ls.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=h.useCallback((i,l)=>{r.mutate(i,l).catch(Os)},[r]);if(a.error&&W$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}function Nle({isOpen:e,onClose:t}){const[n,r]=h.useState("SOURCE"),[a,o]=h.useState("SYNCHRONOUS"),[i,l]=h.useState(""),[c,d]=h.useState(""),[u,m]=h.useState(""),[p,g]=h.useState(""),[x,f]=h.useState(""),[w,y]=h.useState(""),[v,j]=h.useState(null),[N,b]=h.useState(""),[E,S]=h.useState(!1),{data:P=[],isLoading:A}=tw({queryKey:["xml-data-structures"],queryFn:async()=>await ut.get("/wsdl/structures/xml"),enabled:e}),L=Bm({mutationFn:async k=>await ut.post("/wsdl/generate",k),onSuccess:k=>{j(k),Ar({title:"Success",description:"WSDL generated successfully"})},onError:k=>{Ar({title:"Error",description:k.response?.data?.message||"Failed to generate WSDL",variant:"destructive"})}});h.useEffect(()=>{i&&P.find(k=>k.id===i)},[i,P]);const R=async()=>{if(!p||!x||!w||!i){Ar({title:"Error",description:"Please fill all required fields",variant:"destructive"});return}if(a==="SYNCHRONOUS"&&!c){Ar({title:"Error",description:"Response structure is required for synchronous WSDL",variant:"destructive"});return}const k={mode:n,type:a,requestStructureId:i,responseStructureId:a==="SYNCHRONOUS"?c:void 0,faultStructureId:u||void 0,serviceName:p,namespace:x,operationName:w};L.mutate(k)},I=async()=>{if(v)try{const k=await ut.get(`/wsdl/preview/${v.wsdlId}`,{responseType:"text"});b(k.data||""),S(!0)}catch{Ar({title:"Error",description:"Failed to preview WSDL",variant:"destructive"})}},V=()=>{if(!v)return;const k=document.createElement("a");k.href=`/api${v.downloadUrl}`,k.download=`${p}.wsdl`,document.body.appendChild(k),k.click(),document.body.removeChild(k)},O=()=>{r("SOURCE"),o("SYNCHRONOUS"),l(""),d(""),m(""),g(""),f(""),y(""),j(null),b(""),S(!1),t()};return s.jsxs(s.Fragment,{children:[s.jsx(ft,{open:e&&!E,onOpenChange:O,children:s.jsxs(mt,{className:"max-w-2xl",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Generate WSDL"}),s.jsx(ks,{children:"Generate a WSDL 1.1 file from existing XML/XSD data structures"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"WSDL Mode"}),s.jsxs(ec,{value:n,onValueChange:k=>r(k),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"SOURCE",id:"source"}),s.jsx(C,{htmlFor:"source",children:"Source (Outbound service)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"TARGET",id:"target"}),s.jsx(C,{htmlFor:"target",children:"Target (Inbound service)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"WSDL Type"}),s.jsxs(ec,{value:a,onValueChange:k=>o(k),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"SYNCHRONOUS",id:"sync"}),s.jsx(C,{htmlFor:"sync",children:"Synchronous (Request/Response)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"ASYNCHRONOUS",id:"async"}),s.jsx(C,{htmlFor:"async",children:"Asynchronous (Request only)"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"request",children:"Request Structure *"}),s.jsxs(se,{value:i,onValueChange:l,children:[s.jsx(ee,{id:"request",children:s.jsx(ne,{placeholder:"Select request structure"})}),s.jsx(te,{children:P.map(k=>s.jsxs(F,{value:k.id,children:[k.name," ",k.description&&`- ${k.description}`]},k.id))})]})]}),a==="SYNCHRONOUS"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"response",children:"Response Structure *"}),s.jsxs(se,{value:c,onValueChange:d,children:[s.jsx(ee,{id:"response",children:s.jsx(ne,{placeholder:"Select response structure"})}),s.jsx(te,{children:P.map(k=>s.jsxs(F,{value:k.id,children:[k.name," ",k.description&&`- ${k.description}`]},k.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"fault",children:"Fault Structure (Optional)"}),s.jsxs(se,{value:u,onValueChange:m,children:[s.jsx(ee,{id:"fault",children:s.jsx(ne,{placeholder:"Select fault structure (optional)"})}),s.jsxs(te,{children:[s.jsx(F,{value:"",children:"None"}),P.map(k=>s.jsxs(F,{value:k.id,children:[k.name," ",k.description&&`- ${k.description}`]},k.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"service-name",children:"Service Name *"}),s.jsx(U,{id:"service-name",value:p,onChange:k=>g(k.target.value),placeholder:"e.g., CustomerService"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"namespace",children:"Namespace *"}),s.jsx(U,{id:"namespace",value:x,onChange:k=>f(k.target.value),placeholder:"e.g., http://example.com/services/customer"}),!x&&i&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter namespace or it will be extracted from request structure if available"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"operation",children:"Operation Name *"}),s.jsx(U,{id:"operation",value:w,onChange:k=>y(k.target.value),placeholder:"e.g., getCustomer"})]}),v&&s.jsx(We,{children:s.jsxs(ze,{children:["WSDL generated successfully! ",v.createdStructures.length," data structures were created."]})})]}),s.jsxs(Wn,{children:[s.jsx(z,{variant:"outline",onClick:O,children:"Cancel"}),v?s.jsxs(s.Fragment,{children:[s.jsxs(z,{variant:"outline",onClick:I,children:[s.jsx(fa,{className:"h-4 w-4 mr-2"}),"Preview"]}),s.jsxs(z,{onClick:V,children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Download"]})]}):s.jsxs(z,{onClick:R,disabled:L.isPending||A,children:[L.isPending&&s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Generate WSDL"]})]})]})}),s.jsx(ft,{open:E,onOpenChange:S,children:s.jsxs(mt,{className:"max-w-4xl max-h-[80vh]",children:[s.jsx(gt,{children:s.jsx(xt,{children:"WSDL Preview"})}),s.jsx("div",{className:"overflow-auto",children:s.jsx("pre",{className:"text-sm bg-gray-100 p-4 rounded",children:N})}),s.jsxs(Wn,{children:[s.jsx(z,{variant:"outline",onClick:()=>S(!1),children:"Close"}),s.jsxs(z,{onClick:V,children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})}const ble=({structureName:e,setStructureName:t,structureDescription:n,setStructureDescription:r,structureUsage:a="source",setStructureUsage:o,isEditMode:i=!1})=>{const[l,c]=h.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs(K,{className:"animate-scale-in",children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ie,{children:[i?"Edit":"Create"," Data Structure"]}),s.jsx(Ne,{children:"Import existing schemas or create custom structures"})]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"gap-2",children:[s.jsx(ok,{className:"h-4 w-4"}),"Generate WSDL"]})]})}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"structureName",children:"Structure Name *"}),s.jsx(U,{id:"structureName",placeholder:"e.g., Customer Order Schema",value:e,onChange:d=>t(d.target.value),className:"transition-all duration-300 focus:scale-[1.01]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",placeholder:"Describe the purpose and context of this data structure...",value:n,onChange:d=>r(d.target.value),className:"transition-all duration-300 focus:scale-[1.01]",rows:3})]}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"usage",children:"Usage"}),s.jsxs(se,{value:a,onValueChange:d=>{const u=d;if(o(u),e){let m=e;(m.endsWith("_Out")||m.endsWith("_In"))&&(m=m.substring(0,m.length-4)),t(m+(u==="source"?"_Out":"_In"))}},children:[s.jsx(ee,{id:"usage",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"source",children:"Source (Outbound)"}),s.jsx(F,{value:"target",children:"Target (Inbound)"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Source structures are used by Sender Adapters (outbound - receive FROM external systems). Target structures are used by Receiver Adapters (inbound - send TO external systems)"})]})]})})]}),s.jsx(Nle,{isOpen:l,onClose:()=>c(!1)})]})},Lg=({icon:e,title:t,description:n,acceptTypes:r,dragOver:a,onDrop:o,onDragOver:i,onDragLeave:l,onFileSelect:c,uploadId:d,buttonText:u})=>s.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${a?"border-primary bg-primary/10":"border-border"}`,onDrop:o,onDragOver:i,onDragLeave:l,children:[s.jsx(e,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}),s.jsx("input",{type:"file",accept:r,onChange:m=>m.target.files?.[0]&&c(m.target.files[0]),className:"hidden",id:d}),s.jsxs(z,{variant:"outline",onClick:()=>document.getElementById(d)?.click(),children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),u]})]}),Sle=({jsonInput:e,setJsonInput:t,onResetAllFields:n,onFileUploaded:r})=>{const[a,o]=h.useState(!1),{toast:i}=_e(),l=u=>{const m=new FileReader;m.onload=p=>{const g=p.target?.result;try{const x=JSON.parse(g);t(JSON.stringify(x,null,2)),r&&r(u.name),i({title:"JSON File Loaded",description:`Successfully loaded ${u.name}`})}catch{i({title:"Invalid JSON",description:"The uploaded file contains invalid JSON",variant:"destructive"})}},m.readAsText(u)},c=u=>{u.preventDefault(),o(!1);const m=Array.from(u.dataTransfer.files);m.length>0&&l(m[0])},d=()=>{n(),i({title:"All Fields Cleared",description:"All form fields have been reset"})};return s.jsxs("div",{className:"space-y-4",children:[!e.trim()&&s.jsx(Lg,{icon:O0,title:"JSON Upload",description:"Drag & drop a JSON file or paste JSON structure below",acceptTypes:".json",dragOver:a,onDrop:c,onDragOver:u=>{u.preventDefault(),o(!0)},onDragLeave:()=>o(!1),onFileSelect:l,uploadId:"json-upload",buttonText:"Upload JSON File"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"JSON Structure"}),e.trim()&&s.jsxs(z,{variant:"outline",size:"sm",onClick:d,className:"text-destructive hover:text-destructive",children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear JSON"]})]}),s.jsx(Re,{placeholder:'{"orderId": "string", "amount": 100.50, "items": []}',value:e,onChange:u=>t(u.target.value),className:"font-mono text-sm",rows:8})]})]})};function Hm({value:e,onValueChange:t,placeholder:n="Select a structure...",className:r,businessComponentId:a,disabled:o=!1}){const[i,l]=h.useState(!1),[c,d]=h.useState([]),[u,m]=h.useState(!1),[p,g]=h.useState("");h.useEffect(()=>{a&&x()},[a]);const x=async()=>{try{m(!0);const y=await G.get(`/message-structures/by-business-component/${a}`);if(y.success&&y.data){const v=Array.isArray(y.data)?y.data:[];v.sort((j,N)=>j.name.localeCompare(N.name)),d(v)}}catch(y){console.error("Error loading message structures:",y),d([])}finally{m(!1)}},f=Array.isArray(c)?c.find(y=>y.id===e):void 0,w=Array.isArray(c)?c.filter(y=>{const v=p.toLowerCase();return y.name.toLowerCase().includes(v)||y.description?.toLowerCase().includes(v)||y.namespace?.uri?.toLowerCase().includes(v)||y.namespace?.targetNamespace?.toLowerCase().includes(v)}):[];return s.jsxs(sf,{open:i,onOpenChange:l,children:[s.jsx(nf,{asChild:!0,children:s.jsxs(z,{variant:"outline",role:"combobox","aria-expanded":i,className:ce("justify-between",r),disabled:o,children:[f?s.jsx("div",{className:"flex items-center gap-2 truncate",children:s.jsx("span",{className:"truncate",children:f.name})}):s.jsx("span",{className:"text-muted-foreground",children:n}),s.jsx(nk,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(yu,{className:"w-[400px] p-0",children:s.jsxs(lb,{shouldFilter:!1,children:[s.jsxs("div",{className:"flex items-center border-b px-3",children:[s.jsx(Ts,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx("input",{className:"flex h-11 w-full bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search structures...",value:p,onChange:y=>g(y.target.value)})]}),s.jsx(cb,{children:u?s.jsx("div",{className:"py-6 text-center text-sm",children:"Loading structures..."}):w.length===0?s.jsx("div",{className:"py-6 text-center text-sm",children:"No structures found."}):s.jsx(db,{children:w.map(y=>s.jsxs(ub,{value:y.id,onSelect:()=>{t(y.id),l(!1),g("")},children:[s.jsx(Ci,{className:ce("mr-2 h-4 w-4",e===y.id?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"font-medium",children:y.name})}),y.description&&s.jsx("p",{className:"text-xs text-muted-foreground",children:y.description}),y.namespace?.uri&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Namespace: ",y.namespace.uri]})]})]},y.id))})})]})})]})}const Cb=({type:e,namespaceConfig:t,setNamespaceConfig:n,hideSchemaLocation:r=!1,xsdInput:a,setXsdInput:o})=>{const i=e==="wsdl",[l,c]=h.useState(null);return h.useEffect(()=>{(async()=>{if(t.schemaLocationId)try{const u=await Mn.getStructure(t.schemaLocationId);u.success&&u.data&&c(u.data.name)}catch(u){console.error("Error fetching linked structure:",u),c(null)}else c(null)})()},[t.schemaLocationId]),s.jsxs(K,{className:"p-4 bg-muted/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),i?"WSDL":"XML"," Namespace Configuration"]}),l&&s.jsxs(fe,{variant:"success",className:"flex items-center gap-1",children:[s.jsx(Kd,{className:"h-3 w-3"}),"Dependency Linked: ",l]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-xs",children:i?"Service Namespace *":"Namespace URI *"}),s.jsx(U,{placeholder:i?"http://example.com/service":"http://example.com/namespace",value:t.uri,onChange:d=>n({...t,uri:d.target.value}),className:"text-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-xs",children:i?"Service Prefix":"Namespace Prefix"}),s.jsx(U,{placeholder:i?"svc":"ns1",value:t.prefix,onChange:d=>n({...t,prefix:d.target.value}),className:"text-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-xs",children:"Target Namespace"}),s.jsx(U,{placeholder:"http://example.com/target",value:t.targetNamespace,onChange:d=>n({...t,targetNamespace:d.target.value}),className:"text-sm"})]}),!r&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-xs",children:i?"WSDL Dependency":"Schema Dependency"}),s.jsx(Hm,{value:t.schemaLocationId,onValueChange:d=>{if(n({...t,schemaLocationId:d,schemaLocation:d}),d&&a&&o)try{const m=new DOMParser().parseFromString(a,"text/xml"),p=m.querySelectorAll("import, xs\\:import, xsd\\:import");let g=!1;if(p.forEach(x=>{const f=x.getAttribute("schemaLocation");f&&!f.startsWith("structure://")&&(x.setAttribute("schemaLocation",`structure://${d}`),g=!0)}),g){const f=new XMLSerializer().serializeToString(m);o(f)}}catch(u){console.error("Error updating schema locations:",u)}},placeholder:i?"Search for WSDL structure...":"Search for XSD structure...",filterType:i?"wsdl":"xsd",className:"text-sm"})]})]})]})},Cle=({xsdInput:e,setXsdInput:t,namespaceConfig:n,setNamespaceConfig:r,onResetAllFields:a,onFileUploaded:o,onFileContentLoaded:i})=>{const[l,c]=h.useState(!1),{toast:d}=_e(),u=x=>{const f=Vp(x);f&&(f.uri||f.targetNamespace)&&r(f)},m=x=>{const f=new FileReader;f.onload=w=>{const y=w.target?.result;u(y),i?i(y,x.name):(t(y),o&&o(x.name),d({title:"XSD File Loaded",description:`Successfully loaded ${x.name}`}))},f.readAsText(x)},p=x=>{x.preventDefault(),c(!1);const f=Array.from(x.dataTransfer.files);f.length>0&&m(f[0])},g=()=>{a(),d({title:"All Fields Cleared",description:"All form fields have been reset"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Cb,{type:"xml",namespaceConfig:n,setNamespaceConfig:r,xsdInput:e,setXsdInput:t}),!e.trim()&&s.jsx(Lg,{icon:Sa,title:"XSD Upload",description:"Drag & drop XSD or WSDL files",acceptTypes:".xsd,.wsdl,.xml",dragOver:l,onDrop:p,onDragOver:x=>{x.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onFileSelect:m,uploadId:"xsd-upload",buttonText:"Upload XSD/WSDL"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"XSD/SOAP Content"}),e.trim()&&s.jsxs(z,{variant:"outline",size:"sm",onClick:g,className:"text-destructive hover:text-destructive",children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear XSD"]})]}),s.jsx(Re,{placeholder:"Paste your XSD or SOAP schema here...",value:e,onChange:x=>{const f=x.target.value;f.length>e.length+10&&i?(u(f),i(f,"pasted-content.xsd")):(t(f),f.trim()&&f.includes("schema")&&u(f))},className:"font-mono text-sm",rows:8})]})]})},Ele=({wsdlInput:e,setWsdlInput:t,namespaceConfig:n,setNamespaceConfig:r,onWsdlAnalyzed:a,onResetAllFields:o,onFileUploaded:i,onFileContentLoaded:l})=>{const[c,d]=h.useState(!1),[u,m]=h.useState(null),{toast:p}=_e(),g=y=>{const{names:v,hasMultiple:j}=UO(y);j?(m(v),p({title:"Multiple Operations Detected",description:`This WSDL contains ${v.length} operations. Please enter a structure name manually.`,variant:"default"})):m(null);const N=jj(y),b=wj(y);b&&r(b),a&&a(N,b)},x=y=>{const v=new FileReader;v.onload=j=>{const N=j.target?.result;l?l(N,y.name):(t(N),g(N),i&&!jj(N)&&i(y.name),p({title:"WSDL File Loaded",description:`Successfully loaded ${y.name}`}))},v.readAsText(y)},f=y=>{y.preventDefault(),d(!1);const v=Array.from(y.dataTransfer.files);v.length>0&&x(v[0])},w=()=>{o(),p({title:"All Fields Cleared",description:"All form fields have been reset"})};return s.jsxs("div",{className:"space-y-4",children:[u&&s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:"Multiple Operations Found"}),s.jsxs(ze,{children:["This WSDL contains ",u.length," operations: ",u.join(", "),". Please enter a structure name manually in the form above."]})]}),s.jsx(Cb,{type:"wsdl",namespaceConfig:n,setNamespaceConfig:r,hideSchemaLocation:!0}),!e.trim()&&s.jsx(Lg,{icon:Sa,title:"WSDL Upload",description:"Drag & drop a WSDL file or paste WSDL content below",acceptTypes:".wsdl,.xml",dragOver:c,onDrop:f,onDragOver:y=>{y.preventDefault(),d(!0)},onDragLeave:()=>d(!1),onFileSelect:x,uploadId:"wsdl-upload",buttonText:"Upload WSDL File"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"WSDL Content"}),e.trim()&&s.jsxs(z,{variant:"outline",size:"sm",onClick:w,className:"text-destructive hover:text-destructive",children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear WSDL"]})]}),s.jsx(Re,{placeholder:"Paste your WSDL definition here...",value:e,onChange:y=>{const v=y.target.value;v.length>e.length+10&&l?l(v,"pasted-content.wsdl"):(t(v),v.trim()&&g(v))},className:"font-mono text-sm",rows:8})]})]})},Tle=({edmxInput:e,setEdmxInput:t,namespaceConfig:n,setNamespaceConfig:r,onResetAllFields:a,onFileUploaded:o})=>{const[i,l]=h.useState(!1),{toast:c}=_e(),d=x=>{x.preventDefault(),l(!1);const f=x.dataTransfer.files;f[0]&&p(f[0])},u=x=>{x.preventDefault(),l(!0)},m=()=>{l(!1)},p=x=>{const f=new FileReader;f.onload=w=>{const y=w.target?.result;t(y),o&&o(x.name),c({title:"EDMX File Loaded",description:`Successfully loaded ${x.name}`})},f.readAsText(x)},g=()=>{a(),c({title:"All Fields Cleared",description:"All form fields have been reset"})};return s.jsxs("div",{className:"space-y-4",children:[!e.trim()&&s.jsx(Lg,{icon:Sa,title:"Upload EDMX File",description:"Drag and drop your EDMX file here, or click to browse",acceptTypes:".edmx,.xml",dragOver:i,onDrop:d,onDragOver:u,onDragLeave:m,onFileSelect:p,uploadId:"edmx-upload",buttonText:"Upload EDMX File"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{htmlFor:"edmxInput",children:"EDMX Structure"}),e.trim()&&s.jsxs(z,{variant:"outline",size:"sm",onClick:g,className:"text-destructive hover:text-destructive",children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear EDMX"]})]}),s.jsx(Re,{id:"edmxInput",placeholder:"Paste your EDMX content here or upload a file above...",value:e,onChange:x=>t(x.target.value),className:"min-h-[300px] font-mono text-sm",rows:15})]}),s.jsx(Cb,{type:"xml",namespaceConfig:n,setNamespaceConfig:r})]})},t_=({field:e,canHaveChildren:t,isExpanded:n,onToggleExpanded:r,onUpdate:a,onRemove:o,depth:i,isRoot:l=!1,disabled:c=!1})=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[s.jsx("div",{className:"col-span-1 flex items-center",children:t&&s.jsx(z,{onClick:r,size:"sm",variant:"ghost",className:"h-6 w-6 p-0 hover-scale",children:n?s.jsx(ur,{className:"h-3 w-3"}):s.jsx(Cn,{className:"h-3 w-3"})})}),s.jsxs("div",{className:"col-span-3",children:[s.jsx(C,{className:"text-xs",children:"Field Name"}),s.jsx(U,{placeholder:"fieldName",value:e.name,onChange:d=>a({name:d.target.value}),className:"text-sm animate-fade-in",disabled:l||c})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(C,{className:"text-xs",children:"Type"}),s.jsxs(se,{value:e.type,onValueChange:d=>{const u=d==="object"||d==="array";a({type:d,isComplexType:u,children:u&&!e.children?[]:e.children})},disabled:c,children:[s.jsx(ee,{className:"text-sm",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"string",children:"String"}),s.jsx(F,{value:"number",children:"Number"}),s.jsx(F,{value:"integer",children:"Integer"}),s.jsx(F,{value:"boolean",children:"Boolean"}),s.jsx(F,{value:"date",children:"Date"}),s.jsx(F,{value:"datetime",children:"DateTime"}),s.jsx(F,{value:"time",children:"Time"}),s.jsx(F,{value:"float",children:"Float"}),s.jsx(F,{value:"double",children:"Double"}),s.jsx(F,{value:"object",children:"Object"}),s.jsx(F,{value:"array",children:"Array"})]})]})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx(C,{className:"text-xs",children:"Description"}),s.jsx(U,{placeholder:"Field description...",value:e.description||"",onChange:d=>a({description:d.target.value}),className:"text-sm animate-fade-in",disabled:c})]}),s.jsx("div",{className:"col-span-3",children:!l&&s.jsx(z,{onClick:o,size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive h-6 w-6 p-0 hover-scale",disabled:c,children:s.jsx(Xn,{className:"h-3 w-3"})})})]}),Ple=({open:e,onClose:t,onSelect:n,businessComponentId:r,currentStructureId:a})=>{const[o,i]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState(null),{toast:m}=_e();h.useEffect(()=>{e&&r&&p()},[e,r]);const p=async()=>{c(!0);try{const x=await G.get("/message-structures",{params:{businessComponentId:r,sourceType:"INTERNAL",page:0,size:100}});if(x.success&&x.data){const f=x.data.content.filter(w=>w.id!==a);i(f)}}catch(x){console.error("Error fetching structures:",x),m({title:"Error",description:"Failed to load message structures",variant:"destructive"})}finally{c(!1)}},g=()=>{d&&(n(d),t())};return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-2xl",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Select XSD Structure"}),s.jsx(ks,{children:"Choose an existing XSD structure from this business component to import its fields"})]}),s.jsx(zn,{className:"h-[400px] mt-4",children:l?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading structures..."}):o.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No internal XSD structures found for this business component"}):s.jsx("div",{className:"space-y-2",children:o.map(x=>s.jsx("div",{className:ce("p-4 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",d?.id===x.id&&"border-primary bg-muted/50"),onClick:()=>u(x),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Sa,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium",children:x.name}),d?.id===x.id&&s.jsx(Ci,{className:"h-4 w-4 text-primary"})]}),x.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.description}),x.namespace?.targetNamespace&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Namespace: ",x.namespace.targetNamespace]})]})]})},x.id))})}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(z,{variant:"outline",onClick:t,children:"Cancel"}),s.jsx(z,{onClick:g,disabled:!d,children:"Import Structure"})]})]})})},s_=({field:e,canHaveChildren:t,onUpdate:n,onAddChild:r,businessComponentId:a,disabled:o=!1})=>{const[i,l]=h.useState(!1),{toast:c}=_e(),d=p=>{if(console.log("handleStructureSelect called with structure:",p.name),p.xsdContent)try{const g=_r(p.xsdContent);console.log("Parsed XSD structure:",JSON.stringify(g,null,2));let x=null;if(g&&(g.structure?x=g.structure:typeof g=="object"&&(x=g)),x){console.log("Using structure data:",JSON.stringify(x,null,2));const f=u(x);if(console.log("Converted fields:",JSON.stringify(f,null,2)),f.length>0){const w=f.length===1&&f[0].children&&f[0].children.length>0?f[0].children:f;console.log("Fields to import:",JSON.stringify(w,null,2)),console.log("Calling onUpdate with children:",w),n({children:w}),c({title:"Success",description:`Imported ${w.length} field(s) from ${p.name}`})}else console.log("No fields converted from structure"),c({title:"Warning",description:"No fields found in the selected structure",variant:"destructive"})}else console.log("No structure found in parsed XSD"),c({title:"Error",description:"Failed to parse the selected structure",variant:"destructive"})}catch(g){console.error("Error parsing XSD:",g)}else console.log("No XSD content in selected structure")},u=(p,g="")=>{const x=[];for(const[f,w]of Object.entries(p)){const y=f.replace("[]",""),v=f.includes("[]"),j={name:y,type:"string",required:!1,description:"",minOccurs:0,maxOccurs:v?"unbounded":1};typeof w=="object"&&w!==null?w.value?j.type=m(w.value):(j.type="object",j.isComplexType=!0,j.children=u(w,`${g}/${y}`)):typeof w=="string"&&(j.type=m(w)),x.push(j)}return x},m=p=>({string:"string",int:"integer",integer:"integer",decimal:"number",float:"float",double:"double",boolean:"boolean",date:"date",dateTime:"datetime",time:"time",anyType:"object"})[p]||"string";return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end animate-fade-in",children:[s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-2",children:s.jsxs("label",{className:"flex items-center space-x-1 text-xs",children:[s.jsx("input",{type:"checkbox",checked:e.isComplexType||!1,onChange:p=>n({isComplexType:p.target.checked}),className:"rounded",disabled:o}),s.jsx("span",{children:"Complex Type"})]})}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(C,{className:"text-xs",children:"Min Occurs"}),s.jsx(U,{type:"number",min:"0",placeholder:"0",value:e.minOccurs||0,onChange:p=>n({minOccurs:parseInt(p.target.value)||0}),className:"text-sm",disabled:o})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx(C,{className:"text-xs",children:"Max Occurs"}),s.jsxs(se,{value:e.maxOccurs?.toString()||"1",onValueChange:p=>n({maxOccurs:p==="unbounded"?"unbounded":parseInt(p)}),disabled:o,children:[s.jsx(ee,{className:"text-sm",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"1",children:"1"}),s.jsx(F,{value:"2",children:"2"}),s.jsx(F,{value:"5",children:"5"}),s.jsx(F,{value:"10",children:"10"}),s.jsx(F,{value:"unbounded",children:"Unbounded"})]})]})]}),s.jsx("div",{className:"col-span-3",children:t&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:r,size:"sm",variant:"outline",className:"flex-1 hover-scale",disabled:o,children:[s.jsx(es,{className:"h-3 w-3 mr-1"}),"Add Child"]}),e.isComplexType&&a&&s.jsx(z,{onClick:()=>l(!0),size:"sm",variant:"outline",className:"hover-scale",title:"Import XSD structure",disabled:o,children:s.jsx(Ca,{className:"h-3 w-3"})})]})})]}),i&&a&&s.jsx(Ple,{open:i,onClose:()=>l(!1),onSelect:d,businessComponentId:a})]})},n_=({field:e,canHaveChildren:t,isExpanded:n,hasChildren:r,depth:a,path:o,onUpdateChild:i,onRemoveChild:l,onAddGrandChild:c,FieldBuilderComponent:d,businessComponentId:u,disabled:m=!1})=>!t||!n||!r?null:s.jsxs("div",{className:"space-y-3 pl-4 border-l border-border/50 animate-accordion-down",children:[s.jsx(C,{className:"text-xs text-muted-foreground",children:"Child Fields:"}),e.children.map((p,g)=>s.jsx(d,{field:p,index:g,onUpdate:i,onRemove:l,onAddChild:c,depth:a+1,path:[...o,g],businessComponentId:u,disabled:m},g))]}),r_=(e,t,n,r,a)=>{const o=h.useCallback(u=>{if(u.maxOccurs!==void 0){const m=u.maxOccurs;typeof m=="number"&&m>1||m==="unbounded"?u.type="array":m===1&&e.type==="array"&&(u.type="string")}n(t,u)},[t,n,e.type]),i=h.useCallback(()=>{!e.isComplexType&&e.type!=="object"&&e.type!=="array"&&n(t,{isComplexType:!0}),a(t)},[e.isComplexType,e.type,t,n,a]),l=h.useCallback(u=>{r(u)},[r]),c=h.useCallback((u,m)=>{n(u,m)},[n]),d=h.useCallback(u=>{a(u)},[a]);return{handleUpdate:o,handleAddChild:i,handleRemoveChild:l,handleUpdateChild:c,handleAddGrandChild:d}},a_=({field:e,index:t,onUpdate:n,onRemove:r,onAddChild:a,depth:o,path:i})=>{const[l,c]=Nt.useState(!0),d=!!(e.children&&e.children.length>0),u=e.isComplexType||e.type==="object"||e.type==="array",{handleUpdate:m,handleAddChild:p,handleRemoveChild:g,handleUpdateChild:x,handleAddGrandChild:f}=r_(e,i,n,r,a);return s.jsxs("div",{className:`space-y-3 p-4 border rounded-lg animate-scale-in ${o>0?"ml-6 border-l-2 border-l-primary/30":""}`,children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(t_,{field:e,canHaveChildren:u,isExpanded:l,onToggleExpanded:()=>c(!l),onUpdate:m,onRemove:()=>r(i),depth:o}),s.jsx(s_,{field:e,canHaveChildren:u,onUpdate:m,onAddChild:p})]}),s.jsx(n_,{field:e,canHaveChildren:u,isExpanded:l,hasChildren:d,depth:o,path:i,onUpdateChild:x,onRemoveChild:g,onAddGrandChild:f,FieldBuilderComponent:a_})]})},o_=(e,t)=>{console.log("[useCustomFields] Hook initialized with fields:",e);const n=h.useCallback((i,l)=>{console.log("[useCustomFields] addCustomField called:",{fieldIndex:i,parentIndex:l});const c={name:"",type:"string",required:!1,description:"",isComplexType:!1,minOccurs:0,maxOccurs:1,children:[]};if(l!==void 0&&i!==void 0){const d=[...e];d[l].children[i].children||(d[l].children[i].children=[]),d[l].children[i].children.push(c),t(d)}else if(i!==void 0){const d=[...e];d[i].children||(d[i].children=[]),d[i].children.push(c),t(d)}else t([...e,c])},[e,t]),r=h.useCallback((i,l)=>{console.log("[useCustomFields] updateFieldAtPath called:",{path:i,fieldUpdates:l,currentFields:JSON.stringify(e,null,2)});const c=[...e];let d=c;for(let m=0;m<i.length-1;m++){const p=i[m];d[p].children||(d[p].children=[]),d=d[p].children}const u=i[i.length-1];if(d[u]){if(l.maxOccurs!==void 0){const m=l.maxOccurs;typeof m=="number"&&m>1||m==="unbounded"?l.type="array":m===1&&d[u].type==="array"&&(l.type="string")}d[u]={...d[u],...l},console.log("[useCustomFields] Updated field at path:",i,"New field:",d[u])}console.log("[useCustomFields] Setting new fields after update"),t(c)},[e,t]),a=h.useCallback(i=>{console.log("[useCustomFields] removeFieldAtPath called:",i);const l=[...e];if(i.length===1)t(l.filter((c,d)=>d!==i[0]));else{let c=l;for(let m=0;m<i.length-2;m++){const p=i[m];if(!c[p].children)return;c=c[p].children}const d=i[i.length-2],u=i[i.length-1];c[d]&&c[d].children&&(c[d].children=c[d].children.filter((m,p)=>p!==u)),t(l)}},[e,t]),o=h.useCallback(i=>{console.log("[useCustomFields] addChildAtPath called:",i);const l={name:"",type:"string",required:!1,description:"",isComplexType:!1,minOccurs:0,maxOccurs:1,children:[]},c=[...e];let d=c;for(let u=0;u<i.length;u++){const m=i[u];d[m].children||(d[m].children=[]),u===i.length-1?d[m].children.push(l):d=d[m].children}t(c)},[e,t]);return{addCustomField:n,updateFieldAtPath:r,removeFieldAtPath:a,addChildAtPath:o}},of=e=>{const t={};return e.forEach(n=>{if(n.name){const r=n.type==="array"||typeof n.maxOccurs=="number"&&n.maxOccurs>1||n.maxOccurs==="unbounded";n.isComplexType||n.children&&n.children.length>0?r?t[n.name]=[of(n.children)]:t[n.name]=of(n.children):t[n.name]=n.type==="integer"?0:""}}),t},Ale=e=>{if(e.length===0)return"{}";if(e.length===1&&(e[0].isComplexType||e[0].children)){const n=e[0],r={[n.name]:of(n.children||[])};return JSON.stringify(r,null,2)}const t={root:of(e)};return JSON.stringify(t,null,2)},Dle=e=>{let t=`<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="root">
    <xsd:complexType>
      <xsd:sequence>`;return e.forEach(n=>{if(n.name)if(n.isComplexType||n.children&&n.children.length>0)t+=`
        <xsd:element name="${n.name}">
          <xsd:complexType>
            <xsd:sequence>`,n.children?.forEach(r=>{if(r.name){const a=r.minOccurs||(r.required?1:0),o=r.maxOccurs==="unbounded"?"unbounded":r.maxOccurs||1,i=`minOccurs="${a}" maxOccurs="${o}"`;r.isComplexType||r.children&&r.children.length>0?(t+=`
              <xsd:element name="${r.name}">
                <xsd:complexType>
                  <xsd:sequence>`,r.children?.forEach(l=>{if(l.name){const c=l.minOccurs||(l.required?1:0),d=l.maxOccurs==="unbounded"?"unbounded":l.maxOccurs||1,u=`minOccurs="${c}" maxOccurs="${d}"`;t+=`
                    <xsd:element name="${l.name}" type="xsd:${l.type==="array"?"string":l.type}" ${u}/>`}}),t+=`
                  </xsd:sequence>
                </xsd:complexType>
              </xsd:element>`):t+=`
              <xsd:element name="${r.name}" type="xsd:${r.type==="array"?"string":r.type}" ${i}/>`}}),t+=`
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>`;else{const r=n.minOccurs||(n.required?1:0),a=n.maxOccurs==="unbounded"?"unbounded":n.maxOccurs||1,o=`minOccurs="${r}" maxOccurs="${a}"`;t+=`
        <xsd:element name="${n.name}" type="xsd:${n.type==="array"?"string":n.type}" ${o}/>`}}),t+=`
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema>`,t},kle=(e,t="        ")=>{let n="";return(e.isComplexType||e.children&&e.children.length>0)&&(n+=`${t}<xsd:complexType name="${e.name}Type">
${t}  <xsd:sequence>`,e.children?.forEach(r=>{if(r.name){const a=r.minOccurs||(r.required?1:0),o=r.maxOccurs==="unbounded"?"unbounded":r.maxOccurs||1,i=`minOccurs="${a}" maxOccurs="${o}"`;if(r.isComplexType||r.children&&r.children.length>0)n+=`
${t}    <xsd:element name="${r.name}" type="tns:${r.name}Type" ${i}/>`;else{const l=r.type==="array"?"string":r.type==="integer"?"int":r.type;n+=`
${t}    <xsd:element name="${r.name}" type="xsd:${l}" ${i}/>`}}}),n+=`
${t}  </xsd:sequence>
${t}</xsd:complexType>`),n},Mle=(e,t="DataService",n="ProcessData")=>{if(e.length===0)return"";let r=`<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
             xmlns:tns="http://example.com/service"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema"
             xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
             targetNamespace="http://example.com/service"
             elementFormDefault="qualified">
  
  <!-- Types Section: XSD definitions for data types -->
  <types>
    <xsd:schema targetNamespace="http://example.com/service"
                xmlns:tns="http://example.com/service">
      
      <!-- Request Message Type -->
      <xsd:element name="${n}Request">
        <xsd:complexType>
          <xsd:sequence>`;return e.forEach(a=>{if(a.name){const o=a.minOccurs||(a.required?1:0),i=a.maxOccurs==="unbounded"?"unbounded":a.maxOccurs||1,l=`minOccurs="${o}" maxOccurs="${i}"`;if(a.isComplexType||a.children&&a.children.length>0)r+=`
            <xsd:element name="${a.name}" type="tns:${a.name}Type" ${l}/>`;else{const c=a.type==="array"?"string":a.type==="integer"?"int":a.type;r+=`
            <xsd:element name="${a.name}" type="xsd:${c}" ${l}/>`}}}),r+=`
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      
      <!-- Response Message Type -->
      <xsd:element name="${n}Response">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="result" type="xsd:string"/>
            <xsd:element name="status" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      
      <!-- Fault Message Type -->
      <xsd:element name="${n}Fault">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="faultCode" type="xsd:string"/>
            <xsd:element name="faultString" type="xsd:string"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>`,e.forEach(a=>{(a.isComplexType||a.children&&a.children.length>0)&&(r+=`
      
      ${kle(a)}`)}),r+=`
    </xsd:schema>
  </types>
  
  <!-- Messages Section: Define input and output messages -->
  <message name="${n}RequestMessage">
    <part name="parameters" element="tns:${n}Request"/>
  </message>
  
  <message name="${n}ResponseMessage">
    <part name="parameters" element="tns:${n}Response"/>
  </message>
  
  <message name="${n}FaultMessage">
    <part name="fault" element="tns:${n}Fault"/>
  </message>
  
  <!-- Port Type/Interface: Group related operations -->
  <portType name="${t}PortType">
    <operation name="${n}">
      <documentation>Process data operation</documentation>
      <input message="tns:${n}RequestMessage"/>
      <output message="tns:${n}ResponseMessage"/>
      <fault name="${n}Fault" message="tns:${n}FaultMessage"/>
    </operation>
  </portType>
  
  <!-- Binding: Describe concrete protocol and data format (SOAP) -->
  <binding name="${t}SOAPBinding" type="tns:${t}PortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="${n}">
      <soap:operation soapAction="http://example.com/service/${n}"/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
      <fault name="${n}Fault">
        <soap:fault name="${n}Fault" use="literal"/>
      </fault>
    </operation>
  </binding>
  
  <!-- Service: Network address (endpoint) - to be added by Java application -->
  <!-- 
  <service name="${t}">
    <port name="${t}SOAPPort" binding="tns:${t}SOAPBinding">
      <soap:address location="[ENDPOINT_URL_TO_BE_SET_BY_JAVA_APP]"/>
    </port>
  </service>
  -->
  
</definitions>`,r},Rle=(e,t)=>{if(e.length===0)return"";switch(t){case"json":return Ale(e);case"xml":case"xsd":return Dle(e);case"wsdl":return Mle(e);default:return JSON.stringify(e,null,2)}},Fle=({fields:e,schemaType:t})=>e.length===0?null:s.jsxs("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[s.jsxs(C,{className:"text-sm font-semibold mb-2 block",children:["Live ",t.toUpperCase()," Preview:"]}),s.jsx("pre",{className:"text-xs bg-background p-3 rounded border overflow-auto max-h-64",children:Rle(e,t)})]}),Ole=({customFields:e,setCustomFields:t,selectedStructureType:n,setSelectedStructureType:r,onResetAllFields:a})=>{const[o,i]=h.useState(""),{toast:l}=_e(),{addCustomField:c,updateFieldAtPath:d,removeFieldAtPath:u,addChildAtPath:m}=o_(e,t),p=()=>{a(),l({title:"All Fields Cleared",description:"All form fields have been reset"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"customStructureType",children:"Structure Type"}),s.jsxs(se,{value:o,onValueChange:i,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select structure type to build"})}),s.jsxs(te,{children:[s.jsx(F,{value:"json",children:"JSON Schema"}),s.jsx(F,{value:"xsd",children:"XSD Schema"}),s.jsx(F,{value:"xml",children:"XML Schema"}),s.jsx(F,{value:"wsdl",children:"WSDL Schema"})]})]})]}),o?e.length===0?s.jsxs("div",{className:"text-center py-8 space-y-4",children:[s.jsx(Ds,{className:"h-12 w-12 mx-auto text-muted-foreground"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Build ",o.toUpperCase()," Structure"]}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Add fields to create your ",o.toUpperCase()," data structure"]}),s.jsxs(z,{onClick:()=>c(),className:"w-full max-w-xs bg-gradient-primary hover:opacity-90",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Field"]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(C,{children:["Structure Definition (",o.toUpperCase(),")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:()=>c(),size:"sm",variant:"outline",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Field"]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:p,className:"text-destructive hover:text-destructive",children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear All"]})]})]}),e.map((g,x)=>s.jsx(a_,{field:g,index:x,onUpdate:d,onRemove:u,onAddChild:m,depth:0,path:[x]},x)),s.jsx(Fle,{fields:e,schemaType:o})]}):s.jsxs("div",{className:"text-center py-8 space-y-4",children:[s.jsx(Ds,{className:"h-12 w-12 mx-auto text-muted-foreground opacity-50"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Custom Structure Builder"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a structure type above to start building your custom data structure"})]})]})]})},Ile=({customFields:e,setCustomFields:t,jsonInput:n,setJsonInput:r,xsdInput:a,setXsdInput:o,edmxInput:i,setEdmxInput:l,wsdlInput:c,setWsdlInput:d,selectedStructureType:u,setSelectedStructureType:m,namespaceConfig:p,setNamespaceConfig:g,onSave:x,onWsdlAnalyzed:f,onResetAllFields:w,onFileUploaded:y,onFileContentLoaded:v})=>{const j=as(),N=()=>{j("/data-structures")};return s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.1s"},children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Define Structure"}),s.jsx(Ne,{children:"Choose your preferred method to define the data structure"})]}),s.jsxs(re,{children:[s.jsxs(et,{value:u,className:"w-full",onValueChange:b=>m(b),children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(xe,{value:"json",children:"JSON Schema"}),s.jsx(xe,{value:"xsd",children:"XSD/XML"}),s.jsx(xe,{value:"wsdl",children:"WSDL"}),s.jsx(xe,{value:"edmx",children:"EDMX"}),s.jsx(xe,{value:"custom",children:"Custom Builder"})]}),s.jsx(ye,{value:"json",children:s.jsx(Sle,{jsonInput:n,setJsonInput:r,onResetAllFields:w,onFileUploaded:y})}),s.jsx(ye,{value:"xsd",children:s.jsx(Cle,{xsdInput:a,setXsdInput:o,namespaceConfig:p,setNamespaceConfig:g,onResetAllFields:w,onFileUploaded:y,onFileContentLoaded:(b,E)=>v?.(b,E,"xsd")})}),s.jsx(ye,{value:"wsdl",children:s.jsx(Ele,{wsdlInput:c,setWsdlInput:d,namespaceConfig:p,setNamespaceConfig:g,onWsdlAnalyzed:f,onResetAllFields:w,onFileUploaded:y,onFileContentLoaded:(b,E)=>v?.(b,E,"wsdl")})}),s.jsx(ye,{value:"edmx",children:s.jsx(Tle,{edmxInput:i,setEdmxInput:l,namespaceConfig:p,setNamespaceConfig:g,onResetAllFields:w,onFileUploaded:y})}),s.jsx(ye,{value:"custom",children:s.jsx(Ole,{customFields:e,setCustomFields:t,selectedStructureType:u,setSelectedStructureType:m,onResetAllFields:w})})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-4",children:[s.jsxs(z,{onClick:N,variant:"outline",className:"flex-1",children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(z,{onClick:x,className:"flex-1 bg-gradient-primary hover:opacity-90",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Data Structure"]})]})]})]})},i_=(e,t=0)=>e?s.jsx("div",{className:`ml-${t*4} space-y-1`,children:typeof e=="object"&&!Array.isArray(e)?Object.entries(e).map(([n,r])=>s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-primary",children:n}),s.jsx("span",{className:"text-muted-foreground",children:": "}),typeof r=="string"?s.jsx(fe,{variant:"outline",className:"text-xs",children:r}):s.jsx("div",{className:"mt-1",children:i_(r,t+1)})]},n)):s.jsx(fe,{variant:"outline",className:"text-xs",children:String(e)})}):null,Lle=({selectedStructure:e})=>s.jsxs(K,{className:"animate-scale-in",style:{animationDelay:"0.3s"},children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"h-5 w-5"}),"Structure Preview"]})}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),e.namespace&&s.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Namespace:"})," ",e.namespace.uri,e.namespace.prefix&&s.jsxs("span",{className:"ml-2",children:["(",e.namespace.prefix,")"]})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx(C,{className:"text-xs font-medium",children:"Structure Definition"}),s.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto",children:i_(e.structure)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(z,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})]}),l_=({primaryFile:e,onDependenciesResolved:t,onCancel:n,onCreateDependency:r,currentStructureId:a})=>{const[o,i]=h.useState([]),[l,c]=h.useState(new Map),[d,u]=h.useState("checking");h.useState(""),h.useState([]),h.useState(new Map),h.useState(!1),_e(),h.useEffect(()=>{if(console.log("[DependencyValidator useEffect] primaryFile:",e),!e)return;const p=e.type==="xsd"?Bl(e.content):Up(e.content);console.log("[DependencyValidator useEffect] primaryDeps:",p);const g={name:e.name,content:e.content,dependencies:p,type:e.type};i([g]);const x=new Map,f=new Set;p.imports.forEach(w=>{const y=w.schemaLocation||"";y&&f.add(`import: ${y}`)}),p.includes.forEach(w=>{const y=w.schemaLocation||"";y&&f.add(`include: ${y}`)}),f.size>0&&x.set(e.name,f),console.log("[DependencyValidator] Setting unresolved deps:",x),console.log("[DependencyValidator] Setting validation status to:",x.size===0?"complete":"incomplete"),c(x),u(x.size===0?"complete":"incomplete")},[e]);const m=()=>{d==="complete"&&t(o)};return s.jsxs(K,{className:"w-full max-w-4xl mx-auto",children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(HB,{className:"h-5 w-5"}),"Dependency Resolution Required"]}),s.jsx(Ne,{children:"The uploaded file has external dependencies that must be resolved before saving."})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Debug: validationStatus = ",d,", unresolvedDeps = ",l.size]}),s.jsxs(We,{variant:d==="complete"?"default":"destructive",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:d==="complete"?"All Dependencies Resolved":"Unresolved Dependencies Found"}),s.jsx(ze,{children:d==="complete"?"All required schema files have been uploaded. You can now proceed.":`${l.size} file(s) have unresolved dependencies. Upload the missing files to continue.`})]}),s.jsxs(et,{defaultValue:o[0]?.name,className:"w-full",children:[s.jsx(Ke,{className:"grid w-full",style:{gridTemplateColumns:`repeat(${o.length}, 1fr)`},children:o.map(p=>s.jsxs(xe,{value:p.name,className:"text-xs",children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),p.name]},p.name))}),o.map(p=>s.jsx(ye,{value:p.name,className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Dependencies:"}),p.dependencies.imports.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Imports:"}),s.jsx("div",{className:"space-y-1",children:p.dependencies.imports.map((g,x)=>{const f=!l.get(p.name)?.has(`import: ${g.schemaLocation||g.namespace}`);return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f?s.jsx(rs,{className:"h-3 w-3 text-green-500"}):s.jsx(yt,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{className:f?"text-green-700":"text-red-700",children:g.schemaLocation||g.namespace}),g.namespace&&s.jsx(fe,{variant:"outline",className:"text-xs h-5",children:g.namespace})]},x)})})]}),p.dependencies.includes.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Includes:"}),s.jsx("div",{className:"space-y-1",children:p.dependencies.includes.map((g,x)=>{const f=!l.get(p.name)?.has(`include: ${g.schemaLocation}`);return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f?s.jsx(rs,{className:"h-3 w-3 text-green-500"}):s.jsx(yt,{className:"h-3 w-3 text-red-500"}),s.jsx("span",{className:f?"text-green-700":"text-red-700",children:g.schemaLocation})]},x)})})]}),p.dependencies.imports.length===0&&p.dependencies.includes.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"No dependencies found in this file."})]})},p.name))]}),d==="incomplete"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Create Missing Dependencies:"}),Array.from(l.entries()).map(([p,g])=>(console.log("[DependencyValidator] Rendering deps for file:",p,"deps:",Array.from(g)),s.jsx("div",{className:"space-y-2",children:Array.from(g).map((x,f)=>{const[w,y]=x.split(": ");return console.log("[DependencyValidator] Rendering button for:",w,y),s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:y}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Type: ",w]})]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{if(console.log("[DependencyValidator] Create button clicked for:",y),!r){console.error("[DependencyValidator] onCreateDependency is not defined!");return}const v={schemaLocation:y,type:w,parentStructureId:a,returnUrl:window.location.pathname+window.location.search};console.log("[DependencyValidator] Calling onCreateDependency with:",v),r(v)},children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Create ",w==="import"?"XSD":"Schema"]})]},f)})},p)))]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:n,children:"Cancel"}),d==="incomplete"&&s.jsx(z,{variant:"secondary",onClick:()=>{t([])},children:"Save as Draft"}),d==="complete"&&s.jsx(z,{onClick:m,children:"Continue"})]})]})]})},PT=()=>{try{const{id:e}=_u(),t=as(),n=Ms(),{saveStructure:r,updateStructure:a,loading:o}=ah();console.log("CreateDataStructure component rendering, loading:",o);const{toast:i}=_e(),[l,c]=h.useState(!1),[d,u]=h.useState(null),[m,p]=h.useState("source"),[g,x]=h.useState(""),[f,w]=h.useState(""),[y,v]=h.useState(null),[j,N]=h.useState([]),[b,E]=h.useState(""),[S,P]=h.useState(""),[A,L]=h.useState(""),[R,I]=h.useState(""),[V,O]=h.useState("json"),[k,T]=h.useState({uri:"",prefix:"",targetNamespace:"",schemaLocation:"",schemaLocationId:""}),[D,M]=h.useState(!1),[_,H]=h.useState(null),[$,B]=h.useState([]);h.useEffect(()=>{n.state?.isDependency&&(le(),setTimeout(()=>{n.state.suggestedName&&x(pe(n.state.suggestedName)),n.state.parentBusinessComponent&&v(n.state.parentBusinessComponent)},100))},[n.state]),h.useEffect(()=>{(async()=>{if(e)try{console.log("[CreateDataStructure] Loading structure for edit:",e);const ae=await Mn.getStructure(e);if(ae.success&&ae.data){const we=ae.data;c(!0),u(we.id),x(we.name||""),w(we.description||""),p(we.usage||"source"),O(we.type||"json"),we.type==="json"?E(JSON.stringify(we.structure,null,2)):we.type==="wsdl"?we.originalContent&&we.originalFormat==="xml"?I(we.originalContent):I(JSON.stringify(we.structure,null,2)):we.type==="xsd"?we.originalContent&&we.originalFormat==="xml"?P(we.originalContent):P(JSON.stringify(we.structure,null,2)):we.type,we.namespace&&T(we.namespace),we.businessComponent?v({id:we.businessComponent.id,name:we.businessComponent.name,description:we.businessComponent.description||""}):we.businessComponentId&&v({id:we.businessComponentId,name:we.businessComponentName||"Loading...",description:""})}}catch(ae){console.error("Error loading structure:",ae),i({title:"Error",description:"Failed to load data structure",variant:"destructive"}),t("/data-structures")}else if(n.state?.structure&&n.state?.isEdit){const ae=n.state.structure;console.log("[CreateDataStructure] Loading structure from navigation state:",ae),c(!0),u(ae.id),x(ae.name||""),w(ae.description||""),p(ae.usage||"source"),O(ae.type||"json"),ae.type==="json"?E(JSON.stringify(ae.structure,null,2)):ae.type==="wsdl"?I(JSON.stringify(ae.structure,null,2)):ae.type==="xsd"&&P(JSON.stringify(ae.structure,null,2)),ae.namespace&&T(ae.namespace),ae.businessComponent?v({id:ae.businessComponent.id,name:ae.businessComponent.name,description:ae.businessComponent.description||""}):ae.businessComponentId&&v({id:ae.businessComponentId,name:ae.businessComponentName||"Loading...",description:""})}})()},[e,n.state,t,i]);const[W,q]=h.useState(null);h.useEffect(()=>{(async()=>{if(k?.schemaLocationId)try{const ae=await Mn.getStructure(k.schemaLocationId);ae.success&&ae.data&&q(ae.data.structure)}catch(ae){console.error("Error fetching linked dependency:",ae),q(null)}else q(null)})()},[k?.schemaLocationId]);const Y=h.useMemo(()=>{if(!g)return null;let Z={};if(V==="json"&&b)Z=vj(b);else if(V==="wsdl"&&R){const ae=$p(R);Z=ae?.structure||ae}else if(V==="xsd"&&S){let ae={};k?.schemaLocationId&&W&&(ae[`structure://${k.schemaLocationId}`]=W,ae[k.schemaLocationId]=W),Z=_r(S,ae)||{error:"Failed to parse XSD structure"}}else V==="edmx"&&A?Z={message:"EDMX parsing not fully implemented yet"}:V==="custom"&&j.length>0&&(Z=_p(j));return!Z||Object.keys(Z).length===0?null:{id:"preview",name:g,type:V,description:f,structure:Z,createdAt:new Date().toISOString().split("T")[0],usage:m,namespace:(V==="xsd"||V==="wsdl"||V==="edmx")&&k.uri?k:void 0}},[g,f,V,b,S,A,R,j,k,W]),pe=Z=>{if(!Z)return Z;let ae=Z;return(ae.endsWith("_Out")||ae.endsWith("_In"))&&(ae=ae.substring(0,ae.length-4)),ae},J=(Z,ae)=>{Z&&!g&&x(pe(Z)),ae&&T(ae)},ge=(Z,ae,we)=>{console.log("[checkDependencies] Checking dependencies for:",ae,we);const Ve=we==="xsd"?Bl(Z):Up(Z);return console.log("[checkDependencies] Found dependencies:",Ve),Ve.imports.length>0||Ve.includes.length>0?(console.log("[checkDependencies] Has dependencies, showing validator"),H({name:ae,content:Z,type:we}),M(!0),!0):(console.log("[checkDependencies] No dependencies found"),!1)},Q=Z=>{B(Z),M(!1);const ae=Z[0];if(ae){if(ae.type==="xsd"){P(ae.content);const we=Vp(ae.content);we&&T(we)}else if(ae.type==="wsdl"){I(ae.content);const we=wj(ae.content);we&&T(we)}}i({title:"Dependencies Resolved",description:`${Z.length} files loaded successfully. You can now save the structure.`})},he=async()=>{if(!y){i({title:"Validation Error",description:"Please select a business component",variant:"destructive"});return}if(S&&!$.length&&!l){const ae=Bl(S);if((ae.imports.length>0||ae.includes.length>0)&&!k.schemaLocationId&&ge(S,g||"structure.xsd","xsd"))return}if(R&&!$.length&&!l){const ae=Up(R);if((ae.imports.length>0||ae.includes.length>0)&&!k.schemaLocationId&&ge(R,g||"structure.wsdl","wsdl"))return}let Z=!1;l&&d?Z=await a(d,g,f,m,b,S,A,R,j,V,k,y.id):Z=await r(g,f,m,b,S,A,R,j,V,k,y.id,$),Z&&(n.state?.isDependency?(i({title:"Dependency Created",description:`Successfully created dependency "${g}". You can now edit the parent structure to link this dependency.`}),t(n.state?.returnUrl||"/data-structures")):l?t("/data-structures"):(x(""),w(""),v(null),E(""),P(""),L(""),I(""),N([]),T({uri:"",prefix:"",targetNamespace:"",schemaLocation:"",schemaLocationId:""})))},le=()=>{x(""),w(""),v(null),E(""),P(""),L(""),I(""),N([]),T({uri:"",prefix:"",targetNamespace:"",schemaLocation:"",schemaLocationId:""}),O("json")};if(o)return s.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"animate-slide-up",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(Ko,{className:"h-8 w-8"}),"Data Structures"]}),s.jsx("p",{className:"text-muted-foreground",children:"Loading data structures..."})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsx("div",{className:"animate-pulse",children:s.jsx("div",{className:"h-32 bg-muted rounded-lg"})})})})]});const me=async Z=>{if(console.log("[CreateDataStructure] handleCreateDependency called with:",Z),!y){i({title:"Validation Error",description:"Please select a business component before creating dependencies",variant:"destructive"});return}M(!1),await r(g,f,m,b,_?.type==="xsd"?_.content:S,A,_?.type==="wsdl"?_.content:R,j,V,k,y.id,[])&&(i({title:"Draft Saved",description:`Saved "${g}" as draft. Now create the dependency structure.`}),t("/create-data-structure",{state:{isDependency:!0,parentStructureName:g,parentBusinessComponent:y,returnUrl:"/data-structures",schemaLocation:Z.schemaLocation,suggestedName:Z.schemaLocation.split("/").pop()?.replace(".xsd","")||"dependency"}}))};return s.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[D&&_&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:Z=>{console.log("[CreateDataStructure] Modal backdrop clicked"),Z.target===Z.currentTarget&&console.log("[CreateDataStructure] Click was on backdrop, not propagating")},children:s.jsx("div",{className:"relative z-50",onClick:Z=>Z.stopPropagation(),children:s.jsx(l_,{primaryFile:_,onDependenciesResolved:Z=>{Q(Z),Z.length===0&&_&&(_.type==="xsd"?P(_.content):_.type==="wsdl"&&I(_.content))},onCancel:()=>{M(!1),H(null)},onCreateDependency:me,currentStructureId:d})})}),s.jsxs("div",{className:"animate-slide-up",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(Ko,{className:"h-8 w-8"}),n.state?.isDependency?"Create Dependency Structure":"Data Structures"]}),s.jsx("p",{className:"text-muted-foreground",children:n.state?.isDependency?`Creating dependency: ${n.state?.schemaLocation||"dependency structure"}`:"Define and manage data structures for source and target messages"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Ig,{selectedBusinessComponent:y,setSelectedBusinessComponent:v}),s.jsx(ble,{structureName:g,setStructureName:x,structureDescription:f,setStructureDescription:w,structureUsage:m,setStructureUsage:p,isEditMode:l}),s.jsx(Ile,{customFields:j,setCustomFields:N,jsonInput:b,setJsonInput:E,xsdInput:S,setXsdInput:Z=>{P(Z),Z&&!$.length&&ge(Z,g||"structure.xsd","xsd")},edmxInput:A,setEdmxInput:L,wsdlInput:R,setWsdlInput:Z=>{I(Z),Z&&!$.length&&ge(Z,g||"structure.wsdl","wsdl")},selectedStructureType:V,setSelectedStructureType:O,namespaceConfig:k,setNamespaceConfig:T,onSave:he,onWsdlAnalyzed:J,onResetAllFields:le,onFileUploaded:Z=>{if(!g&&Z){const ae=Z.replace(/\.[^/.]+$/,"");x(pe(ae))}},onFileContentLoaded:(Z,ae,we)=>{console.log("[onFileContentLoaded] Called with:",ae,we);const Ve=ae.replace(/\.[^/.]+$/,"");if(x(pe(Ve)),!ge(Z,ae,we)){if(we==="xsd"){P(Z);const ct=Vp(Z);ct&&T(ct)}else if(we==="wsdl"){I(Z);const ct=wj(Z);ct&&T(ct);const $e=jj(Z);$e&&x(pe($e))}}}}),Y&&s.jsx("div",{className:"animate-fade-in",children:s.jsx(Lle,{selectedStructure:Y})})]})]})}catch(e){return console.error("Error rendering DataStructures component:",e),s.jsx("div",{className:"p-6 space-y-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center justify-center gap-3",children:[s.jsx(Ko,{className:"h-8 w-8"}),"Data Structures"]}),s.jsx("p",{className:"text-muted-foreground mt-4",children:"There was an error loading the data structures page. Please check the browser console for details."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Reload Page"})]})})}},lf=({fields:e,depth:t=0})=>{const[n,r]=Nt.useState(()=>{const i=new Set;return e.length>0&&e[0].name&&i.add(`/${e[0].name}`),i}),a=i=>{const l=new Set(n);l.has(i)?l.delete(i):l.add(i),r(l)},o=(i,l,c)=>{const d=i.children&&i.children.length>0,u=`/${i.name||`field-${c}`}`,m=n.has(u);return s.jsxs("div",{className:"select-none",children:[s.jsxs("div",{className:ce("flex items-center gap-2 py-1 px-2 hover:bg-muted/50 rounded",d&&"cursor-pointer"),style:{marginLeft:`${t*16}px`},onClick:()=>d&&a(u),children:[d?s.jsxs(s.Fragment,{children:[m?s.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(_B,{className:"h-4 w-4 text-blue-600"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4"}),s.jsx(bs,{className:"h-4 w-4 text-gray-500"})]}),s.jsx("span",{className:"text-sm font-medium",children:i.name}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[i.type,i.maxOccurs==="unbounded"&&"[]",i.required&&"*"]})]}),d&&m&&s.jsx(lf,{fields:i.children,depth:t+1})]},`${l}-${c}`)};return s.jsx("div",{className:"border rounded-lg p-4 bg-card",children:e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No fields defined yet"}):e.map((i,l)=>o(i,"",l))})},c_=({field:e,index:t,onUpdate:n,onRemove:r,onAddChild:a,depth:o,path:i,businessComponentId:l,disabled:c=!1})=>{const[d,u]=Nt.useState(!0),m=!!(e.children&&e.children.length>0),p=e.isComplexType||e.type==="object"||e.type==="array",{handleUpdate:g,handleAddChild:x,handleRemoveChild:f,handleUpdateChild:w,handleAddGrandChild:y}=r_(e,i,n,r,a);return s.jsxs("div",{className:`space-y-3 p-4 border rounded-lg ${o>0?"ml-6 border-l-2 border-l-primary/30":""}`,children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(t_,{field:e,canHaveChildren:p,isExpanded:d,onToggleExpanded:()=>u(!d),onUpdate:g,onRemove:()=>r(i),depth:o,isRoot:o===0&&i.length===1&&i[0]===0,disabled:c}),s.jsx(s_,{field:e,canHaveChildren:p,onUpdate:g,onAddChild:x,businessComponentId:l,disabled:c})]}),s.jsx(n_,{field:e,canHaveChildren:p,isExpanded:d,hasChildren:m,depth:o,path:i,onUpdateChild:w,onRemoveChild:f,onAddGrandChild:y,FieldBuilderComponent:c_,businessComponentId:l,disabled:c})]})},$le=({customFields:e,setCustomFields:t,structureName:n,targetNamespace:r,businessComponentId:a,onGenerateXsd:o,disabled:i=!1})=>{const{toast:l}=_e(),{addCustomField:c,updateFieldAtPath:d,removeFieldAtPath:u,addChildAtPath:m}=o_(e,t);Nt.useEffect(()=>{if(console.log("[CustomStructureBuilder] Initial effect - customFields:",e.length,"structureName:",n),e.length===0&&n){const g={name:n,type:"object",isComplexType:!0,required:!0,children:[],description:""};console.log("[CustomStructureBuilder] Setting initial field:",g),t([g])}},[]),Nt.useEffect(()=>{console.log("[CustomStructureBuilder] Structure name changed to:",n),e.length>0&&n&&(console.log("[CustomStructureBuilder] Updating root field name"),d([0],{name:n}))},[n]);const p=()=>{t([{name:n||"",type:"object",isComplexType:!0,required:!0,children:[],description:""}]),l({title:"All Fields Cleared",description:"Structure has been reset to default"})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"Structure Definition"}),s.jsxs(z,{variant:"outline",size:"sm",onClick:p,className:"text-destructive hover:text-destructive",disabled:i,children:[s.jsx(jt,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),e.map((g,x)=>s.jsx(c_,{field:g,index:x,onUpdate:d,onRemove:u,onAddChild:m,depth:0,path:[x],businessComponentId:a,disabled:i},x))]})};function AT(e,t="http://example.com/schema"){console.log("[generateXsdFromFields] Called with:",{fieldsCount:e.length,fields:JSON.stringify(e,null,2),targetNamespace:t});const n=['<?xml version="1.0" encoding="UTF-8"?>'];if(t?n.push(`<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
           targetNamespace="${t}"
           xmlns="${t}"
           elementFormDefault="qualified">`):n.push('<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">'),e.length>0&&e[0].name){const a=e[0];n.push(`
    <xsd:element name="${a.name}">
        <xsd:complexType>
            <xsd:sequence>`),a.children&&a.children.forEach(o=>{n.push(d_(o,16))}),n.push(`            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>`)}n.push(`
</xsd:schema>`);const r=n.join(`
`);return console.log("[generateXsdFromFields] Generated XSD:",r),r}function d_(e,t){const n=" ".repeat(t),r=e.minOccurs!==void 0?e.minOccurs:0,a=e.maxOccurs!==void 0?e.maxOccurs==="unbounded"?"unbounded":e.maxOccurs:1;if(e.isComplexType&&e.children&&e.children.length>0){const o=[`${n}<xsd:element name="${e.name}" minOccurs="${r}" maxOccurs="${a}">
${n}    <xsd:complexType>
${n}        <xsd:sequence>`];return e.children.forEach(i=>{o.push(d_(i,t+12))}),o.push(`${n}        </xsd:sequence>
${n}    </xsd:complexType>
${n}</xsd:element>`),o.join(`
`)}else{const o=_le(e.type);return`${n}<xsd:element name="${e.name}" type="xsd:${o}" minOccurs="${r}" maxOccurs="${a}"/>`}}function _le(e){return{string:"string",number:"decimal",integer:"integer",boolean:"boolean",date:"date",datetime:"dateTime",time:"time",float:"float",double:"double",object:"anyType",array:"anyType"}[e]||"string"}const sw=(e,t="")=>{const n=[];console.log(`[convertXsdStructureToFields] Converting structure at path '${t}':`,e);for(const[r,a]of Object.entries(e)){const o=r.replace("[]","").replace("*",""),i=r.includes("[]"),l=r.includes("*")&&!r.startsWith("@"),c={name:o,type:"string",required:l,description:"",minOccurs:l?1:0,maxOccurs:i?"unbounded":1};console.log(`[convertXsdStructureToFields] Processing field '${o}' (from key '${r}'), value:`,a),typeof a=="object"&&a!==null?a.value?(c.type=DT(a.value),console.log(`[convertXsdStructureToFields] Field '${o}' is simple type with value:`,a.value,"-> type:",c.type)):(c.type="object",c.isComplexType=!0,c.children=sw(a,`${t}/${o}`),console.log(`[convertXsdStructureToFields] Field '${o}' is complex type with ${c.children?.length||0} children`)):typeof a=="string"?(c.type=DT(a),console.log(`[convertXsdStructureToFields] Field '${o}' is direct type:`,a,"-> type:",c.type)):console.log(`[convertXsdStructureToFields] Field '${o}' has unexpected value type:`,typeof a,"value:",a),n.push(c)}return console.log(`[convertXsdStructureToFields] Converted ${n.length} fields at path '${t}'`),n},DT=e=>({string:"string",int:"integer",integer:"integer",decimal:"number",float:"float",double:"double",boolean:"boolean",date:"date",dateTime:"datetime",time:"time",anyType:"object"})[e]||"string",xv=()=>{const{id:e}=_u(),t=as(),n=Ms(),{toast:r}=_e(),a=n.pathname.includes(`/message-structures/${e}`)&&!n.pathname.includes("/edit");console.log("[CreateMessageStructure] Component rendering, id:",e,"isViewMode:",a);const[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(null),[f,w]=h.useState(""),[y,v]=h.useState([]),j=H=>{console.log("[CreateMessageStructure] setCustomFields called"),typeof H=="function"?v($=>{const B=H($);return console.log("[CreateMessageStructure] Custom fields updated (function):",JSON.stringify(B,null,2)),B}):(console.log("[CreateMessageStructure] Custom fields updated (direct):",JSON.stringify(H,null,2)),v(H))},[N,b]=h.useState(""),[E,S]=h.useState({uri:"",prefix:"",targetNamespace:"",schemaLocation:"",schemaLocationId:""}),[P,A]=h.useState(!1),[L,R]=h.useState(null),[I,V]=h.useState([]);h.useEffect(()=>{n.state?.isDependency&&setTimeout(()=>{n.state.suggestedName&&u(n.state.suggestedName),n.state.parentBusinessComponent&&x(n.state.parentBusinessComponent)},100)},[n.state]),h.useEffect(()=>{(async()=>{if(e)try{c(!0);const $=await G.get(`/message-structures/${e}`);if($.success&&$.data){const B=$.data;if(i(!0),u(B.name||""),p(B.description||""),w(B.xsdContent||""),B.businessComponent&&x(B.businessComponent),B.namespace&&(S(B.namespace),B.namespace.targetNamespace&&b(B.namespace.targetNamespace)),B.metadata?.resolvedDependencies){const W=B.metadata.resolvedDependencies;V(Array.isArray(W)?W:[])}if(B.xsdContent){console.log("[CreateMessageStructure] Loading - parsing XSD content to fields"),console.log("[CreateMessageStructure] XSD content:",B.xsdContent);try{const W=_r(B.xsdContent);console.log("[CreateMessageStructure] Parsed structure:",JSON.stringify(W,null,2));let q=null;if(W&&(W.structure?q=W.structure:typeof W=="object"&&(q=W)),q){console.log("[CreateMessageStructure] Using structure data:",JSON.stringify(q,null,2));const Y=sw(q);console.log("[CreateMessageStructure] Converted fields:",JSON.stringify(Y,null,2)),Y.length>0?j(Y):console.log("[CreateMessageStructure] No fields converted from structure")}else console.log("[CreateMessageStructure] No structure found in parsed XSD")}catch(W){console.error("[CreateMessageStructure] Error parsing XSD to fields:",W)}}else console.log("[CreateMessageStructure] No XSD content to parse")}}catch($){console.error("Error loading structure:",$),r({title:"Error",description:"Failed to load message structure",variant:"destructive"})}finally{c(!1)}})()},[e]);const O=(H,$)=>{w(H);const B=Vp(H);if(S(W=>({...W,...B})),$&&!d){const W=$.replace(/\.(xsd|xml)$/i,"");u(W)}},k=()=>{A(!1),L&&(O(L.content,L.name),R(null))},T=async()=>{if(console.log("[CreateMessageStructure] handleSave called"),console.log("[CreateMessageStructure] Current state:",{structureName:d,targetNamespace:N,customFields:JSON.stringify(y,null,2),xsdInput:f?.substring(0,200)+"...",businessComponentId:g?.id}),!d||!g||!N){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}let H=f;if(y.length>0?(console.log("[CreateMessageStructure] Generating XSD from custom fields"),H=AT(y,N),console.log("[CreateMessageStructure] Generated XSD:",H)):console.log("[CreateMessageStructure] No custom fields, using xsdInput"),!H){r({title:"Validation Error",description:"Please define at least one field in the structure",variant:"destructive"});return}c(!0);try{const $={},B=Bl(H),q=[...B.imports,...B.includes].filter(ge=>!I.find(Q=>Q.name===ge.schemaLocation));q.length>0&&($.isDraft=!0,$.unresolvedDependencies=q),I.length>0&&($.resolvedDependencies=I);const Y={...E,targetNamespace:N,uri:N},pe={name:d,description:m,xsdContent:H,namespace:Y,metadata:$,tags:[],businessComponentId:g.id};console.log("[CreateMessageStructure] Sending payload to backend:",{...pe,xsdContent:pe.xsdContent?.substring(0,200)+"..."});const J=o?await G.put(`/message-structures/${e}`,pe):await G.post("/message-structures",pe);if(console.log("[CreateMessageStructure] Save response:",J),J.success)r({title:"Success",description:`Message structure ${o?"updated":"created"} successfully`}),n.state?.returnTo?t(n.state.returnTo,{state:{createdStructure:J.data,parentStructureId:n.state.parentStructureId}}):t("/data-structures");else throw new Error(J.error||"Failed to save structure")}catch($){console.error("Error saving structure:",$),r({title:"Error",description:$.message||"Failed to save message structure",variant:"destructive"})}finally{c(!1)}},[D,M]=h.useState({});h.useEffect(()=>{(async()=>{if(I.length>0){console.log("[CreateMessageStructure] Loading dependencies:",I);const $={};for(const B of I)try{console.log(`[CreateMessageStructure] Loading dependency: ${B.name} (${B.structureId})`);const W=await G.get(`/message-structures/${B.structureId}`);if(W.success&&W.data?.xsdContent){const q=_r(W.data.xsdContent);console.log(`[CreateMessageStructure] Parsed dependency ${B.name}:`,q),q&&($[B.name]=q,$[`structure://${B.structureId}`]=q,B.name.endsWith(".xsd")||($[`${B.name}.xsd`]=q),console.log(`[CreateMessageStructure] Stored ${B.name} under keys:`,Object.keys($).filter(Y=>$[Y]===q)))}}catch(W){console.error(`Failed to load dependency ${B.name}:`,W)}console.log("[CreateMessageStructure] All loaded dependencies:",$),M($)}})()},[I]);const _=h.useMemo(()=>{if(!f)return null;console.log("[CreateMessageStructure] Parsing XSD with dependencies:",D),console.log("[CreateMessageStructure] Dependencies loaded:",Object.keys(D));const H=_r(f,D);return console.log("[CreateMessageStructure] Parsed structure result:",H),H},[f,D]);return h.useEffect(()=>{if(_&&Object.keys(D).length>0){console.log("[CreateMessageStructure] Updating fields from parsed structure with dependencies");let H=null;if(_.structure?H=_.structure:typeof _=="object"&&(H=_),H){console.log("[CreateMessageStructure] Re-converting with dependency-resolved structure:",JSON.stringify(H,null,2));const $=sw(H);console.log("[CreateMessageStructure] Re-converted fields:",JSON.stringify($,null,2)),$.length>0&&j($)}}},[_,D]),s.jsxs(kc,{children:[s.jsx(Mc,{title:a?"View Message Structure":o?"Edit Message Structure":"Create Message Structure",description:a?"View message structure details":o?"Update an existing message structure":"Define a new XSD-based message structure",icon:s.jsx(Sa,{}),actions:a?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",onClick:()=>t("/data-structures"),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs(z,{onClick:()=>t(`/message-structures/${e}/edit`),children:[s.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Edit"]})]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",onClick:()=>t("/data-structures"),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(z,{onClick:T,disabled:l,children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),l?"Saving...":o?"Update":"Create"]})]})}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(Ig,{selectedBusinessComponent:g,setSelectedBusinessComponent:x,disabled:a}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Structure Details"}),s.jsx(Ne,{children:"Define the basic information for your message structure"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(C,{htmlFor:"structure-name",children:"Structure Name *"}),s.jsx(U,{id:"structure-name",value:d,onChange:H=>u(H.target.value),placeholder:"e.g., CustomerMessage",disabled:a})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"target-namespace",children:"Target Namespace *"}),s.jsx(U,{id:"target-namespace",value:N,onChange:H=>b(H.target.value),placeholder:"e.g., http://example.com/schema",disabled:a})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"structure-description",children:"Description"}),s.jsx(Re,{id:"structure-description",value:m,onChange:H=>p(H.target.value),placeholder:"Describe the purpose of this message structure",rows:3,disabled:a})]})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"XSD Structure Builder"}),s.jsx(Ne,{children:"Build your XSD schema visually by adding fields"})]}),s.jsx(re,{className:"space-y-4",children:!g||!d||!N?s.jsx("div",{className:"text-center py-8 space-y-4",children:s.jsxs("div",{className:"text-muted-foreground",children:[s.jsx("p",{className:"text-sm mb-2",children:"Please fill in the following required fields before building the structure:"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[!g&&s.jsx("li",{children:"• Select a Business Component"}),!d&&s.jsx("li",{children:"• Enter a Structure Name"}),!N&&s.jsx("li",{children:"• Enter a Target Namespace"})]})]})}):s.jsxs(et,{defaultValue:"field-display",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"field-display",children:"Field Display View"}),s.jsx(xe,{value:"xsd-view",children:"XSD View"})]}),s.jsxs(ye,{value:"field-display",className:"mt-4",children:[s.jsx($le,{customFields:y,setCustomFields:j,structureName:d,targetNamespace:N,businessComponentId:g?.id,disabled:a}),s.jsxs("div",{className:"mt-6",children:[s.jsx(C,{className:"text-sm font-semibold mb-2 block",children:"Structure Tree View"}),s.jsx(lf,{fields:y})]})]}),s.jsx(ye,{value:"xsd-view",className:"mt-4",children:s.jsxs("div",{children:[s.jsx(C,{htmlFor:"xsd-content",children:"Generated XSD Content"}),s.jsx("pre",{className:"text-xs bg-muted p-3 rounded overflow-auto max-h-96 language-xml mt-2",children:s.jsx("code",{children:y.length>0?AT(y,N):""})})]})})]})})]})]})}),P&&L&&s.jsx(l_,{dependencies:Bl(L.content),structureName:d,structureType:"xsd",onClose:()=>A(!1),onDependenciesResolved:k,businessComponent:g,resolvedDependencies:I,setResolvedDependencies:V,namespaceConfig:E,setNamespaceConfig:S,xsdInput:f,setXsdInput:w})]})},vv=()=>{const{id:e}=_u(),t=as(),n=Ms(),{toast:r}=_e(),a=n.pathname.includes(`/flow-structures/${e}`)&&!n.pathname.includes("/edit"),[o,i]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(""),[m,p]=h.useState(""),[g,x]=h.useState(""),[f,w]=h.useState(null),[y,v]=h.useState("SYNC"),[j,N]=h.useState("SOURCE"),[b,E]=h.useState(""),[S,P]=h.useState(""),[A,L]=h.useState(""),[R,I]=h.useState({}),[V,O]=h.useState(""),[k,T]=h.useState([]),[D,M]=h.useState([]),[_,H]=h.useState(""),[$,B]=h.useState([]),[W,q]=h.useState(!1);h.useEffect(()=>{if(console.log("[CreateFlowStructure] Location state:",n.state),n.state?.importedWsdl){const Q=n.state.importedWsdl;console.log("[CreateFlowStructure] Imported WSDL data:",Q),u(Q.name||""),x(Q.targetNamespace||""),console.log("[CreateFlowStructure] Set name:",Q.name,"namespace:",Q.targetNamespace),Q.businessComponent&&w(Q.businessComponent),Q.direction&&N(Q.direction),Q.messages&&(Q.messages.input&&Q.messages.output?v("SYNC"):v("ASYNC"),console.log("[CreateFlowStructure] Imported messages:",Q.messages)),Q.soapAddress&&console.log("[CreateFlowStructure] SOAP Address for adapter:",Q.soapAddress),Q.wsdlContent&&(console.log("[CreateFlowStructure] Setting imported WSDL preview, length:",Q.wsdlContent.length),H(Q.wsdlContent),O(Q.wsdlContent)),Q.structure&&(console.log("[CreateFlowStructure] Setting imported WSDL structure:",Q.structure),B(Q.structure),T(Q.structure)),q(!0),window.history.replaceState({},document.title)}else{const Q=localStorage.getItem("pendingFlowStructure");if(Q)try{const he=JSON.parse(Q);console.log("[CreateFlowStructure] Restoring pending flow structure state"),u(he.structureName||""),p(he.structureDescription||""),x(he.targetNamespace||""),w(he.selectedBusinessComponent),v(he.processingMode||"SYNC"),N(he.direction||"SOURCE"),H(he.importedWsdlContent||""),B(he.importedWsdlStructure||[]),q(he.isImported||!1),he.messages&&window.history.replaceState({importedWsdl:{messages:he.messages,soapAddress:he.soapAddress}},document.title),localStorage.removeItem("pendingFlowStructure")}catch(he){console.error("[CreateFlowStructure] Error restoring state:",he)}}},[n]),h.useEffect(()=>{(async()=>{if(e)try{c(!0);const he=await G.get(`/flow-structures/${e}`);if(he.success&&he.data){const le=he.data;if(i(!a),u(le.name||""),p(le.description||""),v(le.processingMode),N(le.direction),le.namespace?.targetNamespace&&x(le.namespace.targetNamespace),le.businessComponent&&w(le.businessComponent),le.flowStructureMessages&&le.flowStructureMessages.forEach(me=>{me.messageType==="INPUT"&&E(me.messageStructure.id),me.messageType==="OUTPUT"&&P(me.messageStructure.id),me.messageType==="FAULT"&&L(me.messageStructure.id)}),le.wsdlContent){O(le.wsdlContent);const me=Kj(le.wsdlContent);T(me),le.sourceType==="EXTERNAL"&&(q(!0),H(le.wsdlContent),B(me))}}}catch(he){console.error("Error loading structure:",he),r({title:"Error",description:"Failed to load flow structure",variant:"destructive"})}finally{c(!1)}})()},[e]),h.useEffect(()=>{console.log("[CreateFlowStructure] Generating WSDL preview with:",{processingMode:y,direction:j,inputMessageId:b,outputMessageId:S,faultMessageId:A,structureName:d,targetNamespace:g}),pe()},[y,j,b,S,A,d,g,R]),h.useEffect(()=>{const Q=async(he,le)=>{if(!he){I(me=>{const Z={...me};return delete Z[le],Z});return}try{const me=await G.get(`/message-structures/${he}`);me.success&&me.data&&(console.log(`[CreateFlowStructure] Loaded ${le} message structure:`,{id:me.data.id,name:me.data.name,hasXsdContent:!!me.data.xsdContent,xsdContentLength:me.data.xsdContent?.length||0,xsdContentPreview:me.data.xsdContent?.substring(0,200)}),I(Z=>({...Z,[le]:me.data})))}catch(me){console.error(`Error fetching ${le} message structure:`,me)}};Q(b,"input"),Q(S,"output"),Q(A,"fault")},[b,S,A]);const Y=Q=>{const he=[];return Q?Array.isArray(Q)?Q:(Object.entries(Q).forEach(([le,me])=>{const Z=le.replace(/\[\]$/,"").replace(/\*$/,""),ae=le.endsWith("[]"),we=le.endsWith("*")&&!ae;if(typeof me=="string")he.push({name:Z,type:me,required:we,description:"",maxOccurs:ae?"unbounded":void 0});else if(typeof me=="object"&&me!==null){const Ve=Y(me);he.push({name:Z,type:"object",required:we,description:"",isComplexType:!0,children:Ve.length>0?Ve:void 0,maxOccurs:ae?"unbounded":void 0})}}),he):he};h.useEffect(()=>{W||(()=>{const he=[],le=d?`${d.replace(/[^a-zA-Z0-9]/g,"")}Service`:"Service",me={name:le,type:"object",description:"WSDL Service",isComplexType:!0,children:[]},Z={name:`${le}PortType`,type:"object",description:"Port Type",isComplexType:!0,children:[]},ae={name:d||"Operation",type:"object",description:"Operation",isComplexType:!0,children:[]};if(b&&R.input&&(y==="SYNC"||j==="TARGET")){let Ue=[];if(R.input.xsdContent){const $e=_r(R.input.xsdContent);console.log("[CreateFlowStructure] Parsed input structure:",$e),Ue=Y($e),console.log("[CreateFlowStructure] Converted input fields:",Ue)}const ct={name:"input",type:"object",description:R.input.name,isComplexType:!0,required:!0,children:Ue.length>0?Ue:void 0};ae.children.push(ct)}if(S&&R.output&&(y==="SYNC"||j==="SOURCE")){let Ue=[];if(R.output.xsdContent){const $e=_r(R.output.xsdContent);console.log("[CreateFlowStructure] Parsed output structure:",$e),Ue=Y($e),console.log("[CreateFlowStructure] Converted output fields:",Ue)}const ct={name:"output",type:"object",description:R.output.name,isComplexType:!0,required:!0,children:Ue.length>0?Ue:void 0};ae.children.push(ct)}if(A&&R.fault){let Ue=[];if(R.fault.xsdContent){const $e=_r(R.fault.xsdContent);console.log("[CreateFlowStructure] Parsed fault structure:",$e),Ue=Y($e),console.log("[CreateFlowStructure] Converted fault fields:",Ue)}const ct={name:"fault",type:"object",description:R.fault.name,isComplexType:!0,required:!1,children:Ue.length>0?Ue:void 0};ae.children.push(ct)}Z.children.push(ae),me.children.push(Z),he.push(me);const we={name:`${le}Binding`,type:"object",description:"SOAP Binding",isComplexType:!0};he.push(we);const Ve={name:"Messages",type:"object",description:"WSDL Messages",isComplexType:!0};he.push(Ve),M(he)})()},[d,y,R,b,S,A,W,j]);const pe=()=>{if(W){console.log("[CreateFlowStructure] Skipping WSDL generation - using imported WSDL");return}if(!d){O("");return}const Q=d.replace(/[^a-zA-Z0-9]/g,""),he=`${Q}Service`,le=g||`http://integrix.com/services/${he}`;let Z=`<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
                  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                  xmlns:tns="${le}"
                  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                  targetNamespace="${le}">
  
${(()=>{const we=(!b||R.input?.xsdContent)&&(!S||R.output?.xsdContent)&&(!A||R.fault?.xsdContent);if(console.log("[generateWsdlPreview] XSD content check:",{hasAllXsdContent:we,input:{id:b,hasXsd:!!R.input?.xsdContent},output:{id:S,hasXsd:!!R.output?.xsdContent},fault:{id:A,hasXsd:!!R.fault?.xsdContent}}),we){const Ve=[],Ue=($e,Ge)=>{try{const st=new DOMParser().parseFromString($e,"text/xml").getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");for(let Ct=0;Ct<st.length;Ct++)if(st[Ct].getAttribute("name")===Ge){let ts=new XMLSerializer().serializeToString(st[Ct]);return ts=ts.replace(/xmlns:xs="[^"]*"/g,""),ts=ts.replace(/\bxs:/g,"xsd:"),ts=ct(ts,4),ts}}catch(Oe){console.error("Error extracting element from XSD:",Oe)}return""},ct=($e,Ge=0)=>{const Oe=[],at="    ";let st=Ge;return $e.split(/>\s*</).forEach((Ct,dn)=>{dn>0&&(Ct="<"+Ct),dn<$e.split(/>\s*</).length-1&&(Ct=Ct+">"),Ct.match(/^<\/\w/)&&st--,Ct.trim()&&Oe.push(at.repeat(st)+Ct.trim()),Ct.match(/^<\w[^>]*[^\/]>.*$/)&&st++}),Oe.join(`
`)};if(b&&R.input?.xsdContent){const $e=Ue(R.input.xsdContent,R.input.name);console.log("[generateWsdlPreview] Extracted input element:",$e?"Found":"Not found"),$e&&Ve.push($e)}if(S&&R.output?.xsdContent){const $e=Ue(R.output.xsdContent,R.output.name);console.log("[generateWsdlPreview] Extracted output element:",$e?"Found":"Not found"),$e&&Ve.push($e)}if(A&&R.fault?.xsdContent){const $e=Ue(R.fault.xsdContent,R.fault.name);console.log("[generateWsdlPreview] Extracted fault element:",$e?"Found":"Not found"),$e&&Ve.push($e)}return`  <!-- Types section will import message structures -->
  <wsdl:types>
    <xsd:schema targetNamespace="${le}">
      ${Ve.join(`
`)}
    </xsd:schema>
  </wsdl:types>`}else return`  <!-- Types section will import message structures -->
  <wsdl:types>
    <xsd:schema targetNamespace="${le}">
      ${b?`<xsd:import schemaLocation="structure://${b}" />`:""}
      ${S&&S!==b?`<xsd:import schemaLocation="structure://${S}" />`:""}
      ${A&&A!==b&&A!==S?`<xsd:import schemaLocation="structure://${A}" />`:""}
      
      <!-- Define wrapper elements for the imported types -->
      ${b&&R.input?`<xsd:element name="${R.input.name}" type="xsd:anyType"/>`:""}
      ${S&&R.output?`<xsd:element name="${R.output.name}" type="xsd:anyType"/>`:""}
      ${A&&R.fault?`<xsd:element name="${R.fault.name}" type="xsd:anyType"/>`:""}
    </xsd:schema>
  </wsdl:types>`})()}
  
  <!-- Messages -->`;y==="SYNC"?Z+=`
  ${b&&R.input?`<wsdl:message name="${Q}Request">
    <wsdl:part name="parameters" element="tns:${R.input.name}"/>
  </wsdl:message>`:""}
  
  ${S&&R.output?`<wsdl:message name="${Q}Response">
    <wsdl:part name="parameters" element="tns:${R.output.name}"/>
  </wsdl:message>`:""}`:j==="SOURCE"?Z+=`
  ${S&&R.output?`<wsdl:message name="${Q}Message">
    <wsdl:part name="parameters" element="tns:${R.output.name}"/>
  </wsdl:message>`:""}`:Z+=`
  ${b&&R.input?`<wsdl:message name="${Q}Message">
    <wsdl:part name="parameters" element="tns:${R.input.name}"/>
  </wsdl:message>`:""}`,A&&R.fault&&(Z+=`
  
  <wsdl:message name="${Q}Fault">
    <wsdl:part name="fault" element="tns:${R.fault.name}"/>
  </wsdl:message>`),Z+=`
  
  <!-- Port Type -->
  <wsdl:portType name="${he}PortType">
    <wsdl:operation name="${Q}">`,y==="SYNC"?Z+=`
      ${b?`<wsdl:input message="tns:${Q}Request"/>`:""}
      ${S?`<wsdl:output message="tns:${Q}Response"/>`:""}`:j==="SOURCE"?Z+=`
      ${S?`<wsdl:output message="tns:${Q}Message"/>`:""}`:Z+=`
      ${b?`<wsdl:input message="tns:${Q}Message"/>`:""}`,A&&(Z+=`
      <wsdl:fault name="fault" message="tns:${Q}Fault"/>`),Z+=`
    </wsdl:operation>
  </wsdl:portType>
  
  <!-- Binding -->
  <wsdl:binding name="${he}Binding" type="tns:${he}PortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="${Q}">
      <soap:operation soapAction="${Q}"/>`,(y==="SYNC"||j==="TARGET")&&(Z+=`
      ${b?`<wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>`:""}`),(y==="SYNC"||j==="SOURCE")&&(Z+=`
      ${S?`<wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>`:""}`),A&&(Z+=`
      <wsdl:fault name="fault">
        <soap:fault use="literal" name="fault"/>
      </wsdl:fault>`),Z+=`
    </wsdl:operation>
  </wsdl:binding>
  
  <!-- Service -->
  <wsdl:service name="${he}">
    <wsdl:port name="${he}Port" binding="tns:${he}Binding">
      <soap:address location=""/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>`,O(Z);const ae=Kj(Z);T(ae)},J=async()=>{if(!d||!f||!g){r({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}const Q={};y==="SYNC"?(b&&(Q.INPUT=b),S&&(Q.OUTPUT=S)):j==="SOURCE"&&S?Q.OUTPUT=S:j==="TARGET"&&b&&(Q.INPUT=b),A&&(Q.FAULT=A),c(!0);try{const he={name:d,description:m,processingMode:y,direction:j,namespace:{targetNamespace:g},businessComponentId:f.id,messageStructureIds:Q,...W&&{wsdlContent:_},sourceType:W?"EXTERNAL":"INTERNAL"},le=o?await G.put(`/flow-structures/${e}`,he):await G.post("/flow-structures",he);if(le.success)r({title:"Success",description:`Flow structure ${o?"updated":"created"} successfully`}),t("/data-structures");else throw new Error(le.error||"Failed to save structure")}catch(he){console.error("Error saving structure:",he),r({title:"Error",description:he.message||"Failed to save flow structure",variant:"destructive"})}finally{c(!1)}},ge=async()=>{let Q=W?_:V;if(!Q){r({title:"No Content",description:"No WSDL content to export",variant:"destructive"});return}if(!W)try{const Z=new DOMParser,ae=Z.parseFromString(Q,"text/xml"),we=ae.querySelectorAll('import[schemaLocation^="structure://"]'),Ve=Array.from(we).map(Ge=>Ge.getAttribute("schemaLocation")?.replace("structure://","")).filter(Boolean),Ue={};for(const Ge of Ve)if(R.input?.id===Ge)Ue[Ge]=R.input.xsdContent;else if(R.output?.id===Ge)Ue[Ge]=R.output.xsdContent;else if(R.fault?.id===Ge)Ue[Ge]=R.fault.xsdContent;else try{const Oe=await G.get(`/message-structures/${Ge}`);Oe.success&&Oe.data&&(Ue[Ge]=Oe.data.xsdContent)}catch(Oe){console.error(`Failed to fetch structure ${Ge}:`,Oe)}const ct=ae.querySelector("schema");if(ct){we.forEach(Oe=>Oe.remove());for(const[Oe,at]of Object.entries(Ue))if(at)try{const Ct=Z.parseFromString(at,"text/xml").querySelector("schema");Ct&&Array.from(Ct.children).forEach(ts=>{const An=ae.importNode(ts,!0),un=Zr=>{if(Zr.nodeType===Node.ELEMENT_NODE){const qs=Zr,ve=qs.getAttribute("type");ve&&ve.startsWith("xs:")&&qs.setAttribute("type",ve.replace("xs:","xsd:"));const X=qs.getAttribute("ref");X&&X.startsWith("xs:")&&qs.setAttribute("ref",X.replace("xs:","xsd:")),Array.from(qs.children).forEach(de=>un(de))}};un(An),ct.appendChild(An)})}catch(st){console.error(`Failed to parse XSD for structure ${Oe}:`,st)}ct.querySelectorAll('element[type="xsd:anyType"]').forEach(Oe=>Oe.remove())}Q=new XMLSerializer().serializeToString(ae),Q=Q.replace(/></g,`>
<`)}catch(Z){console.error("Error resolving structure imports:",Z),r({title:"Warning",description:"Could not resolve all structure imports. Exporting with structure references.",variant:"default"})}const he=new Blob([Q],{type:"text/xml"}),le=window.URL.createObjectURL(he),me=document.createElement("a");me.href=le,me.download=`${d||"flow-structure"}.wsdl`,document.body.appendChild(me),me.click(),window.URL.revokeObjectURL(le),document.body.removeChild(me),r({title:"Success",description:`Exported ${d}.wsdl`})};return s.jsxs(kc,{children:[s.jsx(Mc,{title:a?"View Flow Structure":o?"Edit Flow Structure":"Create Flow Structure",description:a?"View flow structure details":o?"Update an existing flow structure":"Define a new WSDL-based flow structure",icon:s.jsx(nr,{}),actions:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",onClick:()=>t("/data-structures"),children:[s.jsx(jt,{className:"h-4 w-4 mr-2"}),a?"Close":"Cancel"]}),a?s.jsxs(s.Fragment,{children:[s.jsxs(z,{variant:"outline",onClick:ge,children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export WSDL"]}),s.jsxs(z,{onClick:()=>t(`/flow-structures/${e}/edit`),children:[s.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Edit"]})]}):s.jsxs(z,{onClick:J,disabled:l,children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),l?"Saving...":o?"Update":"Create"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx(Ig,{selectedBusinessComponent:f,setSelectedBusinessComponent:w,disabled:a}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Structure Details"}),s.jsx(Ne,{children:"Define the basic information for your flow structure"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(C,{htmlFor:"structure-name",children:"Structure Name *"}),s.jsx(U,{id:"structure-name",value:d,onChange:Q=>u(Q.target.value),placeholder:"e.g., CustomerService",disabled:a})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"target-namespace",children:"Target Namespace *"}),s.jsx(U,{id:"target-namespace",value:g,onChange:Q=>x(Q.target.value),placeholder:"e.g., http://example.com/services",disabled:a})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"structure-description",children:"Description"}),s.jsx(Re,{id:"structure-description",value:m,onChange:Q=>p(Q.target.value),placeholder:"Describe the purpose of this flow structure",rows:3,disabled:a})]})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Flow Configuration"}),s.jsx(Ne,{children:"Configure the flow behavior and message structures"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(C,{children:"Processing Mode *"}),s.jsxs(ec,{value:y,onValueChange:Q=>v(Q),disabled:a,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"SYNC",id:"sync"}),s.jsxs(C,{htmlFor:"sync",className:"flex items-center cursor-pointer",children:[s.jsx(sn,{className:"h-4 w-4 mr-2"}),"Synchronous (Request/Response)"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"ASYNC",id:"async"}),s.jsxs(C,{htmlFor:"async",className:"flex items-center cursor-pointer",children:[s.jsx(js,{className:"h-4 w-4 mr-2"}),"Asynchronous (One-way)"]})]})]})]}),s.jsxs("div",{children:[s.jsx(C,{children:"Direction *"}),s.jsxs(ec,{value:j,onValueChange:Q=>N(Q),disabled:a,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"SOURCE",id:"source"}),s.jsx(C,{htmlFor:"source",className:"cursor-pointer",children:"Source (Outbound - Sends data out)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ir,{value:"TARGET",id:"target"}),s.jsx(C,{htmlFor:"target",className:"cursor-pointer",children:"Target (Inbound - Receives data in)"})]})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Message Structure Assignments"}),W&&s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:"This flow structure uses an imported WSDL. The original WSDL content will be preserved."})]}),n.state?.importedWsdl&&!W&&s.jsxs(We,{className:"mb-4",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:"Message structures need to be created for the imported WSDL messages."}),n.state.importedWsdl.messages?.input&&s.jsxs("p",{className:"text-sm",children:["• Input: ",n.state.importedWsdl.messages.input.name," (",n.state.importedWsdl.messages.input.element||"No element",")"]}),n.state.importedWsdl.messages?.output&&s.jsxs("p",{className:"text-sm",children:["• Output: ",n.state.importedWsdl.messages.output.name," (",n.state.importedWsdl.messages.output.element||"No element",")"]}),n.state.importedWsdl.messages?.fault&&s.jsxs("p",{className:"text-sm",children:["• Fault: ",n.state.importedWsdl.messages.fault.name," (",n.state.importedWsdl.messages.fault.element||"No element",")"]}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"To complete the flow structure setup:"}),s.jsxs("ol",{className:"text-sm space-y-1 ml-4",children:[s.jsx("li",{children:"1. Create message structures for each WSDL message type"}),s.jsx("li",{children:"2. Return here to assign them to this flow structure"})]}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{const Q={structureName:d,structureDescription:m,targetNamespace:g,selectedBusinessComponent:f,processingMode:y,direction:j,importedWsdlContent:_,importedWsdlStructure:$,isImported:W,messages:n.state.importedWsdl.messages,soapAddress:n.state.importedWsdl.soapAddress};localStorage.setItem("pendingFlowStructure",JSON.stringify(Q)),t("/create-message-structure",{state:{businessComponentId:f?.id,fromWsdlImport:!0,wsdlMessages:n.state.importedWsdl.messages,wsdlContent:_}})},children:"Create Message Structures"})]})]})})]}),(y==="SYNC"||j==="TARGET")&&s.jsxs("div",{children:[s.jsx(C,{children:"Input Message Structure"}),s.jsx(Hm,{value:b,onValueChange:E,placeholder:"Select input message structure...",businessComponentId:f?.id,disabled:a})]}),(y==="SYNC"||j==="SOURCE")&&s.jsxs("div",{children:[s.jsx(C,{children:"Output Message Structure"}),s.jsx(Hm,{value:S,onValueChange:P,placeholder:"Select output message structure...",businessComponentId:f?.id,disabled:a})]}),s.jsxs("div",{children:[s.jsx(C,{children:"Fault Message Structure (Optional)"}),s.jsx(Hm,{value:A,onValueChange:L,placeholder:"Select fault message structure...",businessComponentId:f?.id,disabled:a})]})]})]})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Configuration Summary"})}),s.jsx(re,{children:s.jsxs("dl",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"font-medium",children:"Processing Mode:"}),s.jsx("dd",{className:"text-muted-foreground",children:y==="SYNC"?"Synchronous":"Asynchronous"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-medium",children:"Direction:"}),s.jsx("dd",{className:"text-muted-foreground",children:j==="SOURCE"?"Source (Outbound)":"Target (Inbound)"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"font-medium",children:"Expected Messages:"}),s.jsx("dd",{className:"text-muted-foreground",children:y==="SYNC"?"Input → Output (Request/Response)":j==="SOURCE"?"Output only":"Input only"})]})]})})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"WSDL Structure"}),s.jsx(Ne,{children:W?"Imported WSDL structure":"Auto-generated WSDL based on your configuration"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs(et,{defaultValue:"xml-view",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsx(xe,{value:"xml-view",children:"XML View"}),s.jsx(xe,{value:"tree-view",children:"Structure Tree View"})]}),s.jsx(ye,{value:"xml-view",className:"mt-4",children:V?s.jsx("pre",{className:"text-xs bg-muted p-3 rounded overflow-auto max-h-[500px]",children:W?_:V}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Configure the flow to see WSDL preview"})})}),s.jsx(ye,{value:"tree-view",className:"mt-4",children:W?$.length>0?s.jsx(lf,{fields:$}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"No structure available"})}):D.length>0?s.jsx(lf,{fields:D}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Configure the flow to see structure tree"})})})]})})]})]})};function Mi({icon:e,title:t,description:n,action:r,className:a}){return s.jsxs("div",{className:ce("flex flex-col items-center justify-center p-8 text-center",a),children:[e&&s.jsx("div",{className:"rounded-full bg-muted p-3 mb-4",children:s.jsx(e,{className:"h-6 w-6 text-muted-foreground"})}),s.jsx("h3",{className:"text-lg font-semibold mb-1",children:t}),n&&s.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-sm",children:n}),r&&s.jsxs(z,{onClick:r.onClick,size:"sm",className:"mt-2",children:[r.icon&&s.jsx(r.icon,{className:"h-4 w-4 mr-2"}),r.label]})]})}const Vle=({action:e,children:t,fallback:n,showMessage:r=!0})=>{const{permissions:a,environmentInfo:o}=Pi();return Nt.useMemo(()=>{switch(e){case"flow.create":return a?.canCreateFlows??!1;case"adapter.create":return a?.canCreateAdapters??!1;case"adapter.updateConfig":return a?.canModifyAdapterConfig??!0;case"flow.import":return a?.canImportFlows??!0;case"flow.deploy":return a?.canDeployFlows??!0;case"businessComponent.create":return a?.canCreateBusinessComponents??!1;case"dataStructure.create":return a?.canCreateDataStructures??!1;case"admin.access":return a?.isAdmin??!1;default:return!0}},[a,e])?s.jsx(s.Fragment,{children:t}):n?s.jsx(s.Fragment,{children:n}):r?s.jsxs(We,{variant:"destructive",children:[s.jsx(ho,{className:"h-4 w-4"}),s.jsxs(ze,{children:["This action is not available in ",o?.displayName||"this"," environment.",o?.type!=="DEVELOPMENT"&&s.jsx("span",{className:"block mt-1 text-sm",children:"Only available in development environment."})]})]}):null},Ule=()=>{const[e,t]=h.useState([]),[n,r]=h.useState(!0),[a,o]=h.useState(!1),[i,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState({name:"",description:"",contactEmail:"",contactPhone:""}),{toast:p}=_e(),{permissions:g}=Pi();h.useEffect(()=>{x()},[]);const x=async()=>{try{const N=await Rr.getAllBusinessComponents();if(console.log("BusinessComponents - API response:",N),N.success&&N.data){const b=Array.isArray(N.data)?N.data:[];console.log("BusinessComponents - Setting components:",b),t(b)}else p({title:"Error",description:N.error||"Failed to load businessComponents",variant:"destructive"}),t([])}catch(N){console.error("Error loading business components:",N),p({title:"Error",description:"Failed to load businessComponents",variant:"destructive"}),t([])}r(!1)},f=async()=>{if(!u.name.trim()){p({title:"Validation Error",description:"BusinessComponent name is required",variant:"destructive"});return}const N=await Rr.createBusinessComponent(u);N.success&&N.data?(t(b=>[...b,N.data]),o(!1),m({name:"",description:"",contactEmail:"",contactPhone:""}),p({title:"Success",description:"BusinessComponent created successfully"})):p({title:"Error",description:N.error||"Failed to create businessComponent",variant:"destructive"})},w=async()=>{if(!c||!u.name.trim()){p({title:"Validation Error",description:"BusinessComponent name is required",variant:"destructive"});return}const N=await Rr.updateBusinessComponent({id:c.id,...u});N.success&&N.data?(t(b=>b.map(E=>E.id===c.id?N.data:E)),l(!1),d(null),m({name:"",description:"",contactEmail:"",contactPhone:""}),p({title:"Success",description:"BusinessComponent updated successfully"})):p({title:"Error",description:N.error||"Failed to update businessComponent",variant:"destructive"})},y=async N=>{const b=await Rr.deleteBusinessComponent(N.id);b.success?(t(E=>E.filter(S=>S.id!==N.id)),p({title:"Success",description:"BusinessComponent deleted successfully"})):p({title:"Error",description:b.error||"Failed to delete businessComponent",variant:"destructive"})},v=N=>{d(N),m({name:N.name,description:N.description||"",contactEmail:N.contactEmail||"",contactPhone:N.contactPhone||""}),l(!0)},j=()=>{m({name:"",description:"",contactEmail:"",contactPhone:""}),d(null)};return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse space-y-6",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(N=>s.jsx("div",{className:"h-48 bg-muted rounded"},N))})]})}):s.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(wp,{className:"h-8 w-8"}),"BusinessComponent Management"]}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your businessComponents and organizations"})]}),s.jsx(Vle,{action:"businessComponent.create",showMessage:!1,children:s.jsxs(ft,{open:a,onOpenChange:o,children:[s.jsx(rh,{asChild:!0,children:s.jsxs(z,{onClick:()=>j(),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add BusinessComponent"]})}),s.jsxs(mt,{children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Create New BusinessComponent"}),s.jsx(ks,{children:"Add a new businessComponent to your system"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(C,{htmlFor:"name",children:"BusinessComponent Name *"}),s.jsx(U,{id:"name",value:u.name,onChange:N=>m({...u,name:N.target.value}),placeholder:"Enter businessComponent name"})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",value:u.description,onChange:N=>m({...u,description:N.target.value}),placeholder:"Enter businessComponent description",rows:3})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"email",children:"Contact Email"}),s.jsx(U,{id:"email",type:"email",value:u.contactEmail,onChange:N=>m({...u,contactEmail:N.target.value}),placeholder:"contact@example.com"})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"phone",children:"Contact Phone"}),s.jsx(U,{id:"phone",value:u.contactPhone,onChange:N=>m({...u,contactPhone:N.target.value}),placeholder:"+1-555-0123"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(z,{onClick:f,children:"Create BusinessComponent"})]})]})]})]})})]}),e.length===0?s.jsx(Mi,{icon:wp,title:"No businessComponents yet",description:"Get started by adding your first businessComponent to organize your integrations by client.",action:g?.canCreateBusinessComponents?{label:"Add BusinessComponent",onClick:()=>o(!0)}:void 0}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e&&Array.isArray(e)&&e.map(N=>(console.log("Rendering businessComponent:",N),s.jsxs(K,{className:"hover:shadow-lg transition-shadow",children:[s.jsxs(oe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{className:"text-lg",children:N.name}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>v(N),children:s.jsx(ga,{className:"h-4 w-4"})}),s.jsxs(th,{children:[s.jsx(zY,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(Xn,{className:"h-4 w-4"})})}),s.jsxs(Cc,{children:[s.jsxs(Ec,{children:[s.jsx(Pc,{children:"Delete BusinessComponent"}),s.jsxs(Ac,{children:['Are you sure you want to delete "',N.name,'"? This action cannot be undone.']})]}),s.jsxs(Tc,{children:[s.jsx(sh,{children:"Cancel"}),s.jsx(Dc,{onClick:()=>y(N),children:"Delete"})]})]})]})]})]}),N.description&&s.jsx(Ne,{children:N.description})]}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2",children:[N.contactEmail&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Iu,{className:"h-4 w-4"}),N.contactEmail]}),N.contactPhone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(JB,{className:"h-4 w-4"}),N.contactPhone]}),N.createdAt&&s.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["Created: ",new Date(N.createdAt).toLocaleDateString()]})]})})]},N.id)))}),s.jsx(ft,{open:i,onOpenChange:l,children:s.jsxs(mt,{children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Edit BusinessComponent"}),s.jsx(ks,{children:"Update businessComponent information"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(C,{htmlFor:"edit-name",children:"BusinessComponent Name *"}),s.jsx(U,{id:"edit-name",value:u.name,onChange:N=>m({...u,name:N.target.value}),placeholder:"Enter businessComponent name"})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"edit-description",children:"Description"}),s.jsx(Re,{id:"edit-description",value:u.description,onChange:N=>m({...u,description:N.target.value}),placeholder:"Enter businessComponent description",rows:3})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"edit-email",children:"Contact Email"}),s.jsx(U,{id:"edit-email",type:"email",value:u.contactEmail,onChange:N=>m({...u,contactEmail:N.target.value}),placeholder:"contact@example.com"})]}),s.jsxs("div",{children:[s.jsx(C,{htmlFor:"edit-phone",children:"Contact Phone"}),s.jsx(U,{id:"edit-phone",value:u.contactPhone,onChange:N=>m({...u,contactPhone:N.target.value}),placeholder:"+1-555-0123"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(z,{onClick:w,children:"Update BusinessComponent"})]})]})]})})]})};class Ble{websocket=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=3e3;messageListeners=[];statsListeners=[];async getMessages(t){console.log("[messageService] getMessages called with filters:",t),console.trace("getMessages call stack");const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&(Array.isArray(o)?n.append(a,o.join(",")):n.append(a,o.toString()))});const r=`/messages${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async getMessage(t){return G.get(`/messages/${t}`)}async getMessageStats(t){console.log("[messageService] getMessageStats called with filters:",t),console.trace("getMessageStats call stack");const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&(Array.isArray(o)?n.append(a,o.join(",")):n.append(a,o.toString()))});const r=`/messages/stats${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async reprocessMessage(t){return G.post(`/messages/${t}/reprocess`)}async getBusinessComponentMessages(t,n){const r=new URLSearchParams;n&&Object.entries(n).forEach(([o,i])=>{i!==void 0&&(Array.isArray(i)?r.append(o,i.join(",")):r.append(o,i.toString()))});const a=`/business-components/${t}/messages${r.toString()?`?${r.toString()}`:""}`;return G.get(a)}connectWebSocket(t){if(this.websocket?.readyState===WebSocket.OPEN)return;const n=window.location.protocol==="https:"?"wss:":"ws:",r=window.location.hostname,a=window.location.port||"8080",o=`${n}//${r}:${a}`,i=new URLSearchParams;t&&i.append("businessComponentId",t);const l=i.toString(),c=`${o}/ws/messages${l?`?${l}`:""}`;try{this.websocket=new WebSocket(c),this.websocket.onopen=()=>{console.log("WebSocket connected for message monitoring"),this.reconnectAttempts=0},this.websocket.onmessage=d=>{try{const u=JSON.parse(d.data);u.type==="message_update"?this.messageListeners.forEach(m=>m(u.message)):u.type==="stats_update"&&this.statsListeners.forEach(m=>m(u.stats))}catch(u){console.error("Error parsing WebSocket message:",u)}},this.websocket.onclose=()=>{console.log("WebSocket connection closed"),this.attemptReconnect(t)},this.websocket.onerror=d=>{console.error("WebSocket error:",d)}}catch(d){console.error("Failed to create WebSocket connection:",d)}}attemptReconnect(t){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log(`Attempting to reconnect WebSocket (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connectWebSocket(t)},this.reconnectInterval*this.reconnectAttempts)):console.error("Max reconnection attempts reached")}disconnectWebSocket(){this.websocket&&(this.websocket.close(),this.websocket=null),this.messageListeners=[],this.statsListeners=[],this.reconnectAttempts=0}onMessageUpdate(t){return this.messageListeners.push(t),()=>{const n=this.messageListeners.indexOf(t);n>-1&&this.messageListeners.splice(n,1)}}onStatsUpdate(t){return this.statsListeners.push(t),()=>{const n=this.statsListeners.indexOf(t);n>-1&&this.statsListeners.splice(n,1)}}sendCommand(t,n){this.websocket?.readyState===WebSocket.OPEN&&this.websocket.send(JSON.stringify({command:t,data:n}))}}const sa=new Ble,Hle=e=>{const[t,n]=h.useState([]),[r,a]=h.useState(null),[o,i]=h.useState(!1),[l,c]=h.useState(!1),{toast:d}=_e(),u=h.useCallback(async w=>{if(console.log("[useMessageMonitoring] loadMessages called with filters:",w),console.trace("loadMessages call stack"),!w||Object.keys(w).length===0){console.warn("[useMessageMonitoring] Skipping loadMessages - no filters provided");return}i(!0);try{const y=e?await sa.getBusinessComponentMessages(e,w):await sa.getMessages(w);y.success&&y.data?(console.log("[useMessageMonitoring] Messages data:",y.data.messages),y.data.messages&&y.data.messages.length>0&&(console.log("[useMessageMonitoring] First message:",y.data.messages[0]),console.log("[useMessageMonitoring] First message timestamp:",y.data.messages[0].timestamp),console.log("[useMessageMonitoring] Timestamp type:",typeof y.data.messages[0].timestamp)),n(y.data.messages||[])):n([])}catch{d({title:"Error",description:"Failed to load messages",variant:"destructive"})}finally{i(!1)}},[e,d]),m=h.useCallback(async w=>{if(!w||Object.keys(w).length===0){console.warn("[useMessageMonitoring] Skipping loadStats - no filters provided");return}try{const y=e?{...w,source:e}:w,v=await sa.getMessageStats(y);v.success&&v.data&&a(v.data)}catch(y){console.error("Failed to load message stats:",y)}},[e]);h.useEffect(()=>{sa.connectWebSocket(e),c(!0);const w=sa.onMessageUpdate(y=>{n(v=>{const j=v.findIndex(N=>N.id===y.id);if(j>=0){const N=[...v];return N[j]=y,N}else return[y,...v]}),y.status==="failed"&&d({title:"Message Failed",description:`Message ${y.id} failed processing`,variant:"destructive"})});return()=>{w(),sa.disconnectWebSocket(),c(!1)}},[e,u,m,d]);const p=h.useCallback(async w=>{try{const y=await sa.reprocessMessage(w);if(y.success)d({title:"Success",description:"Message queued for reprocessing"});else throw new Error(y.error||"Failed to reprocess message")}catch{d({title:"Error",description:"Failed to reprocess message",variant:"destructive"})}},[d]),g=h.useCallback(w=>{console.log("[useMessageMonitoring] refreshData called with filters:",w),u(w),m(w)},[u,m]),x=h.useCallback(w=>{sa.sendCommand("subscribe",{messageType:w})},[]),f=h.useCallback(w=>{sa.sendCommand("unsubscribe",{messageType:w})},[]);return{messages:t,stats:r,loading:o,connected:l,loadMessages:u,loadStats:m,reprocessMessage:p,refreshData:g,subscribeToMessageType:x,unsubscribeFromMessageType:f}},qle=({messages:e,stats:t,isBusinessComponentSelected:n,onStatusFilter:r,statusFilter:a,loading:o=!1})=>{const i=e||[],l=t?.successful??i.filter(f=>f.status==="success").length,c=t?.processing??i.filter(f=>f.status==="processing").length,d=t?.failed??i.filter(f=>f.status==="failed").length,u=t?.total??i.length,m=t?.successRate??(u>0?l/u*100:0),p=t?.avgProcessingTime??(()=>{const f=i.filter(w=>w.status!=="processing"&&w.processingTime!=="-");return f.length>0?Math.round(f.reduce((w,y)=>{const v=parseFloat(y.processingTime.replace(/[^\d.]/g,""));return w+(isNaN(v)?0:v)},0)/f.length):0})(),g=()=>n?`of ${u} business component messages`:"across all messages",x=f=>{r&&r(f)};return o?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Array.from({length:5}).map((f,w)=>s.jsxs(K,{className:"bg-gradient-secondary border-border/50",children:[s.jsx(oe,{className:"pb-2",children:s.jsx(nt,{className:"h-4 w-32"})}),s.jsxs(re,{children:[s.jsx(nt,{className:"h-8 w-16 mb-2"}),s.jsx(nt,{className:"h-3 w-24"})]})]},w))}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs(K,{className:`bg-gradient-secondary border-border/50 cursor-pointer transition-all hover-scale animate-scale-in ${a==="success"?"ring-2 ring-success":""}`,onClick:()=>x("success"),children:[s.jsx(oe,{className:"pb-2",children:s.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Successful Messages"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-success",children:String(l)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g()})]})]}),s.jsxs(K,{className:`bg-gradient-secondary border-border/50 cursor-pointer transition-all hover-scale animate-scale-in ${a==="processing"?"ring-2 ring-warning":""}`,onClick:()=>x("processing"),children:[s.jsx(oe,{className:"pb-2",children:s.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Processing Messages"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-warning",children:String(c)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g()})]})]}),s.jsxs(K,{className:`bg-gradient-secondary border-border/50 cursor-pointer transition-all hover-scale animate-scale-in ${a==="failed"?"ring-2 ring-destructive":""}`,onClick:()=>x("failed"),children:[s.jsx(oe,{className:"pb-2",children:s.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Failed Messages"})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold text-destructive",children:String(d)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g()})]})]}),s.jsxs(K,{className:"bg-gradient-secondary border-border/50 animate-scale-in",children:[s.jsx(oe,{className:"pb-2",children:s.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"})}),s.jsxs(re,{children:[s.jsxs("div",{className:"text-2xl font-bold text-success",children:[m?m.toFixed(1):"0","%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g()})]})]}),s.jsxs(K,{className:"bg-gradient-secondary border-border/50 animate-scale-in",children:[s.jsx(oe,{className:"pb-2",children:s.jsx(ie,{className:"text-sm font-medium text-muted-foreground",children:"Avg Processing"})}),s.jsxs(re,{children:[s.jsxs("div",{className:"text-2xl font-bold text-info",children:[String(p),"ms"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:g()})]})]})]})},Wle=(e,t)=>e==="today"?`${t} messages today`:e==="yesterday"?`${t} messages yesterday`:e==="last-7-days"?`${t} messages in last 7 days`:e==="last-30-days"?`${t} messages in last 30 days`:`${t} messages total`,zle=({value:e,onValueChange:t})=>{const n=r=>{console.log("[TimeFilterSelect] Value changing from",e,"to",r),t(r)};return s.jsxs(se,{value:e,onValueChange:n,children:[s.jsx(ee,{className:"w-48",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"today",children:"Today"}),s.jsx(F,{value:"today-00",children:"Today 00:00 - 00:59"}),s.jsx(F,{value:"today-01",children:"Today 01:00 - 01:59"}),s.jsx(F,{value:"today-02",children:"Today 02:00 - 02:59"}),s.jsx(F,{value:"today-03",children:"Today 03:00 - 03:59"}),s.jsx(F,{value:"today-04",children:"Today 04:00 - 04:59"}),s.jsx(F,{value:"today-05",children:"Today 05:00 - 05:59"}),s.jsx(F,{value:"today-06",children:"Today 06:00 - 06:59"}),s.jsx(F,{value:"today-07",children:"Today 07:00 - 07:59"}),s.jsx(F,{value:"today-08",children:"Today 08:00 - 08:59"}),s.jsx(F,{value:"today-09",children:"Today 09:00 - 09:59"}),s.jsx(F,{value:"today-10",children:"Today 10:00 - 10:59"}),s.jsx(F,{value:"today-11",children:"Today 11:00 - 11:59"}),s.jsx(F,{value:"today-12",children:"Today 12:00 - 12:59"}),s.jsx(F,{value:"today-13",children:"Today 13:00 - 13:59"}),s.jsx(F,{value:"today-14",children:"Today 14:00 - 14:59"}),s.jsx(F,{value:"today-15",children:"Today 15:00 - 15:59"}),s.jsx(F,{value:"today-16",children:"Today 16:00 - 16:59"}),s.jsx(F,{value:"today-17",children:"Today 17:00 - 17:59"}),s.jsx(F,{value:"today-18",children:"Today 18:00 - 18:59"}),s.jsx(F,{value:"today-19",children:"Today 19:00 - 19:59"}),s.jsx(F,{value:"today-20",children:"Today 20:00 - 20:59"}),s.jsx(F,{value:"today-21",children:"Today 21:00 - 21:59"}),s.jsx(F,{value:"today-22",children:"Today 22:00 - 22:59"}),s.jsx(F,{value:"today-23",children:"Today 23:00 - 23:59"}),s.jsx(F,{value:"yesterday",children:"Yesterday"}),s.jsx(F,{value:"last-7-days",children:"Past 7 Days"}),s.jsx(F,{value:"last-30-days",children:"Past 30 Days"}),s.jsx(F,{value:"all",children:"All Messages"})]})]})};var Eb="Collapsible",[Xle,lye]=ln(Eb),[Yle,Tb]=Xle(Eb),u_=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:o,onOpenChange:i,...l}=e,[c=!1,d]=qn({prop:r,defaultProp:a,onChange:i});return s.jsx(Yle,{scope:n,disabled:o,contentId:_n(),open:c,onOpenToggle:h.useCallback(()=>d(u=>!u),[d]),children:s.jsx(Fe.div,{"data-state":Ab(c),"data-disabled":o?"":void 0,...l,ref:t})})});u_.displayName=Eb;var h_="CollapsibleTrigger",m_=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=Tb(h_,n);return s.jsx(Fe.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Ab(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ee(e.onClick,a.onOpenToggle)})});m_.displayName=h_;var Pb="CollapsibleContent",p_=h.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Tb(Pb,e.__scopeCollapsible);return s.jsx(ps,{present:n||a.open,children:({present:o})=>s.jsx(Kle,{...r,ref:t,present:o})})});p_.displayName=Pb;var Kle=h.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...o}=e,i=Tb(Pb,n),[l,c]=h.useState(r),d=h.useRef(null),u=Xe(t,d),m=h.useRef(0),p=m.current,g=h.useRef(0),x=g.current,f=i.open||l,w=h.useRef(f),y=h.useRef();return h.useEffect(()=>{const v=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(v)},[]),ms(()=>{const v=d.current;if(v){y.current=y.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const j=v.getBoundingClientRect();m.current=j.height,g.current=j.width,w.current||(v.style.transitionDuration=y.current.transitionDuration,v.style.animationName=y.current.animationName),c(r)}},[i.open,r]),s.jsx(Fe.div,{"data-state":Ab(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!f,...o,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:f&&a})});function Ab(e){return e?"open":"closed"}var Gle=u_;const nw=Gle,f_=m_,g_=p_,Jle=e=>{switch(e){case"success":return s.jsx(rs,{className:"h-4 w-4 text-success"});case"failed":return s.jsx(en,{className:"h-4 w-4 text-destructive"});case"processing":return s.jsx(js,{className:"h-4 w-4 text-warning animate-spin"});default:return s.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})}},Qle=e=>{switch(String(e||"INFO").toUpperCase()){case"SUCCESS":return s.jsx(rs,{className:"h-3 w-3 text-success"});case"ERROR":return s.jsx(en,{className:"h-3 w-3 text-destructive"});case"WARN":return s.jsx(Ps,{className:"h-3 w-3 text-warning"});default:return s.jsx(ds,{className:"h-3 w-3 text-info"})}},Zle=({messageId:e,correlationId:t,isOpen:n,onClose:r})=>{const[a,o]=h.useState([]),[i,l]=h.useState(!0),{toast:c}=_e();h.useEffect(()=>{console.log("[PayloadViewer] Effect triggered - isOpen:",n,"correlationId:",t),n&&t&&d()},[n,t]);const d=async()=>{console.log("[PayloadViewer] Fetching payloads for correlationId:",t),l(!0);try{const x=await ut.get(`/messages/payloads/${t}`);console.log("[PayloadViewer] Response:",x),x&&Array.isArray(x)&&(console.log("[PayloadViewer] Setting payloads data:",x),o(x))}catch(x){console.error("[PayloadViewer] Error fetching payloads:",x),c({title:"Error",description:"Failed to fetch payloads",variant:"destructive"})}finally{l(!1)}},u=async x=>{try{await navigator.clipboard.writeText(x),c({title:"Copied",description:"Payload copied to clipboard"})}catch{c({title:"Error",description:"Failed to copy payload",variant:"destructive"})}},m=(x,f)=>{const w=new Blob([x],{type:"text/plain"}),y=window.URL.createObjectURL(w),v=document.createElement("a");v.href=y,v.download=f,v.click(),window.URL.revokeObjectURL(y)},p=x=>{try{const f=JSON.parse(x);return JSON.stringify(f,null,2)}catch{return x.trim().startsWith("<")?x.replace(/>\s*</g,`>
<`).replace(/(<[^>]+>)([^<]+)(<\/[^>]+>)/g,`$1
  $2
$3`):x}},g=[...a].sort((x,f)=>new Date(x.createdAt).getTime()-new Date(f.createdAt).getTime());return s.jsx(ft,{open:n,onOpenChange:r,children:s.jsxs(mt,{className:"max-w-4xl max-h-[80vh]",children:[s.jsx(gt,{children:s.jsxs(xt,{className:"flex items-center gap-2",children:[s.jsx(R0,{className:"h-5 w-5"}),"Message Payloads"]})}),i?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g.length===0?s.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No payloads available for this message"}):s.jsxs(et,{defaultValue:"0",className:"w-full",children:[s.jsx(Ke,{className:"grid w-full",style:{gridTemplateColumns:`repeat(${g.length}, 1fr)`},children:g.map((x,f)=>{const w=`${x.adapterName} (${x.direction})`,y=x.payloadType;return s.jsx(xe,{value:f.toString(),className:"text-xs px-2",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-medium truncate max-w-[150px]",title:w,children:w}),s.jsx("div",{className:"text-[10px] text-muted-foreground",children:y})]})},f)})}),g.map((x,f)=>s.jsx(ye,{value:f.toString(),className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:x.adapterName}),s.jsxs("div",{className:"text-xs text-muted-foreground space-x-4",children:[s.jsxs("span",{children:[x.payloadType," - ",new Date(x.createdAt).toLocaleString()]}),s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:x.direction})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>u(x.payload),children:[s.jsx(Dr,{className:"h-4 w-4 mr-1"}),"Copy"]}),s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>m(x.payload,`${x.adapterName}-${x.payloadType}-${Date.now()}.txt`),children:[s.jsx(hr,{className:"h-4 w-4 mr-1"}),"Download"]})]})]}),s.jsx(zn,{className:"h-[400px] w-full rounded-md border bg-muted/20 p-4",children:s.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:p(x.payload)})})]})},f))]})]})})},ece=({message:e})=>{const[t,n]=h.useState(!1),[r,a]=h.useState(!1),[o,i]=h.useState(!1),{toast:l}=_e();console.log("[MessageCard] Rendering message:",{id:e.id,timestamp:e.timestamp,timestampType:typeof e.timestamp,logs:e.logs,logsType:typeof e.logs,logsIsArray:Array.isArray(e.logs),firstLog:e.logs&&e.logs[0]?{log:e.logs[0],timestampType:typeof e.logs[0].timestamp,levelType:typeof e.logs[0].level,messageType:typeof e.logs[0].message}:null});const c=async d=>{d.stopPropagation(),a(!0);try{const u=await ut.post(`/messages/${e.id}/reprocess`);l(u?{title:"Success",description:"Message reprocessing initiated"}:{title:"Error",description:u.error||"Failed to reprocess message",variant:"destructive"})}catch{l({title:"Error",description:"Failed to reprocess message",variant:"destructive"})}finally{a(!1)}};return s.jsxs(K,{className:"bg-gradient-secondary border-border/50 hover-scale",children:[s.jsxs(nw,{open:t,onOpenChange:n,children:[s.jsx(f_,{asChild:!0,children:s.jsx(z,{variant:"ghost",className:"w-full p-0 h-auto hover:bg-transparent",children:s.jsx(oe,{className:"w-full",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[Jle(e.status),s.jsxs("div",{className:"text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-foreground",children:e.id}),s.jsx(fe,{variant:"outline",className:"text-xs",children:e.type})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.source," → ",e.target]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 text-right",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"text-muted-foreground",children:(()=>{if(typeof e.timestamp=="string")return e.timestamp;if(e.timestamp&&typeof e.timestamp=="object")try{if(Array.isArray(e.timestamp)){const[d,u,m,p,g,x]=e.timestamp;return`${d}-${String(u).padStart(2,"0")}-${String(m).padStart(2,"0")} ${String(p).padStart(2,"0")}:${String(g).padStart(2,"0")}:${String(x).padStart(2,"0")}`}return JSON.stringify(e.timestamp)}catch(d){return console.error("Error formatting timestamp:",e.timestamp,d),"Invalid timestamp"}return"Unknown time"})()}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.processingTime," • ",e.size]})]}),t?s.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"})]})]})})})}),s.jsx(g_,{children:s.jsx(re,{className:"pt-0",children:s.jsxs("div",{className:"border-t border-border/50 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[s.jsx(bs,{className:"h-4 w-4"}),"Processing Steps (",e.logs?e.logs.length:0,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[s.jsx(R0,{className:"h-4 w-4 mr-1"}),"View Payloads"]}),e.status==="failed"&&s.jsxs(z,{size:"sm",variant:"outline",onClick:c,disabled:r,children:[s.jsx(Tt,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Reprocessing...":"Retry Message"]})]})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.logs&&e.logs.length>0?e.logs.map((d,u)=>(console.log("[MessageCard] Rendering log:",u,d),s.jsxs("div",{className:"flex items-start gap-3 text-xs",children:[Qle(d.level),s.jsx("span",{className:"text-muted-foreground min-w-[120px] font-mono",children:(()=>{try{return d.timestamp?typeof d.timestamp=="string"?d.timestamp.includes(" ")?d.timestamp.split(" ")[1]:d.timestamp.includes("T")?new Date(d.timestamp).toLocaleTimeString():d.timestamp:d.timestamp instanceof Date?d.timestamp.toLocaleTimeString():d.timestamp&&typeof d.timestamp=="object"?JSON.stringify(d.timestamp):"Invalid timestamp":"No timestamp"}catch(m){return console.error("Error formatting log timestamp:",d.timestamp,m),"Invalid timestamp"}})()}),s.jsx("span",{className:"text-foreground",children:String(d.message||"")})]},u))):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No processing steps available"})})]})})})]}),s.jsx(Zle,{messageId:e.id,correlationId:(()=>{console.log("[MessageCard] PayloadViewer props - message:",e),console.log("[MessageCard] message.correlationId:",e.correlationId),console.log("[MessageCard] message.id:",e.id);const d=e.correlationId||e.id;return console.log("[MessageCard] Using correlationId:",d),d})(),isOpen:o,onClose:()=>i(!1)})]})},tce=({messages:e,isBusinessComponentSelected:t,statusFilter:n,loading:r=!1,onTimeFilterChange:a})=>{const[o,i]=h.useState("today"),l=d=>{i(d),a?.(d)};h.useEffect(()=>{a?.(o)},[]),console.log("[MessageList] Received messages:",e),console.log("[MessageList] Messages type:",typeof e),console.log("[MessageList] Is array:",Array.isArray(e)),e&&e.length>0&&(console.log("[MessageList] First message:",e[0]),console.log("[MessageList] First message keys:",Object.keys(e[0])),console.log("[MessageList] First message logs:",e[0].logs),e[0].logs&&e[0].logs.length>0&&(console.log("[MessageList] First log entry:",e[0].logs[0]),console.log("[MessageList] First log type:",typeof e[0].logs[0]),console.log("[MessageList] First log keys:",Object.keys(e[0].logs[0])),console.log("[MessageList] Log timestamp:",e[0].logs[0].timestamp),console.log("[MessageList] Log timestamp type:",typeof e[0].logs[0].timestamp),console.log("[MessageList] Log level:",e[0].logs[0].level),console.log("[MessageList] Log message:",e[0].logs[0].message)));const c=[...e||[]].sort((d,u)=>new Date(u.timestamp).getTime()-new Date(d.timestamp).getTime());return console.log("[MessageList] Filtered messages:",c),console.log("[MessageList] Filtered messages length:",c.length),s.jsxs("div",{className:"space-y-4",children:[s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsxs(oe,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ie,{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(bs,{className:"h-5 w-5"}),"Message History"]}),s.jsx(zle,{value:o,onValueChange:l}),console.log("[MessageList] TimeFilter value:",o,"Type:",typeof o)]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(()=>{const d=Wle(o,e.length);return console.log("[MessageList] Filter description:",d,"Type:",typeof d),d})()})]})}),s.jsxs("div",{className:"space-y-3",children:[console.log("[MessageList] About to render messages, loading:",r,"filteredMessages.length:",c.length),r?Array.from({length:5}).map((d,u)=>s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(nt,{className:"h-6 w-6 rounded-full"}),s.jsxs("div",{children:[s.jsx(nt,{className:"h-4 w-32 mb-2"}),s.jsx(nt,{className:"h-3 w-48"})]})]}),s.jsxs("div",{children:[s.jsx(nt,{className:"h-3 w-24 mb-1"}),s.jsx(nt,{className:"h-3 w-16"})]})]})})},u)):c.length===0?s.jsx(Mi,{icon:Ds,title:"No Messages Found",description:n?`No ${String(n)} messages found for the selected time period.`:"No messages found for the selected time period."}):c.map(d=>(console.log("[MessageList] Rendering message:",d.id,"Type:",typeof d),s.jsx(ece,{message:d},d.id)))]})]})},sce=({selectedBusinessComponent:e,businessComponents:t,loading:n,onBusinessComponentChange:r})=>s.jsxs(K,{className:"animate-scale-in",children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(_s,{className:"h-5 w-5"}),"Business Component Filter"]}),s.jsx(Ne,{children:"Filter channels by business component"})]}),s.jsx(re,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"businessComponent",children:"Business Component"}),s.jsxs(se,{value:e?.id||"",onValueChange:a=>{const o=t.find(i=>i.id===a)||null;r(o)},disabled:n,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a business component to filter channels"})}),s.jsx(te,{children:t.map(a=>s.jsx(F,{value:a.id,children:a.name},a.id))})]})]})})]}),nce=()=>{pg("Messages"),fg("Track and monitor all integration messages, view processing status, and analyze message flow through your Integrix Flow Bridge system.");const[e,t]=h.useState(null),[n,r]=h.useState(null),[a,o]=h.useState("today"),{businessComponents:i,loading:l}=To(),{messages:c,stats:d,loading:u,connected:m,refreshData:p,loadStats:g}=Hle(e?.id),x=c,f=()=>{const j={};n&&(j.status=[n]);const N=v(a);N.dateFrom&&(j.dateFrom=N.dateFrom,j.dateTo=N.dateTo),p(j)},w=j=>{console.log("[Messages] handleStatusFilter called with:",j,"current:",n),r(n===j?null:j)},y=j=>{t(j),r(null)},v=j=>{console.log("[Messages] getDateRangeFromTimeFilter called with:",j);const N=new Date,b=new Date(N.getFullYear(),N.getMonth(),N.getDate());let E={};if(j.startsWith("today-")){const S=parseInt(j.substring(6),10),P=new Date(b);P.setHours(S,0,0,0);const A=new Date(b);A.setHours(S,59,59,999),E={dateFrom:P.toISOString(),dateTo:A.toISOString()}}else switch(j){case"today":E={dateFrom:b.toISOString(),dateTo:N.toISOString()};break;case"yesterday":const S=new Date(b);S.setDate(S.getDate()-1),E={dateFrom:S.toISOString(),dateTo:b.toISOString()};break;case"last-7-days":const P=new Date(b);P.setDate(P.getDate()-7),E={dateFrom:P.toISOString(),dateTo:N.toISOString()};break;case"last-30-days":const A=new Date(b);A.setDate(A.getDate()-30),E={dateFrom:A.toISOString(),dateTo:N.toISOString()};break;case"all":default:E={}}return console.log("[Messages] Date range result:",E),E};return h.useEffect(()=>{console.log("[Messages] useEffect triggered - statusFilter:",n,"timeFilter:",a);const j={};n&&(j.status=[n]);const N=v(a);console.log("[Messages] Time filter:",a,"Date range:",N),N.dateFrom&&(j.dateFrom=N.dateFrom,j.dateTo=N.dateTo),console.log("[Messages] Calling refreshData with filters:",j),p(j)},[n,a,p]),s.jsxs(kc,{children:[s.jsx(Mc,{title:"Message Monitor",description:"Track and analyze integration message flows",icon:s.jsx(Xs,{}),actions:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(fe,{variant:m?"success":"destructive",className:"flex items-center gap-1",children:[m?s.jsx(r8,{className:"h-3 w-3"}):s.jsx(n8,{className:"h-3 w-3"}),m?"Live":"Disconnected"]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:f,disabled:u,children:[s.jsx(Tt,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]})]})}),s.jsx(qle,{messages:x,stats:d,isBusinessComponentSelected:!!e,onStatusFilter:w,statusFilter:n,loading:u}),s.jsx(sce,{selectedBusinessComponent:e,businessComponents:i,loading:l,onBusinessComponentChange:y}),s.jsx(tce,{messages:x,isBusinessComponentSelected:!!e,statusFilter:n,loading:u,onTimeFilterChange:j=>{console.log("[Messages] Time filter changed from",a,"to",j),o(j)}})]})};function qe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function on(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Is(e,t){const n=qe(e);return isNaN(t)?on(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function vr(e,t){const n=qe(e);if(isNaN(t))return on(e,NaN);if(!t)return n;const r=n.getDate(),a=on(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const o=a.getDate();return r>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const Db=6048e5,rce=864e5,cm=43200,kT=1440;let ace={};function Fc(){return ace}function zr(e,t){const n=Fc(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=qe(e),o=a.getDay(),i=(o<r?7:0)+o-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function wi(e){return zr(e,{weekStartsOn:1})}function x_(e){const t=qe(e),n=t.getFullYear(),r=on(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=wi(r),o=on(e,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=wi(o);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function tc(e){const t=qe(e);return t.setHours(0,0,0,0),t}function sc(e){const t=qe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Or(e,t){const n=tc(e),r=tc(t),a=+n-sc(n),o=+r-sc(r);return Math.round((a-o)/rce)}function oce(e){const t=x_(e),n=on(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),wi(n)}function rw(e,t){const n=t*7;return Is(e,n)}function ice(e,t){return vr(e,t*12)}function lce(e){let t;return e.forEach(function(n){const r=qe(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function cce(e){let t;return e.forEach(n=>{const r=qe(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function qm(e,t){const n=qe(e),r=qe(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function dce(e){return on(e,Date.now())}function Ks(e,t){const n=tc(e),r=tc(t);return+n==+r}function kb(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function uce(e){if(!kb(e)&&typeof e!="number")return!1;const t=qe(e);return!isNaN(Number(t))}function nc(e,t){const n=qe(e),r=qe(t),a=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return a*12+o}function hce(e,t,n){const r=zr(e,n),a=zr(t,n),o=+r-sc(r),i=+a-sc(a);return Math.round((o-i)/Db)}function mce(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function pce(e,t){return+qe(e)-+qe(t)}function fce(e){const t=qe(e);return t.setHours(23,59,59,999),t}function $g(e){const t=qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function gce(e){const t=qe(e);return+fce(t)==+$g(t)}function xce(e,t){const n=qe(e),r=qe(t),a=qm(n,r),o=Math.abs(nc(n,r));let i;if(o<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*o);let l=qm(n,r)===-a;gce(qe(e))&&o===1&&qm(e,r)===1&&(l=!1),i=a*(o-Number(l))}return i===0?0:i}function vce(e,t,n){const r=pce(e,t)/1e3;return mce(n?.roundingMethod)(r)}function an(e){const t=qe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function v_(e){const t=qe(e),n=on(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Mb(e,t){const n=Fc(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=qe(e),o=a.getDay(),i=(o<r?-7:0)+6-(o-r);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}function y_(e){return Mb(e,{weekStartsOn:1})}const yce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jce=(e,t,n)=>{let r;const a=yce[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function yv(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const wce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sce={date:yv({formats:wce,defaultWidth:"full"}),time:yv({formats:Nce,defaultWidth:"full"}),dateTime:yv({formats:bce,defaultWidth:"full"})},Cce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ece=(e,t,n,r)=>Cce[e];function ed(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n?.width?String(n.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n?.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const Tce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Pce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ace={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Dce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rce=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Fce={ordinalNumber:Rce,era:ed({values:Tce,defaultWidth:"wide"}),quarter:ed({values:Pce,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ed({values:Ace,defaultWidth:"wide"}),day:ed({values:Dce,defaultWidth:"wide"}),dayPeriod:ed({values:kce,defaultWidth:"wide",formattingValues:Mce,defaultFormattingWidth:"wide"})};function td(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Ice(l,m=>m.test(i)):Oce(l,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function Oce(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ice(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Lce(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],o=t.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(a.length);return{value:i,rest:l}}}const $ce=/^(\d+)(th|st|nd|rd)?/i,_ce=/\d+/i,Vce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uce={any:[/^b/i,/^(a|c)/i]},Bce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hce={any:[/1/i,/2/i,/3/i,/4/i]},qce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Yce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Kce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gce={ordinalNumber:Lce({matchPattern:$ce,parsePattern:_ce,valueCallback:e=>parseInt(e,10)}),era:td({matchPatterns:Vce,defaultMatchWidth:"wide",parsePatterns:Uce,defaultParseWidth:"any"}),quarter:td({matchPatterns:Bce,defaultMatchWidth:"wide",parsePatterns:Hce,defaultParseWidth:"any",valueCallback:e=>e+1}),month:td({matchPatterns:qce,defaultMatchWidth:"wide",parsePatterns:Wce,defaultParseWidth:"any"}),day:td({matchPatterns:zce,defaultMatchWidth:"wide",parsePatterns:Xce,defaultParseWidth:"any"}),dayPeriod:td({matchPatterns:Yce,defaultMatchWidth:"any",parsePatterns:Kce,defaultParseWidth:"any"})},Rb={code:"en-US",formatDistance:jce,formatLong:Sce,formatRelative:Ece,localize:Fce,match:Gce,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jce(e){const t=qe(e);return Or(t,v_(t))+1}function j_(e){const t=qe(e),n=+wi(t)-+oce(t);return Math.round(n/Db)+1}function w_(e,t){const n=qe(e),r=n.getFullYear(),a=Fc(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=on(e,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const l=zr(i,t),c=on(e,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const d=zr(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Qce(e,t){const n=Fc(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=w_(e,t),o=on(e,0);return o.setFullYear(a,0,r),o.setHours(0,0,0,0),zr(o,t)}function N_(e,t){const n=qe(e),r=+zr(n,t)-+Qce(n,t);return Math.round(r/Db)+1}function wt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const La={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return wt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):wt(n+1,2)},d(e,t){return wt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return wt(e.getHours()%12||12,t.length)},H(e,t){return wt(e.getHours(),t.length)},m(e,t){return wt(e.getMinutes(),t.length)},s(e,t){return wt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return wt(a,t.length)}},Hi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return La.y(e,t)},Y:function(e,t,n,r){const a=w_(e,r),o=a>0?a:1-a;if(t==="YY"){const i=o%100;return wt(i,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):wt(o,t.length)},R:function(e,t){const n=x_(e);return wt(n,t.length)},u:function(e,t){const n=e.getFullYear();return wt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return wt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return wt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return La.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return wt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=N_(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):wt(a,t.length)},I:function(e,t,n){const r=j_(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):wt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):La.d(e,t)},D:function(e,t,n){const r=Jce(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return wt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return wt(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return wt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Hi.noon:r===0?a=Hi.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Hi.evening:r>=12?a=Hi.afternoon:r>=4?a=Hi.morning:a=Hi.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return La.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):La.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):wt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):La.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):La.s(e,t)},S:function(e,t){return La.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return FT(r);case"XXXX":case"XX":return Oo(r);case"XXXXX":case"XXX":default:return Oo(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return FT(r);case"xxxx":case"xx":return Oo(r);case"xxxxx":case"xxx":default:return Oo(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+RT(r,":");case"OOOO":default:return"GMT"+Oo(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+RT(r,":");case"zzzz":default:return"GMT"+Oo(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return wt(r,t.length)},T:function(e,t,n){const r=e.getTime();return wt(r,t.length)}};function RT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return o===0?n+String(a):n+String(a)+t+wt(o,2)}function FT(e,t){return e%60===0?(e>0?"-":"+")+wt(Math.abs(e)/60,2):Oo(e,t)}function Oo(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=wt(Math.trunc(r/60),2),o=wt(r%60,2);return n+a+t+o}const OT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},b_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Zce=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return OT(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",OT(r,t)).replace("{{time}}",b_(a,t))},ede={p:b_,P:Zce},tde=/^D+$/,sde=/^Y+$/,nde=["D","DD","YY","YYYY"];function rde(e){return tde.test(e)}function ade(e){return sde.test(e)}function ode(e,t,n){const r=ide(e,t,n);if(console.warn(r),nde.includes(e))throw new RangeError(r)}function ide(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dde=/^'([^]*?)'?$/,ude=/''/g,hde=/[a-zA-Z]/;function ja(e,t,n){const r=Fc(),a=n?.locale??r.locale??Rb,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=qe(e);if(!uce(l))throw new RangeError("Invalid time value");let c=t.match(cde).map(u=>{const m=u[0];if(m==="p"||m==="P"){const p=ede[m];return p(u,a.formatLong)}return u}).join("").match(lde).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const m=u[0];if(m==="'")return{isToken:!1,value:mde(u)};if(MT[m])return{isToken:!0,value:u};if(m.match(hde))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:u}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return c.map(u=>{if(!u.isToken)return u.value;const m=u.value;(!n?.useAdditionalWeekYearTokens&&ade(m)||!n?.useAdditionalDayOfYearTokens&&rde(m))&&ode(m,t,String(e));const p=MT[m[0]];return p(l,m,a.localize,d)}).join("")}function mde(e){const t=e.match(dde);return t?t[1].replace(ude,"'"):e}function pde(e,t,n){const r=Fc(),a=n?.locale??r.locale??Rb,o=2520,i=qm(e,t);if(isNaN(i))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:i});let c,d;i>0?(c=qe(t),d=qe(e)):(c=qe(e),d=qe(t));const u=vce(d,c),m=(sc(d)-sc(c))/1e3,p=Math.round((u-m)/60);let g;if(p<2)return n?.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):p===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",p,l);if(p<45)return a.formatDistance("xMinutes",p,l);if(p<90)return a.formatDistance("aboutXHours",1,l);if(p<kT){const x=Math.round(p/60);return a.formatDistance("aboutXHours",x,l)}else{if(p<o)return a.formatDistance("xDays",1,l);if(p<cm){const x=Math.round(p/kT);return a.formatDistance("xDays",x,l)}else if(p<cm*2)return g=Math.round(p/cm),a.formatDistance("aboutXMonths",g,l)}if(g=xce(d,c),g<12){const x=Math.round(p/cm);return a.formatDistance("xMonths",x,l)}else{const x=g%12,f=Math.trunc(g/12);return x<3?a.formatDistance("aboutXYears",f,l):x<9?a.formatDistance("overXYears",f,l):a.formatDistance("almostXYears",f+1,l)}}function fde(e,t){return pde(e,dce(e),t)}function gde(e){const t=qe(e),n=t.getFullYear(),r=t.getMonth(),a=on(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function xde(e){return Math.trunc(+qe(e)/1e3)}function vde(e){const t=qe(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function yde(e,t){return hce(vde(e),an(e),t)+1}function aw(e,t){const n=qe(e),r=qe(t);return n.getTime()>r.getTime()}function S_(e,t){const n=qe(e),r=qe(t);return+n<+r}function Fb(e,t){const n=qe(e),r=qe(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function jde(e,t){const n=qe(e),r=qe(t);return n.getFullYear()===r.getFullYear()}function jv(e,t){return Is(e,-t)}function wv(e,t){const n=qe(e),r=n.getFullYear(),a=n.getDate(),o=on(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const i=gde(o);return n.setMonth(t,Math.min(a,i)),n}function IT(e,t){const n=qe(e);return isNaN(+n)?on(e,NaN):(n.setFullYear(t),n)}const wde=({adapterId:e,adapterName:t,logs:n,loading:r=!1,onRefresh:a,onExport:o,realTimeEnabled:i=!1})=>{const[l,c]=h.useState(""),[d,u]=h.useState("all"),[m,p]=h.useState(new Set),[g,x]=h.useState([]);console.log("[AdapterLogViewer] Props:",{adapterId:e,adapterName:t,logs:n,loading:r}),h.useEffect(()=>{console.log("[AdapterLogViewer] Effect running - logs:",n,"searchTerm:",l,"levelFilter:",d);let b=n;l&&(b=b.filter(E=>E.message.toLowerCase().includes(l.toLowerCase())||E.adapterName?.toLowerCase().includes(l.toLowerCase())||E.correlationId?.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(b=b.filter(E=>E.level===d)),console.log("[AdapterLogViewer] Filtered logs:",b),x(b)},[n,l,d]);const f=b=>{switch(b){case"error":return s.jsx(yt,{className:"h-4 w-4 text-destructive"});case"warn":return s.jsx(Ps,{className:"h-4 w-4 text-warning"});case"info":return s.jsx(ds,{className:"h-4 w-4 text-info"});case"debug":return s.jsx(kB,{className:"h-4 w-4 text-muted-foreground"});default:return s.jsx(ds,{className:"h-4 w-4 text-info"})}},w=b=>{switch(b){case"error":return"destructive";case"warn":return"secondary";case"info":return"default";case"debug":return"outline";default:return"default"}},y=b=>{p(E=>{const S=new Set(E);return S.has(b)?S.delete(b):S.add(b),S})},v=b=>{const E=new Date(b);return{time:E.toLocaleTimeString(),relative:fde(E,{addSuffix:!0})}},N=(()=>{const b={error:0,warn:0,info:0,debug:0};return n.forEach(E=>b[E.level]++),b})();return s.jsxs(K,{className:"bg-gradient-secondary border-border/50",children:[s.jsxs(oe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-5 w-5"}),"Channel Logs",i&&s.jsx(fe,{variant:"secondary",className:"animate-pulse",children:"Live"})]}),s.jsxs(Ne,{children:["Real-time activity and execution logs for ",t||"adapter"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[o&&s.jsxs(z,{variant:"outline",size:"sm",onClick:o,children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export"]}),a&&s.jsxs(z,{variant:"outline",size:"sm",onClick:a,disabled:r,children:[s.jsx(Tt,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]})]}),s.jsx("div",{className:"flex items-center gap-4 pt-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(fe,{variant:"destructive",className:"text-xs",children:[N.error," Errors"]}),s.jsxs(fe,{variant:"secondary",className:"text-xs",children:[N.warn," Warnings"]}),s.jsxs(fe,{variant:"default",className:"text-xs",children:[N.info," Info"]}),s.jsxs(fe,{variant:"outline",className:"text-xs",children:[N.debug," Debug"]})]})}),s.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search logs...",value:l,onChange:b=>c(b.target.value),className:"pl-10"})]})}),s.jsxs(se,{value:d,onValueChange:b=>u(b),children:[s.jsxs(ee,{className:"w-32",children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),s.jsx(ne,{})]}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Levels"}),s.jsx(F,{value:"error",children:"Error"}),s.jsx(F,{value:"warn",children:"Warning"}),s.jsx(F,{value:"info",children:"Info"}),s.jsx(F,{value:"debug",children:"Debug"})]})]})]})]}),s.jsx(re,{children:s.jsx(zn,{className:"h-96",children:s.jsx("div",{className:"space-y-2",children:g.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:l||d!=="all"?"No logs match the current filters":"No logs available"}):g.map(b=>{const E=m.has(b.id),S=v(b.timestamp);return s.jsxs("div",{className:"border border-border/50 rounded-lg p-3 bg-background/50",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[f(b.level),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(fe,{variant:w(b.level),className:"text-xs",children:(b.level||"info").toUpperCase()}),b.adapterName&&s.jsx(fe,{variant:"outline",className:"text-xs",children:b.adapterName}),b.correlationId&&s.jsx("code",{className:"text-xs text-muted-foreground bg-muted px-1 rounded",children:b.correlationId}),b.duration&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:[b.duration,"ms"]})]}),s.jsx("p",{className:"text-sm text-foreground mb-1",children:b.message}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsx("span",{children:S.time}),s.jsx("span",{children:S.relative})]})]})]}),b.details&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>y(b.id),className:"ml-2",children:E?s.jsx(ur,{className:"h-4 w-4"}):s.jsx(Cn,{className:"h-4 w-4"})})]}),E&&b.details&&s.jsxs(s.Fragment,{children:[s.jsx(pt,{className:"my-2"}),s.jsx("div",{className:"bg-muted/50 rounded p-2",children:b.details.processingSteps&&Array.isArray(b.details.processingSteps)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Processing Steps:"}),b.details.processingSteps.map((P,A)=>s.jsx("div",{className:"border-l-2 border-border/50 pl-3 py-1",children:s.jsxs("div",{className:"flex items-start gap-2",children:[P.level==="ERROR"&&s.jsx(yt,{className:"h-3 w-3 text-destructive mt-0.5"}),P.level==="WARN"&&s.jsx(Ps,{className:"h-3 w-3 text-warning mt-0.5"}),P.level==="INFO"&&s.jsx(ds,{className:"h-3 w-3 text-info mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-xs font-medium",children:P.step}),P.details&&s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:P.details}),P.timestamp&&s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:new Date(P.timestamp).toLocaleTimeString()})]})]})},A))]}):s.jsx("pre",{className:"text-xs overflow-x-auto",children:typeof b.details=="string"?b.details:JSON.stringify(b.details,null,2)})})]})]},b.id)})})})})]})};function Nde({adapter:e,open:t,onOpenChange:n,onSave:r}){_e();const[a,o]=h.useState("retries"),[i,l]=h.useState(null),[c,d]=h.useState(!0),[u,m]=h.useState(!0),[p,g]=h.useState("3"),[x,f]=h.useState("30"),[w,y]=h.useState("seconds"),[v,j]=h.useState("daily"),[N,b]=h.useState("08:00"),[E,S]=h.useState("18:00"),[P,A]=h.useState(["mon","tue","wed","thu","fri"]),[L,R]=h.useState("1"),[I,V]=h.useState("1"),[O,k]=h.useState("1"),[T,D]=h.useState({});h.useEffect(()=>{t&&M()},[t]);const M=async()=>{try{const $=await ut.get("/system-settings/global-retry");l($),c&&(m($.enabled),g(String($.maxRetries)),f(String($.retryInterval)),y($.retryIntervalUnit))}catch($){console.error("Error fetching global retry settings:",$)}};h.useEffect(()=>{i&&c&&(m(i.enabled),g(String(i.maxRetries)),f(String(i.retryInterval)),y(i.retryIntervalUnit))},[c,i]);const _=()=>{const $={retries:{useGlobalSettings:c,enabled:u,maxRetries:parseInt(p),retryInterval:parseInt(x),retryIntervalUnit:w},schedule:{type:v,startTime:N,endTime:E,days:P,monthlyDay:parseInt(L),yearlyMonth:parseInt(I),yearlyDay:parseInt(O)},runtime:T};r?.($),n(!1)},H=$=>{A(B=>B.includes($)?B.filter(W=>W!==$):[...B,$])};return s.jsx(ft,{open:t,onOpenChange:n,children:s.jsxs(mt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsx(gt,{children:s.jsxs(xt,{children:["Adapter Settings - ",e.name]})}),s.jsxs(et,{value:a,onValueChange:o,className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsxs(xe,{value:"retries",className:"flex items-center gap-2",children:[s.jsx(hk,{className:"h-4 w-4"}),"Retries"]}),s.jsxs(xe,{value:"schedule",className:"flex items-center gap-2",children:[s.jsx(qy,{className:"h-4 w-4"}),"Planned Schedule"]}),s.jsxs(xe,{value:"runtime",className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-4 w-4"}),"Runtime Schedule"]})]}),s.jsx(ye,{value:"retries",className:"space-y-4 mt-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Retry Configuration"}),s.jsx(Ne,{children:"Configure how the adapter handles failed operations"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 pb-4 border-b",children:[s.jsx(it,{id:"use-global-retry",checked:c,onCheckedChange:$=>d($)}),s.jsx(C,{htmlFor:"use-global-retry",className:"flex-1",children:"Use global retry settings"}),i&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsxs("span",{children:["Global: ",i.enabled?"Enabled":"Disabled",","," ",i.maxRetries," retries,"," ",i.retryInterval," ",i.retryIntervalUnit]})]})]}),s.jsxs("div",{className:c?"opacity-50 pointer-events-none":"",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"retry-enabled",checked:u,onCheckedChange:$=>m($),disabled:c}),s.jsx(C,{htmlFor:"retry-enabled",children:"Enable automatic retries"})]}),u&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"max-retries",children:"Maximum Retry Attempts"}),s.jsx(U,{id:"max-retries",type:"number",min:"1",max:"10",value:p,onChange:$=>g($.target.value),disabled:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"retry-interval",children:"Retry Interval"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"retry-interval",type:"number",min:"1",value:x,onChange:$=>f($.target.value),className:"flex-1",disabled:c}),s.jsxs(se,{value:w,onValueChange:y,disabled:c,children:[s.jsx(ee,{className:"w-[120px]",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"seconds",children:"Seconds"}),s.jsx(F,{value:"minutes",children:"Minutes"}),s.jsx(F,{value:"hours",children:"Hours"})]})]})]})]})]})]})]})]})}),s.jsx(ye,{value:"schedule",className:"space-y-4 mt-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Schedule Configuration"}),s.jsx(Ne,{children:"Set when the adapter should automatically start and stop"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"schedule-type",children:"Schedule Type"}),s.jsxs(se,{value:v,onValueChange:j,children:[s.jsx(ee,{id:"schedule-type",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"daily",children:"Daily"}),s.jsx(F,{value:"weekly",children:"Weekly"}),s.jsx(F,{value:"odd-days",children:"Odd Days"}),s.jsx(F,{value:"even-days",children:"Even Days"}),s.jsx(F,{value:"monthly",children:"Monthly"}),s.jsx(F,{value:"yearly",children:"Yearly"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"start-time",children:"Start Time"}),s.jsx(U,{id:"start-time",type:"time",value:N,onChange:$=>b($.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"end-time",children:"End Time"}),s.jsx(U,{id:"end-time",type:"time",value:E,onChange:$=>S($.target.value)})]})]}),v==="weekly"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Active Days"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["mon","tue","wed","thu","fri","sat","sun"].map($=>s.jsx(z,{variant:P.includes($)?"default":"outline",size:"sm",onClick:()=>H($),className:"w-16",children:$.toUpperCase()},$))})]}),v==="monthly"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"monthly-day",children:"Day of Month"}),s.jsx(U,{id:"monthly-day",type:"number",min:"1",max:"31",value:L,onChange:$=>R($.target.value)})]}),v==="yearly"&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"yearly-month",children:"Month"}),s.jsxs(se,{value:I,onValueChange:V,children:[s.jsx(ee,{id:"yearly-month",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"1",children:"January"}),s.jsx(F,{value:"2",children:"February"}),s.jsx(F,{value:"3",children:"March"}),s.jsx(F,{value:"4",children:"April"}),s.jsx(F,{value:"5",children:"May"}),s.jsx(F,{value:"6",children:"June"}),s.jsx(F,{value:"7",children:"July"}),s.jsx(F,{value:"8",children:"August"}),s.jsx(F,{value:"9",children:"September"}),s.jsx(F,{value:"10",children:"October"}),s.jsx(F,{value:"11",children:"November"}),s.jsx(F,{value:"12",children:"December"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"yearly-day",children:"Day"}),s.jsx(U,{id:"yearly-day",type:"number",min:"1",max:"31",value:O,onChange:$=>k($.target.value)})]})]})]})]})}),s.jsx(ye,{value:"runtime",className:"space-y-4 mt-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Runtime Configuration"}),s.jsx(Ne,{children:"Adapter-specific runtime settings"})]}),s.jsxs(re,{children:[e.type==="JDBC"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"poll-interval",children:"Poll Interval (seconds)"}),s.jsx(U,{id:"poll-interval",type:"number",min:"1",defaultValue:"60",onChange:$=>D({...T,pollInterval:$.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"batch-size",children:"Batch Size"}),s.jsx(U,{id:"batch-size",type:"number",min:"1",defaultValue:"100",onChange:$=>D({...T,batchSize:$.target.value})})]})]}),e.type==="FILE"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"scan-interval",children:"File Scan Interval (seconds)"}),s.jsx(U,{id:"scan-interval",type:"number",min:"1",defaultValue:"30",onChange:$=>D({...T,scanInterval:$.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"file-pattern",children:"File Pattern"}),s.jsx(U,{id:"file-pattern",type:"text",placeholder:"*.xml",defaultValue:"*.*",onChange:$=>D({...T,filePattern:$.target.value})})]})]}),e.type==="HTTP"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeout",children:"Request Timeout (seconds)"}),s.jsx(U,{id:"timeout",type:"number",min:"1",defaultValue:"30",onChange:$=>D({...T,timeout:$.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"connection-pool",children:"Connection Pool Size"}),s.jsx(U,{id:"connection-pool",type:"number",min:"1",defaultValue:"10",onChange:$=>D({...T,connectionPoolSize:$.target.value})})]})]}),!["JDBC","FILE","HTTP"].includes(e.type)&&s.jsxs("p",{className:"text-muted-foreground",children:["No runtime configuration available for ",e.type," adapters."]})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx(z,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(z,{onClick:_,children:"Save Settings"})]})]})})}const bde=(e,t,n=!1)=>{const[r,a]=h.useState([]),[o,i]=h.useState(!1),[l,c]=h.useState(null),d=h.useRef(t);d.current=t,h.useEffect(()=>{e&&n&&u()},[e,n]);const u=async()=>{if(e){i(!0),c(null);try{console.log(`[useAdapterLogs] Loading logs for adapter: ${e}`);const m=await Lo.getAdapterLogs(e,d.current);console.log("[useAdapterLogs] Response:",m),m.success&&m.data?(console.log(`[useAdapterLogs] Setting ${m.data.length} logs`),a(m.data)):(console.error("[useAdapterLogs] Error:",m.error),c(m.error||"Failed to load adapter logs"),a([]))}catch(m){console.error("[useAdapterLogs] Exception:",m),c(m instanceof Error?m.message:"An unexpected error occurred"),a([])}finally{i(!1)}}};return{logs:r,loading:o,error:l,refreshLogs:u,connected:!1,exportLogs:async()=>{console.log("Export logs functionality will be implemented")}}},Sde=({adapter:e,onUpdate:t,onDelete:n})=>{const[r,a]=h.useState(!1),[o,i]=h.useState(!1),{toast:l}=_e(),c=h.useMemo(()=>({limit:50}),[]),{logs:d,loading:u,connected:m,refreshLogs:p,exportLogs:g}=bde(e.id,c,!0);h.useEffect(()=>{p()},[r]);const x=()=>{const w=e.status==="active"||e.status==="running",y=d&&d.length>0&&(d[0].level==="ERROR"||d[0].level==="error");return w&&!y?"bg-green-500":"bg-red-500"},f=w=>{switch(w){case"active":return"default";case"inactive":return"secondary";case"error":return"destructive";case"testing":return"outline";default:return"outline"}};return s.jsxs(s.Fragment,{children:[s.jsx(K,{className:"bg-gradient-secondary border-border/50 animate-fade-in",children:s.jsxs(re,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:`h-3 w-3 rounded-full ${x()}`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-lg",children:e.name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.type," - ",e.mode]})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(fe,{variant:f(e.status),className:"text-xs",children:e.status})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-border/10",children:[s.jsxs("div",{className:"flex-1 max-w-xs",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"Load"}),s.jsxs("span",{className:"font-medium",children:[e.load,"%"]})]}),s.jsx(nh,{value:e.load,className:"h-2"})]}),s.jsx("div",{className:"flex items-center gap-8 ml-8",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium",children:e.lastActivityTime?new Date(e.lastActivityTime).toLocaleString("en-US",{dateStyle:"short",timeStyle:"short"}):"Never"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Last activity"})]})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[s.jsxs(z,{variant:"outline",size:"sm",className:"hover-scale",onClick:()=>{const w=e.status==="running"||e.status==="active";console.log(`${w?"Stopping":"Starting"} adapter ${e.id}`),t&&t({active:!w})},children:[e.status==="running"||e.status==="active"?s.jsx(KB,{className:"h-4 w-4 mr-2"}):s.jsx(So,{className:"h-4 w-4 mr-2"}),e.status==="running"||e.status==="active"?"Stop":"Start"]}),s.jsxs(z,{variant:"outline",size:"sm",className:"hover-scale",onClick:()=>i(!0),children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Settings"]}),s.jsx(nw,{open:r,onOpenChange:a,children:s.jsx(f_,{asChild:!0,children:s.jsxs(z,{variant:"outline",size:"sm",className:"hover-scale",children:[s.jsx(fa,{className:"h-4 w-4 mr-2"}),"View Logs",r?s.jsx(ur,{className:"h-4 w-4 ml-2"}):s.jsx(Cn,{className:"h-4 w-4 ml-2"})]})})}),m&&e.status==="running"&&s.jsxs(fe,{variant:"secondary",className:"animate-pulse",children:[s.jsx(dc,{className:"h-3 w-3 mr-1"}),"Live"]})]}),s.jsx(nw,{open:r,onOpenChange:a,children:s.jsx(g_,{className:"mt-4",children:s.jsx(wde,{adapterId:e.id,adapterName:e.name,logs:d,loading:u,onRefresh:p,onExport:g,realTimeEnabled:m})})})]})}),s.jsx(Nde,{adapter:e,open:o,onOpenChange:i,onSave:w=>{console.log("Saving settings:",w),l({title:"Settings Saved",description:"Adapter settings have been updated successfully."}),i(!1)}})]})};function Cde({selectedStatus:e,onStatusChange:t}){const n=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"error",label:"Error"}];return s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(C,{htmlFor:"status-filter",className:"text-sm font-semibold whitespace-nowrap",children:"Filter by Status:"}),s.jsxs(se,{value:e||"all",onValueChange:r=>t(r==="all"?null:r),children:[s.jsx(ee,{id:"status-filter",className:"w-[180px]",children:s.jsx(ne,{placeholder:"Select status"})}),s.jsx(te,{children:n.map(r=>s.jsx(F,{value:r.value,children:r.label},r.value))})]})]})})}function Ede(){const[e,t]=h.useState(null),[n,r]=h.useState(null),[a,o]=h.useState([]),[i,l]=h.useState(!0),[c,d]=h.useState(null),{businessComponents:u,loading:m}=To(),{toast:p}=_e(),g=async()=>{try{d(null),l(!0);const b=await Lo.getAdapters(e?.id);if(b.success&&b.data){const E=b.data.map(S=>({...S,status:S.status||(S.active===!1?"inactive":"active")}));o(E)}else d(b.error||"Failed to fetch adapters"),p({variant:"destructive",title:"Error",description:b.error||"Failed to fetch adapters"})}catch(b){console.error("Error fetching adapters:",b),d("Failed to load adapters"),p({variant:"destructive",title:"Error",description:"Failed to load adapters"})}finally{l(!1)}};h.useEffect(()=>{g()},[e]);const x=async(b,E)=>{try{if(!a.find(A=>A.id===b)){p({variant:"destructive",title:"Error",description:"Adapter not found"});return}let P;"active"in E?E.active?P=await Lo.activateAdapter(b):P=await Lo.deactivateAdapter(b):P=await Lo.updateAdapter(b,E),P.success&&P.data?(o(A=>A.map(L=>L.id===b?P.data:L)),p({title:"Success",description:E.active!==void 0?`Adapter ${E.active?"activated":"deactivated"} successfully`:"Adapter updated successfully"})):p({variant:"destructive",title:"Error",description:P.error||"Failed to update adapter"})}catch(S){console.error("Error updating adapter:",S),p({variant:"destructive",title:"Error",description:"Failed to update adapter"})}},f=async b=>{try{const E=await Lo.deleteAdapter(b);E.success?(o(S=>S.filter(P=>P.id!==b)),p({title:"Success",description:"Adapter deleted successfully"})):p({variant:"destructive",title:"Error",description:E.error||"Failed to delete adapter"})}catch(E){console.error("Error deleting adapter:",E),p({variant:"destructive",title:"Error",description:"Failed to delete adapter"})}},w=a.filter(b=>!(n&&b.status!==n)),y=a.length,v=a.filter(b=>b.status==="active"||b.status==="running").length;a.filter(b=>b.status==="inactive"||b.status==="stopped").length;const j=a.filter(b=>b.status==="error").length,N=a.length>0?Math.round(a.reduce((b,E)=>b+(E.load||0),0)/a.length):0;return s.jsxs("div",{className:"w-full p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Adapter Monitoring"}),s.jsx("p",{className:"text-gray-600",children:"Monitor and manage your communication adapters"})]}),s.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[s.jsx(C,{htmlFor:"business-component",children:"Business Component:"}),s.jsxs(se,{value:e?.id||"all",onValueChange:b=>{if(b==="all")t(null);else{const E=u.find(S=>S.id===b);t(E||null)}},disabled:m,children:[s.jsx(ee,{id:"business-component",className:"w-[280px]",children:s.jsx(ne,{placeholder:"Select a business component"})}),s.jsxs(te,{children:[s.jsx(F,{value:"all",children:"All Components"}),u.map(b=>s.jsx(F,{value:b.id,children:b.name},b.id))]})]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:g,disabled:i,children:[s.jsx(Tt,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]}),c&&s.jsx("div",{className:"mb-6 bg-destructive/10 text-destructive p-4 rounded-lg",children:c}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Adapters"}),s.jsx("p",{className:"text-2xl font-bold",children:y})]}),s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Active Adapters"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:v})]}),s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Adapters with Errors"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:j})]}),s.jsxs(K,{className:"p-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Average Load"}),s.jsxs("div",{className:"mt-2",children:[s.jsx(nh,{value:N,className:"h-2"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[N,"%"]})]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(Cde,{selectedStatus:n,onStatusChange:r})}),i?s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx(vt,{className:"h-8 w-8 animate-spin"})}):w.length===0?s.jsx(K,{className:"p-12 text-center",children:s.jsx("p",{className:"text-gray-500",children:n?`No adapters found with status: ${n}`:e?`No adapters found for ${e.name}`:"No adapters found"})}):s.jsx("div",{className:"grid grid-cols-1 gap-6",children:w.map(b=>s.jsx(Sde,{adapter:b,onUpdate:E=>x(b.id,E),onDelete:()=>f(b.id)},b.id))})]})}class Tde{async createFlow(t){return G.post("/flows",t)}async getFlows(t){const n=new URLSearchParams;t&&Object.entries(t).forEach(([a,o])=>{o!==void 0&&n.append(a,o.toString())});const r=`/flows${n.toString()?`?${n.toString()}`:""}`;return G.get(r)}async getFlow(t){return G.get(`/flows/${t}`)}async updateFlow(t,n){return G.put(`/flows/${t}`,n)}async deleteFlow(t){return G.delete(`/flows/${t}`)}async testFlow(t,n){return G.post(`/flows/${t}/test`,{testData:n})}async updateFlowStatus(t,n){return G.patch(`/flows/${t}/status`,{status:n})}async getFlowExecutions(t,n){const r=new URLSearchParams;n&&Object.entries(n).forEach(([o,i])=>{i!==void 0&&r.append(o,i.toString())});const a=`/flows/${t}/executions${r.toString()?`?${r.toString()}`:""}`;return G.get(a)}async saveFieldMappings(t,n){return G.post(`/flows/${t}/field-mappings`,{mappings:n})}async cloneFlow(t,n){return G.post(`/flows/${t}/clone`,{name:n})}async validateFlow(t){return G.post("/flows/validate",t)}}const ow=new Tde;function Pde(){const{flowId:e}=_u(),t=as(),{toast:n}=_e(),[r,a]=h.useState(!0),[o,i]=h.useState(null),[l,c]=h.useState(null);h.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{a(!0);const f=await ow.getFlow(e);if(f.success&&f.data){i(f.data);const w={flowId:f.data.id,status:f.data.status,endpoints:[],metadata:{}};c(w)}}catch{n({variant:"destructive",title:"Error",description:"Failed to fetch interface details"})}finally{a(!1)}},u=(f,w)=>{navigator.clipboard.writeText(f),n({title:"Copied!",description:`${w} copied to clipboard`})},m=()=>{l?.metadata?.wsdlUrl&&window.open(l.metadata.wsdlUrl,"_blank")};if(r)return s.jsx("div",{className:"w-full p-6",children:s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx(vt,{className:"h-8 w-8 animate-spin"})})});if(!o||!l)return s.jsx("div",{className:"w-full p-6",children:s.jsx(K,{children:s.jsxs(re,{className:"p-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"Interface not found or not deployed"}),s.jsx(z,{variant:"outline",className:"mt-4",onClick:()=>t("/interfaces"),children:"Back to Interfaces"})]})})});const p=l.metadata?.adapterType||"Unknown",g=["HTTP","REST","SOAP"].includes(p),x=p==="SOAP";return s.jsxs("div",{className:"w-full p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold",children:o.name}),s.jsxs(fe,{variant:"success",className:"text-lg px-4 py-2",children:[s.jsx(rs,{className:"h-4 w-4 mr-2"}),"Deployed"]})]}),s.jsx("p",{className:"text-gray-600",children:o.description})]}),s.jsxs("div",{className:"grid gap-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Deployment Information"}),s.jsx(Ne,{children:"Details about the deployed interface"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Deployed At"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(js,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:new Date(l.deployedAt).toLocaleString()})]})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Deployed By"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(mo,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:l.deployedBy||"System"})]})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Adapter Type"}),s.jsx(fe,{variant:"outline",children:p})]})]})]}),g&&s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Endpoint Information"}),s.jsx(Ne,{children:"Connection details for external systems"})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"endpoint",children:"API Endpoint"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"endpoint",value:l.endpoint,readOnly:!0,className:"font-mono text-sm"}),s.jsx(z,{size:"icon",variant:"outline",onClick:()=>u(l.endpoint,"Endpoint"),children:s.jsx(Dr,{className:"h-4 w-4"})})]})]}),x&&l.metadata?.wsdlUrl&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"wsdl",children:"WSDL URL"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"wsdl",value:l.metadata.wsdlUrl,readOnly:!0,className:"font-mono text-sm"}),s.jsx(z,{size:"icon",variant:"outline",onClick:()=>u(l.metadata.wsdlUrl,"WSDL URL"),children:s.jsx(Dr,{className:"h-4 w-4"})}),s.jsx(z,{size:"icon",variant:"outline",onClick:m,children:s.jsx(hr,{className:"h-4 w-4"})})]})]}),p==="REST"&&l.metadata?.apiDocsUrl&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"apidocs",children:"API Documentation"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"apidocs",value:l.metadata.apiDocsUrl,readOnly:!0,className:"font-mono text-sm"}),s.jsx(z,{size:"icon",variant:"outline",onClick:()=>window.open(l.metadata.apiDocsUrl,"_blank"),children:s.jsx(kr,{className:"h-4 w-4"})})]})]}),l.metadata?.httpMethods&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Supported Methods"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:l.metadata.httpMethods})]}),l.metadata?.contentType&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Content Types"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:l.metadata.contentType})]})]})]}),["FILE","FTP","SFTP"].includes(p)&&s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"File Configuration"}),s.jsx(Ne,{children:"File handling settings for this interface"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Polling"}),s.jsx("p",{className:"mt-1",children:l.metadata?.pollingEnabled?"Enabled":"Disabled"})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"File Pattern"}),s.jsx("p",{className:"mt-1 font-mono text-sm",children:l.metadata?.filePattern||"*.*"})]})]})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Integration Details"}),s.jsx(Ne,{children:"Configuration and mapping information"})]}),s.jsx(re,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Mapping Mode"}),s.jsx(fe,{variant:o.mappingMode==="PASS_THROUGH"?"outline":"default",children:o.mappingMode==="PASS_THROUGH"?"Pass-through":"With Mapping"})]}),s.jsxs("div",{children:[s.jsx(C,{className:"text-sm text-muted-foreground",children:"Status"}),s.jsx(fe,{variant:"success",children:o.status})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(z,{variant:"outline",onClick:()=>t("/interfaces"),children:"Back to Interfaces"}),s.jsxs(z,{variant:"outline",onClick:()=>t(`/flows/${e}/edit`),children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"View Configuration"]})]})]})]})}const Ade=({users:e,roles:t,certificates:n,jarFiles:r})=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-fade-in",children:[s.jsxs(K,{className:"hover-scale",children:[s.jsx(oe,{className:"pb-2",children:s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(_s,{className:"h-4 w-4"}),"Total Users"]})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Active users"})]})]}),s.jsxs(K,{className:"hover-scale",children:[s.jsx(oe,{className:"pb-2",children:s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4"}),"Roles"]})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:t.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Defined roles"})]})]}),s.jsxs(K,{className:"hover-scale",children:[s.jsx(oe,{className:"pb-2",children:s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(oi,{className:"h-4 w-4"}),"Certificates"]})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SSL/Auth certs"})]})]}),s.jsxs(K,{className:"hover-scale",children:[s.jsx(oe,{className:"pb-2",children:s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Gd,{className:"h-4 w-4"}),"Connection Drivers"]})}),s.jsxs(re,{children:[s.jsx("div",{className:"text-2xl font-bold",children:r.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Driver files"})]})]})]});class Dde{async getAllUsers(t=0,n=50){return G.get(`/users?page=${t}&limit=${n}`)}async getUserById(t){return G.get(`/users/${t}`)}async createUser(t){const n={...t,password:t.password||this.generateDefaultPassword()};return G.post("/auth/register",n)}async updateUser(t,n){return G.put(`/users/${t}`,n)}async deleteUser(t){return G.delete(`/users/${t}`)}async updateUserStatus(t,n){return G.patch(`/users/${t}/status`,{status:n})}async resetUserPassword(t){return G.post(`/users/${t}/reset-password`)}async assignRole(t,n,r={}){return G.patch(`/users/${t}/role`,{role:n,permissions:r})}async getUserPermissions(t){return G.get(`/users/${t}/permissions`)}async updateUserPermissions(t,n){return G.patch(`/users/${t}/permissions`,{permissions:n})}async searchUsers(t,n){const r=new URLSearchParams({q:t,...n?.role&&{role:n.role},...n?.status&&{status:n.status},page:(n?.page||1).toString(),limit:(n?.limit||50).toString()});return G.get(`/users/search?${r}`)}generateDefaultPassword(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let n="";for(let r=0;r<12;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}getRolePermissions(t){return{administrator:{flows:["create","read","update","delete","execute"],adapters:["create","read","update","delete","test"],structures:["create","read","update","delete"],users:["create","read","update","delete"],system:["create","read","update","delete"],certificates:["create","read","update","delete"]},integrator:{flows:["create","read","update","execute"],adapters:["create","read","update","test"],structures:["create","read","update"],messages:["read"],channels:["read"]},viewer:{flows:["read"],adapters:["read"],structures:["read"],messages:["read"],channels:["read"]}}[t]||{flows:["read"]}}}const ll=new Dde,kde=({open:e,onOpenChange:t,onUserCreated:n})=>{const[r,a]=h.useState(!1),[o,i]=h.useState({username:"",email:"",firstName:"",lastName:"",role:"viewer",password:"",status:"active"}),{toast:l}=_e(),c=async u=>{u.preventDefault(),a(!0);try{console.log("Creating user with data:",o);const m=await ll.createUser(o);m.success?(l({title:"User Created Successfully",description:`User ${o.username} has been created with role ${o.role}.`}),i({username:"",email:"",firstName:"",lastName:"",role:"viewer",password:"",status:"active"}),t(!1),n?.()):l({title:"Error Creating User",description:m.error||"An error occurred while creating the user.",variant:"destructive"})}catch(m){console.error("User creation error:",m),l({title:"Error Creating User",description:m.message||"An unexpected error occurred.",variant:"destructive"})}finally{a(!1)}},d=u=>m=>{i(p=>({...p,[u]:m}))};return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"sm:max-w-[425px]",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Create New User"}),s.jsx(ks,{children:"Add a new user to the system. They will receive an email with login instructions."})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"firstName",children:"First Name"}),s.jsx(U,{id:"firstName",value:o.firstName,onChange:u=>d("firstName")(u.target.value),placeholder:"John",required:!0,disabled:r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"lastName",children:"Last Name"}),s.jsx(U,{id:"lastName",value:o.lastName,onChange:u=>d("lastName")(u.target.value),placeholder:"Doe",required:!0,disabled:r})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"username",children:"Username"}),s.jsx(U,{id:"username",value:o.username,onChange:u=>d("username")(u.target.value),placeholder:"johndoe",required:!0,disabled:r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"email",children:"Email"}),s.jsx(U,{id:"email",type:"email",value:o.email,onChange:u=>d("email")(u.target.value),placeholder:"john.doe@company.com",required:!0,disabled:r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"password",children:"Temporary Password"}),s.jsx(U,{id:"password",type:"password",value:o.password,onChange:u=>d("password")(u.target.value),placeholder:"Leave empty for auto-generated password",disabled:r})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"role",children:"Role"}),s.jsxs(se,{value:o.role,onValueChange:d("role"),disabled:r,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a role"})}),s.jsxs(te,{children:[s.jsx(F,{value:"administrator",children:"Administrator"}),s.jsx(F,{value:"integrator",children:"Integrator"}),s.jsx(F,{value:"viewer",children:"Viewer"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"status",children:"Status"}),s.jsxs(se,{value:o.status,onValueChange:d("status"),disabled:r,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select status"})}),s.jsxs(te,{children:[s.jsx(F,{value:"active",children:"Active"}),s.jsx(F,{value:"inactive",children:"Inactive"}),s.jsx(F,{value:"pending",children:"Pending"})]})]})]}),s.jsxs(Wn,{children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:r,children:"Cancel"}),s.jsxs(z,{type:"submit",disabled:r,children:[r&&s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Create User"]})]})]})]})})},Mde=[{key:"flows",label:"Flows",icon:qt,permissions:["create","read","update","delete","execute"]},{key:"adapters",label:"Adapters",icon:KC,permissions:["create","read","update","delete","test"]},{key:"structures",label:"Data Structures",icon:Ds,permissions:["create","read","update","delete"]},{key:"users",label:"User Management",icon:_s,permissions:["create","read","update","delete"]},{key:"system",label:"System",icon:Ln,permissions:["create","read","update","delete"]},{key:"messages",label:"Messages",icon:Xs,permissions:["read"]},{key:"channels",label:"Channels",icon:KC,permissions:["read"]},{key:"certificates",label:"Certificates",icon:Ln,permissions:["create","read","update","delete"]}],Rde=({open:e,onOpenChange:t,user:n,onUserUpdated:r})=>{const[a,o]=h.useState(!1),[i,l]=h.useState({}),[c,d]=h.useState({}),[u,m]=h.useState(!1),{toast:p}=_e();h.useEffect(()=>{if(n)if(l({email:n.email,firstName:n.first_name,lastName:n.last_name,role:n.role,status:n.status}),n.permissions&&Object.keys(n.permissions).length>0)d(n.permissions),m(!0);else{const y=ll.getRolePermissions(n.role);d(y),m(!1)}},[n]);const g=async y=>{if(y.preventDefault(),!!n){o(!0);try{const v={...i,permissions:u?c:void 0};console.log("Updating user with data:",v);const j=await ll.updateUser(n.id,v);j.success?(p({title:"User Updated Successfully",description:`User ${n.username} has been updated.`}),t(!1),r?.()):p({title:"Error Updating User",description:j.error||"An error occurred while updating the user.",variant:"destructive"})}catch(v){console.error("User update error:",v),p({title:"Error Updating User",description:v.message||"An unexpected error occurred.",variant:"destructive"})}finally{o(!1)}}},x=y=>v=>{if(l(j=>({...j,[y]:v})),y==="role"){const j=ll.getRolePermissions(v);u||d(j)}},f=(y,v)=>{d(j=>{const N=j[y]||[],b=N.includes(v);return{...j,[y]:b?N.filter(E=>E!==v):[...N,v]}})},w=()=>{if(i.role){const y=ll.getRolePermissions(i.role);d(y),m(!1)}};return n?s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(gt,{children:[s.jsxs(xt,{children:["Edit User: ",n.username]}),s.jsx(ks,{children:"Update user information and customize their permissions."})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"firstName",children:"First Name"}),s.jsx(U,{id:"firstName",value:i.firstName||"",onChange:y=>x("firstName")(y.target.value),disabled:a})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"lastName",children:"Last Name"}),s.jsx(U,{id:"lastName",value:i.lastName||"",onChange:y=>x("lastName")(y.target.value),disabled:a})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"email",children:"Email"}),s.jsx(U,{id:"email",type:"email",value:i.email||"",onChange:y=>x("email")(y.target.value),disabled:a})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"role",children:"Role"}),s.jsxs(se,{value:i.role||"",onValueChange:x("role"),disabled:a,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select a role"})}),s.jsxs(te,{children:[s.jsx(F,{value:"administrator",children:"Administrator"}),s.jsx(F,{value:"integrator",children:"Integrator"}),s.jsx(F,{value:"viewer",children:"Viewer"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"status",children:"Status"}),s.jsxs(se,{value:i.status||"",onValueChange:x("status"),disabled:a,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select status"})}),s.jsxs(te,{children:[s.jsx(F,{value:"active",children:"Active"}),s.jsx(F,{value:"inactive",children:"Inactive"}),s.jsx(F,{value:"pending",children:"Pending"})]})]})]})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Permissions"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"useCustomPermissions",checked:u,onCheckedChange:y=>m(y===!0),disabled:a}),s.jsx(C,{htmlFor:"useCustomPermissions",className:"text-sm",children:"Use custom permissions"})]}),u&&s.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:w,disabled:a,children:"Reset to Role Defaults"})]})]}),s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(Ne,{children:u?"Customize individual permissions for this user":`Using default permissions for ${i.role||"selected"} role`})}),s.jsx(re,{children:s.jsx("div",{className:"grid gap-4",children:Mde.map(y=>{const v=c[y.key]||[],j=y.icon;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(C,{className:"font-medium",children:y.label})]}),s.jsx("div",{className:"flex flex-wrap gap-4 pl-6",children:y.permissions.map(N=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:`${y.key}-${N}`,checked:v.includes(N),onCheckedChange:()=>f(y.key,N),disabled:a||!u}),s.jsx(C,{htmlFor:`${y.key}-${N}`,className:"text-sm capitalize",children:N})]},N))})]},y.key)})})})]})]}),s.jsxs(Wn,{children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:a,children:"Cancel"}),s.jsxs(z,{type:"submit",disabled:a,children:[a&&s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Update User"]})]})]})]})}):null},Fde=({users:e,isLoading:t=!1,onRefresh:n})=>{const[r,a]=h.useState(!1),[o,i]=h.useState(!1),[l,c]=h.useState(null),d=m=>{switch(m){case"administrator":return s.jsx(F0,{className:"h-4 w-4 text-warning"});case"integrator":return s.jsx(qt,{className:"h-4 w-4 text-info"});case"viewer":return s.jsx(mk,{className:"h-4 w-4 text-muted-foreground"});default:return s.jsx(_s,{className:"h-4 w-4"})}},u=m=>{switch(m){case"active":return"default";case"inactive":return"secondary";default:return"outline"}};return s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"User Management"}),s.jsx(Ne,{children:"Manage system users and their access levels"})]}),s.jsxs("div",{className:"flex gap-2",children:[n&&s.jsxs(z,{variant:"outline",onClick:n,disabled:t,children:[s.jsx(Tt,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]}),s.jsxs(z,{className:"bg-gradient-primary",onClick:()=>a(!0),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})}),s.jsx(re,{children:t?s.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((m,p)=>s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(nt,{className:"h-10 w-10 rounded-full"}),s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(nt,{className:"h-4 w-[200px]"}),s.jsx(nt,{className:"h-4 w-[150px]"})]}),s.jsx(nt,{className:"h-8 w-20"}),s.jsx(nt,{className:"h-8 w-8"})]},p))}):e.length===0?s.jsx(Mi,{icon:_s,title:"No users found",description:"There are currently no users in the system. Create your first user to get started.",action:{label:"Add User",onClick:()=>a(!0)}}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Username"}),s.jsx(De,{children:"Email"}),s.jsx(De,{children:"Role"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Last Login"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:e.map(m=>s.jsxs(Zt,{children:[s.jsx(ke,{className:"font-medium",children:m.username}),s.jsx(ke,{children:m.email}),s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[d(m.role),s.jsx("span",{className:"capitalize",children:m.role})]})}),s.jsx(ke,{children:s.jsx(fe,{variant:u(m.status),children:m.status})}),s.jsx(ke,{className:"text-muted-foreground",children:m.last_login_at||"Never"}),s.jsx(ke,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{c(m),i(!0)},children:s.jsx(ga,{className:"h-4 w-4"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"text-destructive",children:s.jsx(Xn,{className:"h-4 w-4"})})]})})]},m.id))})]})})}),s.jsx(kde,{open:r,onOpenChange:a,onUserCreated:()=>{a(!1),n?.()}}),s.jsx(Rde,{open:o,onOpenChange:i,user:l,onUserUpdated:()=>{i(!1),c(null),n?.()}})]})},Ode=({roles:e,isLoading:t=!1,onRefresh:n})=>{const r=a=>{switch(a){case"administrator":return s.jsx(F0,{className:"h-4 w-4 text-warning"});case"integrator":return s.jsx(qt,{className:"h-4 w-4 text-info"});case"viewer":return s.jsx(mk,{className:"h-4 w-4 text-muted-foreground"});default:return s.jsx(_s,{className:"h-4 w-4"})}};return s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Role Management"}),s.jsx(Ne,{children:"Define and manage user roles and permissions"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n&&s.jsx(z,{variant:"outline",size:"sm",onClick:n,disabled:t,children:s.jsx(Tt,{className:`h-4 w-4 ${t?"animate-spin":""}`})}),s.jsxs(z,{className:"bg-gradient-primary",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Role"]})]})]})}),s.jsx(re,{children:s.jsx("div",{className:"grid gap-4",children:t?Array.from({length:3}).map((a,o)=>s.jsxs(K,{className:"bg-gradient-secondary border-border/50",children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(nt,{className:"h-4 w-4 rounded-full"}),s.jsxs("div",{children:[s.jsx(nt,{className:"h-5 w-32 mb-2"}),s.jsx(nt,{className:"h-4 w-48"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nt,{className:"h-6 w-16"}),s.jsx(nt,{className:"h-8 w-8"})]})]})}),s.jsx(re,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:4}).map((i,l)=>s.jsx(nt,{className:"h-6 w-20"},l))})})]},o)):e.length===0?s.jsx(Mi,{icon:Ln,title:"No roles found",description:"Create roles to define user permissions and access levels for your integration platform.",action:{label:"Add Role",onClick:()=>{}}}):e.map(a=>s.jsxs(K,{className:"bg-gradient-secondary border-border/50",children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[r(a.name),s.jsxs("div",{children:[s.jsx(ie,{className:"text-lg capitalize",children:a.name}),s.jsx(Ne,{children:a.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(fe,{variant:"outline",children:[a.userCount," users"]}),s.jsx(z,{variant:"outline",size:"sm",children:s.jsx(ga,{className:"h-4 w-4"})})]})]})}),s.jsx(re,{children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Permissions:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.permissions?.map(o=>s.jsx(fe,{variant:"secondary",className:"text-xs",children:o.replace("_"," ")},o))||s.jsx("span",{className:"text-sm text-muted-foreground",children:"No permissions defined"})})]})})]},a.id))})})]})},Ide=({certificates:e,isLoading:t=!1,onRefresh:n})=>{const r=a=>{switch(a){case"active":return"default";case"inactive":return"secondary";case"expiring":return"destructive";default:return"outline"}};return s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Certificate Management"}),s.jsx(Ne,{children:"Manage SSL certificates and authentication keys"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n&&s.jsx(z,{variant:"outline",size:"sm",onClick:n,disabled:t,children:s.jsx(Tt,{className:`h-4 w-4 ${t?"animate-spin":""}`})}),s.jsxs(z,{className:"bg-gradient-primary",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Certificate"]})]})]})}),s.jsx(re,{children:t?s.jsx("div",{className:"rounded-md border",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Type"}),s.jsx(De,{children:"Issuer"}),s.jsx(De,{children:"Valid Period"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Usage"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:Array.from({length:3}).map((a,o)=>s.jsxs(Zt,{children:[s.jsx(ke,{children:s.jsx(nt,{className:"h-4 w-32"})}),s.jsx(ke,{children:s.jsx(nt,{className:"h-4 w-24"})}),s.jsx(ke,{children:s.jsx(nt,{className:"h-4 w-28"})}),s.jsx(ke,{children:s.jsx(nt,{className:"h-4 w-40"})}),s.jsx(ke,{children:s.jsx(nt,{className:"h-6 w-16"})}),s.jsx(ke,{children:s.jsx(nt,{className:"h-4 w-36"})}),s.jsx(ke,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(nt,{className:"h-8 w-8"}),s.jsx(nt,{className:"h-8 w-8"})]})})]},o))})]})}):e.length===0?s.jsx(Mi,{icon:oi,title:"No certificates found",description:"Upload and manage SSL certificates and authentication keys for secure connections.",action:{label:"Add Certificate",onClick:()=>{}}}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Type"}),s.jsx(De,{children:"Issuer"}),s.jsx(De,{children:"Valid Period"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Usage"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:e.map(a=>s.jsxs(Zt,{children:[s.jsx(ke,{className:"font-medium",children:a.name}),s.jsx(ke,{children:a.type}),s.jsx(ke,{children:a.issuer}),s.jsxs(ke,{className:"text-sm",children:[a.validFrom," to ",a.validTo]}),s.jsx(ke,{children:s.jsx(fe,{variant:r(a.status),children:a.status})}),s.jsx(ke,{className:"text-muted-foreground text-sm",children:a.usage}),s.jsx(ke,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(ga,{className:"h-4 w-4"})}),s.jsx(z,{variant:"ghost",size:"sm",className:"text-destructive",children:s.jsx(Xn,{className:"h-4 w-4"})})]})})]},a.id))})]})})})]})},Lde=({open:e,onOpenChange:t,onDriverAdded:n})=>{const[r,a]=h.useState(null),[o,i]=h.useState(!1),[l,c]=h.useState({databaseType:"",name:"",version:""}),{toast:d}=_e(),u=[{value:"mariadb",label:"MariaDB"},{value:"oracle",label:"Oracle"},{value:"db2",label:"DB2"},{value:"sqlserver",label:"Microsoft SQL Server"},{value:"mysql",label:"MySQL"},{value:"postgresql",label:"PostgreSQL"}],m=x=>{const f=x.target.files?.[0];if(f){if(!f.name.endsWith(".jar")){d({title:"Invalid File Type",description:"Please select a valid JDBC driver file (.jar).",variant:"destructive"});return}a(f);const w=f.name.replace(".jar","");c(y=>({...y,name:w,version:y.version||"1.0.0"}))}},p=async()=>{if(!r||!l.databaseType){d({title:"Missing Information",description:"Please select a database type and driver file.",variant:"destructive"});return}i(!0);try{await new Promise(f=>setTimeout(f,2e3));const x={id:Date.now().toString(),name:l.name||r.name.replace(".jar",""),version:l.version||"1.0.0",description:`JDBC driver for ${u.find(f=>f.value===l.databaseType)?.label}`,file_name:r.name,size_bytes:r.size,upload_date:new Date().toISOString().split("T")[0],driver_type:"JDBC",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(x),a(null),c({databaseType:"",name:"",version:""}),t(!1),d({title:"Upload Successful",description:`JDBC driver for ${u.find(f=>f.value===l.databaseType)?.label} has been uploaded.`})}catch{d({title:"Upload Failed",description:"Failed to upload JDBC driver. Please try again.",variant:"destructive"})}finally{i(!1)}},g=()=>{a(null),c({databaseType:"",name:"",version:""})};return s.jsx(ft,{open:e,onOpenChange:x=>{t(x),x||g()},children:s.jsxs(mt,{className:"sm:max-w-[425px]",children:[s.jsx(gt,{children:s.jsx(xt,{children:"Add JDBC Driver"})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"database-type",children:"Database Type *"}),s.jsxs(se,{value:l.databaseType,onValueChange:x=>c(f=>({...f,databaseType:x})),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select database type"})}),s.jsx(te,{children:u.map(x=>s.jsx(F,{value:x.value,children:x.label},x.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"jdbc-file",children:"JDBC Driver File *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{id:"jdbc-file",type:"file",accept:".jar",onChange:m,className:"cursor-pointer"}),s.jsx(z,{variant:"outline",size:"sm",disabled:!0,children:"Browse..."})]}),r&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",r.name," (",Math.round(r.size/1024)," KB)"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"driver-name",children:"Driver Name"}),s.jsx(U,{id:"driver-name",placeholder:"Auto-generated",value:l.name,onChange:x=>c(f=>({...f,name:x.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"driver-version",children:"Version"}),s.jsx(U,{id:"driver-version",placeholder:"1.0.0",value:l.version,onChange:x=>c(f=>({...f,version:x.target.value}))})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(z,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(z,{onClick:p,disabled:o||!r||!l.databaseType,className:"bg-gradient-primary hover:opacity-90",children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),o?"Uploading...":"Upload Driver"]})]})]})})},$de=({open:e,onOpenChange:t,onDriverAdded:n})=>{const[r,a]=h.useState(null),[o,i]=h.useState(!1),[l,c]=h.useState({brokerType:"",name:"",version:""}),{toast:d}=_e(),u=[{value:"activemq",label:"ActiveMQ"},{value:"rabbitmq",label:"RabbitMQ"},{value:"artemis",label:"Apache Artemis"},{value:"ibmmq",label:"IBM MQ"},{value:"kafka",label:"Apache Kafka"},{value:"solace",label:"Solace"}],m=x=>{const f=x.target.files?.[0];if(f){if(!f.name.endsWith(".jar")){d({title:"Invalid File Type",description:"Please select a valid JMS driver file (.jar).",variant:"destructive"});return}a(f);const w=f.name.replace(".jar","");c(y=>({...y,name:w,version:y.version||"1.0.0"}))}},p=async()=>{if(!r||!l.brokerType){d({title:"Missing Information",description:"Please select a broker type and driver file.",variant:"destructive"});return}i(!0);try{await new Promise(f=>setTimeout(f,2e3));const x={id:Date.now().toString(),name:l.name||r.name.replace(".jar",""),version:l.version||"1.0.0",description:`JMS driver for ${u.find(f=>f.value===l.brokerType)?.label}`,file_name:r.name,size_bytes:r.size,upload_date:new Date().toISOString().split("T")[0],driver_type:"JMS",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(x),a(null),c({brokerType:"",name:"",version:""}),t(!1),d({title:"Upload Successful",description:`JMS driver for ${u.find(f=>f.value===l.brokerType)?.label} has been uploaded.`})}catch{d({title:"Upload Failed",description:"Failed to upload JMS driver. Please try again.",variant:"destructive"})}finally{i(!1)}},g=()=>{a(null),c({brokerType:"",name:"",version:""})};return s.jsx(ft,{open:e,onOpenChange:x=>{t(x),x||g()},children:s.jsxs(mt,{className:"sm:max-w-[425px]",children:[s.jsx(gt,{children:s.jsx(xt,{children:"Add JMS Driver"})}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"broker-type",children:"Message Broker Type *"}),s.jsxs(se,{value:l.brokerType,onValueChange:x=>c(f=>({...f,brokerType:x})),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select broker type"})}),s.jsx(te,{children:u.map(x=>s.jsx(F,{value:x.value,children:x.label},x.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"jms-file",children:"JMS Driver File *"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(U,{id:"jms-file",type:"file",accept:".jar",onChange:m,className:"cursor-pointer"}),s.jsx(z,{variant:"outline",size:"sm",disabled:!0,children:"Browse..."})]}),r&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",r.name," (",Math.round(r.size/1024)," KB)"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"driver-name",children:"Driver Name"}),s.jsx(U,{id:"driver-name",placeholder:"Auto-generated",value:l.name,onChange:x=>c(f=>({...f,name:x.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"driver-version",children:"Version"}),s.jsx(U,{id:"driver-version",placeholder:"1.0.0",value:l.version,onChange:x=>c(f=>({...f,version:x.target.value}))})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(z,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsxs(z,{onClick:p,disabled:o||!r||!l.brokerType,className:"bg-gradient-primary hover:opacity-90",children:[s.jsx(Ca,{className:"h-4 w-4 mr-2"}),o?"Uploading...":"Upload Driver"]})]})]})})},_de=({jarFiles:e,isLoading:t=!1,onRefresh:n,onJarFileAdded:r,onJarFileDeleted:a})=>{const[o,i]=h.useState(!1),[l,c]=h.useState(!1);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[s.jsxs(K,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 hover:border-primary/20",onClick:()=>i(!0),children:[s.jsxs(oe,{className:"text-center pb-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ds,{className:"h-8 w-8 text-info dark:text-info"})}),s.jsx(ie,{className:"text-xl",children:"JDBC Driver"}),s.jsx(Ne,{children:"Upload database connection drivers for MySQL, Oracle, PostgreSQL, and more"})]}),s.jsx(re,{className:"text-center pt-0",children:s.jsx(z,{variant:"outline",className:"w-full",children:"Upload JDBC Driver"})})]}),s.jsxs(K,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 hover:border-primary/20",onClick:()=>c(!0),children:[s.jsxs(oe,{className:"text-center pb-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:s.jsx(Xs,{className:"h-8 w-8 text-success dark:text-success"})}),s.jsx(ie,{className:"text-xl",children:"JMS Driver"}),s.jsx(Ne,{children:"Upload Java Message Service drivers for ActiveMQ, RabbitMQ, and other message brokers"})]}),s.jsx(re,{className:"text-center pt-0",children:s.jsx(z,{variant:"outline",className:"w-full",children:"Upload JMS Driver"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Uploaded Connection Drivers"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," driver",e.length!==1?"s":""," uploaded"]}),n&&s.jsx(z,{variant:"outline",size:"sm",onClick:n,disabled:t,children:s.jsx(Tt,{className:`h-4 w-4 ${t?"animate-spin":""}`})})]})]}),t?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((d,u)=>s.jsxs(K,{children:[s.jsxs(oe,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nt,{className:"h-5 w-5 rounded"}),s.jsx(nt,{className:"h-5 w-32"})]}),s.jsx(nt,{className:"h-4 w-48 mt-1"})]}),s.jsxs(re,{className:"pt-0",children:[s.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((m,p)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx(nt,{className:"h-4 w-16"}),s.jsx(nt,{className:"h-4 w-20"})]},p))}),s.jsx(nt,{className:"h-8 w-full mt-3"})]})]},u))}):e.length===0?s.jsx(Mi,{icon:Gd,title:"No connection drivers uploaded",description:"Upload JDBC database drivers or JMS client libraries to enable connections to external systems."}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(d=>s.jsxs(K,{children:[s.jsxs(oe,{className:"pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[d.driver_type==="JDBC"?s.jsx(Ds,{className:"h-5 w-5 text-info"}):s.jsx(Xs,{className:"h-5 w-5 text-success"}),s.jsx(ie,{className:"text-base",children:d.name})]}),s.jsx(Ne,{className:"text-xs",children:d.file_name})]}),s.jsxs(re,{className:"pt-0",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Version:"}),s.jsx("span",{children:d.version})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{children:d.driver_type})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Size:"}),s.jsx("span",{children:d.size_bytes?`${Math.round(d.size_bytes/1024)} KB`:"N/A"})]})]}),s.jsx(z,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>a(d.id),children:"Remove"})]})]},d.id))})]}),s.jsx(Lde,{open:o,onOpenChange:i,onDriverAdded:r}),s.jsx($de,{open:l,onOpenChange:c,onDriverAdded:r})]})},Vde=({jarFiles:e,isLoading:t,onRefresh:n,onJarFileAdded:r,onJarFileDeleted:a})=>s.jsx(_de,{jarFiles:e,isLoading:t,onRefresh:n,onJarFileAdded:r,onJarFileDeleted:a}),Ob=(e={})=>{const[t,n]=h.useState([]),[r,a]=h.useState({adapters:[],channels:[],flows:[]}),[o,i]=h.useState(!1),[l,c]=h.useState(),d=async()=>{try{const p=await qo.getAdapters();a({adapters:p.success?p.data?.adapters||[]:[],channels:[],flows:[]})}catch(p){console.error("Failed to fetch sources:",p)}},u=async()=>{i(!0),c(void 0);try{const p=new URLSearchParams;e.source&&p.append("source",e.source),e.sourceId&&p.append("sourceId",e.sourceId),e.sourceName&&p.append("sourceName",e.sourceName),e.level&&p.append("level",e.level),e.search&&p.append("search",e.search),e.startDate&&p.append("startDate",e.startDate),e.endDate&&p.append("endDate",e.endDate),e.domainType&&p.append("domainType",e.domainType),e.domainReferenceId&&p.append("domainReferenceId",e.domainReferenceId);const g=`/logs/system${p.toString()?`?${p.toString()}`:""}`,x=await G.get(g);x.success&&x.data?n(x.data):(n([]),c("Failed to fetch logs from server"))}catch(p){c(p instanceof Error?p.message:"Failed to fetch logs"),n([])}finally{i(!1)}},m=()=>{u()};return h.useEffect(()=>{d()},[]),h.useEffect(()=>{u()},[e.source,e.sourceId,e.level,e.search,e.startDate,e.endDate]),h.useEffect(()=>{if(e.autoRefresh){const p=setInterval(u,e.refreshInterval||3e4);return()=>clearInterval(p)}},[e.autoRefresh,e.refreshInterval]),h.useEffect(()=>HM.onLogUpdate(()=>{u()}),[]),{logs:t,sources:r,loading:o,error:l,refetch:m}},qi=e=>{const[t,n]=h.useState([]),[r,a]=h.useState(!1),[o,i]=h.useState(),{logs:l,loading:c,error:d}=Ob({domainType:e.domainType,domainReferenceId:e.referenceId,autoRefresh:e.includeSystemLogs?e.autoRefresh:!1,refreshInterval:e.refreshInterval}),u=async()=>{a(!0),i(void 0);try{const p=new URLSearchParams;p.append("domainType",e.domainType),p.append("level","error"),e.referenceId&&p.append("domainReferenceId",e.referenceId);const g=`/logs/system?${p.toString()}`,x=await G.get(g);x.success&&x.data?n(x.data):(n([]),console.log(`No domain errors found for ${e.domainType}`))}catch(p){n([]),i(`Failed to fetch domain errors for ${e.domainType}`),console.error(`Failed to fetch domain errors for ${e.domainType}:`,p)}finally{a(!1)}},m=()=>{u()};return h.useEffect(()=>{u()},[e.domainType,e.referenceId]),h.useEffect(()=>{if(e.autoRefresh){const p=setInterval(u,e.refreshInterval||3e4);return()=>clearInterval(p)}},[e.autoRefresh,e.refreshInterval]),{domainErrors:t||[],systemLogs:e.includeSystemLogs?l||[]:[],loading:r||(e.includeSystemLogs?c:!1),error:o||(e.includeSystemLogs?d:void 0),refetch:m}},Ude=({logs:e,loading:t,error:n,selectedSource:r})=>{const[a,o]=h.useState(new Set),i=Array.isArray(e)?e:[],l=p=>{const g=new Set(a);g.has(p)?g.delete(p):g.add(p),o(g)},c=p=>{switch(p){case"error":return s.jsx(yt,{className:"h-4 w-4 text-destructive"});case"warn":return s.jsx(Ps,{className:"h-4 w-4 text-warning"});case"info":return s.jsx(ds,{className:"h-4 w-4 text-success"});default:return s.jsx(JC,{className:"h-4 w-4 text-muted-foreground"})}},d=p=>{switch(p){case"error":return s.jsx(fe,{variant:"destructive",children:"Error"});case"warn":return s.jsx(fe,{variant:"secondary",className:"text-warning",children:"Warning"});case"info":return s.jsx(fe,{variant:"outline",children:"Info"});case"debug":return s.jsx(fe,{variant:"secondary",children:"Debug"});default:return s.jsx(fe,{variant:"outline",children:p})}},u=(p,g)=>{const x=g||p;switch(p){case"adapter":return s.jsx(fe,{variant:"default",children:x});case"channel":return s.jsx(fe,{variant:"secondary",children:x});case"system":return s.jsx(fe,{variant:"outline",children:"System"});case"flow":return s.jsxs(fe,{variant:"default",children:["Flow: ",x]});case"api":return s.jsx(fe,{variant:"destructive",children:"API"});default:return s.jsx(fe,{variant:"outline",children:x})}},m=p=>new Date(p).toLocaleString();return t?s.jsx(K,{className:"bg-secondary border-border/50",children:s.jsx(re,{className:"p-8 text-center",children:s.jsx("div",{className:"animate-pulse",children:"Loading logs..."})})}):n?s.jsx(K,{className:"bg-secondary border-border/50",children:s.jsx(re,{className:"p-8 text-center",children:s.jsxs("div",{className:"text-destructive",children:["Error loading logs: ",n]})})}):e.length===0?s.jsx(K,{className:"bg-secondary border-border/50",children:s.jsx(re,{className:"p-8 text-center",children:s.jsx("div",{className:"text-muted-foreground",children:r?"No logs found for the selected filters":"No system logs available"})})}):s.jsxs(K,{className:"bg-secondary border-border/50",children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(JC,{className:"h-5 w-5"}),"System Logs (",i.length,")"]})}),s.jsx(re,{children:s.jsx(zn,{className:"h-96",children:s.jsx("div",{className:"space-y-2",children:i.map(p=>s.jsxs("div",{className:"border border-border/50 rounded-lg p-3 bg-background/50",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[c(p.level),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d(p.level),u(p.source,p.sourceName),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(js,{className:"h-3 w-3"}),m(p.timestamp)]})]}),s.jsx("p",{className:"text-sm font-medium text-foreground",children:p.message}),p.details&&s.jsxs("div",{className:"mt-2",children:[s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>l(p.id),className:"text-xs",children:a.has(p.id)?"Hide Details":"Show Details"}),a.has(p.id)&&s.jsx("div",{className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:s.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:typeof p.details=="string"?p.details:JSON.stringify(p.details,null,2)})})]})]})]})}),p!==e[e.length-1]&&s.jsx(pt,{className:"mt-3"})]},p.id))})})})]})},LT={success:"text-success",error:"text-destructive",warning:"text-warning",info:"text-info",active:"text-primary",inactive:"text-muted-foreground",pending:"text-warning",processing:"text-info",debug:"text-muted-foreground",warn:"text-warning",critical:"text-destructive",default:"text-foreground",muted:"text-muted-foreground"},dm=e=>LT[e]||LT.default,Wi=({domainType:e,domainErrors:t,systemLogs:n,loading:r,error:a,referenceId:o,referenceName:i})=>{const[l,c]=h.useState(new Set),[d,u]=h.useState(new Set),m=v=>{const j=new Set(l);j.has(v)?j.delete(v):j.add(v),c(j)},p=v=>{const j=new Set(d);j.has(v)?j.delete(v):j.add(v),u(j)},g=v=>{const N={UserManagement:mo,FlowEngine:Lu,AdapterManagement:ii,DataStructures:Ds,ChannelManagement:qt,MessageProcessing:Xs}[v];return s.jsx(N,{className:"h-4 w-4"})},x=v=>{const j={Create:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",Update:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Delete:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",Test:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Deploy:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},N=Object.keys(j).find(E=>v.includes(E))||"default",b=j[N]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return s.jsx(fe,{variant:"secondary",className:b,children:v})},f=v=>{const j=v.toLowerCase(),N=dm(j==="error"?"error":j==="warn"?"warning":j==="info"?"info":"debug");switch(j){case"error":return s.jsx(en,{className:`h-4 w-4 ${N}`});case"warn":return s.jsx(Ps,{className:`h-4 w-4 ${N}`});case"info":return s.jsx(ds,{className:`h-4 w-4 ${N}`});case"debug":return s.jsx(qt,{className:`h-4 w-4 ${N}`});default:return s.jsx(ds,{className:`h-4 w-4 ${N}`})}},w=v=>new Date(v).toLocaleString(),y=v=>{try{const j=JSON.parse(v);return JSON.stringify(j,null,2)}catch{return v}};return r?s.jsx(K,{children:s.jsx(re,{className:"p-6",children:s.jsx("div",{className:"text-center text-muted-foreground",children:"Loading logs..."})})}):a?s.jsxs(We,{variant:"destructive",children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx(ze,{children:a})]}):s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[g(e),e," Logs",i&&s.jsx(fe,{variant:"outline",children:i})]})}),s.jsx(re,{children:s.jsxs(et,{defaultValue:"errors",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-2",children:[s.jsxs(xe,{value:"errors",children:["User-Friendly Errors (",t?.length||0,")"]}),s.jsxs(xe,{value:"system",children:["System Logs (",n?.length||0,")"]})]}),s.jsx(ye,{value:"errors",children:s.jsx(zn,{className:"h-[600px] w-full",children:!t||t.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No domain errors found."}):s.jsx("div",{className:"space-y-4",children:t.map(v=>s.jsx(K,{className:"border-l-4 border-l-red-500",children:s.jsx(re,{className:"p-4",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[x(v.action),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.jsx(js,{className:"h-3 w-3 inline mr-1"}),w(v.createdAt)]})]}),v.description&&s.jsx("p",{className:"text-sm font-medium",children:v.description}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>m(v.id),className:"h-6 px-2",children:[l.has(v.id)?s.jsx(ur,{className:"h-3 w-3"}):s.jsx(Cn,{className:"h-3 w-3"}),"Show Details"]})}),l.has(v.id)&&s.jsxs("div",{className:"mt-3 space-y-3 border-t pt-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Request Payload:"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-40",children:y(v.payload)})]}),v.systemLogId&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm mb-1",children:"System Log ID:"}),s.jsx(fe,{variant:"outline",className:"text-xs",children:v.systemLogId})]})]})]})})})},v.id))})})}),s.jsx(ye,{value:"system",children:s.jsx(zn,{className:"h-[600px] w-full",children:!n||n.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No system logs found."}):s.jsx("div",{className:"space-y-4",children:n.map(v=>s.jsx(K,{children:s.jsx(re,{className:"p-4",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[f(v.level),s.jsx(fe,{variant:v.level==="error"?"destructive":"secondary",children:(v.level||"info").toUpperCase()}),v.source&&s.jsx(fe,{variant:"outline",children:v.source}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.jsx(js,{className:"h-3 w-3 inline mr-1"}),w(v.timestamp)]})]}),s.jsx("p",{className:"text-sm font-medium",children:v.message}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>p(v.id),className:"h-6 px-2",children:[d.has(v.id)?s.jsx(ur,{className:"h-3 w-3"}):s.jsx(Cn,{className:"h-3 w-3"}),"Show Details"]})}),d.has(v.id)&&s.jsxs("div",{className:"mt-3 space-y-3 border-t pt-3",children:[v.details&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Details:"}),s.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-40",children:typeof v.details=="string"?v.details:JSON.stringify(v.details,null,2)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[v.sourceName&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Source Name:"}),s.jsx("p",{className:"text-muted-foreground",children:v.sourceName})]}),v.sourceId&&s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Source ID:"}),s.jsx("p",{className:"text-muted-foreground",children:v.sourceId})]})]})]})]})})})},v.id))})})})]})})]})};var He=function(){return He=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},He.apply(this,arguments)};function Bde(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function C_(e,t,n){for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function fh(e){return e.mode==="multiple"}function gh(e){return e.mode==="range"}function _g(e){return e.mode==="single"}var Hde={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function qde(e,t){return ja(e,"LLLL y",t)}function Wde(e,t){return ja(e,"d",t)}function zde(e,t){return ja(e,"LLLL",t)}function Xde(e){return"".concat(e)}function Yde(e,t){return ja(e,"cccccc",t)}function Kde(e,t){return ja(e,"yyyy",t)}var Gde=Object.freeze({__proto__:null,formatCaption:qde,formatDay:Wde,formatMonthCaption:zde,formatWeekNumber:Xde,formatWeekdayName:Yde,formatYearCaption:Kde}),Jde=function(e,t,n){return ja(e,"do MMMM (EEEE)",n)},Qde=function(){return"Month: "},Zde=function(){return"Go to next month"},eue=function(){return"Go to previous month"},tue=function(e,t){return ja(e,"cccc",t)},sue=function(e){return"Week n. ".concat(e)},nue=function(){return"Year: "},rue=Object.freeze({__proto__:null,labelDay:Jde,labelMonthDropdown:Qde,labelNext:Zde,labelPrevious:eue,labelWeekNumber:sue,labelWeekday:tue,labelYearDropdown:nue});function aue(){var e="buttons",t=Hde,n=Rb,r={},a={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:Gde,labels:rue,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:o,styles:i,today:l,mode:"default"}}function oue(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=an(r):t&&(o=new Date(t,0,1)),a?i=$g(a):n&&(i=new Date(n,11,31)),{fromDate:o?tc(o):void 0,toDate:i?tc(i):void 0}}var E_=h.createContext(void 0);function iue(e){var t,n=e.initialProps,r=aue(),a=oue(n),o=a.fromDate,i=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(_g(n)||fh(n)||gh(n))&&(c=n.onSelect);var d=He(He(He({},r),n),{captionLayout:l,classNames:He(He({},r.classNames),n.classNames),components:He({},n.components),formatters:He(He({},r.formatters),n.formatters),fromDate:o,labels:He(He({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:He(He({},r.modifiers),n.modifiers),modifiersClassNames:He(He({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:He(He({},r.styles),n.styles),toDate:i});return s.jsx(E_.Provider,{value:d,children:e.children})}function Dt(){var e=h.useContext(E_);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function T_(e){var t=Dt(),n=t.locale,r=t.classNames,a=t.styles,o=t.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:n})})}function lue(e){return s.jsx("svg",He({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function P_(e){var t,n,r=e.onChange,a=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,d=Dt(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:lue;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:r,children:o}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[i,s.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function cue(e){var t,n=Dt(),r=n.fromDate,a=n.toDate,o=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var m=[];if(jde(r,a))for(var p=an(r),g=r.getMonth();g<=a.getMonth();g++)m.push(wv(p,g));else for(var p=an(new Date),g=0;g<=11;g++)m.push(wv(p,g));var x=function(w){var y=Number(w.target.value),v=wv(an(e.displayMonth),y);e.onChange(v)},f=(t=d?.Dropdown)!==null&&t!==void 0?t:P_;return s.jsx(f,{name:"months","aria-label":u(),className:c.dropdown_month,style:o.dropdown_month,onChange:x,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:m.map(function(w){return s.jsx("option",{value:w.getMonth(),children:l(w,{locale:i})},w.getMonth())})})}function due(e){var t,n=e.displayMonth,r=Dt(),a=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,c=r.classNames,d=r.components,u=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!a)return s.jsx(s.Fragment,{});if(!o)return s.jsx(s.Fragment,{});for(var g=a.getFullYear(),x=o.getFullYear(),f=g;f<=x;f++)p.push(IT(v_(new Date),f));var w=function(v){var j=IT(an(n),Number(v.target.value));e.onChange(j)},y=(t=d?.Dropdown)!==null&&t!==void 0?t:P_;return s.jsx(y,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:n.getFullYear(),caption:u(n,{locale:i}),children:p.map(function(v){return s.jsx("option",{value:v.getFullYear(),children:u(v,{locale:i})},v.getFullYear())})})}function uue(e,t){var n=h.useState(e),r=n[0],a=n[1],o=t===void 0?r:t;return[o,a]}function hue(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&nc(o,a)<0){var d=-1*(c-1);a=vr(o,d)}return i&&nc(a,i)<0&&(a=i),an(a)}function mue(){var e=Dt(),t=hue(e),n=uue(t,e.month),r=n[0],a=n[1],o=function(i){var l;if(!e.disableNavigation){var c=an(i);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,o]}function pue(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=an(e),o=an(vr(a,r)),i=nc(o,a),l=[],c=0;c<i;c++){var d=vr(a,c);l.push(d)}return n&&(l=l.reverse()),l}function fue(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=r?o:1,l=an(e);if(!n)return vr(l,i);var c=nc(n,e);if(!(c<o))return vr(l,i)}}function gue(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,o=a===void 0?1:a,i=r?o:1,l=an(e);if(!n)return vr(l,-i);var c=nc(l,n);if(!(c<=0))return vr(l,-i)}}var A_=h.createContext(void 0);function xue(e){var t=Dt(),n=mue(),r=n[0],a=n[1],o=pue(r,t),i=fue(r,t),l=gue(r,t),c=function(m){return o.some(function(p){return Fb(m,p)})},d=function(m,p){c(m)||(p&&S_(m,p)?a(vr(m,1+t.numberOfMonths*-1)):a(m))},u={currentMonth:r,displayMonths:o,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:i,isDateDisplayed:c};return s.jsx(A_.Provider,{value:u,children:e.children})}function xh(){var e=h.useContext(A_);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function $T(e){var t,n=Dt(),r=n.classNames,a=n.styles,o=n.components,i=xh().goToMonth,l=function(u){i(vr(u,e.displayIndex?-e.displayIndex:0))},c=(t=o?.CaptionLabel)!==null&&t!==void 0?t:T_,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:d}),s.jsx(cue,{onChange:l,displayMonth:e.displayMonth}),s.jsx(due,{onChange:l,displayMonth:e.displayMonth})]})}function vue(e){return s.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yue(e){return s.jsx("svg",He({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var cf=h.forwardRef(function(e,t){var n=Dt(),r=n.classNames,a=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=He(He({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",He({},e,{ref:t,type:"button",className:i,style:l}))});function jue(e){var t,n,r=Dt(),a=r.dir,o=r.locale,i=r.classNames,l=r.styles,c=r.labels,d=c.labelPrevious,u=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var p=d(e.previousMonth,{locale:o}),g=[i.nav_button,i.nav_button_previous].join(" "),x=u(e.nextMonth,{locale:o}),f=[i.nav_button,i.nav_button_next].join(" "),w=(t=m?.IconRight)!==null&&t!==void 0?t:yue,y=(n=m?.IconLeft)!==null&&n!==void 0?n:vue;return s.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(cf,{name:"previous-month","aria-label":p,className:g,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(w,{className:i.nav_icon,style:l.nav_icon}):s.jsx(y,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(cf,{name:"next-month","aria-label":x,className:f,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(y,{className:i.nav_icon,style:l.nav_icon}):s.jsx(w,{className:i.nav_icon,style:l.nav_icon})})]})}function _T(e){var t=Dt().numberOfMonths,n=xh(),r=n.previousMonth,a=n.nextMonth,o=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(x){return Fb(e.displayMonth,x)}),c=l===0,d=l===i.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c),p=function(){r&&o(r)},g=function(){a&&o(a)};return s.jsx(jue,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:r,onPreviousClick:p,onNextClick:g})}function wue(e){var t,n=Dt(),r=n.classNames,a=n.disableNavigation,o=n.styles,i=n.captionLayout,l=n.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:T_,d;return a?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?d=s.jsx($T,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx($T,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(_T,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(_T,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:o.caption,children:d})}function Nue(e){var t=Dt(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?s.jsx("tfoot",{className:a,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:n})})}):s.jsx(s.Fragment,{})}function bue(e,t,n){for(var r=n?wi(new Date):zr(new Date,{locale:e,weekStartsOn:t}),a=[],o=0;o<7;o++){var i=Is(r,o);a.push(i)}return a}function Sue(){var e=Dt(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=bue(a,o,i);return s.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&s.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,m){return s.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function Cue(){var e,t=Dt(),n=t.classNames,r=t.styles,a=t.components,o=(e=a?.HeadRow)!==null&&e!==void 0?e:Sue;return s.jsx("thead",{style:r.head,className:n.head,children:s.jsx(o,{})})}function Eue(e){var t=Dt(),n=t.locale,r=t.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:n})})}var Ib=h.createContext(void 0);function Tue(e){if(!fh(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(Ib.Provider,{value:t,children:e.children})}return s.jsx(Pue,{initialProps:e.initialProps,children:e.children})}function Pue(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,o=t.max,i=function(d,u,m){var p,g;(p=t.onDayClick)===null||p===void 0||p.call(t,d,u,m);var x=!!(u.selected&&a&&r?.length===a);if(!x){var f=!!(!u.selected&&o&&r?.length===o);if(!f){var w=r?C_([],r):[];if(u.selected){var y=w.findIndex(function(v){return Ks(d,v)});w.splice(y,1)}else w.push(d);(g=t.onSelect)===null||g===void 0||g.call(t,w,d,u,m)}}},l={disabled:[]};r&&l.disabled.push(function(d){var u=o&&r.length>o-1,m=r.some(function(p){return Ks(p,d)});return!!(u&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return s.jsx(Ib.Provider,{value:c,children:n})}function Lb(){var e=h.useContext(Ib);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Aue(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?Ks(a,e)&&Ks(r,e)?void 0:Ks(a,e)?{from:a,to:void 0}:Ks(r,e)?void 0:aw(r,e)?{from:e,to:a}:{from:r,to:e}:a?aw(e,a)?{from:a,to:e}:{from:e,to:a}:r?S_(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var $b=h.createContext(void 0);function Due(e){if(!gh(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx($b.Provider,{value:t,children:e.children})}return s.jsx(kue,{initialProps:e.initialProps,children:e.children})}function kue(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},o=a.from,i=a.to,l=t.min,c=t.max,d=function(g,x,f){var w,y;(w=t.onDayClick)===null||w===void 0||w.call(t,g,x,f);var v=Aue(g,r);(y=t.onSelect)===null||y===void 0||y.call(t,v,g,x,f)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(u.range_start=[o],i?(u.range_end=[i],Ks(o,i)||(u.range_middle=[{after:o,before:i}])):u.range_end=[o]):i&&(u.range_start=[i],u.range_end=[i]),l&&(o&&!i&&u.disabled.push({after:jv(o,l-1),before:Is(o,l-1)}),o&&i&&u.disabled.push({after:o,before:Is(o,l-1)}),!o&&i&&u.disabled.push({after:jv(i,l-1),before:Is(i,l-1)})),c){if(o&&!i&&(u.disabled.push({before:Is(o,-c+1)}),u.disabled.push({after:Is(o,c-1)})),o&&i){var m=Or(i,o)+1,p=c-m;u.disabled.push({before:jv(o,p)}),u.disabled.push({after:Is(i,p)})}!o&&i&&(u.disabled.push({before:Is(i,-c+1)}),u.disabled.push({after:Is(i,c-1)}))}return s.jsx($b.Provider,{value:{selected:r,onDayClick:d,modifiers:u},children:n})}function _b(){var e=h.useContext($b);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Wm(e){return Array.isArray(e)?C_([],e):e!==void 0?[e]:[]}function Mue(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=Wm(a)}),t}var yr;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(yr||(yr={}));var Rue=yr.Selected,na=yr.Disabled,Fue=yr.Hidden,Oue=yr.Today,Nv=yr.RangeEnd,bv=yr.RangeMiddle,Sv=yr.RangeStart,Iue=yr.Outside;function Lue(e,t,n){var r,a=(r={},r[Rue]=Wm(e.selected),r[na]=Wm(e.disabled),r[Fue]=Wm(e.hidden),r[Oue]=[e.today],r[Nv]=[],r[bv]=[],r[Sv]=[],r[Iue]=[],r);return e.fromDate&&a[na].push({before:e.fromDate}),e.toDate&&a[na].push({after:e.toDate}),fh(e)?a[na]=a[na].concat(t.modifiers[na]):gh(e)&&(a[na]=a[na].concat(n.modifiers[na]),a[Sv]=n.modifiers[Sv],a[bv]=n.modifiers[bv],a[Nv]=n.modifiers[Nv]),a}var D_=h.createContext(void 0);function $ue(e){var t=Dt(),n=Lb(),r=_b(),a=Lue(t,n,r),o=Mue(t.modifiers),i=He(He({},a),o);return s.jsx(D_.Provider,{value:i,children:e.children})}function k_(){var e=h.useContext(D_);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function _ue(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Vue(e){return!!(e&&typeof e=="object"&&"from"in e)}function Uue(e){return!!(e&&typeof e=="object"&&"after"in e)}function Bue(e){return!!(e&&typeof e=="object"&&"before"in e)}function Hue(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function que(e,t){var n,r=t.from,a=t.to;if(r&&a){var o=Or(a,r)<0;o&&(n=[a,r],r=n[0],a=n[1]);var i=Or(e,r)>=0&&Or(a,e)>=0;return i}return a?Ks(a,e):r?Ks(r,e):!1}function Wue(e){return kb(e)}function zue(e){return Array.isArray(e)&&e.every(kb)}function Xue(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Wue(n))return Ks(e,n);if(zue(n))return n.includes(e);if(Vue(n))return que(e,n);if(Hue(n))return n.dayOfWeek.includes(e.getDay());if(_ue(n)){var r=Or(n.before,e),a=Or(n.after,e),o=r>0,i=a<0,l=aw(n.before,n.after);return l?i&&o:o||i}return Uue(n)?Or(e,n.after)>0:Bue(n)?Or(n.before,e)>0:typeof n=="function"?n(e):!1})}function Vb(e,t,n){var r=Object.keys(t).reduce(function(o,i){var l=t[i];return Xue(e,l)&&o.push(i),o},[]),a={};return r.forEach(function(o){return a[o]=!0}),n&&!Fb(e,n)&&(a.outside=!0),a}function Yue(e,t){for(var n=an(e[0]),r=$g(e[e.length-1]),a,o,i=n;i<=r;){var l=Vb(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Is(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),a||(a=i),i=Is(i,1)}return o||a}var Kue=365;function M_(e,t){var n=t.moveBy,r=t.direction,a=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,p={day:Is,week:rw,month:vr,year:ice,startOfWeek:function(w){return a.ISOWeek?wi(w):zr(w,{locale:m,weekStartsOn:c})},endOfWeek:function(w){return a.ISOWeek?y_(w):Mb(w,{locale:m,weekStartsOn:c})}},g=p[n](e,r==="after"?1:-1);r==="before"&&d?g=lce([d,g]):r==="after"&&u&&(g=cce([u,g]));var x=!0;if(o){var f=Vb(g,o);x=!f.disabled&&!f.hidden}return x?g:l.count>Kue?l.lastFocused:M_(g,{moveBy:n,direction:r,context:a,modifiers:o,retry:He(He({},l),{count:l.count+1})})}var R_=h.createContext(void 0);function Gue(e){var t=xh(),n=k_(),r=h.useState(),a=r[0],o=r[1],i=h.useState(),l=i[0],c=i[1],d=Yue(t.displayMonths,n),u=a??(l&&t.isDateDisplayed(l))?l:d,m=function(){c(a),o(void 0)},p=function(w){o(w)},g=Dt(),x=function(w,y){if(a){var v=M_(a,{moveBy:w,direction:y,context:g,modifiers:n});Ks(a,v)||(t.goToDate(v,a),p(v))}},f={focusedDay:a,focusTarget:u,blur:m,focus:p,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return s.jsx(R_.Provider,{value:f,children:e.children})}function Ub(){var e=h.useContext(R_);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Jue(e,t){var n=k_(),r=Vb(e,n,t);return r}var Bb=h.createContext(void 0);function Que(e){if(!_g(e.initialProps)){var t={selected:void 0};return s.jsx(Bb.Provider,{value:t,children:e.children})}return s.jsx(Zue,{initialProps:e.initialProps,children:e.children})}function Zue(e){var t=e.initialProps,n=e.children,r=function(o,i,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,o,i,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,o,o,i,l)},a={selected:t.selected,onDayClick:r};return s.jsx(Bb.Provider,{value:a,children:n})}function F_(){var e=h.useContext(Bb);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function ehe(e,t){var n=Dt(),r=F_(),a=Lb(),o=_b(),i=Ub(),l=i.focusDayAfter,c=i.focusDayBefore,d=i.focusWeekAfter,u=i.focusWeekBefore,m=i.blur,p=i.focus,g=i.focusMonthBefore,x=i.focusMonthAfter,f=i.focusYearBefore,w=i.focusYearAfter,y=i.focusStartOfWeek,v=i.focusEndOfWeek,j=function(D){var M,_,H,$;_g(n)?(M=r.onDayClick)===null||M===void 0||M.call(r,e,t,D):fh(n)?(_=a.onDayClick)===null||_===void 0||_.call(a,e,t,D):gh(n)?(H=o.onDayClick)===null||H===void 0||H.call(o,e,t,D):($=n.onDayClick)===null||$===void 0||$.call(n,e,t,D)},N=function(D){var M;p(e),(M=n.onDayFocus)===null||M===void 0||M.call(n,e,t,D)},b=function(D){var M;m(),(M=n.onDayBlur)===null||M===void 0||M.call(n,e,t,D)},E=function(D){var M;(M=n.onDayMouseEnter)===null||M===void 0||M.call(n,e,t,D)},S=function(D){var M;(M=n.onDayMouseLeave)===null||M===void 0||M.call(n,e,t,D)},P=function(D){var M;(M=n.onDayPointerEnter)===null||M===void 0||M.call(n,e,t,D)},A=function(D){var M;(M=n.onDayPointerLeave)===null||M===void 0||M.call(n,e,t,D)},L=function(D){var M;(M=n.onDayTouchCancel)===null||M===void 0||M.call(n,e,t,D)},R=function(D){var M;(M=n.onDayTouchEnd)===null||M===void 0||M.call(n,e,t,D)},I=function(D){var M;(M=n.onDayTouchMove)===null||M===void 0||M.call(n,e,t,D)},V=function(D){var M;(M=n.onDayTouchStart)===null||M===void 0||M.call(n,e,t,D)},O=function(D){var M;(M=n.onDayKeyUp)===null||M===void 0||M.call(n,e,t,D)},k=function(D){var M;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),d();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),u();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?f():g();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?w():x();break;case"Home":D.preventDefault(),D.stopPropagation(),y();break;case"End":D.preventDefault(),D.stopPropagation(),v();break}(M=n.onDayKeyDown)===null||M===void 0||M.call(n,e,t,D)},T={onClick:j,onFocus:N,onBlur:b,onKeyDown:k,onKeyUp:O,onMouseEnter:E,onMouseLeave:S,onPointerEnter:P,onPointerLeave:A,onTouchCancel:L,onTouchEnd:R,onTouchMove:I,onTouchStart:V};return T}function the(){var e=Dt(),t=F_(),n=Lb(),r=_b(),a=_g(e)?t.selected:fh(e)?n.selected:gh(e)?r.selected:void 0;return a}function she(e){return Object.values(yr).includes(e)}function nhe(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(she(r)){var o=e.classNames["day_".concat(r)];o&&n.push(o)}}),n}function rhe(e,t){var n=He({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=He(He({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function ahe(e,t,n){var r,a,o,i=Dt(),l=Ub(),c=Jue(e,t),d=ehe(e,c),u=the(),m=!!(i.onDayClick||i.mode!=="default");h.useEffect(function(){var E;c.outside||l.focusedDay&&m&&Ks(l.focusedDay,e)&&((E=n.current)===null||E===void 0||E.focus())},[l.focusedDay,e,n,m,c.outside]);var p=nhe(i,c).join(" "),g=rhe(i,c),x=!!(c.outside&&!i.showOutsideDays||c.hidden),f=(o=(a=i.components)===null||a===void 0?void 0:a.DayContent)!==null&&o!==void 0?o:Eue,w=s.jsx(f,{date:e,displayMonth:t,activeModifiers:c}),y={style:g,className:p,children:w,role:"gridcell"},v=l.focusTarget&&Ks(l.focusTarget,e)&&!c.outside,j=l.focusedDay&&Ks(l.focusedDay,e),N=He(He(He({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=j||v?0:-1,r)),d),b={isButton:m,isHidden:x,activeModifiers:c,selectedDays:u,buttonProps:N,divProps:y};return b}function ohe(e){var t=h.useRef(null),n=ahe(e.date,e.displayMonth,t);return n.isHidden?s.jsx("div",{role:"gridcell"}):n.isButton?s.jsx(cf,He({name:"day",ref:t},n.buttonProps)):s.jsx("div",He({},n.divProps))}function ihe(e){var t=e.number,n=e.dates,r=Dt(),a=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return s.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:u});var m=c(Number(t),{locale:l}),p=function(g){a(t,n,g)};return s.jsx(cf,{name:"week-number","aria-label":m,className:i.weeknumber,style:o.weeknumber,onClick:p,children:u})}function lhe(e){var t,n,r=Dt(),a=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l?.Day)!==null&&t!==void 0?t:ohe,d=(n=l?.WeekNumber)!==null&&n!==void 0?n:ihe,u;return i&&(u=s.jsx("td",{className:o.cell,style:a.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:o.row,style:a.row,children:[u,e.dates.map(function(m){return s.jsx("td",{className:o.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:m})},xde(m))})]})}function VT(e,t,n){for(var r=n?.ISOWeek?y_(t):Mb(t,n),a=n?.ISOWeek?wi(e):zr(e,n),o=Or(r,a),i=[],l=0;l<=o;l++)i.push(Is(a,l));var c=i.reduce(function(d,u){var m=n?.ISOWeek?j_(u):N_(u,n),p=d.find(function(g){return g.weekNumber===m});return p?(p.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function che(e,t){var n=VT(an(e),$g(e),t);if(t?.useFixedWeeks){var r=yde(e,t);if(r<6){var a=n[n.length-1],o=a.dates[a.dates.length-1],i=rw(o,6-r),l=VT(rw(o,1),i,t);n.push.apply(n,l)}}return n}function dhe(e){var t,n,r,a=Dt(),o=a.locale,i=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,p=a.firstWeekContainsDate,g=a.ISOWeek,x=che(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:g,locale:o,weekStartsOn:m,firstWeekContainsDate:p}),f=(t=u?.Head)!==null&&t!==void 0?t:Cue,w=(n=u?.Row)!==null&&n!==void 0?n:lhe,y=(r=u?.Footer)!==null&&r!==void 0?r:Nue;return s.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(f,{}),s.jsx("tbody",{className:i.tbody,style:l.tbody,children:x.map(function(v){return s.jsx(w,{displayMonth:e.displayMonth,dates:v.dates,weekNumber:v.weekNumber},v.weekNumber)})}),s.jsx(y,{displayMonth:e.displayMonth})]})}function uhe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var hhe=uhe()?h.useLayoutEffect:h.useEffect,Cv=!1,mhe=0;function UT(){return"react-day-picker-".concat(++mhe)}function phe(e){var t,n=e??(Cv?UT():null),r=h.useState(n),a=r[0],o=r[1];return hhe(function(){a===null&&o(UT())},[]),h.useEffect(function(){Cv===!1&&(Cv=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function fhe(e){var t,n,r=Dt(),a=r.dir,o=r.classNames,i=r.styles,l=r.components,c=xh().displayMonths,d=phe(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],p=i.month,g=e.displayIndex===0,x=e.displayIndex===c.length-1,f=!g&&!x;a==="rtl"&&(t=[g,x],x=t[0],g=t[1]),g&&(m.push(o.caption_start),p=He(He({},p),i.caption_start)),x&&(m.push(o.caption_end),p=He(He({},p),i.caption_end)),f&&(m.push(o.caption_between),p=He(He({},p),i.caption_between));var w=(n=l?.Caption)!==null&&n!==void 0?n:wue;return s.jsxs("div",{className:m.join(" "),style:p,children:[s.jsx(w,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(dhe,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function ghe(e){var t=Dt(),n=t.classNames,r=t.styles;return s.jsx("div",{className:n.months,style:r.months,children:e.children})}function xhe(e){var t,n,r=e.initialProps,a=Dt(),o=Ub(),i=xh(),l=h.useState(!1),c=l[0],d=l[1];h.useEffect(function(){a.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),d(!0)))},[a.initialFocus,c,o.focus,o.focusTarget,o]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=He(He({},a.styles.root),a.style),p=Object.keys(r).filter(function(x){return x.startsWith("data-")}).reduce(function(x,f){var w;return He(He({},x),(w={},w[f]=r[f],w))},{}),g=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:ghe;return s.jsx("div",He({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:s.jsx(g,{children:i.displayMonths.map(function(x,f){return s.jsx(fhe,{displayIndex:f,displayMonth:x},f)})})}))}function vhe(e){var t=e.children,n=Bde(e,["children"]);return s.jsx(iue,{initialProps:n,children:s.jsx(xue,{children:s.jsx(Que,{initialProps:n,children:s.jsx(Tue,{initialProps:n,children:s.jsx(Due,{initialProps:n,children:s.jsx($ue,{children:s.jsx(Gue,{children:t})})})})})})})}function yhe(e){return s.jsx(vhe,He({},e,{children:s.jsx(xhe,{initialProps:e})}))}function iw({className:e,classNames:t,showOutsideDays:n=!0,...r}){return s.jsx(yhe,{showOutsideDays:n,className:ce("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ce(ru({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ce(ru({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(sk,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(Cn,{className:"h-4 w-4"})},...r})}iw.displayName="Calendar";const jhe=({onFilterChange:e})=>{const[t,n]=h.useState(),[r,a]=h.useState(),o=()=>{e({dateRange:{start:t?.toISOString(),end:r?.toISOString()}})},i=()=>{n(void 0),a(void 0),e({dateRange:{}})},l=c=>{const d=new Date,u=new Date;u.setDate(d.getDate()-c),n(u),a(d),e({dateRange:{start:u.toISOString(),end:d.toISOString()}})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{className:"text-sm font-medium",children:"Date Range:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>l(1),children:"Last 24h"}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>l(7),children:"Last 7d"}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>l(30),children:"Last 30d"}),(t||r)&&s.jsx(z,{variant:"ghost",size:"sm",onClick:i,children:s.jsx(jt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-sm",children:"Start Date"}),s.jsxs(sf,{children:[s.jsx(nf,{asChild:!0,children:s.jsxs(z,{variant:"outline",size:"sm",className:ce("w-[200px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[s.jsx(qy,{className:"mr-2 h-4 w-4"}),t?ja(t,"PPP"):"Pick start date"]})}),s.jsx(yu,{className:"w-auto p-0",align:"start",children:s.jsx(iw,{mode:"single",selected:t,onSelect:c=>{n(c),c&&r&&o()},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-sm",children:"End Date"}),s.jsxs(sf,{children:[s.jsx(nf,{asChild:!0,children:s.jsxs(z,{variant:"outline",size:"sm",className:ce("w-[200px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[s.jsx(qy,{className:"mr-2 h-4 w-4"}),r?ja(r,"PPP"):"Pick end date"]})}),s.jsx(yu,{className:"w-auto p-0",align:"start",children:s.jsx(iw,{mode:"single",selected:r,onSelect:c=>{a(c),t&&c&&o()},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]})]})]})},whe=({adapterId:e})=>{const[t,n]=h.useState(!1),[r,a]=h.useState("csv"),[o,i]=h.useState(!1),{logs:l}=Ob({sourceId:e}),{toast:c}=_e(),d=async()=>{if(!e){c({title:"No Adapter Selected",description:"Please select an adapter to export logs.",variant:"destructive"});return}i(!0);try{let u,m,p;if(r==="csv"){const w=["Timestamp","Level","Message","Details"],y=l.map(v=>[v.timestamp,v.level,`"${v.message.replace(/"/g,'""')}"`,v.details?`"${JSON.stringify(v.details).replace(/"/g,'""')}"`:""]);u=[w.join(","),...y.map(v=>v.join(","))].join(`
`),m=`adapter-logs-${e}-${new Date().toISOString().split("T")[0]}.csv`,p="text/csv"}else u=JSON.stringify(l,null,2),m=`adapter-logs-${e}-${new Date().toISOString().split("T")[0]}.json`,p="application/json";const g=new Blob([u],{type:p}),x=URL.createObjectURL(g),f=document.createElement("a");f.href=x,f.download=m,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(x),c({title:"Export Successful",description:`Logs exported as ${m}`}),n(!1)}catch{c({title:"Export Failed",description:"An error occurred while exporting logs.",variant:"destructive"})}finally{i(!1)}};return s.jsxs(ft,{open:t,onOpenChange:n,children:[s.jsx(rh,{asChild:!0,children:s.jsxs(z,{variant:"outline",size:"sm",className:"hover-scale",children:[s.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export"]})}),s.jsxs(mt,{children:[s.jsx(gt,{children:s.jsx(xt,{children:"Export Adapter Logs"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Export Format"}),s.jsxs(se,{value:r,onValueChange:u=>a(u),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"csv",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bs,{className:"h-4 w-4"}),"CSV Format"]})}),s.jsx(F,{value:"json",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(O0,{className:"h-4 w-4"}),"JSON Format"]})})]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["This will export ",l.length," log entries from the currently selected adapter and filters."]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(z,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(z,{onClick:d,disabled:o||!e,children:o?"Exporting...":"Export"})]})]})]})]})},Nhe=()=>{const[e,t]=h.useState(""),[n,r]=h.useState(""),[a,o]=h.useState(""),[i,l]=h.useState(""),[c,d]=h.useState({}),[u,m]=h.useState("system"),{logs:p,loading:g,error:x,refetch:f,sources:w}=Ob({source:e||void 0,sourceId:n||void 0,level:a||void 0,search:i,startDate:c.start,endDate:c.end}),y=qi({domainType:"UserManagement",includeSystemLogs:!1}),v=qi({domainType:"FlowEngine",includeSystemLogs:!1}),j=qi({domainType:"AdapterManagement",includeSystemLogs:!1}),N=qi({domainType:"DataStructures",includeSystemLogs:!1}),b=qi({domainType:"ChannelManagement",includeSystemLogs:!1}),E=qi({domainType:"MessageProcessing",includeSystemLogs:!1}),S=()=>{f(),y.refetch(),v.refetch(),j.refetch(),N.refetch(),b.refetch(),E.refetch()},P=A=>{o(A.level),d(A.dateRange)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(Qd,{className:"h-7 w-7"}),"System Logs"]}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor and analyze all system logs including errors, adapters, channels, and flows"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(whe,{adapterId:n}),s.jsxs(z,{variant:"outline",size:"sm",onClick:S,className:"hover-scale",children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),s.jsxs(K,{className:"bg-gradient-secondary border-border/50",children:[s.jsx(oe,{children:s.jsxs(ie,{className:"text-lg flex items-center gap-2",children:[s.jsx(uc,{className:"h-5 w-5"}),"Filters"]})}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Source Type"}),s.jsxs(se,{value:e,onValueChange:A=>t(A),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All sources"})}),s.jsxs(te,{children:[s.jsx(F,{value:"system",children:"System"}),s.jsx(F,{value:"adapter",children:"Adapters"}),s.jsx(F,{value:"channel",children:"Channels"}),s.jsx(F,{value:"flow",children:"Flows"}),s.jsx(F,{value:"api",children:"API"})]})]})]}),e&&e!=="system"&&e!=="api"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Specific Source"}),s.jsxs(se,{value:n,onValueChange:r,children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:`Select ${e}`})}),s.jsxs(te,{children:[e==="adapter"&&w.adapters.map(A=>s.jsx(F,{value:A.id,children:A.name},A.id)),e==="channel"&&w.channels.map(A=>s.jsx(F,{value:A.id,children:A.name},A.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Log Level"}),s.jsxs(se,{value:a,onValueChange:A=>o(A),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"All levels"})}),s.jsxs(te,{children:[s.jsx(F,{value:"debug",children:"Debug"}),s.jsx(F,{value:"info",children:"Info"}),s.jsx(F,{value:"warn",children:"Warning"}),s.jsx(F,{value:"error",children:"Error"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search logs...",value:i,onChange:A=>l(A.target.value),className:"pl-10"})]})]})]}),s.jsx(jhe,{onFilterChange:P})]})]}),p.length>0&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Logs"}),s.jsx("p",{className:"text-2xl font-bold",children:p.length})]}),s.jsx(fe,{variant:"outline",children:"24h"})]})})}),s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Errors"}),s.jsx("p",{className:"text-2xl font-bold text-destructive",children:p.filter(A=>A.level==="error").length})]}),s.jsx(fe,{variant:"destructive",children:"Error"})]})})}),s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Warnings"}),s.jsx("p",{className:"text-2xl font-bold text-warning",children:p.filter(A=>A.level==="warn").length})]}),s.jsx(fe,{variant:"secondary",children:"Warning"})]})})}),s.jsx(K,{className:"bg-gradient-secondary border-border/50",children:s.jsx(re,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Info"}),s.jsx("p",{className:"text-2xl font-bold text-success",children:p.filter(A=>A.level==="info").length})]}),s.jsx(fe,{variant:"outline",children:"Info"})]})})})]}),s.jsxs(et,{value:u,onValueChange:m,children:[s.jsxs(Ke,{className:"grid w-full grid-cols-7",children:[s.jsxs(xe,{value:"system",className:"flex items-center gap-2",children:[s.jsx(Qd,{className:"h-4 w-4"}),"System Logs"]}),s.jsxs(xe,{value:"user",className:"flex items-center gap-2",children:[s.jsx(mo,{className:"h-4 w-4"}),"Users"]}),s.jsxs(xe,{value:"flow",className:"flex items-center gap-2",children:[s.jsx(Lu,{className:"h-4 w-4"}),"Flows"]}),s.jsxs(xe,{value:"adapter",className:"flex items-center gap-2",children:[s.jsx(ii,{className:"h-4 w-4"}),"Adapters"]}),s.jsxs(xe,{value:"structure",className:"flex items-center gap-2",children:[s.jsx(Ds,{className:"h-4 w-4"}),"Structures"]}),s.jsxs(xe,{value:"channel",className:"flex items-center gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),"Channels"]}),s.jsxs(xe,{value:"message",className:"flex items-center gap-2",children:[s.jsx(Xs,{className:"h-4 w-4"}),"Messages"]})]}),s.jsx(ye,{value:"system",children:s.jsx(Ude,{logs:p,loading:g,error:x,selectedSource:e})}),s.jsx(ye,{value:"user",children:s.jsx(Wi,{domainType:"UserManagement",domainErrors:y.domainErrors,systemLogs:y.systemLogs,loading:y.loading,error:y.error})}),s.jsx(ye,{value:"flow",children:s.jsx(Wi,{domainType:"FlowEngine",domainErrors:v.domainErrors,systemLogs:v.systemLogs,loading:v.loading,error:v.error})}),s.jsx(ye,{value:"adapter",children:s.jsx(Wi,{domainType:"AdapterManagement",domainErrors:j.domainErrors,systemLogs:j.systemLogs,loading:j.loading,error:j.error})}),s.jsx(ye,{value:"structure",children:s.jsx(Wi,{domainType:"DataStructures",domainErrors:N.domainErrors,systemLogs:N.systemLogs,loading:N.loading,error:N.error})}),s.jsx(ye,{value:"channel",children:s.jsx(Wi,{domainType:"ChannelManagement",domainErrors:b.domainErrors,systemLogs:b.systemLogs,loading:b.loading,error:b.error})}),s.jsx(ye,{value:"message",children:s.jsx(Wi,{domainType:"MessageProcessing",domainErrors:E.domainErrors,systemLogs:E.systemLogs,loading:E.loading,error:E.error})})]})]})},bhe=[{value:"FILE_TRANSFER",label:"File Transfer"},{value:"MESSAGING",label:"Messaging"},{value:"DATABASE",label:"Database"},{value:"WEB_SERVICE",label:"Web Service"},{value:"MAIL",label:"Mail"},{value:"OTHER",label:"Other"}],BT=[{value:"network",icon:ii},{value:"shield",icon:Ln},{value:"folder",icon:ik},{value:"message-square",icon:Xs},{value:"database",icon:Ds},{value:"globe",icon:kr},{value:"mail",icon:Iu},{value:"file-text",icon:bs},{value:"cpu",icon:IB},{value:"activity",icon:dc},{value:"cloud",icon:FB},{value:"inbox",icon:ck},{value:"download",icon:hr},{value:"hard-drive",icon:lk},{value:"zap",icon:sn}],She=()=>{const[e,t]=h.useState([]),[n,r]=h.useState(!0),[a,o]=h.useState(!1),[i,l]=h.useState(null),{toast:c}=_e(),[d,u]=h.useState({name:"",displayName:"",description:"",category:"",iconName:"network",isActive:!0,supportsSender:!0,supportsReceiver:!0,configurationSchema:""});h.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const v=await fetch("/api/admin/adapter-types");if(v.ok){const j=await v.json();t(j||[])}else if(v.status===404)t([]);else throw new Error("Failed to fetch adapter types")}catch(v){console.log("API not available yet, starting with empty data:",v),t([])}finally{r(!1)}},p=async v=>{v.preventDefault();try{const j={...d,configurationSchema:d.configurationSchema?JSON.parse(d.configurationSchema):null},N=i?`/api/admin/adapter-types/${i.id}`:"/api/admin/adapter-types";if((await fetch(N,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)})).ok)c({title:"Success",description:`Adapter type ${i?"updated":"created"} successfully`}),o(!1),f(),m();else throw new Error(`Failed to ${i?"update":"create"} adapter type`)}catch(j){c({title:"Error",description:`Failed to ${i?"update":"create"} adapter type`,variant:"destructive"}),console.error("Error saving adapter type:",j)}},g=v=>{l(v),u({name:v.name,displayName:v.displayName,description:v.description,category:v.category,iconName:v.iconName,isActive:v.isActive,supportsSender:v.supportsSender,supportsReceiver:v.supportsReceiver,configurationSchema:v.configurationSchema?JSON.stringify(v.configurationSchema,null,2):""}),o(!0)},x=async v=>{if(confirm("Are you sure you want to delete this adapter type?"))try{if((await fetch(`/api/admin/adapter-types/${v}`,{method:"DELETE"})).ok)c({title:"Success",description:"Adapter type deleted successfully"}),m();else throw new Error("Failed to delete adapter type")}catch(j){c({title:"Error",description:"Failed to delete adapter type",variant:"destructive"}),console.error("Error deleting adapter type:",j)}},f=()=>{u({name:"",displayName:"",description:"",category:"",iconName:"network",isActive:!0,supportsSender:!0,supportsReceiver:!0,configurationSchema:""}),l(null)},w=v=>{const j=BT.find(N=>N.value===v);return j?j.icon:ii},y=v=>{const j={FILE_TRANSFER:"bg-blue-100 text-info",MESSAGING:"bg-green-100 text-success",DATABASE:"bg-purple-100 text-primary",WEB_SERVICE:"bg-orange-100 text-warning",MAIL:"bg-red-100 text-destructive",OTHER:"bg-gray-100 text-muted-foreground"};return j[v]||j.OTHER};return s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Adapter Types Management"}),s.jsx(Ne,{children:"Manage available adapter types for communication channels"})]}),s.jsxs(ft,{open:a,onOpenChange:o,children:[s.jsx(rh,{asChild:!0,children:s.jsxs(z,{onClick:f,children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"Add Adapter Type"]})}),s.jsxs(mt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(gt,{children:[s.jsx(xt,{children:i?"Edit Adapter Type":"Add New Adapter Type"}),s.jsx(ks,{children:"Configure the adapter type settings and capabilities"})]}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"name",children:"Name (Internal)*"}),s.jsx(U,{id:"name",value:d.name,onChange:v=>u({...d,name:v.target.value}),placeholder:"e.g., sftp, rest, jms",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"displayName",children:"Display Name*"}),s.jsx(U,{id:"displayName",value:d.displayName,onChange:v=>u({...d,displayName:v.target.value}),placeholder:"e.g., SFTP Adapter, REST API",required:!0})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",value:d.description,onChange:v=>u({...d,description:v.target.value}),placeholder:"Brief description of the adapter type",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"category",children:"Category*"}),s.jsxs(se,{value:d.category,onValueChange:v=>u({...d,category:v}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select category"})}),s.jsx(te,{children:bhe.map(v=>s.jsx(F,{value:v.value,children:v.label},v.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"iconName",children:"Icon"}),s.jsxs(se,{value:d.iconName,onValueChange:v=>u({...d,iconName:v}),children:[s.jsx(ee,{children:s.jsx(ne,{placeholder:"Select icon"})}),s.jsx(te,{children:BT.map(v=>{const j=v.icon;return s.jsx(F,{value:v.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-4 w-4"}),v.value]})},v.value)})})]})]})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"isActive",checked:d.isActive,onCheckedChange:v=>u({...d,isActive:v===!0})}),s.jsx(C,{htmlFor:"isActive",children:"Active"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"supportsSender",checked:d.supportsSender,onCheckedChange:v=>u({...d,supportsSender:v===!0})}),s.jsx(C,{htmlFor:"supportsSender",children:"Supports Sender"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(it,{id:"supportsReceiver",checked:d.supportsReceiver,onCheckedChange:v=>u({...d,supportsReceiver:v===!0})}),s.jsx(C,{htmlFor:"supportsReceiver",children:"Supports Receiver"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"configurationSchema",children:"Configuration Schema (JSON)"}),s.jsx(Re,{id:"configurationSchema",value:d.configurationSchema,onChange:v=>u({...d,configurationSchema:v.target.value}),placeholder:"Optional JSON schema for adapter configuration",rows:6,className:"font-mono text-sm"})]}),s.jsxs(Wn,{children:[s.jsx(z,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(z,{type:"submit",children:[i?"Update":"Create"," Adapter Type"]})]})]})]})]})]})}),s.jsx(re,{children:n?s.jsx("div",{className:"text-center py-8",children:"Loading adapter types..."}):e.length===0?s.jsx(Mi,{icon:ii,title:"No adapter types found",description:"Create custom adapter types to extend the platform with new integration capabilities.",action:{label:"Add Adapter Type",onClick:()=>{}}}):s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Icon"}),s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Category"}),s.jsx(De,{children:"Support"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:e.map(v=>{const j=w(v.iconName);return s.jsxs(Zt,{children:[s.jsx(ke,{children:s.jsx(j,{className:"h-5 w-5"})}),s.jsx(ke,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:v.displayName}),s.jsx("div",{className:"text-sm text-muted-foreground",children:v.name})]})}),s.jsx(ke,{children:s.jsx(fe,{className:y(v.category),children:v.category.replace("_"," ")})}),s.jsx(ke,{children:s.jsxs("div",{className:"flex gap-1",children:[v.supportsSender&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Sender"}),v.supportsReceiver&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Receiver"})]})}),s.jsx(ke,{children:s.jsx(fe,{variant:v.isActive?"default":"secondary",children:v.isActive?"Active":"Inactive"})}),s.jsx(ke,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>g(v),children:s.jsx(GB,{className:"h-4 w-4"})}),s.jsx(z,{variant:"outline",size:"sm",onClick:()=>x(v.id),children:s.jsx(Xn,{className:"h-4 w-4"})})]})})]},v.id)})})]})})]})},Che=()=>{const{toast:e}=_e(),[t,n]=h.useState(null),[r,a]=h.useState(null),[o,i]=h.useState(!0),[l,c]=h.useState(!1),[d,u]=h.useState(!1),m={environmentType:"DEVELOPMENT",enforceRestrictions:!0,restrictionMessage:"",availableTypes:["DEVELOPMENT","QUALITY_ASSURANCE","PRODUCTION"]},p=async()=>{try{i(!0);const y=await G.get("/system/config/environment");y.success&&y.data?(n(y.data),a(y.data),u(!1)):e({title:"Error",description:"Failed to load environment configuration",variant:"destructive"})}catch(y){console.error("Error fetching environment configuration:",y),e({title:"Error",description:"Error loading environment configuration",variant:"destructive"})}finally{i(!1)}},g=async()=>{if(t)try{if(c(!0),!(await G.put("/system/config/environment/type",{environmentType:t?.environmentType||m.environmentType})).success){e({title:"Error",description:"Failed to update environment type",variant:"destructive"});return}if(!(await G.put("/system/config/environment/enforce-restrictions",{enforceRestrictions:t?.enforceRestrictions??m.enforceRestrictions})).success){e({title:"Error",description:"Failed to update enforce restrictions",variant:"destructive"});return}if(!(await G.put("/system/config/environment/restriction-message",{restrictionMessage:t?.restrictionMessage||m.restrictionMessage})).success){e({title:"Error",description:"Failed to update restriction message",variant:"destructive"});return}e({title:"Success",description:"Environment configuration saved successfully"}),a(t),u(!1),setTimeout(()=>{window.location.reload()},1500)}catch(y){console.error("Error saving environment configuration:",y),e({title:"Error",description:"Error saving environment configuration",variant:"destructive"})}finally{c(!1)}},x=y=>{if(!t)return;const v={...t,...y};n(v);const j=JSON.stringify(v)!==JSON.stringify(r);u(j)},f=y=>{switch(y){case"DEVELOPMENT":return{color:"text-info",bgColor:"bg-blue-100",label:"Development"};case"QUALITY_ASSURANCE":return{color:"text-warning",bgColor:"bg-yellow-100",label:"Quality Assurance"};case"PRODUCTION":return{color:"text-destructive",bgColor:"bg-red-100",label:"Production"};default:return{color:"text-muted-foreground",bgColor:"bg-gray-100",label:"Unknown"}}};if(h.useEffect(()=>{p()},[]),o)return s.jsx(K,{children:s.jsx(re,{className:"flex items-center justify-center h-64",children:s.jsx(Tt,{className:"h-8 w-8 animate-spin"})})});if(!t)return s.jsx(K,{children:s.jsx(re,{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(yt,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Failed to load configuration"}),s.jsx(z,{variant:"outline",size:"sm",onClick:p,className:"mt-2",children:"Retry"})]})})});const w=f(t?.environmentType||m.environmentType);return s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(Ko,{className:"h-5 w-5"}),"Environment Configuration"]}),s.jsx(Ne,{children:"Configure the system environment type and restrictions"})]}),s.jsx(fe,{className:`${w.bgColor} ${w.color}`,children:w.label})]})}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"environment-type",children:"Environment Type"}),s.jsxs(se,{value:t?.environmentType||m.environmentType,onValueChange:y=>x({environmentType:y}),children:[s.jsx(ee,{id:"environment-type",children:s.jsx(ne,{})}),s.jsx(te,{children:(t?.availableTypes||m.availableTypes).map(y=>{const v=f(y);return s.jsx(F,{value:y,children:s.jsx("span",{className:v.color,children:v.label})},y)})})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Controls which features are available in the system"})]}),s.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"enforce-restrictions",children:"Enforce Restrictions"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, environment restrictions will be applied"})]}),s.jsx(bt,{id:"enforce-restrictions",checked:t?.enforceRestrictions??m.enforceRestrictions,onCheckedChange:y=>x({enforceRestrictions:y})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"restriction-message",children:"Restriction Message"}),s.jsx(U,{id:"restriction-message",value:t?.restrictionMessage||m.restrictionMessage,onChange:y=>x({restrictionMessage:y.target.value}),placeholder:"Enter custom restriction message"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Message shown when users try to perform restricted actions. Use %s for environment name."})]}),s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:"Environment Restrictions"}),s.jsxs(ze,{className:"space-y-2 mt-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Development:"})," All features enabled"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Quality Assurance:"})," Limited to adapter configuration, import/export, and deployment"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Production:"})," Limited to adapter configuration, import/export, and deployment"]})]})]}),d&&s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(yt,{className:"h-4 w-4"}),"You have unsaved changes"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>{n(r),u(!1)},children:"Cancel"}),s.jsx(z,{size:"sm",onClick:g,disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]}),!d&&r&&JSON.stringify(t)===JSON.stringify(r)&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[s.jsx(Kd,{className:"h-4 w-4"}),"Configuration saved successfully"]})]})]})},Ehe=({})=>{const{toast:e}=_e(),[t,n]=h.useState([]),[r,a]=h.useState(["all"]),[o,i]=h.useState("all"),[l,c]=h.useState(!0),[d,u]=h.useState(!1),[m,p]=h.useState({}),[g,x]=h.useState({enabled:!0,maxRetries:3,retryInterval:30,retryIntervalUnit:"seconds"}),[f,w]=h.useState(!1),y=async()=>{try{c(!0);const I=await ut.get("/system-settings");console.log("Fetched system settings:",I);const V=Array.isArray(I)?I:[];n(V);const O=[...new Set(V.map(k=>k.category||"Uncategorized").filter(Boolean))];a(["all",...O])}catch(I){console.error("Error fetching system settings:",I),e({title:"Error",description:"Failed to load system settings",variant:"destructive"})}finally{c(!1)}},v=async()=>{},j=async()=>{try{const I=await ut.get("/system-settings/global-retry");x(I),w(!1)}catch(I){console.error("Error fetching global retry settings:",I)}},N=async()=>{try{u(!0),await ut.put("/system-settings/global-retry",g),e({title:"Success",description:"Global retry settings updated successfully"}),w(!1)}catch(I){console.error("Error saving global retry settings:",I),e({title:"Error",description:"Failed to save global retry settings",variant:"destructive"})}finally{u(!1)}},b=async()=>{try{await ut.post("/system-settings/initialize"),e({title:"Success",description:"Default settings initialized"}),y()}catch(I){console.error("Error initializing settings:",I),e({title:"Error",description:"Error initializing settings",variant:"destructive"})}},E=async(I,V)=>{try{u(!0);const O=t.find(D=>D.settingKey===I);if(!O)return;const k={...O,settingValue:V,updatedBy:"admin"},T=await ut.put(`/system-settings/${I}`,k);n(D=>D.map(M=>M.settingKey===I?T:M)),p(D=>{const M={...D};return delete M[I],M}),e({title:"Success",description:`Setting "${I}" updated successfully`})}catch(O){console.error("Error saving setting:",O),e({title:"Error",description:"Error saving setting",variant:"destructive"})}finally{u(!1)}},S=(I,V)=>{p(O=>({...O,[I]:V}))},P=I=>m[I.settingKey]??I.settingValue,A=I=>m[I.settingKey]!==void 0&&m[I.settingKey]!==I.settingValue,L=o==="all"?t||[]:(t||[]).filter(I=>I.category===o);h.useEffect(()=>{y(),v(),j()},[]);const R=I=>s.jsxs(K,{className:"mb-4",children:[s.jsx(oe,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(ie,{className:"text-sm font-medium flex items-center gap-2",children:[I.settingKey,I.isReadonly&&s.jsx(fe,{variant:"secondary",className:"text-xs",children:"Readonly"}),I.isEncrypted&&s.jsx(fe,{variant:"outline",className:"text-xs",children:"Encrypted"}),A(I)&&s.jsx(fe,{variant:"destructive",className:"text-xs",children:"Modified"})]}),s.jsx(Ne,{className:"text-xs",children:I.description})]}),s.jsx(fe,{variant:"outline",className:"text-xs",children:I.category})]})}),s.jsx(re,{className:"pt-0",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(C,{htmlFor:`setting-${I.id}`,className:"text-xs",children:["Value (",I.dataType,")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:`setting-${I.id}`,value:P(I),onChange:V=>S(I.settingKey,V.target.value),disabled:I.isReadonly,type:I.dataType==="PASSWORD"?"password":I.dataType==="INTEGER"?"number":"text",className:"text-sm",placeholder:I.settingValue}),A(I)&&s.jsx(z,{size:"sm",onClick:()=>E(I.settingKey,m[I.settingKey]),disabled:d,className:"px-3",children:d?s.jsx(Tt,{className:"h-3 w-3 animate-spin"}):s.jsx(tn,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Created: ",new Date(I.createdAt).toLocaleString()]}),s.jsxs("span",{children:["Updated: ",new Date(I.updatedAt).toLocaleString()]})]}),(I.createdBy||I.updatedBy)&&s.jsxs("div",{className:"flex justify-between",children:[I.createdBy&&s.jsxs("span",{children:["Created by: ",I.createdBy]}),I.updatedBy&&s.jsxs("span",{children:["Updated by: ",I.updatedBy]})]})]})]})})]},I.id);return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Tt,{className:"h-8 w-8 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[s.jsx(qt,{className:"h-6 w-6"}),"System Settings"]}),s.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and parameters"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{variant:"outline",size:"sm",onClick:y,disabled:l,children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),s.jsx(z,{variant:"outline",size:"sm",onClick:b,children:"Initialize Defaults"})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsx(Che,{})}),s.jsx(pt,{className:"my-8"}),s.jsx("div",{className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(hk,{className:"h-5 w-5"}),"Global Retry Configuration"]}),s.jsx(Ne,{children:"Configure default retry settings for all adapters. Individual adapters can override these settings."})]}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"global-retry-enabled",children:"Enable Automatic Retries"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, failed operations will be automatically retried"})]}),s.jsx(bt,{id:"global-retry-enabled",checked:g.enabled,onCheckedChange:I=>{x(V=>({...V,enabled:I})),w(!0)}})]}),g.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"global-max-retries",children:"Maximum Retry Attempts"}),s.jsx(U,{id:"global-max-retries",type:"number",min:"1",max:"10",value:g.maxRetries,onChange:I=>{x(V=>({...V,maxRetries:parseInt(I.target.value)||1})),w(!0)}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"global-retry-interval",children:"Retry Interval"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(U,{id:"global-retry-interval",type:"number",min:"1",value:g.retryInterval,onChange:I=>{x(V=>({...V,retryInterval:parseInt(I.target.value)||1})),w(!0)},className:"flex-1"}),s.jsxs(se,{value:g.retryIntervalUnit,onValueChange:I=>{x(V=>({...V,retryIntervalUnit:I})),w(!0)},children:[s.jsx(ee,{className:"w-[120px]",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"seconds",children:"Seconds"}),s.jsx(F,{value:"minutes",children:"Minutes"}),s.jsx(F,{value:"hours",children:"Hours"})]})]})]})]})]}),f&&s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes to the global retry settings"}),s.jsxs(z,{size:"sm",onClick:N,disabled:d,children:[d?s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}),s.jsx(pt,{className:"my-8"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"General System Settings"}),Object.keys(m).length>0&&s.jsx(K,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950",children:s.jsxs(oe,{className:"pb-3",children:[s.jsxs(ie,{className:"text-sm flex items-center gap-2 text-warning dark:text-warning",children:[s.jsx(yt,{className:"h-4 w-4"}),"Unsaved Changes"]}),s.jsxs(Ne,{className:"text-warning dark:text-warning",children:["You have ",Object.keys(m).length," unsaved change(s). Click the save button next to each modified setting to save changes."]})]})}),s.jsxs(et,{value:o,onValueChange:i,children:[s.jsx(Ke,{className:"grid w-full grid-cols-auto max-w-fit",children:r&&r.length>0?r.map(I=>s.jsxs(xe,{value:I,className:"capitalize",children:[I==="all"?"All Settings":I||"Uncategorized",I!=="all"&&s.jsx(fe,{variant:"secondary",className:"ml-2 text-xs",children:(t||[]).filter(V=>V.category===I).length})]},I)):null}),s.jsx(ye,{value:o,className:"space-y-4",children:L.length===0?s.jsx(K,{children:s.jsx(re,{className:"flex items-center justify-center h-32",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qt,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No settings found"}),s.jsx(z,{variant:"outline",size:"sm",onClick:b,className:"mt-2",children:"Initialize Default Settings"})]})})}):s.jsx("div",{className:"grid gap-4",children:L&&L.map(R)})})]})]})]})};class The{async getAllRoles(t=0,n=50){return G.get(`/roles?page=${t}&limit=${n}`)}async getRoleById(t){return G.get(`/roles/${t}`)}async createRole(t){return G.post("/roles",t)}async updateRole(t,n){return G.put(`/roles/${t}`,n)}async deleteRole(t){return G.delete(`/roles/${t}`)}async addPermission(t,n){return G.post(`/roles/${t}/permissions`,{permission:n})}async removePermission(t,n){return G.delete(`/roles/${t}/permissions/${n}`)}async updatePermissions(t,n){return G.put(`/roles/${t}/permissions`,{permissions:n})}async getRolePermissions(t){return G.get(`/roles/${t}/permissions`)}async searchRoles(t,n){const r=new URLSearchParams({q:t,...n?.hasPermission&&{hasPermission:n.hasPermission},page:(n?.page||1).toString(),limit:(n?.limit||50).toString()});return G.get(`/roles/search?${r}`)}async getRoleUsers(t){return G.get(`/roles/${t}/users`)}async cloneRole(t,n){return G.post(`/roles/${t}/clone`,{name:n})}async getAvailablePermissions(){return G.get("/roles/available-permissions")}async validatePermissions(t){return G.post("/roles/validate-permissions",{permissions:t})}}const Phe=new The;class Ahe{async getAllJarFiles(t){const n=new URLSearchParams;t?.driverType&&n.append("driverType",t.driverType),t?.isActive!==void 0&&n.append("isActive",t.isActive.toString());const r=n.toString();return G.get(`/jar-files${r?`?${r}`:""}`)}async getJarFileById(t){return G.get(`/jar-files/${t}`)}async createJarFile(t){return G.post("/jar-files",t)}async updateJarFile(t,n){return G.put(`/jar-files/${t}`,n)}async deleteJarFile(t){return G.delete(`/jar-files/${t}`)}async uploadJarFile(t,n){const r=new FormData;return r.append("file",t),r.append("name",n.name),r.append("version",n.version),r.append("description",n.description),r.append("driverType",n.driverType),n.vendor&&r.append("vendor",n.vendor),G.post("/jar-files/upload",r,{headers:{"Content-Type":"multipart/form-data"}})}async downloadJarFile(t){const n=await fetch(`${G.baseURL}/jar-files/${t}/download`,{method:"GET",headers:G.getAuthHeaders()});if(!n.ok)throw new Error("Failed to download JAR file");return n.blob()}async toggleJarFileStatus(t,n){return G.put(`/jar-files/${t}/status`,{isActive:n})}async getJarFilesByDriverType(t){return G.get(`/jar-files/driver-type/${t}`)}async validateJarFile(t){return G.get(`/jar-files/${t}/validate`)}async getDriverTypes(){return G.get("/jar-files/driver-types")}}const Dhe=new Ahe,khe=()=>{const{toast:e}=_e(),[t,n]=h.useState([]),[r,a]=h.useState(!0),[o,i]=h.useState([]),[l,c]=h.useState(!0),[d,u]=h.useState([]),[m,p]=h.useState(!0),[g,x]=h.useState([]),[f,w]=h.useState(!0),[y,v]=h.useState("users"),j=async()=>{try{a(!0);const A=await ll.getAllUsers();if(console.log("User fetch response:",A),A.success&&A.data){const L=Array.isArray(A.data)?A.data:A.data.users;n(L||[])}else console.error("Failed to fetch users:",A.error),console.log("API not available, showing empty user list"),n([]),e({title:"Error",description:"Failed to load users",variant:"destructive"})}catch(A){console.error("Error fetching users:",A),console.log("API error, showing empty user list"),n([]),e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{a(!1)}},N=async()=>{try{c(!0);const A=await Phe.getAllRoles();if(console.log("Role fetch response:",A),A.success&&A.data){const L=Array.isArray(A.data)?A.data:[];i(L)}else console.error("Failed to fetch roles:",A.error),i([]),e({title:"Error",description:"Failed to load roles",variant:"destructive"})}catch(A){console.error("Error fetching roles:",A),i([]),e({title:"Error",description:"Failed to load roles",variant:"destructive"})}finally{c(!1)}},b=async()=>{try{p(!0);const A=await T$.getAllCertificates();console.log("Certificate fetch response:",A),A.success&&A.data?u(A.data):(console.error("Failed to fetch certificates:",A.error),u([]),e({title:"Error",description:"Failed to load certificates",variant:"destructive"}))}catch(A){console.error("Error fetching certificates:",A),u([]),e({title:"Error",description:"Failed to load certificates",variant:"destructive"})}finally{p(!1)}},E=async()=>{try{w(!0);const A=await Dhe.getAllJarFiles();console.log("JAR files fetch response:",A),A.success&&A.data?x(A.data):(console.error("Failed to fetch JAR files:",A.error),x([]),e({title:"Error",description:"Failed to load JAR files",variant:"destructive"}))}catch(A){console.error("Error fetching JAR files:",A),x([]),e({title:"Error",description:"Failed to load JAR files",variant:"destructive"})}finally{w(!1)}};h.useEffect(()=>{j(),N(),b(),E()},[]);const S=A=>{x(L=>[...L,A])},P=A=>{x(L=>L.filter(R=>R.id!==A))};return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(_s,{className:"h-8 w-8"}),"Admin Panel"]}),s.jsx("p",{className:"text-muted-foreground",children:"Manage users, roles, and system security"})]}),s.jsx(Ade,{users:t,roles:o,certificates:d,jarFiles:g}),s.jsxs(et,{value:y,onValueChange:v,className:"space-y-6 animate-fade-in",style:{animationDelay:"0.1s"},children:[s.jsxs(Ke,{className:"grid w-full grid-cols-7",children:[s.jsxs(xe,{value:"users",className:"flex items-center gap-2",children:[s.jsx(_s,{className:"h-4 w-4"}),"Users"]}),s.jsxs(xe,{value:"roles",className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4"}),"Roles"]}),s.jsxs(xe,{value:"certificates",className:"flex items-center gap-2",children:[s.jsx(oi,{className:"h-4 w-4"}),"Certificates"]}),s.jsxs(xe,{value:"jar-files",className:"flex items-center gap-2",children:[s.jsx(Gd,{className:"h-4 w-4"}),"Connection Drivers"]}),s.jsxs(xe,{value:"adapter-types",className:"flex items-center gap-2",children:[s.jsx(ii,{className:"h-4 w-4"}),"Adapter Types"]}),s.jsxs(xe,{value:"system-settings",className:"flex items-center gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),"System Settings"]}),s.jsxs(xe,{value:"system-logs",className:"flex items-center gap-2",children:[s.jsx(Qd,{className:"h-4 w-4"}),"System Logs"]})]}),s.jsx(ye,{value:"users",className:"space-y-4",children:s.jsx(Fde,{users:t,isLoading:r,onRefresh:j})}),s.jsx(ye,{value:"roles",className:"space-y-4",children:s.jsx(Ode,{roles:o,isLoading:l,onRefresh:N})}),s.jsx(ye,{value:"certificates",className:"space-y-4",children:s.jsx(Ide,{certificates:d,isLoading:m,onRefresh:b})}),s.jsx(ye,{value:"jar-files",className:"space-y-4",children:s.jsx(Vde,{jarFiles:g,isLoading:f,onRefresh:E,onJarFileAdded:S,onJarFileDeleted:P})}),s.jsx(ye,{value:"adapter-types",className:"space-y-4",children:s.jsx(She,{})}),s.jsx(ye,{value:"system-settings",className:"space-y-4",children:s.jsx(Ehe,{})}),s.jsx(ye,{value:"system-logs",className:"space-y-4",children:s.jsx(Nhe,{})})]})]})},HT=e=>{let t;const n=new Set,r=(d,u)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const p=t;t=u??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,p))}},a=()=>t,l={setState:r,getState:a,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=t=e(r,a,l);return l},Mhe=e=>e?HT(e):HT,Rhe=e=>e;function Fhe(e,t=Rhe){const n=Nt.useSyncExternalStore(e.subscribe,Nt.useCallback(()=>t(e.getState()),[e,t]),Nt.useCallback(()=>t(e.getInitialState()),[e,t]));return Nt.useDebugValue(n),n}const qT=e=>{const t=Mhe(e),n=r=>Fhe(t,r);return Object.assign(n,t),n},O_=e=>e?qT(e):qT;function Ohe(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var o;const i=c=>c===null?null:JSON.parse(c,void 0),l=(o=n.getItem(a))!=null?o:null;return l instanceof Promise?l.then(i):i(l)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>n.removeItem(a)}}const lw=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return lw(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return lw(r)(n)}}}},Ihe=(e,t)=>(n,r,a)=>{let o={storage:Ohe(()=>localStorage),partialize:f=>f,version:0,merge:(f,w)=>({...w,...f}),...t},i=!1;const l=new Set,c=new Set;let d=o.storage;if(!d)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...f)},r,a);const u=()=>{const f=o.partialize({...r()});return d.setItem(o.name,{state:f,version:o.version})},m=a.setState;a.setState=(f,w)=>{m(f,w),u()};const p=e((...f)=>{n(...f),u()},r,a);a.getInitialState=()=>p;let g;const x=()=>{var f,w;if(!d)return;i=!1,l.forEach(v=>{var j;return v((j=r())!=null?j:p)});const y=((w=o.onRehydrateStorage)==null?void 0:w.call(o,(f=r())!=null?f:p))||void 0;return lw(d.getItem.bind(d))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate){const j=o.migrate(v.state,v.version);return j instanceof Promise?j.then(N=>[!0,N]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var j;const[N,b]=v;if(g=o.merge(b,(j=r())!=null?j:p),n(g,!0),N)return u()}).then(()=>{y?.(g,void 0),g=r(),i=!0,c.forEach(v=>v(g))}).catch(v=>{y?.(void 0,v)})};return a.persist={setOptions:f=>{o={...o,...f},f.storage&&(d=f.storage)},clearStorage:()=>{d?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>x(),hasHydrated:()=>i,onHydrate:f=>(l.add(f),()=>{l.delete(f)}),onFinishHydration:f=>(c.add(f),()=>{c.delete(f)})},o.skipHydration||x(),g||p},Lhe=Ihe,WT={theme:"dark",sidebarState:"expanded",compactMode:!1,showLineNumbers:!0,autoSave:!0,animationsEnabled:!0},Hb=O_()(Lhe(e=>({...WT,activeModal:null,modalData:null,globalLoading:!1,loadingMessage:null,breadcrumbs:[],setTheme:t=>{e({theme:t}),t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},setSidebarState:t=>e({sidebarState:t}),toggleSidebar:()=>e(t=>({sidebarState:t.sidebarState==="expanded"?"collapsed":"expanded"})),setCompactMode:t=>e({compactMode:t}),setShowLineNumbers:t=>e({showLineNumbers:t}),setAutoSave:t=>e({autoSave:t}),setAnimationsEnabled:t=>e({animationsEnabled:t}),openModal:(t,n=null)=>e({activeModal:t,modalData:n}),closeModal:()=>e({activeModal:null,modalData:null}),setGlobalLoading:(t,n=null)=>e({globalLoading:t,loadingMessage:n}),setBreadcrumbs:t=>e({breadcrumbs:t}),addBreadcrumb:t=>e(n=>({breadcrumbs:[...n.breadcrumbs,t]})),resetPreferences:()=>e(WT)}),{name:"ui-preferences",partialize:e=>({theme:e.theme,sidebarState:e.sidebarState,compactMode:e.compactMode,showLineNumbers:e.showLineNumbers,autoSave:e.autoSave,animationsEnabled:e.animationsEnabled})})),I_=()=>{const e=Hb(t=>t.animationsEnabled);return{enabled:e,duration:e?"duration-200":"duration-0",transition:e?"transition-all":""}},$he=()=>{pg("Settings"),fg("Configure your Integrix Flow Bridge preferences, manage security settings, customize notifications, and control system-wide configurations.");const{user:e}=Kr(),{toast:t}=_e(),{theme:n,setTheme:r,compactMode:a,setCompactMode:o}=Hb(),[i,l]=h.useState("profile");h.useState(!1);const[c,d]=h.useState(!1),[u,m]=h.useState({language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",emailNotifications:!0,browserNotifications:!1,soundAlerts:!0,showHelperText:!0}),[p,g]=h.useState({firstName:e?.first_name||"",lastName:e?.last_name||"",email:e?.email||"",phone:"",department:"",title:""}),[x,f]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),w=async()=>{try{d(!0),t({title:"Profile Updated",description:"Your profile has been updated successfully"})}catch{t({title:"Error",description:"Failed to update profile",variant:"destructive"})}finally{d(!1)}},y=async()=>{try{d(!0),localStorage.setItem("userPreferences",JSON.stringify(u)),t({title:"Preferences Saved",description:"Your preferences have been saved successfully"})}catch{t({title:"Error",description:"Failed to save preferences",variant:"destructive"})}finally{d(!1)}},v=async()=>{if(x.newPassword!==x.confirmPassword){t({title:"Error",description:"New passwords do not match",variant:"destructive"});return}try{d(!0),t({title:"Password Changed",description:"Your password has been changed successfully"}),f({currentPassword:"",newPassword:"",confirmPassword:""})}catch{t({title:"Error",description:"Failed to change password",variant:"destructive"})}finally{d(!1)}};return h.useEffect(()=>{const j=localStorage.getItem("userPreferences");j&&m(JSON.parse(j))},[]),s.jsxs(kc,{children:[s.jsx(Mc,{title:"User Settings",description:"Manage your profile and personal preferences",icon:s.jsx(qt,{})}),s.jsxs(et,{value:i,onValueChange:l,className:"space-y-6",children:[s.jsxs(Ke,{className:"grid grid-cols-4 w-full max-w-2xl",children:[s.jsxs(xe,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(mo,{className:"h-4 w-4"}),"Profile"]}),s.jsxs(xe,{value:"preferences",className:"flex items-center gap-2",children:[s.jsx(XB,{className:"h-4 w-4"}),"Preferences"]}),s.jsxs(xe,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(tk,{className:"h-4 w-4"}),"Notifications"]}),s.jsxs(xe,{value:"security",className:"flex items-center gap-2",children:[s.jsx(ho,{className:"h-4 w-4"}),"Security"]})]}),s.jsx(ye,{value:"profile",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Profile Information"}),s.jsx(Ne,{children:"Update your personal information and contact details"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"firstName",children:"First Name"}),s.jsx(U,{id:"firstName",value:p.firstName,onChange:j=>g({...p,firstName:j.target.value}),placeholder:"Enter first name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"lastName",children:"Last Name"}),s.jsx(U,{id:"lastName",value:p.lastName,onChange:j=>g({...p,lastName:j.target.value}),placeholder:"Enter last name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"email",children:"Email"}),s.jsx(U,{id:"email",type:"email",value:p.email,onChange:j=>g({...p,email:j.target.value}),placeholder:"Enter email"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"phone",children:"Phone"}),s.jsx(U,{id:"phone",value:p.phone,onChange:j=>g({...p,phone:j.target.value}),placeholder:"Enter phone number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"department",children:"Department"}),s.jsx(U,{id:"department",value:p.department,onChange:j=>g({...p,department:j.target.value}),placeholder:"Enter department"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"title",children:"Job Title"}),s.jsx(U,{id:"title",value:p.title,onChange:j=>g({...p,title:j.target.value}),placeholder:"Enter job title"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:w,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Profile"]})})})]})]})}),s.jsx(ye,{value:"preferences",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Display Preferences"}),s.jsx(Ne,{children:"Customize how the application looks and behaves for you"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"theme",children:"Theme"}),s.jsxs(se,{value:n,onValueChange:r,children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"light",children:"Light"}),s.jsx(F,{value:"dark",children:"Dark"}),s.jsx(F,{value:"system",children:"System"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"language",children:"Language"}),s.jsxs(se,{value:u.language,onValueChange:j=>m({...u,language:j}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"en",children:"English"}),s.jsx(F,{value:"es",children:"Spanish"}),s.jsx(F,{value:"fr",children:"French"}),s.jsx(F,{value:"de",children:"German"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timezone",children:"Timezone"}),s.jsxs(se,{value:u.timezone,onValueChange:j=>m({...u,timezone:j}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"UTC",children:"UTC"}),s.jsx(F,{value:"America/New_York",children:"Eastern Time"}),s.jsx(F,{value:"America/Chicago",children:"Central Time"}),s.jsx(F,{value:"America/Denver",children:"Mountain Time"}),s.jsx(F,{value:"America/Los_Angeles",children:"Pacific Time"}),s.jsx(F,{value:"Europe/London",children:"London"}),s.jsx(F,{value:"Europe/Paris",children:"Paris"}),s.jsx(F,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"dateFormat",children:"Date Format"}),s.jsxs(se,{value:u.dateFormat,onValueChange:j=>m({...u,dateFormat:j}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx(F,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx(F,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"timeFormat",children:"Time Format"}),s.jsxs(se,{value:u.timeFormat,onValueChange:j=>m({...u,timeFormat:j}),children:[s.jsx(ee,{children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"12h",children:"12 Hour"}),s.jsx(F,{value:"24h",children:"24 Hour"})]})]})]})]}),s.jsx(pt,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Interface Options"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"compactView",children:"Compact View"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Use a more condensed layout"})]}),s.jsx(bt,{id:"compactView",checked:a,onCheckedChange:o})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"showHelperText",children:"Show Helper Text"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Display helpful tooltips and descriptions"})]}),s.jsx(bt,{id:"showHelperText",checked:u.showHelperText,onCheckedChange:j=>m({...u,showHelperText:j})})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:y,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),s.jsx(ye,{value:"notifications",className:"space-y-6",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Notification Preferences"}),s.jsx(Ne,{children:"Choose how you want to be notified about important events"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs(We,{children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{children:"These settings control personal notifications. System-wide notification settings are managed by administrators."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"emailNotifications",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),s.jsx(bt,{id:"emailNotifications",checked:u.emailNotifications,onCheckedChange:j=>m({...u,emailNotifications:j})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"browserNotifications",children:"Browser Notifications"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Show desktop notifications"})]}),s.jsx(bt,{id:"browserNotifications",checked:u.browserNotifications,onCheckedChange:j=>m({...u,browserNotifications:j})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(C,{htmlFor:"soundAlerts",children:"Sound Alerts"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Play sounds for important events"})]}),s.jsx(bt,{id:"soundAlerts",checked:u.soundAlerts,onCheckedChange:j=>m({...u,soundAlerts:j})})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:y,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})})]})]})}),s.jsxs(ye,{value:"security",className:"space-y-6",children:[s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Change Password"}),s.jsx(Ne,{children:"Update your account password"})]}),s.jsxs(re,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4 max-w-md",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"currentPassword",children:"Current Password"}),s.jsx(U,{id:"currentPassword",type:"password",value:x.currentPassword,onChange:j=>f({...x,currentPassword:j.target.value}),placeholder:"Enter current password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"newPassword",children:"New Password"}),s.jsx(U,{id:"newPassword",type:"password",value:x.newPassword,onChange:j=>f({...x,newPassword:j.target.value}),placeholder:"Enter new password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsx(U,{id:"confirmPassword",type:"password",value:x.confirmPassword,onChange:j=>f({...x,confirmPassword:j.target.value}),placeholder:"Confirm new password"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{onClick:v,disabled:c,children:c?s.jsxs(s.Fragment,{children:[s.jsx(Tt,{className:"h-4 w-4 mr-2 animate-spin"}),"Changing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ho,{className:"h-4 w-4 mr-2"}),"Change Password"]})})})]})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Active Sessions"}),s.jsx(Ne,{children:"Manage your active login sessions"})]}),s.jsx(re,{children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Current Session"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx(js,{className:"h-3 w-3 inline mr-1"}),"Last active: Just now"]})]}),s.jsx(fe,{variant:"secondary",children:"Active"})]})})})]}),s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"API Keys"}),s.jsx(Ne,{children:"Manage your personal API keys for integrations"})]}),s.jsx(re,{children:s.jsxs(We,{children:[s.jsx(oi,{className:"h-4 w-4"}),s.jsx(ze,{children:"No API keys generated yet. Contact your administrator if you need API access."})]})})]})]})]})]})};function _he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function XT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zT(Object(n),!0).forEach(function(r){_he(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vhe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,o;for(o=0;o<r.length;o++)a=r[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Uhe(e,t){if(e==null)return{};var n=Vhe(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bhe(e,t){return Hhe(e)||qhe(e,t)||Whe(e,t)||zhe()}function Hhe(e){if(Array.isArray(e))return e}function qhe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),l;!(r=(l=i.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,o=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(a)throw o}}return n}}function Whe(e,t){if(e){if(typeof e=="string")return YT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YT(e,t)}}function YT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function GT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){Xhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yhe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(a,o){return o(a)},r)}}function ud(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return t.apply(n,[].concat(a,l))}}}function df(e){return{}.toString.call(e).includes("Object")}function Khe(e){return!Object.keys(e).length}function wu(e){return typeof e=="function"}function Ghe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jhe(e,t){return df(t)||lo("changeType"),Object.keys(t).some(function(n){return!Ghe(e,n)})&&lo("changeField"),t}function Qhe(e){wu(e)||lo("selectorType")}function Zhe(e){wu(e)||df(e)||lo("handlerType"),df(e)&&Object.values(e).some(function(t){return!wu(t)})&&lo("handlersType")}function eme(e){e||lo("initialIsRequired"),df(e)||lo("initialType"),Khe(e)&&lo("initialContent")}function tme(e,t){throw new Error(e[t]||e.default)}var sme={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},lo=ud(tme)(sme),um={changes:Jhe,selector:Qhe,handler:Zhe,initial:eme};function nme(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};um.initial(e),um.handler(t);var n={current:e},r=ud(ome)(n,t),a=ud(ame)(n),o=ud(um.changes)(e),i=ud(rme)(n);function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return um.selector(d),d(n.current)}function c(d){Yhe(r,a,o,i)(d)}return[l,c]}function rme(e,t){return wu(t)?t(e.current):t}function ame(e,t){return e.current=GT(GT({},e.current),t),t}function ome(e,t,n){return wu(t)?t(e.current):Object.keys(n).forEach(function(r){var a;return(a=t[r])===null||a===void 0?void 0:a.call(t,e.current[r])}),n}var ime={create:nme},lme={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function cme(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return t.apply(n,[].concat(a,l))}}}function dme(e){return{}.toString.call(e).includes("Object")}function ume(e){return e||JT("configIsRequired"),dme(e)||JT("configType"),e.urls?(hme(),{paths:{vs:e.urls.monacoBase}}):e}function hme(){console.warn(L_.deprecation)}function mme(e,t){throw new Error(e[t]||e.default)}var L_={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},JT=cme(mme)(L_),pme={config:ume},fme=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduceRight(function(o,i){return i(o)},a)}};function $_(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],$_(e[n],t[n]))}),XT(XT({},e),t)}var gme={type:"cancelation",msg:"operation is manually canceled"};function Ev(e){var t=!1,n=new Promise(function(r,a){e.then(function(o){return t?a(gme):r(o)}),e.catch(a)});return n.cancel=function(){return t=!0},n}var xme=ime.create({config:lme,isInitialized:!1,resolve:null,reject:null,monaco:null}),__=Bhe(xme,2),vh=__[0],Vg=__[1];function vme(e){var t=pme.config(e),n=t.monaco,r=Uhe(t,["monaco"]);Vg(function(a){return{config:$_(a.config,r),monaco:n}})}function yme(){var e=vh(function(t){var n=t.monaco,r=t.isInitialized,a=t.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!e.isInitialized){if(Vg({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Ev(Tv);if(window.monaco&&window.monaco.editor)return V_(window.monaco),e.resolve(window.monaco),Ev(Tv);fme(jme,Nme)(bme)}return Ev(Tv)}function jme(e){return document.body.appendChild(e)}function wme(e){var t=document.createElement("script");return e&&(t.src=e),t}function Nme(e){var t=vh(function(r){var a=r.config,o=r.reject;return{config:a,reject:o}}),n=wme("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function bme(){var e=vh(function(n){var r=n.config,a=n.resolve,o=n.reject;return{config:r,resolve:a,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){V_(n),e.resolve(n)},function(n){e.reject(n)})}function V_(e){vh().monaco||Vg({monaco:e})}function Sme(){return vh(function(e){var t=e.monaco;return t})}var Tv=new Promise(function(e,t){return Vg({resolve:e,reject:t})}),U_={config:vme,init:yme,__getMonacoInstance:Sme},Cme={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Pv=Cme,Eme={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Tme=Eme;function Pme({children:e}){return Nt.createElement("div",{style:Tme.container},e)}var Ame=Pme,Dme=Ame;function kme({width:e,height:t,isEditorReady:n,loading:r,_ref:a,className:o,wrapperProps:i}){return Nt.createElement("section",{style:{...Pv.wrapper,width:e,height:t},...i},!n&&Nt.createElement(Dme,null,r),Nt.createElement("div",{ref:a,style:{...Pv.fullWidth,...!n&&Pv.hide},className:o}))}var Mme=kme,B_=h.memo(Mme);function Rme(e){h.useEffect(e,[])}var H_=Rme;function Fme(e,t,n=!0){let r=h.useRef(!0);h.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var gn=Fme;function Ed(){}function cl(e,t,n,r){return Ome(e,r)||Ime(e,t,n,r)}function Ome(e,t){return e.editor.getModel(q_(e,t))}function Ime(e,t,n,r){return e.editor.createModel(t,n,r?q_(e,r):void 0)}function q_(e,t){return e.Uri.parse(t)}function Lme({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:u="Loading...",options:m={},height:p="100%",width:g="100%",className:x,wrapperProps:f={},beforeMount:w=Ed,onMount:y=Ed}){let[v,j]=h.useState(!1),[N,b]=h.useState(!0),E=h.useRef(null),S=h.useRef(null),P=h.useRef(null),A=h.useRef(y),L=h.useRef(w),R=h.useRef(!1);H_(()=>{let k=U_.init();return k.then(T=>(S.current=T)&&b(!1)).catch(T=>T?.type!=="cancelation"&&console.error("Monaco initialization: error:",T)),()=>E.current?O():k.cancel()}),gn(()=>{if(E.current&&S.current){let k=E.current.getOriginalEditor(),T=cl(S.current,e||"",r||n||"text",o||"");T!==k.getModel()&&k.setModel(T)}},[o],v),gn(()=>{if(E.current&&S.current){let k=E.current.getModifiedEditor(),T=cl(S.current,t||"",a||n||"text",i||"");T!==k.getModel()&&k.setModel(T)}},[i],v),gn(()=>{let k=E.current.getModifiedEditor();k.getOption(S.current.editor.EditorOption.readOnly)?k.setValue(t||""):t!==k.getValue()&&(k.executeEdits("",[{range:k.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),k.pushUndoStop())},[t],v),gn(()=>{E.current?.getModel()?.original.setValue(e||"")},[e],v),gn(()=>{let{original:k,modified:T}=E.current.getModel();S.current.editor.setModelLanguage(k,r||n||"text"),S.current.editor.setModelLanguage(T,a||n||"text")},[n,r,a],v),gn(()=>{S.current?.editor.setTheme(d)},[d],v),gn(()=>{E.current?.updateOptions(m)},[m],v);let I=h.useCallback(()=>{if(!S.current)return;L.current(S.current);let k=cl(S.current,e||"",r||n||"text",o||""),T=cl(S.current,t||"",a||n||"text",i||"");E.current?.setModel({original:k,modified:T})},[n,t,a,e,r,o,i]),V=h.useCallback(()=>{!R.current&&P.current&&(E.current=S.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...m}),I(),S.current?.editor.setTheme(d),j(!0),R.current=!0)},[m,d,I]);h.useEffect(()=>{v&&A.current(E.current,S.current)},[v]),h.useEffect(()=>{!N&&!v&&V()},[N,v,V]);function O(){let k=E.current?.getModel();l||k?.original?.dispose(),c||k?.modified?.dispose(),E.current?.dispose()}return Nt.createElement(B_,{width:g,height:p,isEditorReady:v,loading:u,_ref:P,className:x,wrapperProps:f})}var $me=Lme;h.memo($me);function _me(e){let t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}var Vme=_me,hm=new Map;function Ume({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:a,path:o,theme:i="light",line:l,loading:c="Loading...",options:d={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:p=!1,width:g="100%",height:x="100%",className:f,wrapperProps:w={},beforeMount:y=Ed,onMount:v=Ed,onChange:j,onValidate:N=Ed}){let[b,E]=h.useState(!1),[S,P]=h.useState(!0),A=h.useRef(null),L=h.useRef(null),R=h.useRef(null),I=h.useRef(v),V=h.useRef(y),O=h.useRef(),k=h.useRef(r),T=Vme(o),D=h.useRef(!1),M=h.useRef(!1);H_(()=>{let $=U_.init();return $.then(B=>(A.current=B)&&P(!1)).catch(B=>B?.type!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>L.current?H():$.cancel()}),gn(()=>{let $=cl(A.current,e||r||"",t||a||"",o||n||"");$!==L.current?.getModel()&&(m&&hm.set(T,L.current?.saveViewState()),L.current?.setModel($),m&&L.current?.restoreViewState(hm.get(o)))},[o],b),gn(()=>{L.current?.updateOptions(d)},[d],b),gn(()=>{!L.current||r===void 0||(L.current.getOption(A.current.editor.EditorOption.readOnly)?L.current.setValue(r):r!==L.current.getValue()&&(M.current=!0,L.current.executeEdits("",[{range:L.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),L.current.pushUndoStop(),M.current=!1))},[r],b),gn(()=>{let $=L.current?.getModel();$&&a&&A.current?.editor.setModelLanguage($,a)},[a],b),gn(()=>{l!==void 0&&L.current?.revealLine(l)},[l],b),gn(()=>{A.current?.editor.setTheme(i)},[i],b);let _=h.useCallback(()=>{if(!(!R.current||!A.current)&&!D.current){V.current(A.current);let $=o||n,B=cl(A.current,r||e||"",t||a||"",$||"");L.current=A.current?.editor.create(R.current,{model:B,automaticLayout:!0,...d},u),m&&L.current.restoreViewState(hm.get($)),A.current.editor.setTheme(i),l!==void 0&&L.current.revealLine(l),E(!0),D.current=!0}},[e,t,n,r,a,o,d,u,m,i,l]);h.useEffect(()=>{b&&I.current(L.current,A.current)},[b]),h.useEffect(()=>{!S&&!b&&_()},[S,b,_]),k.current=r,h.useEffect(()=>{b&&j&&(O.current?.dispose(),O.current=L.current?.onDidChangeModelContent($=>{M.current||j(L.current.getValue(),$)}))},[b,j]),h.useEffect(()=>{if(b){let $=A.current.editor.onDidChangeMarkers(B=>{let W=L.current.getModel()?.uri;if(W&&B.find(q=>q.path===W.path)){let q=A.current.editor.getModelMarkers({resource:W});N?.(q)}});return()=>{$?.dispose()}}return()=>{}},[b,N]);function H(){O.current?.dispose(),p?m&&hm.set(o,L.current.saveViewState()):L.current.getModel()?.dispose(),L.current.dispose()}return Nt.createElement(B_,{width:g,height:x,isEditorReady:b,loading:c,_ref:R,className:f,wrapperProps:w})}var Bme=Ume,Hme=h.memo(Bme),qme=Hme;function Wme({functionName:e,code:t,language:n,onChange:r,onSave:a,onCompile:o,onTest:i,readOnly:l=!1,errors:c=[],warnings:d=[],isCompiling:u=!1,isSaving:m=!1}){const p=g=>{switch(g){case"JAVA":return"java";case"JAVASCRIPT":return"javascript";case"GROOVY":return"java";case"PYTHON":return"python";default:return"plaintext"}};return s.jsxs(K,{className:"h-full flex flex-col",children:[s.jsx(oe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(vn,{className:"h-5 w-5"}),e]}),s.jsxs("div",{className:"flex gap-2",children:[n==="JAVA"&&o&&s.jsx(z,{variant:"outline",size:"sm",onClick:o,disabled:u||l,children:u?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Compiling..."]}):s.jsxs(s.Fragment,{children:[s.jsx(vn,{className:"h-4 w-4 mr-2"}),"Compile"]})}),i&&s.jsxs(z,{variant:"outline",size:"sm",onClick:i,disabled:l||c.length>0,children:[s.jsx(So,{className:"h-4 w-4 mr-2"}),"Test"]}),a&&s.jsx(z,{size:"sm",onClick:a,disabled:m||l||c.length>0,children:m?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Save"]})})]})]})}),s.jsxs(re,{className:"flex-1 flex flex-col p-0",children:[c.length>0&&s.jsxs(We,{variant:"destructive",className:"mx-6 mb-3",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsxs(ze,{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Compilation Errors:"}),s.jsx("ul",{className:"list-disc list-inside text-sm",children:c.map((g,x)=>s.jsx("li",{children:g},x))})]})]}),d.length>0&&s.jsxs(We,{className:"mx-6 mb-3",children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsxs(ze,{children:[s.jsx("div",{className:"font-semibold mb-1",children:"Warnings:"}),s.jsx("ul",{className:"list-disc list-inside text-sm",children:d.map((g,x)=>s.jsx("li",{children:g},x))})]})]}),c.length===0&&d.length===0&&u===!1&&n==="JAVA"&&s.jsxs(We,{className:"mx-6 mb-3 border-green-200 bg-green-50 text-success",children:[s.jsx(Kd,{className:"h-4 w-4"}),s.jsx(ze,{children:"Code compiled successfully!"})]}),s.jsx("div",{className:"flex-1 border-t",children:s.jsx(qme,{height:"100%",language:p(n),value:t,onChange:g=>r(g||""),options:{readOnly:l,minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderLineHighlight:"all",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4,wordWrap:"on",theme:"vs-light"}})})]})]})}function QT(e){try{const t=e.match(/^(\w+)\s*\((.*)\)$/);if(!t)return null;const n=t[1],r=t[2].trim();if(!r)return{functionName:n,parameters:[]};const a=[];let o="",i=0;for(let l=0;l<r.length;l++){const c=r[l];if(c==="("?i++:c===")"&&i--,c===","&&i===0){const d=ZT(o.trim());d&&a.push(d),o=""}else o+=c}if(o.trim()){const l=ZT(o.trim());l&&a.push(l)}return{functionName:n,parameters:a}}catch(t){return console.error("Error parsing function signature:",t),null}}function ZT(e){if(!e)return null;const t=e.match(/^(\w+)\s*:\s*(\w+)$/);if(t){const[,n,r]=t;return{name:n,type:zme(r),required:!0}}return{name:e,type:"any",required:!0}}function zme(e){return{string:"string",number:"number",boolean:"boolean",array:"array",bool:"boolean",int:"number",float:"number",double:"number",text:"string",str:"string"}[e.toLowerCase()]||"any"}function eP(e,t){return t.map(n=>{const r=n.name;return e.includes(`${r} +`)||e.includes(`${r} -`)||e.includes(`${r} *`)||e.includes(`${r} /`)||e.includes("Math.")&&e.includes(r)?{...n,type:"number"}:e.includes(`${r}.length`)||e.includes(`${r}.substring`)||e.includes(`${r}.indexOf`)||e.includes(`${r}.toUpperCase`)||e.includes(`${r}.toLowerCase`)?{...n,type:"string"}:e.includes(`!${r}`)||e.includes(`${r} &&`)||e.includes(`${r} ||`)||e.includes(`${r} ?`)?{...n,type:"boolean"}:e.includes(`${r}.length`)||e.includes(`${r}[`)||e.includes(`${r}.map`)||e.includes(`${r}.filter`)||e.includes(`${r}.reduce`)?{...n,type:"array"}:n})}const Xme=[{value:"string",label:"String"},{value:"number",label:"Number (int/double/float)"},{value:"boolean",label:"Boolean"},{value:"array",label:"Array/List"},{value:"any",label:"Any (Object)"}];function Yme({parameters:e,onChange:t,readOnly:n=!1}){const r=()=>{const l={name:`param${e.length+1}`,type:"string",required:!0,uiType:"draggable"};t([...e,l])},a=l=>{const c=e.filter((d,u)=>u!==l);t(c)},o=(l,c,d)=>{const u=[...e];u[l]={...u[l],[c]:d},t(u)},i=()=>e.length===0?"functionName()":`functionName(${e.map(c=>`${c.type} ${c.name}`).join(", ")})`;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(C,{children:"Function Parameters"}),!n&&s.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:r,className:"h-8",children:[s.jsx(es,{className:"h-3 w-3 mr-1"}),"Add Parameter"]})]}),e.length===0?s.jsx(K,{className:"p-4 border-dashed",children:s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:'No parameters defined. Click "Add Parameter" to add one.'})}):s.jsx("div",{className:"space-y-2",children:e.map((l,c)=>s.jsxs(K,{className:"p-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Parameter Name"}),s.jsx(U,{value:l.name,onChange:d=>o(c,"name",d.target.value),placeholder:"paramName",disabled:n,className:"h-8 text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Java Type"}),s.jsxs(se,{value:l.type,onValueChange:d=>o(c,"type",d),disabled:n,children:[s.jsx(ee,{className:"h-8 text-sm",children:s.jsx(ne,{})}),s.jsx(te,{children:Xme.map(d=>s.jsx(F,{value:d.value,className:"text-sm",children:d.label},d.value))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"Required"}),s.jsxs(se,{value:l.required?"true":"false",onValueChange:d=>o(c,"required",d==="true"),disabled:n,children:[s.jsx(ee,{className:"h-8 text-sm",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"true",className:"text-sm",children:"Required"}),s.jsx(F,{value:"false",className:"text-sm",children:"Optional"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(C,{className:"text-xs",children:"UI Type"}),s.jsxs(se,{value:l.uiType||"draggable",onValueChange:d=>o(c,"uiType",d),disabled:n,children:[s.jsx(ee,{className:"h-8 text-sm",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"draggable",className:"text-sm",children:"Draggable (Input)"}),s.jsx(F,{value:"configurable",className:"text-sm",children:"Configurable"})]})]})]})]}),!n&&s.jsx(z,{type:"button",variant:"ghost",size:"sm",onClick:()=>a(c),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:s.jsx(jt,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"mt-2",children:s.jsx(U,{value:l.description||"",onChange:d=>o(c,"description",d.target.value),placeholder:"Parameter description (optional)",disabled:n,className:"h-8 text-sm"})})]},c))}),s.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[s.jsx(C,{className:"text-xs text-muted-foreground mb-1 block",children:"Generated Signature Preview"}),s.jsx("code",{className:"text-sm font-mono",children:i()})]})]})}function Kme({functionId:e,functionName:t,parameters:n,onTest:r}){const[a,o]=h.useState({}),[i,l]=h.useState(!1),[c,d]=h.useState(null),u=(f,w)=>{o(y=>({...y,[f]:w}))},m=(f,w)=>{if(!f&&w!=="String")return null;try{switch(w){case"int":case"Integer":return parseInt(f,10);case"long":case"Long":return parseInt(f,10);case"double":case"Double":return parseFloat(f);case"float":case"Float":return parseFloat(f);case"boolean":case"Boolean":return f.toLowerCase()==="true";case"List":try{const y=JSON.parse(f);return Array.isArray(y)?y:[f]}catch{return f.split(",").map(y=>y.trim())}case"Map":case"Object":try{return JSON.parse(f)}catch{return f}default:return f}}catch(y){return console.error(`Error parsing ${w} value:`,y),f}},p=async()=>{l(!0),d(null);try{const f={};for(const j of n){const N=a[j.name]||"";f[j.name]=m(N,j.type)}const w=Date.now(),y=await r(e,f),v=Date.now()-w;d({...y,executionTime:v})}catch(f){d({success:!1,error:f instanceof Error?f.message:"Test execution failed"})}finally{l(!1)}},g=f=>{switch(f.type){case"number":return"e.g., 42 or 3.14";case"boolean":return"true or false";case"array":return"e.g., [1, 2, 3] or 1,2,3";case"any":return'e.g., {"key": "value"} or any value';case"string":default:return"Enter value..."}},x=f=>{if(f==null)return"null";if(typeof f=="object")try{return JSON.stringify(f,null,2)}catch{return String(f)}return String(f)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{children:"Test Inputs"}),n.length===0?s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx(ze,{children:'This function has no parameters. Click "Run Test" to execute it.'})]}):s.jsx("div",{className:"space-y-3",children:n.map(f=>s.jsx(K,{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs(C,{className:"text-sm",children:[f.name,f.required&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"font-mono bg-muted px-1 py-0.5 rounded",children:f.type}),f.description&&s.jsx("span",{children:f.description})]})]})}),s.jsx(U,{value:a[f.name]||"",onChange:w=>u(f.name,w.target.value),placeholder:g(f),className:"font-mono text-sm"})]})},f.name))})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(z,{onClick:p,disabled:i,className:"w-full sm:w-auto",children:i?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Test..."]}):s.jsxs(s.Fragment,{children:[s.jsx(So,{className:"h-4 w-4 mr-2"}),"Run Test"]})})}),c&&s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:c.success?s.jsxs(s.Fragment,{children:[s.jsx(rs,{className:"h-5 w-5 text-success"}),s.jsx("span",{className:"font-semibold text-success",children:"Test Passed"})]}):s.jsxs(s.Fragment,{children:[s.jsx(en,{className:"h-5 w-5 text-destructive"}),s.jsx("span",{className:"font-semibold text-destructive",children:"Test Failed"})]})}),c.executionTime!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.executionTime,"ms"]})]}),c.success&&c.output!==void 0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{className:"text-sm",children:"Output"}),s.jsx("pre",{className:"bg-muted p-3 rounded text-sm overflow-x-auto",children:s.jsx("code",{children:x(c.output)})})]}),!c.success&&c.error&&s.jsxs(We,{variant:"destructive",children:[s.jsx(en,{className:"h-4 w-4"}),s.jsx(ze,{className:"font-mono text-sm",children:c.error})]})]})})]})}function Gme({open:e,onOpenChange:t,function:n,mode:r,onSave:a,onCompile:o,onTest:i,isBuiltIn:l=!1,developmentMode:c=!1}){const[d,u]=h.useState({name:"",description:"",category:"general",language:"JAVA",functionSignature:"",functionBody:"",isSafe:!0,isPublic:!0,performanceClass:"NORMAL"}),[m,p]=h.useState([]),[g,x]=h.useState([]),[f,w]=h.useState([]),[y,v]=h.useState(!1),[j,N]=h.useState(!1),[b,E]=h.useState(!1),[S,P]=h.useState([]);h.useEffect(()=>{if(n){if(u({name:n.name||"",description:n.description||"",category:n.category||"general",language:n.language||"JAVA",functionSignature:n.functionSignature||"",functionBody:n.functionBody||"",isSafe:n.isSafe??!0,isPublic:n.isPublic??!0,performanceClass:n.performanceClass||"NORMAL"}),E(!1),x([]),w([]),n.parameters)try{const k=typeof n.parameters=="string"?JSON.parse(n.parameters):n.parameters;p(k),P(k)}catch(k){if(console.error("Failed to parse parameters:",k),n.functionSignature){const T=QT(n.functionSignature);if(T){const D=eP(n.functionBody||"",T.parameters);p(D),P(D)}}}else if(n.functionSignature){const k=QT(n.functionSignature);if(k){const T=eP(n.functionBody||"",k.parameters);p(T),P(T)}}}},[n]);const A=async()=>{if(!(!o||d.language!=="JAVA")){v(!0),x([]),w([]);try{const k=await o(d.functionBody);k.success?(E(!0),w(k.warnings||[])):x(k.errors||["Compilation failed"])}catch(k){x(["Failed to compile: "+k])}finally{v(!1)}}},L=async()=>{if(console.log("handleSave called",{onSave:!!a,formData:d,functionParameters:m,language:d.language,hasCompiled:b,mode:r,isBuiltIn:l,functionDataIsBuiltIn:n?.isBuiltIn,actualIsBuiltIn:n?.isBuiltIn||l}),!a){console.error("No onSave handler provided");return}const k=n?.isBuiltIn||l;if(d.language==="JAVA"&&!b&&r!=="view"&&!k){console.log("Compilation required for Java function"),x(["Please compile the Java code before saving"]);return}console.log("Proceeding with save..."),N(!0);try{const T=O(d.name,m),D={...d,functionSignature:T,parameters:JSON.stringify(m)};console.log("Calling onSave with:",D),await a(D),t(!1)}catch(T){console.error("Failed to save:",T),x(["Failed to save function"])}finally{N(!1)}},R=r==="edit"||r==="create",I=R&&c;console.log("FunctionDialog Save Button Check:",{mode:r,canEdit:R,developmentMode:c,showSaveButton:I,isBuiltIn:l});const V=k=>{p(k),P(k),E(!1)},O=(k,T)=>{if(T.length===0)return`${k}()`;const D=T.map(M=>`${M.type} ${M.name}`).join(", ");return`${k}(${D})`};return s.jsx(ft,{open:e,onOpenChange:t,children:s.jsxs(mt,{className:"max-w-6xl max-h-[90vh] p-0",children:[s.jsxs(gt,{className:"px-6 pt-6",children:[s.jsx(xt,{children:r==="create"?"Create New Function":r==="edit"?"Edit Function":"View Function"}),s.jsx(ks,{children:r==="create"?"Create a new transformation function":r==="edit"?"Modify the function implementation":"View function details and implementation"})]}),s.jsxs(et,{defaultValue:"details",className:"flex-1",children:[s.jsxs(Ke,{className:"mx-6",children:[s.jsx(xe,{value:"details",children:"Details"}),s.jsx(xe,{value:"code",children:"Code"}),n&&s.jsx(xe,{value:"test",children:"Test"})]}),s.jsxs(zn,{className:"h-[60vh]",children:[s.jsx(ye,{value:"details",className:"px-6 space-y-4",children:s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"name",children:"Function Name"}),s.jsx(U,{id:"name",value:d.name,onChange:k=>u({...d,name:k.target.value}),readOnly:!R||l&&r==="edit",placeholder:"e.g., calculateTax"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"category",children:"Category"}),s.jsxs(se,{value:d.category,onValueChange:k=>u({...d,category:k}),disabled:!R,children:[s.jsx(ee,{id:"category",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"math",children:"Math"}),s.jsx(F,{value:"text",children:"Text"}),s.jsx(F,{value:"date",children:"Date"}),s.jsx(F,{value:"boolean",children:"Boolean"}),s.jsx(F,{value:"conversion",children:"Conversion"}),s.jsx(F,{value:"node",children:"Node"}),s.jsx(F,{value:"constants",children:"Constants"}),s.jsx(F,{value:"general",children:"General"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"description",children:"Description"}),s.jsx(Re,{id:"description",value:d.description,onChange:k=>u({...d,description:k.target.value}),readOnly:!R,placeholder:"Describe what this function does...",rows:3})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Yme,{parameters:m,onChange:V,readOnly:!R||l&&!c}),R&&r==="create"&&s.jsxs(We,{children:[s.jsx(ds,{className:"h-4 w-4"}),s.jsx(ze,{className:"text-xs",children:"Define your function parameters above. The signature will be generated automatically."})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"language",children:"Language"}),s.jsxs(se,{value:d.language,onValueChange:k=>{u({...d,language:k}),E(!1),x([]),w([])},disabled:!R||l&&r==="edit",children:[s.jsx(ee,{id:"language",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"JAVA",children:"Java"}),!l&&s.jsxs(s.Fragment,{children:[s.jsx(F,{value:"GROOVY",children:"Groovy"}),s.jsx(F,{value:"JAVASCRIPT",children:"JavaScript"}),s.jsx(F,{value:"PYTHON",children:"Python"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{htmlFor:"performance",children:"Performance Class"}),s.jsxs(se,{value:d.performanceClass,onValueChange:k=>u({...d,performanceClass:k}),disabled:!R,children:[s.jsx(ee,{id:"performance",children:s.jsx(ne,{})}),s.jsxs(te,{children:[s.jsx(F,{value:"FAST",children:"Fast"}),s.jsx(F,{value:"NORMAL",children:"Normal"}),s.jsx(F,{value:"SLOW",children:"Slow"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(C,{children:"Flags"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[d.isPublic&&s.jsx(fe,{variant:"secondary",children:"Public"}),d.isSafe&&s.jsx(fe,{variant:"secondary",children:"Safe"}),l&&s.jsx(fe,{children:"Built-in"})]})]})]})]})}),s.jsx(ye,{value:"code",className:"h-full",children:s.jsx("div",{className:"h-[50vh] px-6",children:s.jsx(Wme,{functionName:d.name,code:d.functionBody,language:d.language,onChange:k=>{u({...d,functionBody:k}),E(!1)},onCompile:d.language==="JAVA"?A:void 0,readOnly:!R,errors:g,warnings:f,isCompiling:y})})}),s.jsx(ye,{value:"test",className:"px-6",children:s.jsx(Kme,{functionId:n?.functionId||"",functionName:d.name,parameters:m,onTest:i||(async()=>({success:!1,error:"Test handler not provided"}))})})]})]}),s.jsxs(Wn,{className:"px-6 pb-6",children:[s.jsx(z,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),I&&s.jsx(z,{onClick:L,disabled:j||g.length>0,children:j?s.jsxs(s.Fragment,{children:[s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Function"})]})]})})}const Jme=()=>{const[e,t]=h.useState(""),[n,r]=h.useState("all"),[a,o]=h.useState(!1),[i,l]=h.useState(null),[c,d]=h.useState("view"),u=Sb(),{data:m,isLoading:p,error:g}=tw({queryKey:["development-mode"],queryFn:async()=>await ut.get("/development/functions/development-mode")}),{data:x,isLoading:f}=tw({queryKey:["development-functions"],queryFn:async()=>await ut.get("/development/functions")}),w=async M=>await ut.get(`/development/functions/${M}`),y=Bm({mutationFn:async M=>await ut.post("/development/functions",M),onSuccess:()=>{u.invalidateQueries({queryKey:["development-functions"]}),toast({title:"Success",description:"Function created successfully"}),o(!1)},onError:M=>{toast({title:"Error",description:M.response?.data?.message||"Failed to create function",variant:"destructive"})}}),v=Bm({mutationFn:async({functionId:M,data:_})=>await ut.put(`/development/functions/${M}`,_),onSuccess:()=>{u.invalidateQueries({queryKey:["development-functions"]}),toast({title:"Success",description:"Function updated successfully"}),o(!1)},onError:M=>{toast({title:"Error",description:M.response?.data?.message||"Failed to update function",variant:"destructive"})}}),j=Bm({mutationFn:async M=>{await ut.delete(`/development/functions/${M}`)},onSuccess:()=>{u.invalidateQueries({queryKey:["development-functions"]}),toast({title:"Success",description:"Function deleted successfully"})},onError:M=>{toast({title:"Error",description:M.response?.data?.message||"Failed to delete function",variant:"destructive"})}}),N=async M=>{try{return await ut.post("/development/functions/compile",{functionName:i?.name||"TestFunction",code:M})}catch(_){throw _.response?.data||_}},b=async(M,_)=>{try{return await ut.post(`/development/functions/${M}/test`,_)}catch(H){throw H.response?.data||H}},E=x?.builtInFunctions.filter(M=>{const _=M.name.toLowerCase().includes(e.toLowerCase())||M.description.toLowerCase().includes(e.toLowerCase()),H=n==="all"||M.category===n;return _&&H})||[],S=x?.customFunctions.content.filter(M=>{const _=M.name.toLowerCase().includes(e.toLowerCase())||M.description.toLowerCase().includes(e.toLowerCase()),H=n==="all"||M.category===n;return _&&H})||[],P=["all",...new Set(x?.builtInFunctions.map(M=>M.category)||[])],A=m?.developmentMode||!1;console.log("Development Mode Check:",{devModeData:m,isDevelopmentMode:A,isDevModeLoading:p,devModeError:g});const L=()=>{l(null),d("create"),o(!0)},R=async(M,_=!1)=>{try{const H=await w(M);l(H),d("view"),o(!0)}catch{toast({title:"Error",description:"Failed to load function details",variant:"destructive"})}},I=async(M,_=!1)=>{try{const H=await w(M);l(H),d("edit"),o(!0)}catch{toast({title:"Error",description:"Failed to load function details",variant:"destructive"})}},V=async M=>{console.log("DevelopmentFunctions handleSave called:",{dialogMode:c,selectedFunction:i,data:M}),c==="create"?y.mutate(M):c==="edit"&&i?(console.log("Updating function:",i.functionId),v.mutate({functionId:i.functionId,data:M})):console.error("Cannot save - invalid state:",{dialogMode:c,selectedFunction:i})},O=async M=>{confirm("Are you sure you want to delete this function?")&&j.mutate(M)},k=M=>{switch(M){case"FAST":return s.jsx(sn,{className:"h-3 w-3 text-green-500"});case"SLOW":return s.jsx(js,{className:"h-3 w-3 text-orange-500"});default:return s.jsx(Kd,{className:"h-3 w-3 text-blue-500"})}},T=async M=>{try{const _=await ut.get(`/development/functions/built-in/${M}`);return console.log("Built-in function API response:",_),_}catch(_){return console.error("Error finding built-in function:",_),null}},D=async M=>{try{const _=await T(M.name);_?(console.log("Setting selectedFunction:",_),console.log("Function isBuiltIn status:",_.isBuiltIn),l(_),d(A?"edit":"view"),o(!0)):toast({title:"Error",description:"Function details not found",variant:"destructive"})}catch{toast({title:"Error",description:"Failed to load function details",variant:"destructive"})}};return f?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-4"}),s.jsx("div",{className:"h-64 bg-muted rounded"})]})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[s.jsx(vn,{className:"h-8 w-8"}),"Development Functions"]}),s.jsx("p",{className:"text-muted-foreground",children:"Manage and test transformation functions for visual flow and orchestration editors"})]}),A&&s.jsxs(z,{className:"gap-2",onClick:L,children:[s.jsx(es,{className:"h-4 w-4"}),"Create Function"]})]}),!A&&s.jsxs(We,{children:[s.jsx(yt,{className:"h-4 w-4"}),s.jsx($r,{children:"Read-Only Mode"}),s.jsxs(ze,{children:["Function creation and editing is only available in development mode. Current profile: ",m?.developmentMode===!1?"Production/QA":"Unknown"]})]}),s.jsxs(K,{children:[s.jsx(oe,{children:s.jsx(ie,{children:"Search Functions"})}),s.jsxs(re,{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(U,{placeholder:"Search by name or description...",value:e,onChange:M=>t(M.target.value),className:"pl-10"})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:P.map(M=>s.jsx(fe,{variant:n===M?"default":"outline",className:"cursor-pointer",onClick:()=>r(M),children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]})]}),s.jsxs(et,{defaultValue:"builtin",className:"space-y-4",children:[s.jsxs(Ke,{children:[s.jsxs(xe,{value:"builtin",children:["Built-in Functions (",E.length,")"]}),s.jsxs(xe,{value:"custom",children:["Custom Functions (",S.length,")"]})]}),s.jsx(ye,{value:"builtin",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Built-in Functions"}),s.jsx(Ne,{children:"Pre-configured functions available in all environments"})]}),s.jsx(re,{children:s.jsx(zn,{className:"h-[600px]",children:s.jsx("div",{className:"space-y-2",children:E.map((M,_)=>s.jsx("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>D(M),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium",children:M.name}),s.jsx(fe,{variant:"secondary",className:"text-xs",children:M.category}),s.jsx(fe,{className:"text-xs",children:"Built-in"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),s.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:M.signature})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(z,{size:"sm",variant:"ghost",onClick:H=>{H.stopPropagation(),D(M)},children:A?s.jsx(ga,{className:"h-4 w-4"}):s.jsx(fa,{className:"h-4 w-4"})})})]})},`${M.category}-${M.name}`))})})})]})}),s.jsx(ye,{value:"custom",className:"space-y-4",children:s.jsxs(K,{children:[s.jsxs(oe,{children:[s.jsx(ie,{children:"Custom Functions"}),s.jsx(Ne,{children:"User-defined functions for specialized transformations"})]}),s.jsx(re,{children:s.jsx(zn,{className:"h-[600px]",children:s.jsxs("div",{className:"space-y-2",children:[S.filter(M=>!M.isBuiltIn).map(M=>s.jsx("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>R(M.functionId),children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium",children:M.name}),s.jsx(fe,{variant:"secondary",className:"text-xs",children:M.language}),s.jsxs("div",{className:"flex items-center gap-1",children:[k(M.performanceClass),s.jsx("span",{className:"text-xs text-muted-foreground",children:M.performanceClass})]}),M.isSafe?s.jsxs(fe,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(Kd,{className:"h-3 w-3"}),"Safe"]}):s.jsxs(fe,{variant:"destructive",className:"text-xs gap-1",children:[s.jsx(yt,{className:"h-3 w-3"}),"Unsafe"]}),M.isPublic?s.jsxs(fe,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(qB,{className:"h-3 w-3"}),"Public"]}):s.jsxs(fe,{variant:"outline",className:"text-xs gap-1",children:[s.jsx(ho,{className:"h-3 w-3"}),"Private"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:M.description}),s.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:M.functionSignature}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Version ",M.version," • Created by ",M.createdBy]})]}),A&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(z,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),R(M.functionId)},children:s.jsx(fa,{className:"h-4 w-4"})}),s.jsx(z,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),I(M.functionId)},children:s.jsx(ga,{className:"h-4 w-4"})}),s.jsx(z,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),O(M.functionId)},children:s.jsx(Xn,{className:"h-4 w-4"})})]})]})},M.functionId)),S.filter(M=>!M.isBuiltIn).length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No custom functions found"})]})})})]})})]}),s.jsx(Gme,{open:a,onOpenChange:o,function:i,mode:c,onSave:V,onCompile:N,onTest:b,isBuiltIn:i?.isBuiltIn||!1,developmentMode:A})]})};class Qme{async deployFlow(t){try{return await G.post(`/flows/${t}/deployment/deploy`)}catch(n){let r="Failed to deploy flow";return n.message?r=n.message:n.response?.data?.message?r=n.response.data.message:n.response?.data?.error?r=n.response.data.error:typeof n=="string"&&(r=n),{success:!1,error:r}}}async undeployFlow(t){try{return{success:(await G.post(`/flows/${t}/deployment/undeploy`)).success}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to undeploy flow"}}}async getDeploymentInfo(t){try{return await G.get(`/flows/${t}/deployment`)}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch deployment info"}}}}const cw=new Qme;function Zme({flowId:e,flowName:t,open:n,onOpenChange:r}){const[a,o]=h.useState(!1),[i,l]=h.useState(null),{toast:c}=_e();h.useEffect(()=>{n&&e&&d()},[n,e]);const d=async()=>{if(e){o(!0);try{const p=await cw.getDeploymentInfo(e);p.success&&p.data?l(p.data):c({variant:"destructive",title:"Error",description:p.error||"Failed to fetch deployment information"})}catch{c({variant:"destructive",title:"Error",description:"Failed to fetch deployment information"})}finally{o(!1)}}},u=(p,g)=>{navigator.clipboard.writeText(p),c({title:"Copied!",description:`${g} copied to clipboard`})},m=p=>new Date(p).toLocaleString();return n?s.jsx(ft,{open:n,onOpenChange:r,children:s.jsxs(mt,{className:"max-w-2xl",children:[s.jsxs(gt,{children:[s.jsxs(xt,{className:"flex items-center gap-2",children:[s.jsx(Lf,{className:"h-5 w-5"}),"Deployment Details"]}),s.jsx(ks,{children:t?`Deployment information for ${t}`:"Flow deployment information"})]}),a?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(vt,{className:"h-8 w-8 animate-spin"})}):i?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(kr,{className:"h-4 w-4"}),"Primary Endpoint"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-sm",children:i.endpoint}),s.jsx(z,{size:"sm",variant:"outline",onClick:()=>u(i.endpoint,"Endpoint"),children:s.jsx(Dr,{className:"h-4 w-4"})}),i.endpoint.startsWith("http")&&s.jsx(z,{size:"sm",variant:"outline",onClick:()=>window.open(i.endpoint,"_blank"),children:s.jsx(XC,{className:"h-4 w-4"})})]})]}),i.metadata?.wsdlUrl&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Sa,{className:"h-4 w-4"}),"WSDL URL (Planned)"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-sm",children:i.metadata.wsdlUrl}),s.jsx(z,{size:"sm",variant:"outline",onClick:()=>u(i.metadata.wsdlUrl,"WSDL URL"),children:s.jsx(Dr,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: The actual SOAP endpoint implementation is pending. This URL shows where the WSDL will be available once the endpoint is fully deployed."})]})]}),i.metadata?.apiDocsUrl&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium",children:"API Documentation"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-sm",children:i.metadata.apiDocsUrl}),s.jsx(z,{size:"sm",variant:"outline",onClick:()=>u(i.metadata.apiDocsUrl,"API Docs URL"),children:s.jsx(Dr,{className:"h-4 w-4"})}),s.jsx(z,{size:"sm",variant:"outline",onClick:()=>window.open(i.metadata.apiDocsUrl,"_blank"),children:s.jsx(XC,{className:"h-4 w-4"})})]})]}),i.metadata?.openApiUrl&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium",children:"OpenAPI Specification"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"flex-1 p-2 bg-muted rounded text-sm",children:i.metadata.openApiUrl}),s.jsx(z,{size:"sm",variant:"outline",onClick:()=>u(i.metadata.openApiUrl,"OpenAPI URL"),children:s.jsx(Dr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Deployment Metadata"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Adapter Type:"}),s.jsx(fe,{variant:"outline",className:"ml-2",children:i.metadata?.adapterType||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Adapter Mode:"}),s.jsx(fe,{variant:"outline",className:"ml-2",children:i.metadata?.adapterMode||"Unknown"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Deployed At:"}),s.jsx("span",{className:"ml-2",children:m(i.deployedAt)})]}),i.deployedBy&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Deployed By:"}),s.jsx("span",{className:"ml-2",children:i.deployedBy})]})]})]}),i.metadata&&Object.keys(i.metadata).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Additional Information"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[i.metadata.httpMethods&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"HTTP Methods:"}),s.jsx("span",{className:"ml-2",children:i.metadata.httpMethods})]}),i.metadata.contentType&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Content Type:"}),s.jsx("span",{className:"ml-2",children:i.metadata.contentType})]}),i.metadata.soapVersion&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"SOAP Version:"}),s.jsx("span",{className:"ml-2",children:i.metadata.soapVersion})]}),i.metadata.pollingEnabled!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Polling:"}),s.jsx("span",{className:"ml-2",children:i.metadata.pollingEnabled?"Enabled":"Disabled"})]}),i.metadata.filePattern&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"File Pattern:"}),s.jsx("span",{className:"ml-2",children:i.metadata.filePattern})]})]})]})]}):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No deployment information available"})]})}):null}function epe(){const e=as(),{toast:t}=_e(),[n,r]=h.useState([]),[a,o]=h.useState(!0),[i,l]=h.useState(""),[c,d]=h.useState(!1),[u,m]=h.useState(null),[p,g]=h.useState("all"),[x,f]=h.useState(null),[w,y]=h.useState(null),[v,j]=h.useState(!1);h.useEffect(()=>{N()},[]);const N=async()=>{try{o(!0);const k=await ow.getFlows();if(k.success&&k.data){const T=Array.isArray(k.data)?k.data:k.data.flows||[];r(T)}}catch{t({variant:"destructive",title:"Error",description:"Failed to fetch interfaces"})}finally{o(!1)}},b=()=>{N(),t({title:"Success",description:"Interfaces refreshed"})},E=k=>{m(k),d(!0)},S=async()=>{if(u)try{const k=await ow.deleteFlow(u.id);if(k.success)t({title:"Success",description:"Interface deleted successfully"}),N();else throw new Error(k.error||"Failed to delete interface")}catch(k){t({variant:"destructive",title:"Error",description:k instanceof Error?k.message:"Failed to delete interface"})}finally{d(!1),m(null)}},P=async k=>{try{f(k.id);const T=await cw.deployFlow(k.id);if(T.success)t({title:"Success",description:`Interface "${k.name}" has been deployed successfully`}),N();else{let D=T.error||"Failed to deploy interface";D.includes("Bad Request")||D.includes("HTTP 400")?D="Deployment failed. Please ensure all required components (adapters, data structures) are properly configured.":D.includes("not found")||D.includes("HTTP 404")?D="Deployment failed. Some required components could not be found.":D.includes("already deployed")||D.includes("HTTP 409")?D="This interface is already deployed. Please undeploy it first before redeploying.":(D.includes("validation failed")||D.includes("already exists"))&&(D="Deployment failed due to validation error. Please check flow configuration and try again."),t({variant:"destructive",title:"Deployment Failed",description:D})}}catch{t({variant:"destructive",title:"Error",description:"An error occurred during deployment"})}finally{f(null)}},A=k=>{y(k),j(!0)},L=async k=>{try{f(k.id);const T=await cw.undeployFlow(k.id);T.success?(t({title:"Success",description:`Interface "${k.name}" has been undeployed successfully`}),N()):t({variant:"destructive",title:"Undeploy Failed",description:T.error||"Failed to undeploy interface"})}catch{t({variant:"destructive",title:"Error",description:"An error occurred during undeployment"})}finally{f(null)}},I=(()=>{let k=n.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.description?.toLowerCase().includes(i.toLowerCase()));switch(p){case"undeployed":return k.filter(T=>T.status==="DEVELOPED_INACTIVE"||T.status==="DRAFT"||T.status==="INACTIVE");case"deployed":return k.filter(T=>T.status==="DEPLOYED_ACTIVE"||T.status==="ACTIVE");default:return k}})(),V=k=>{const T={DEPLOYED_ACTIVE:"bg-green-500",DRAFT:"bg-blue-500",INACTIVE:"bg-gray-500",ERROR:"bg-red-500",DEVELOPED_INACTIVE:"bg-yellow-500"};return s.jsx(fe,{className:`${T[k]||"bg-gray-500"} text-white`,children:k.replace("_"," ")})},O=k=>s.jsx(fe,{variant:"outline",children:k==="PASS_THROUGH"?"Direct Passthrough":k==="WITH_MAPPING"?"Mapping Required":"Orchestration"});return a?s.jsx("div",{className:"w-full p-6",children:s.jsx("div",{className:"flex justify-center items-center p-12",children:s.jsx(vt,{className:"h-8 w-8 animate-spin"})})}):s.jsxs("div",{className:"w-full max-w-none p-8 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Interface Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage all your integration flows in one place"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:()=>e("/create-direct-mapping-flow"),children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),s.jsx(nr,{className:"h-4 w-4 mr-2"}),"Direct Mapping"]}),s.jsxs(z,{onClick:()=>e("/create-orchestration-flow"),variant:"outline",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),s.jsx(Lu,{className:"h-4 w-4 mr-2"}),"Orchestration Flow"]})]})]}),s.jsxs(et,{value:p,onValueChange:g,className:"space-y-4",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsx(xe,{value:"all",children:"All Interfaces"}),s.jsx(xe,{value:"undeployed",children:"Undeployed"}),s.jsx(xe,{value:"deployed",children:"Deployed"})]}),s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(uc,{className:"h-5 w-5"}),"Filters"]})}),s.jsx(re,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(U,{placeholder:"Search by name...",value:i,onChange:k=>l(k.target.value),className:"pl-10"})]})})]}),s.jsx(ye,{value:p,children:s.jsxs(K,{children:[s.jsx(oe,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(ie,{className:"flex items-center gap-2",children:[s.jsx(Qd,{className:"h-5 w-5"}),p==="all"&&`All Interfaces (${I.length})`,p==="undeployed"&&`Undeployed Interfaces (${I.length})`,p==="deployed"&&`Deployed Interfaces (${I.length})`]}),s.jsxs(z,{variant:"outline",size:"sm",onClick:b,children:[s.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),s.jsx(re,{children:a?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading interfaces..."})}):I.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:i?"No interfaces found matching your search.":p==="deployed"?"No deployed interfaces found.":p==="undeployed"?"No undeployed interfaces found.":"No interfaces created yet."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fr,{children:[s.jsx(gr,{children:s.jsxs(Zt,{children:[s.jsx(De,{children:"Name"}),s.jsx(De,{children:"Type"}),s.jsx(De,{children:"Source → Target"}),s.jsx(De,{children:"Status"}),s.jsx(De,{children:"Created"}),s.jsx(De,{children:"Actions"})]})}),s.jsx(xr,{children:I.map(k=>{const T=x===k.id;return s.jsxs(Zt,{children:[s.jsx(ke,{className:"font-medium",children:k.name}),s.jsx(ke,{children:O(k.mappingMode||"PASS_THROUGH")}),s.jsx(ke,{children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(fe,{variant:"outline",children:k.sourceAdapterType||"Unknown"}),s.jsx("span",{children:"→"}),s.jsx(fe,{variant:"outline",children:k.targetAdapterType||"Unknown"})]})}),s.jsx(ke,{children:V(k.status)}),s.jsx(ke,{children:new Date(k.createdAt).toLocaleDateString()}),s.jsx(ke,{children:s.jsxs(Xu,{children:[s.jsx(Yu,{asChild:!0,children:s.jsx(z,{variant:"ghost",size:"sm",children:s.jsx(rk,{className:"h-4 w-4"})})}),s.jsxs(Nc,{align:"end",children:[s.jsx(yN,{children:"Actions"}),s.jsx(Mr,{}),p==="undeployed"?s.jsxs(Rt,{onClick:()=>P(k),disabled:T||k.status==="DRAFT",children:[T?s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(GC,{className:"h-4 w-4 mr-2"}),"Deploy"]}):s.jsxs(s.Fragment,{children:[s.jsxs(Rt,{onClick:()=>e(`/flows/${k.id}/edit`),children:[s.jsx(fa,{className:"h-4 w-4 mr-2"}),"View Details"]}),s.jsxs(Rt,{onClick:()=>e(`/flows/${k.id}/edit`),children:[s.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]}),p==="all"&&(k.status==="DEVELOPED_INACTIVE"||k.status==="DRAFT"||k.status==="INACTIVE")&&s.jsxs(s.Fragment,{children:[s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>P(k),disabled:T||k.status==="DRAFT",children:[T?s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(GC,{className:"h-4 w-4 mr-2"}),"Deploy"]})]}),(p==="deployed"||p==="all"&&k.status==="DEPLOYED_ACTIVE")&&s.jsxs(s.Fragment,{children:[s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>A(k),children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"View Deployment Details"]}),s.jsxs(Rt,{onClick:()=>L(k),disabled:T,children:[T?s.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(uk,{className:"h-4 w-4 mr-2"}),"Undeploy"]})]}),s.jsx(Mr,{}),s.jsxs(Rt,{onClick:()=>E(k),className:"text-red-600",children:[s.jsx(Xn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},k.id)})})]})})})]})})]}),s.jsx(ft,{open:c,onOpenChange:d,children:s.jsxs(mt,{children:[s.jsxs(gt,{children:[s.jsx(xt,{children:"Delete Interface"}),s.jsxs(ks,{children:['Are you sure you want to delete "',u?.name,'"? This action cannot be undone.']})]}),s.jsxs(Wn,{children:[s.jsx(z,{variant:"outline",onClick:()=>{d(!1),m(null)},children:"Cancel"}),s.jsx(z,{variant:"destructive",onClick:S,children:"Delete"})]})]})}),s.jsx(Zme,{flowId:w?.id||null,flowName:w?.name,open:v,onOpenChange:j})]})}const tpe=()=>{const e=Ms();return h.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary",children:s.jsxs(K,{className:"w-full max-w-md shadow-elegant text-center",children:[s.jsxs(oe,{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"h-12 w-12 rounded-xl bg-primary flex items-center justify-center",children:s.jsx(Ps,{className:"h-6 w-6 text-primary-foreground"})})}),s.jsx(ie,{className:"text-4xl font-bold text-foreground",children:"404"}),s.jsx(Ne,{className:"text-xl",children:"Oops! Page not found"})]}),s.jsxs(re,{children:[s.jsx("p",{className:"text-muted-foreground mb-6",children:"The page you're looking for doesn't exist or has been moved."}),s.jsx(z,{asChild:!0,className:"bg-primary hover:opacity-90",children:s.jsx("a",{href:"/dashboard",children:"Return to Dashboard"})})]})]})})};new Q$({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3,retry:3,refetchOnWindowFocus:!1},mutations:{retry:!1}}});const spe=new Q$,npe=({children:e})=>s.jsxs(dle,{client:spe,children:[e,!1]});class rpe extends h.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n}),console.error("React Error Boundary triggered:",{error:t.message,stack:t.stack,componentStack:n.componentStack}),this.props.onError&&this.props.onError(t,n),console.error("Production error:",{error:t.toString(),componentStack:n.componentStack,stack:t.stack})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/"};render(){return this.state.hasError?this.props.fallback?s.jsx(s.Fragment,{children:this.props.fallback}):s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(K,{className:"w-full max-w-lg",children:[s.jsxs(oe,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yt,{className:"h-6 w-6 text-destructive"}),s.jsx(ie,{children:"Something went wrong"})]}),s.jsx(Ne,{children:"An unexpected error occurred. Don't worry, we've logged this issue."})]}),s.jsxs(re,{className:"space-y-4",children:[!1,s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(z,{onClick:this.handleReset,variant:"default",children:[s.jsx(Tt,{className:"mr-2 h-4 w-4"}),"Try Again"]}),s.jsxs(z,{onClick:this.handleGoHome,variant:"outline",children:[s.jsx(Wy,{className:"mr-2 h-4 w-4"}),"Go Home"]})]})]})]})}):this.props.children}}const ape=5e3,W_=O_((e,t)=>({notifications:[],addNotification:n=>{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={...n,id:r,duration:n.duration??ape,dismissible:n.dismissible??!0};e(o=>({notifications:[...o.notifications,a]})),a.duration&&a.duration>0&&setTimeout(()=>{t().removeNotification(r)},a.duration)},removeNotification:n=>{e(r=>({notifications:r.notifications.filter(a=>a.id!==n)}))},clearNotifications:()=>{e({notifications:[]})}})),qb=h.createContext({});function Wb(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const zb=typeof window<"u",z_=zb?h.useLayoutEffect:h.useEffect,Ug=h.createContext(null);function Xb(e,t){e.indexOf(t)===-1&&e.push(t)}function Yb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const wa=(e,t,n)=>n>t?t:n<e?e:n;let uf=()=>{};const Na={},X_=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Y_(e){return typeof e=="object"&&e!==null}const K_=e=>/^0[^.\s]+$/u.test(e);function Kb(e){let t;return()=>(t===void 0&&(t=e()),t)}const Un=e=>e,ope=(e,t)=>n=>t(e(n)),yh=(...e)=>e.reduce(ope),Nu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Gb{constructor(){this.subscriptions=[]}add(t){return Xb(this.subscriptions,t),()=>Yb(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let o=0;o<a;o++){const i=this.subscriptions[o];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ur=e=>e*1e3,Br=e=>e/1e3;function G_(e,t){return t?e*(1e3/t):0}const J_=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ipe=1e-7,lpe=12;function cpe(e,t,n,r,a){let o,i,l=0;do i=t+(n-t)/2,o=J_(i,r,a)-e,o>0?n=i:t=i;while(Math.abs(o)>ipe&&++l<lpe);return i}function jh(e,t,n,r){if(e===t&&n===r)return Un;const a=o=>cpe(o,0,1,e,n);return o=>o===0||o===1?o:J_(a(o),t,r)}const Q_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Z_=e=>t=>1-e(1-t),e3=jh(.33,1.53,.69,.99),Jb=Z_(e3),t3=Q_(Jb),s3=e=>(e*=2)<1?.5*Jb(e):.5*(2-Math.pow(2,-10*(e-1))),Qb=e=>1-Math.sin(Math.acos(e)),n3=Z_(Qb),r3=Q_(Qb),dpe=jh(.42,0,1,1),upe=jh(0,0,.58,1),a3=jh(.42,0,.58,1),hpe=e=>Array.isArray(e)&&typeof e[0]!="number",o3=e=>Array.isArray(e)&&typeof e[0]=="number",tP={linear:Un,easeIn:dpe,easeInOut:a3,easeOut:upe,circIn:Qb,circInOut:r3,circOut:n3,backIn:Jb,backInOut:t3,backOut:e3,anticipate:s3},mpe=e=>typeof e=="string",sP=e=>{if(o3(e)){uf(e.length===4);const[t,n,r,a]=e;return jh(t,n,r,a)}else if(mpe(e))return uf(tP[e]!==void 0),tP[e];return e},mm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],nP={value:null,addProjectionMetrics:null};function ppe(e,t){let n=new Set,r=new Set,a=!1,o=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function d(m){i.has(m)&&(u.schedule(m),e()),c++,m(l)}const u={schedule:(m,p=!1,g=!1)=>{const f=g&&a?n:r;return p&&i.add(m),f.has(m)||f.add(m),m},cancel:m=>{r.delete(m),i.delete(m)},process:m=>{if(l=m,a){o=!0;return}a=!0,[n,r]=[r,n],n.forEach(d),t&&nP.value&&nP.value.frameloop[t].push(c),c=0,n.clear(),a=!1,o&&(o=!1,u.process(m))}};return u}const fpe=40;function i3(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=mm.reduce((j,N)=>(j[N]=ppe(o,t?N:void 0),j),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:m,preRender:p,render:g,postRender:x}=i,f=()=>{const j=Na.useManualTiming?a.timestamp:performance.now();n=!1,Na.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(j-a.timestamp,fpe),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),m.process(a),p.process(a),g.process(a),x.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(f))},w=()=>{n=!0,r=!0,a.isProcessing||e(f)};return{schedule:mm.reduce((j,N)=>{const b=i[N];return j[N]=(E,S=!1,P=!1)=>(n||w(),b.schedule(E,S,P)),j},{}),cancel:j=>{for(let N=0;N<mm.length;N++)i[mm[N]].cancel(j)},state:a,steps:i}}const{schedule:It,cancel:yo,state:gs,steps:Av}=i3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Un,!0);let zm;function gpe(){zm=void 0}const Gs={now:()=>(zm===void 0&&Gs.set(gs.isProcessing||Na.useManualTiming?gs.timestamp:performance.now()),zm),set:e=>{zm=e,queueMicrotask(gpe)}},l3=e=>t=>typeof t=="string"&&t.startsWith(e),Zb=l3("--"),xpe=l3("var(--"),eS=e=>xpe(e)?vpe.test(e.split("/*")[0].trim()):!1,vpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Oc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},bu={...Oc,transform:e=>wa(0,1,e)},pm={...Oc,default:1},Td=e=>Math.round(e*1e5)/1e5,tS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ype(e){return e==null}const jpe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sS=(e,t)=>n=>!!(typeof n=="string"&&jpe.test(n)&&n.startsWith(e)||t&&!ype(n)&&Object.prototype.hasOwnProperty.call(n,t)),c3=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,o,i,l]=r.match(tS);return{[e]:parseFloat(a),[t]:parseFloat(o),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},wpe=e=>wa(0,255,e),Dv={...Oc,transform:e=>Math.round(wpe(e))},Wo={test:sS("rgb","red"),parse:c3("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Dv.transform(e)+", "+Dv.transform(t)+", "+Dv.transform(n)+", "+Td(bu.transform(r))+")"};function Npe(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const dw={test:sS("#"),parse:Npe,transform:Wo.transform},wh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ua=wh("deg"),Hr=wh("%"),Be=wh("px"),bpe=wh("vh"),Spe=wh("vw"),rP={...Hr,parse:e=>Hr.parse(e)/100,transform:e=>Hr.transform(e*100)},dl={test:sS("hsl","hue"),parse:c3("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Hr.transform(Td(t))+", "+Hr.transform(Td(n))+", "+Td(bu.transform(r))+")"},ss={test:e=>Wo.test(e)||dw.test(e)||dl.test(e),parse:e=>Wo.test(e)?Wo.parse(e):dl.test(e)?dl.parse(e):dw.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Wo.transform(e):dl.transform(e),getAnimatableNone:e=>{const t=ss.parse(e);return t.alpha=0,ss.transform(t)}},Cpe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Epe(e){return isNaN(e)&&typeof e=="string"&&(e.match(tS)?.length||0)+(e.match(Cpe)?.length||0)>0}const d3="number",u3="color",Tpe="var",Ppe="var(",aP="${}",Ape=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Su(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let o=0;const l=t.replace(Ape,c=>(ss.test(c)?(r.color.push(o),a.push(u3),n.push(ss.parse(c))):c.startsWith(Ppe)?(r.var.push(o),a.push(Tpe),n.push(c)):(r.number.push(o),a.push(d3),n.push(parseFloat(c))),++o,aP)).split(aP);return{values:n,split:l,indexes:r,types:a}}function h3(e){return Su(e).values}function m3(e){const{split:t,types:n}=Su(e),r=t.length;return a=>{let o="";for(let i=0;i<r;i++)if(o+=t[i],a[i]!==void 0){const l=n[i];l===d3?o+=Td(a[i]):l===u3?o+=ss.transform(a[i]):o+=a[i]}return o}}const Dpe=e=>typeof e=="number"?0:ss.test(e)?ss.getAnimatableNone(e):e;function kpe(e){const t=h3(e);return m3(e)(t.map(Dpe))}const jo={test:Epe,parse:h3,createTransformer:m3,getAnimatableNone:kpe};function kv(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mpe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,o=0,i=0;if(!t)a=o=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;a=kv(c,l,e+1/3),o=kv(c,l,e),i=kv(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}function hf(e,t){return n=>n>0?t:e}const Vt=(e,t,n)=>e+(t-e)*n,Mv=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},Rpe=[dw,Wo,dl],Fpe=e=>Rpe.find(t=>t.test(e));function oP(e){const t=Fpe(e);if(!t)return!1;let n=t.parse(e);return t===dl&&(n=Mpe(n)),n}const iP=(e,t)=>{const n=oP(e),r=oP(t);if(!n||!r)return hf(e,t);const a={...n};return o=>(a.red=Mv(n.red,r.red,o),a.green=Mv(n.green,r.green,o),a.blue=Mv(n.blue,r.blue,o),a.alpha=Vt(n.alpha,r.alpha,o),Wo.transform(a))},uw=new Set(["none","hidden"]);function Ope(e,t){return uw.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Ipe(e,t){return n=>Vt(e,t,n)}function nS(e){return typeof e=="number"?Ipe:typeof e=="string"?eS(e)?hf:ss.test(e)?iP:_pe:Array.isArray(e)?p3:typeof e=="object"?ss.test(e)?iP:Lpe:hf}function p3(e,t){const n=[...e],r=n.length,a=e.map((o,i)=>nS(o)(o,t[i]));return o=>{for(let i=0;i<r;i++)n[i]=a[i](o);return n}}function Lpe(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=nS(e[a])(e[a],t[a]));return a=>{for(const o in r)n[o]=r[o](a);return n}}function $pe(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],i=e.indexes[o][r[o]],l=e.values[i]??0;n[a]=l,r[o]++}return n}const _pe=(e,t)=>{const n=jo.createTransformer(t),r=Su(e),a=Su(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?uw.has(e)&&!a.values.length||uw.has(t)&&!r.values.length?Ope(e,t):yh(p3($pe(r,a),a.values),n):hf(e,t)};function f3(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Vt(e,t,n):nS(e)(e,t)}const Vpe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>It.update(t,n),stop:()=>yo(t),now:()=>gs.isProcessing?gs.timestamp:Gs.now()}},g3=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let o=0;o<a;o++)r+=Math.round(e(o/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},mf=2e4;function rS(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<mf;)t+=n,r=e.next(t);return t>=mf?1/0:t}function Upe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(rS(r),mf);return{type:"keyframes",ease:o=>r.next(a*o).value/t,duration:Br(a)}}const Bpe=5;function x3(e,t,n){const r=Math.max(t-Bpe,0);return G_(n-e(r),t-r)}const Xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rv=.001;function Hpe({duration:e=Xt.duration,bounce:t=Xt.bounce,velocity:n=Xt.velocity,mass:r=Xt.mass}){let a,o,i=1-t;i=wa(Xt.minDamping,Xt.maxDamping,i),e=wa(Xt.minDuration,Xt.maxDuration,Br(e)),i<1?(a=d=>{const u=d*i,m=u*e,p=u-n,g=hw(d,i),x=Math.exp(-m);return Rv-p/g*x},o=d=>{const m=d*i*e,p=m*n+n,g=Math.pow(i,2)*Math.pow(d,2)*e,x=Math.exp(-m),f=hw(Math.pow(d,2),i);return(-a(d)+Rv>0?-1:1)*((p-g)*x)/f}):(a=d=>{const u=Math.exp(-d*e),m=(d-n)*e+1;return-Rv+u*m},o=d=>{const u=Math.exp(-d*e),m=(n-d)*(e*e);return u*m});const l=5/e,c=Wpe(a,o,l);if(e=Ur(e),isNaN(c))return{stiffness:Xt.stiffness,damping:Xt.damping,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:i*2*Math.sqrt(r*d),duration:e}}}const qpe=12;function Wpe(e,t,n){let r=n;for(let a=1;a<qpe;a++)r=r-e(r)/t(r);return r}function hw(e,t){return e*Math.sqrt(1-t*t)}const zpe=["duration","bounce"],Xpe=["stiffness","damping","mass"];function lP(e,t){return t.some(n=>e[n]!==void 0)}function Ype(e){let t={velocity:Xt.velocity,stiffness:Xt.stiffness,damping:Xt.damping,mass:Xt.mass,isResolvedFromDuration:!1,...e};if(!lP(e,Xpe)&&lP(e,zpe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,o=2*wa(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Xt.mass,stiffness:a,damping:o}}else{const n=Hpe(e);t={...t,...n,mass:Xt.mass},t.isResolvedFromDuration=!0}return t}function pf(e=Xt.visualDuration,t=Xt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:d,mass:u,duration:m,velocity:p,isResolvedFromDuration:g}=Ype({...n,velocity:-Br(n.velocity||0)}),x=p||0,f=d/(2*Math.sqrt(c*u)),w=i-o,y=Br(Math.sqrt(c/u)),v=Math.abs(w)<5;r||(r=v?Xt.restSpeed.granular:Xt.restSpeed.default),a||(a=v?Xt.restDelta.granular:Xt.restDelta.default);let j;if(f<1){const b=hw(y,f);j=E=>{const S=Math.exp(-f*y*E);return i-S*((x+f*y*w)/b*Math.sin(b*E)+w*Math.cos(b*E))}}else if(f===1)j=b=>i-Math.exp(-y*b)*(w+(x+y*w)*b);else{const b=y*Math.sqrt(f*f-1);j=E=>{const S=Math.exp(-f*y*E),P=Math.min(b*E,300);return i-S*((x+f*y*w)*Math.sinh(P)+b*w*Math.cosh(P))/b}}const N={calculatedDuration:g&&m||null,next:b=>{const E=j(b);if(g)l.done=b>=m;else{let S=b===0?x:0;f<1&&(S=b===0?Ur(x):x3(j,b,E));const P=Math.abs(S)<=r,A=Math.abs(i-E)<=a;l.done=P&&A}return l.value=l.done?i:E,l},toString:()=>{const b=Math.min(rS(N),mf),E=g3(S=>N.next(b*S).value,b,30);return b+"ms "+E},toTransition:()=>{}};return N}pf.applyToOptions=e=>{const t=Upe(e,100,pf);return e.ease=t.ease,e.duration=Ur(t.duration),e.type="keyframes",e};function mw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:i,min:l,max:c,restDelta:d=.5,restSpeed:u}){const m=e[0],p={done:!1,value:m},g=P=>l!==void 0&&P<l||c!==void 0&&P>c,x=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let f=n*t;const w=m+f,y=i===void 0?w:i(w);y!==w&&(f=y-m);const v=P=>-f*Math.exp(-P/r),j=P=>y+v(P),N=P=>{const A=v(P),L=j(P);p.done=Math.abs(A)<=d,p.value=p.done?y:L};let b,E;const S=P=>{g(p.value)&&(b=P,E=pf({keyframes:[p.value,x(p.value)],velocity:x3(j,P,p.value),damping:a,stiffness:o,restDelta:d,restSpeed:u}))};return S(0),{calculatedDuration:null,next:P=>{let A=!1;return!E&&b===void 0&&(A=!0,N(P),S(P)),b!==void 0&&P>=b?E.next(P-b):(!A&&N(P),p)}}}function Kpe(e,t,n){const r=[],a=n||Na.mix||f3,o=e.length-1;for(let i=0;i<o;i++){let l=a(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||Un:t;l=yh(c,l)}r.push(l)}return r}function Gpe(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const o=e.length;if(uf(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Kpe(t,r,a),c=l.length,d=u=>{if(i&&u<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(u<e[m+1]);m++);const p=Nu(e[m],e[m+1],u);return l[m](p)};return n?u=>d(wa(e[0],e[o-1],u)):d}function Jpe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=Nu(0,t,r);e.push(Vt(n,1,a))}}function Qpe(e){const t=[0];return Jpe(t,e.length-1),t}function Zpe(e,t){return e.map(n=>n*t)}function efe(e,t){return e.map(()=>t||a3).splice(0,e.length-1)}function Pd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=hpe(r)?r.map(sP):sP(r),o={done:!1,value:t[0]},i=Zpe(n&&n.length===t.length?n:Qpe(t),e),l=Gpe(i,t,{ease:Array.isArray(a)?a:efe(t,a)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}const tfe=e=>e!==null;function aS(e,{repeat:t,repeatType:n="loop"},r,a=1){const o=e.filter(tfe),l=a<0||t&&n!=="loop"&&t%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const sfe={decay:mw,inertia:mw,tween:Pd,keyframes:Pd,spring:pf};function v3(e){typeof e.type=="string"&&(e.type=sfe[e.type])}class oS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const nfe=e=>e/100;class iS extends oS{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Gs.now()&&this.tick(Gs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;v3(t);const{type:n=Pd,repeat:r=0,repeatDelay:a=0,repeatType:o,velocity:i=0}=t;let{keyframes:l}=t;const c=n||Pd;c!==Pd&&typeof l[0]!="number"&&(this.mixKeyframes=yh(nfe,f3(l[0],l[1])),l=[0,100]);const d=c({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=rS(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:o,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:u,repeat:m,repeatType:p,repeatDelay:g,type:x,onUpdate:f,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,N=r;if(m){const P=Math.min(this.currentTime,a)/l;let A=Math.floor(P),L=P%1;!L&&P>=1&&(L=1),L===1&&A--,A=Math.min(A,m+1),!!(A%2)&&(p==="reverse"?(L=1-L,g&&(L-=g/l)):p==="mirror"&&(N=i)),j=wa(0,1,L)*l}const b=v?{done:!1,value:u[0]}:N.next(j);o&&(b.value=o(b.value));let{done:E}=b;!v&&c!==null&&(E=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return S&&x!==mw&&(b.value=aS(u,this.options,w,this.speed)),f&&f(b.value),S&&this.finish(),b}then(t,n){return this.finished.then(t,n)}get duration(){return Br(this.calculatedDuration)}get time(){return Br(this.currentTime)}set time(t){t=Ur(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Gs.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Br(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Vpe,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function rfe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const zo=e=>e*180/Math.PI,pw=e=>{const t=zo(Math.atan2(e[1],e[0]));return fw(t)},afe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:pw,rotateZ:pw,skewX:e=>zo(Math.atan(e[1])),skewY:e=>zo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},fw=e=>(e=e%360,e<0&&(e+=360),e),cP=pw,dP=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),uP=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),ofe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dP,scaleY:uP,scale:e=>(dP(e)+uP(e))/2,rotateX:e=>fw(zo(Math.atan2(e[6],e[5]))),rotateY:e=>fw(zo(Math.atan2(-e[2],e[0]))),rotateZ:cP,rotate:cP,skewX:e=>zo(Math.atan(e[4])),skewY:e=>zo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function gw(e){return e.includes("scale")?1:0}function xw(e,t){if(!e||e==="none")return gw(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=ofe,a=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=afe,a=l}if(!a)return gw(t);const o=r[t],i=a[1].split(",").map(lfe);return typeof o=="function"?o(i):i[o]}const ife=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return xw(n,t)};function lfe(e){return parseFloat(e.trim())}const Ic=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lc=new Set(Ic),hP=e=>e===Oc||e===Be,cfe=new Set(["x","y","z"]),dfe=Ic.filter(e=>!cfe.has(e));function ufe(e){const t=[];return dfe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Zo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>xw(t,"x"),y:(e,{transform:t})=>xw(t,"y")};Zo.translateX=Zo.x;Zo.translateY=Zo.y;const ei=new Set;let vw=!1,yw=!1,jw=!1;function y3(){if(yw){const e=Array.from(ei).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=ufe(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([o,i])=>{r.getValue(o)?.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}yw=!1,vw=!1,ei.forEach(e=>e.complete(jw)),ei.clear()}function j3(){ei.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(yw=!0)})}function hfe(){jw=!0,j3(),y3(),jw=!1}class lS{constructor(t,n,r,a,o,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=o,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(ei.add(this),vw||(vw=!0,It.read(j3),It.resolveKeyframes(y3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const o=a?.get(),i=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),a&&o===void 0&&a.set(t[0])}rfe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ei.delete(this)}cancel(){this.state==="scheduled"&&(ei.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const mfe=e=>e.startsWith("--");function pfe(e,t,n){mfe(t)?e.style.setProperty(t,n):e.style[t]=n}const ffe=Kb(()=>window.ScrollTimeline!==void 0),gfe={};function xfe(e,t){const n=Kb(e);return()=>gfe[t]??n()}const w3=xfe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,mP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hd([0,.65,.55,1]),circOut:hd([.55,0,1,.45]),backIn:hd([.31,.01,.66,-.59]),backOut:hd([.33,1.53,.69,.99])};function N3(e,t){if(e)return typeof e=="function"?w3()?g3(e,t):"ease-out":o3(e)?hd(e):Array.isArray(e)?e.map(n=>N3(n,t)||mP.easeOut):mP[e]}function vfe(e,t,n,{delay:r=0,duration:a=300,repeat:o=0,repeatType:i="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[t]:n};c&&(u.offset=c);const m=N3(l,a);Array.isArray(m)&&(u.easing=m);const p={delay:r,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),e.animate(u,p)}function b3(e){return typeof e=="function"&&"applyToOptions"in e}function yfe({type:e,...t}){return b3(e)&&w3()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class jfe extends oS{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:o,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!o,this.allowFlatten=i,this.options=t,uf(typeof t.type!="string");const d=yfe(t);this.animation=vfe(n,r,a,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const u=aS(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):pfe(n,r,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Br(Number(t))}get time(){return Br(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ur(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ffe()?(this.animation.timeline=t,Un):n(this)}}const S3={anticipate:s3,backInOut:t3,circInOut:r3};function wfe(e){return e in S3}function Nfe(e){typeof e.ease=="string"&&wfe(e.ease)&&(e.ease=S3[e.ease])}const pP=10;class bfe extends jfe{constructor(t){Nfe(t),v3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:o,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new iS({...i,autoplay:!1}),c=Ur(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-pP).value,l.sample(c).value,pP),l.stop()}}const fP=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(jo.test(e)||e==="0")&&!e.startsWith("url("));function Sfe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Cfe(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],i=fP(a,t),l=fP(o,t);return!i||!l?!1:Sfe(e)||(n==="spring"||b3(n))&&r}function ww(e){e.duration=0,e.type}const Efe=new Set(["opacity","clipPath","filter","transform"]),Tfe=Kb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Pfe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:o,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return Tfe()&&n&&Efe.has(n)&&(n!=="transform"||!d)&&!c&&!r&&a!=="mirror"&&o!==0&&i!=="inertia"}const Afe=40;class Dfe extends oS{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:i="loop",keyframes:l,name:c,motionValue:d,element:u,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Gs.now();const p={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:o,repeatType:i,name:c,motionValue:d,element:u,...m},g=u?.KeyframeResolver||lS;this.keyframeResolver=new g(l,(x,f,w)=>this.onKeyframesResolved(x,f,p,!w),c,d,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:o,type:i,velocity:l,delay:c,isHandoff:d,onUpdate:u}=r;this.resolvedAt=Gs.now(),Cfe(t,o,i,l)||((Na.instantAnimations||!c)&&u?.(aS(t,r,n)),t[0]=t[t.length-1],ww(r),r.repeat=0);const p={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Afe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!d&&Pfe(p)?new bfe({...p,element:p.motionValue.owner.current}):new iS(p);g.finished.then(()=>this.notifyFinished()).catch(Un),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),hfe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mfe(e){const t=kfe.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function C3(e,t,n=1){const[r,a]=Mfe(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const i=o.trim();return X_(i)?parseFloat(i):i}return eS(a)?C3(a,t,n+1):a}function cS(e,t){return e?.[t]??e?.default??e}const E3=new Set(["width","height","top","left","right","bottom",...Ic]),Rfe={test:e=>e==="auto",parse:e=>e},T3=e=>t=>t.test(e),P3=[Oc,Be,Hr,Ua,Spe,bpe,Rfe],gP=e=>P3.find(T3(e));function Ffe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||K_(e):!0}const Ofe=new Set(["brightness","contrast","saturate","opacity"]);function Ife(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(tS)||[];if(!r)return e;const a=n.replace(r,"");let o=Ofe.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+a+")"}const Lfe=/\b([a-z-]*)\(.*?\)/gu,Nw={...jo,getAnimatableNone:e=>{const t=e.match(Lfe);return t?t.map(Ife).join(" "):e}},xP={...Oc,transform:Math.round},$fe={rotate:Ua,rotateX:Ua,rotateY:Ua,rotateZ:Ua,scale:pm,scaleX:pm,scaleY:pm,scaleZ:pm,skew:Ua,skewX:Ua,skewY:Ua,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:bu,originX:rP,originY:rP,originZ:Be},dS={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...$fe,zIndex:xP,fillOpacity:bu,strokeOpacity:bu,numOctaves:xP},_fe={...dS,color:ss,backgroundColor:ss,outlineColor:ss,fill:ss,stroke:ss,borderColor:ss,borderTopColor:ss,borderRightColor:ss,borderBottomColor:ss,borderLeftColor:ss,filter:Nw,WebkitFilter:Nw},A3=e=>_fe[e];function D3(e,t){let n=A3(e);return n!==Nw&&(n=jo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Vfe=new Set(["auto","none","0"]);function Ufe(e,t,n){let r=0,a;for(;r<e.length&&!a;){const o=e[r];typeof o=="string"&&!Vfe.has(o)&&Su(o).values.length&&(a=e[r]),r++}if(a&&n)for(const o of t)e[o]=D3(n,a)}class Bfe extends lS{constructor(t,n,r,a,o){super(t,n,r,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),eS(d))){const u=C3(d,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!E3.has(r)||t.length!==2)return;const[a,o]=t,i=gP(a),l=gP(o);if(i!==l)if(hP(i)&&hP(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else Zo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Ffe(t[a]))&&r.push(a);r.length&&Ufe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=r.length-1,i=r[o];r[o]=Zo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Hfe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const k3=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function M3(e){return Y_(e)&&"offsetHeight"in e}const vP=30,qfe=e=>!isNaN(parseFloat(e));class Wfe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const a=Gs.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Gs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=qfe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Gb);const r=this.events[t].add(n);return t==="change"?()=>{r(),It.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Gs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>vP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vP);return G_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rc(e,t){return new Wfe(e,t)}const{schedule:uS,cancel:cye}=i3(queueMicrotask,!1),Qn={x:!1,y:!1};function R3(){return Qn.x||Qn.y}function zfe(e){return e==="x"||e==="y"?Qn[e]?null:(Qn[e]=!0,()=>{Qn[e]=!1}):Qn.x||Qn.y?null:(Qn.x=Qn.y=!0,()=>{Qn.x=Qn.y=!1})}function F3(e,t){const n=Hfe(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function yP(e){return!(e.pointerType==="touch"||R3())}function Xfe(e,t,n={}){const[r,a,o]=F3(e,n),i=l=>{if(!yP(l))return;const{target:c}=l,d=t(c,l);if(typeof d!="function"||!c)return;const u=m=>{yP(m)&&(d(m),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,a)};return r.forEach(l=>{l.addEventListener("pointerenter",i,a)}),o}const O3=(e,t)=>t?e===t?!0:O3(e,t.parentElement):!1,hS=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Yfe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Kfe(e){return Yfe.has(e.tagName)||e.tabIndex!==-1}const Xm=new WeakSet;function jP(e){return t=>{t.key==="Enter"&&e(t)}}function Fv(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Gfe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=jP(()=>{if(Xm.has(n))return;Fv(n,"down");const a=jP(()=>{Fv(n,"up")}),o=()=>Fv(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function wP(e){return hS(e)&&!R3()}function Jfe(e,t,n={}){const[r,a,o]=F3(e,n),i=l=>{const c=l.currentTarget;if(!wP(l))return;Xm.add(c);const d=t(c,l),u=(g,x)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),Xm.has(c)&&Xm.delete(c),wP(g)&&typeof d=="function"&&d(g,{success:x})},m=g=>{u(g,c===window||c===document||n.useGlobalTarget||O3(c,g.target))},p=g=>{u(g,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",p,a)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,a),M3(l)&&(l.addEventListener("focus",d=>Gfe(d,a)),!Kfe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function I3(e){return Y_(e)&&"ownerSVGElement"in e}function Qfe(e){return I3(e)&&e.tagName==="svg"}const Es=e=>!!(e&&e.getVelocity),Zfe=[...P3,ss,jo],ege=e=>Zfe.find(T3(e)),mS=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class tge extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=M3(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sge({children:e,isPresent:t,anchorX:n,root:r}){const a=h.useId(),o=h.useRef(null),i=h.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=h.useContext(mS);return h.useInsertionEffect(()=>{const{width:c,height:d,top:u,left:m,right:p}=i.current;if(t||!o.current||!c||!d)return;const g=n==="left"?`left: ${m}`:`right: ${p}`;o.current.dataset.motionPopId=a;const x=document.createElement("style");l&&(x.nonce=l);const f=r??document.head;return f.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${u}px !important;
          }
        `),()=>{f.contains(x)&&f.removeChild(x)}},[t]),s.jsx(tge,{isPresent:t,childRef:o,sizeRef:i,children:h.cloneElement(e,{ref:o})})}const nge=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:i,anchorX:l,root:c})=>{const d=Wb(rge),u=h.useId();let m=!0,p=h.useMemo(()=>(m=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:g=>{d.set(g,!0);for(const x of d.values())if(!x)return;r&&r()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[n,d,r]);return o&&m&&(p={...p}),h.useMemo(()=>{d.forEach((g,x)=>d.set(x,!1))},[n]),h.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),i==="popLayout"&&(e=s.jsx(sge,{isPresent:n,anchorX:l,root:c,children:e})),s.jsx(Ug.Provider,{value:p,children:e})};function rge(){return new Map}function L3(e=!0){const t=h.useContext(Ug);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,o=h.useId();h.useEffect(()=>{if(e)return a(o)},[e]);const i=h.useCallback(()=>e&&r&&r(o),[o,r,e]);return!n&&r?[!1,i]:[!0]}const fm=e=>e.key||"";function NP(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const age=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:i=!1,anchorX:l="left",root:c})=>{const[d,u]=L3(i),m=h.useMemo(()=>NP(e),[e]),p=i&&!d?[]:m.map(fm),g=h.useRef(!0),x=h.useRef(m),f=Wb(()=>new Map),[w,y]=h.useState(m),[v,j]=h.useState(m);z_(()=>{g.current=!1,x.current=m;for(let E=0;E<v.length;E++){const S=fm(v[E]);p.includes(S)?f.delete(S):f.get(S)!==!0&&f.set(S,!1)}},[v,p.length,p.join("-")]);const N=[];if(m!==w){let E=[...m];for(let S=0;S<v.length;S++){const P=v[S],A=fm(P);p.includes(A)||(E.splice(S,0,P),N.push(P))}return o==="wait"&&N.length&&(E=N),j(NP(E)),y(m),null}const{forceRender:b}=h.useContext(qb);return s.jsx(s.Fragment,{children:v.map(E=>{const S=fm(E),P=i&&!d?!1:m===v||p.includes(S),A=()=>{if(f.has(S))f.set(S,!0);else return;let L=!0;f.forEach(R=>{R||(L=!1)}),L&&(b?.(),j(x.current),i&&u?.(),r&&r())};return s.jsx(nge,{isPresent:P,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:c,onExitComplete:P?void 0:A,anchorX:l,children:E},S)})})},$3=h.createContext({strict:!1}),bP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ac={};for(const e in bP)ac[e]={isEnabled:t=>bP[e].some(n=>!!t[n])};function oge(e){for(const t in e)ac[t]={...ac[t],...e[t]}}const ige=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ff(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ige.has(e)}let _3=e=>!ff(e);function lge(e){typeof e=="function"&&(_3=t=>t.startsWith("on")?!ff(t):e(t))}try{lge(require("@emotion/is-prop-valid").default)}catch{}function cge(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(_3(a)||n===!0&&ff(a)||!t&&!ff(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const Bg=h.createContext({});function Hg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Cu(e){return typeof e=="string"||Array.isArray(e)}const pS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fS=["initial",...pS];function qg(e){return Hg(e.animate)||fS.some(t=>Cu(e[t]))}function V3(e){return!!(qg(e)||e.variants)}function dge(e,t){if(qg(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Cu(n)?n:void 0,animate:Cu(r)?r:void 0}}return e.inherit!==!1?t:{}}function uge(e){const{initial:t,animate:n}=dge(e,h.useContext(Bg));return h.useMemo(()=>({initial:t,animate:n}),[SP(t),SP(n)])}function SP(e){return Array.isArray(e)?e.join(" "):e}const Eu={};function hge(e){for(const t in e)Eu[t]=e[t],Zb(t)&&(Eu[t].isCSSVariable=!0)}function U3(e,{layout:t,layoutId:n}){return Lc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Eu[e]||e==="opacity")}const mge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pge=Ic.length;function fge(e,t,n){let r="",a=!0;for(let o=0;o<pge;o++){const i=Ic[o],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=k3(l,dS[i]);if(!c){a=!1;const u=mge[i]||i;r+=`${u}(${d}) `}n&&(t[i]=d)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function gS(e,t,n){const{style:r,vars:a,transformOrigin:o}=e;let i=!1,l=!1;for(const c in t){const d=t[c];if(Lc.has(c)){i=!0;continue}else if(Zb(c)){a[c]=d;continue}else{const u=k3(d,dS[c]);c.startsWith("origin")?(l=!0,o[c]=u):r[c]=u}}if(t.transform||(i||n?r.transform=fge(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=o;r.transformOrigin=`${c} ${d} ${u}`}}const xS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function B3(e,t,n){for(const r in t)!Es(t[r])&&!U3(r,n)&&(e[r]=t[r])}function gge({transformTemplate:e},t){return h.useMemo(()=>{const n=xS();return gS(n,t,e),Object.assign({},n.vars,n.style)},[t])}function xge(e,t){const n=e.style||{},r={};return B3(r,n,e),Object.assign(r,gge(e,t)),r}function vge(e,t){const n={},r=xge(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const yge={offset:"stroke-dashoffset",array:"stroke-dasharray"},jge={offset:"strokeDashoffset",array:"strokeDasharray"};function wge(e,t,n=1,r=0,a=!0){e.pathLength=1;const o=a?yge:jge;e[o.offset]=Be.transform(-r);const i=Be.transform(t),l=Be.transform(n);e[o.array]=`${i} ${l}`}function H3(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:o=1,pathOffset:i=0,...l},c,d,u){if(gS(e,l,d),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=u?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),a!==void 0&&wge(m,a,o,i,!1)}const q3=()=>({...xS(),attrs:{}}),W3=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Nge(e,t,n,r){const a=h.useMemo(()=>{const o=q3();return H3(o,t,W3(r),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};B3(o,e.style,e),a.style={...o,...a.style}}return a}const bge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vS(e){return typeof e!="string"||e.includes("-")?!1:!!(bge.indexOf(e)>-1||/[A-Z]/u.test(e))}function Sge(e,t,n,{latestValues:r},a,o=!1){const l=(vS(e)?Nge:vge)(t,r,a,e),c=cge(t,typeof e=="string",o),d=e!==h.Fragment?{...c,...l,ref:n}:{},{children:u}=t,m=h.useMemo(()=>Es(u)?u.get():u,[u]);return h.createElement(e,{...d,children:m})}function CP(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function yS(e,t,n,r){if(typeof t=="function"){const[a,o]=CP(r);t=t(n!==void 0?n:e.custom,a,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,o]=CP(r);t=t(n!==void 0?n:e.custom,a,o)}return t}function Ym(e){return Es(e)?e.get():e}function Cge({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:Ege(n,r,a,e),renderState:t()}}function Ege(e,t,n,r){const a={},o=r(e,{});for(const p in o)a[p]=Ym(o[p]);let{initial:i,animate:l}=e;const c=qg(e),d=V3(e);t&&d&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||i===!1;const m=u?l:i;if(m&&typeof m!="boolean"&&!Hg(m)){const p=Array.isArray(m)?m:[m];for(let g=0;g<p.length;g++){const x=yS(e,p[g]);if(x){const{transitionEnd:f,transition:w,...y}=x;for(const v in y){let j=y[v];if(Array.isArray(j)){const N=u?j.length-1:0;j=j[N]}j!==null&&(a[v]=j)}for(const v in f)a[v]=f[v]}}}return a}const z3=e=>(t,n)=>{const r=h.useContext(Bg),a=h.useContext(Ug),o=()=>Cge(e,t,r,a);return n?o():Wb(o)};function jS(e,t,n){const{style:r}=e,a={};for(const o in r)(Es(r[o])||t.style&&Es(t.style[o])||U3(o,e)||n?.getValue(o)?.liveStyle!==void 0)&&(a[o]=r[o]);return a}const Tge=z3({scrapeMotionValuesFromProps:jS,createRenderState:xS});function X3(e,t,n){const r=jS(e,t,n);for(const a in e)if(Es(e[a])||Es(t[a])){const o=Ic.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[o]=e[a]}return r}const Pge=z3({scrapeMotionValuesFromProps:X3,createRenderState:q3}),Age=Symbol.for("motionComponentSymbol");function ul(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Dge(e,t,n){return h.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ul(n)&&(n.current=r))},[t])}const wS=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kge="framerAppearId",Y3="data-"+wS(kge),K3=h.createContext({});function Mge(e,t,n,r,a){const{visualElement:o}=h.useContext(Bg),i=h.useContext($3),l=h.useContext(Ug),c=h.useContext(mS).reducedMotion,d=h.useRef(null);r=r||i.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,m=h.useContext(K3);u&&!u.projection&&a&&(u.type==="html"||u.type==="svg")&&Rge(d.current,n,a,m);const p=h.useRef(!1);h.useInsertionEffect(()=>{u&&p.current&&u.update(n,l)});const g=n[Y3],x=h.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return z_(()=>{u&&(p.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),x.current&&u.animationState&&u.animationState.animateChanges())}),h.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),u.enteringChildren=void 0)}),u}function Rge(e,t,n,r){const{layoutId:a,layout:o,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:G3(e.parent)),e.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!i||l&&ul(l),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:d})}function G3(e){if(e)return e.options.allowProjection!==!1?e.projection:G3(e.parent)}function Ov(e,{forwardMotionProps:t=!1}={},n,r){n&&oge(n);const a=vS(e)?Pge:Tge;function o(l,c){let d;const u={...h.useContext(mS),...l,layoutId:Fge(l)},{isStatic:m}=u,p=uge(l),g=a(l,m);if(!m&&zb){Oge();const x=Ige(u);d=x.MeasureLayout,p.visualElement=Mge(e,g,u,r,x.ProjectionNode)}return s.jsxs(Bg.Provider,{value:p,children:[d&&p.visualElement?s.jsx(d,{visualElement:p.visualElement,...u}):null,Sge(e,l,Dge(g,p.visualElement,c),g,m,t)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=h.forwardRef(o);return i[Age]=e,i}function Fge({layoutId:e}){const t=h.useContext(qb).id;return t&&e!==void 0?t+"-"+e:e}function Oge(e,t){h.useContext($3).strict}function Ige(e){const{drag:t,layout:n}=ac;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Lge(e,t){if(typeof Proxy>"u")return Ov;const n=new Map,r=(o,i)=>Ov(o,i,e,t),a=(o,i)=>r(o,i);return new Proxy(a,{get:(o,i)=>i==="create"?r:(n.has(i)||n.set(i,Ov(i,void 0,e,t)),n.get(i))})}function J3({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function $ge({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function _ge(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Iv(e){return e===void 0||e===1}function bw({scale:e,scaleX:t,scaleY:n}){return!Iv(e)||!Iv(t)||!Iv(n)}function Io(e){return bw(e)||Q3(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Q3(e){return EP(e.x)||EP(e.y)}function EP(e){return e&&e!=="0%"}function gf(e,t,n){const r=e-n,a=t*r;return n+a}function TP(e,t,n,r,a){return a!==void 0&&(e=gf(e,a,r)),gf(e,n,r)+t}function Sw(e,t=0,n=1,r,a){e.min=TP(e.min,t,n,r,a),e.max=TP(e.max,t,n,r,a)}function Z3(e,{x:t,y:n}){Sw(e.x,t.translate,t.scale,t.originPoint),Sw(e.y,n.translate,n.scale,n.originPoint)}const PP=.999999999999,AP=1.0000000000001;function Vge(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let o,i;for(let l=0;l<a;l++){o=n[l],i=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ml(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Z3(e,i)),r&&Io(o.latestValues)&&ml(e,o.latestValues))}t.x<AP&&t.x>PP&&(t.x=1),t.y<AP&&t.y>PP&&(t.y=1)}function hl(e,t){e.min=e.min+t,e.max=e.max+t}function DP(e,t,n,r,a=.5){const o=Vt(e.min,e.max,a);Sw(e,t,n,o,r)}function ml(e,t){DP(e.x,t.x,t.scaleX,t.scale,t.originX),DP(e.y,t.y,t.scaleY,t.scale,t.originY)}function e5(e,t){return J3(_ge(e.getBoundingClientRect(),t))}function Uge(e,t,n){const r=e5(e,n),{scroll:a}=t;return a&&(hl(r.x,a.offset.x),hl(r.y,a.offset.y)),r}const kP=()=>({translate:0,scale:1,origin:0,originPoint:0}),pl=()=>({x:kP(),y:kP()}),MP=()=>({min:0,max:0}),Gt=()=>({x:MP(),y:MP()}),Cw={current:null},t5={current:!1};function Bge(){if(t5.current=!0,!!zb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Cw.current=e.matches;e.addEventListener("change",t),t()}else Cw.current=!1}const Hge=new WeakMap;function qge(e,t,n){for(const r in t){const a=t[r],o=n[r];if(Es(a))e.addValue(r,a);else if(Es(o))e.addValue(r,rc(a,{owner:e}));else if(o!==a)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(a):i.hasAnimated||i.set(a)}else{const i=e.getStaticValue(r);e.addValue(r,rc(i!==void 0?i:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const RP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Wge{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:o,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Gs.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,It.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=qg(n),this.isVariantNode=V3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const g=m[p];c[p]!==void 0&&Es(g)&&g.set(c[p])}}mount(t){this.current=t,Hge.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),t5.current||Bge(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),yo(this.notifyUpdate),yo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Lc.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&It.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ac){const n=ac[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<RP.length;r++){const a=RP[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,i=t[o];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=qge(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=rc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(X_(r)||K_(r))?r=parseFloat(r):!ege(r)&&jo.test(n)&&(r=D3(t,n)),this.setBaseTarget(t,Es(r)?r.get():r)),Es(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=yS(this.props,n,this.presenceContext?.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Es(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Gb),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){uS.render(this.render)}}class s5 extends Wge{constructor(){super(...arguments),this.KeyframeResolver=Bfe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Es(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function n5(e,{style:t,vars:n},r,a){const o=e.style;let i;for(i in t)o[i]=t[i];a?.applyProjectionStyles(o,r);for(i in n)o.setProperty(i,n[i])}function zge(e){return window.getComputedStyle(e)}class Xge extends s5{constructor(){super(...arguments),this.type="html",this.renderInstance=n5}readValueFromInstance(t,n){if(Lc.has(n))return this.projection?.isProjecting?gw(n):ife(t,n);{const r=zge(t),a=(Zb(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return e5(t,n)}build(t,n,r){gS(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return jS(t,n,r)}}const r5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Yge(e,t,n,r){n5(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(r5.has(a)?a:wS(a),t.attrs[a])}class Kge extends s5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Gt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Lc.has(n)){const r=A3(n);return r&&r.default||0}return n=r5.has(n)?n:wS(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return X3(t,n,r)}build(t,n,r){H3(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){Yge(t,n,r,a)}mount(t){this.isSVGTag=W3(t.tagName),super.mount(t)}}const Gge=(e,t)=>vS(e)?new Kge(t):new Xge(t,{allowProjection:e!==h.Fragment});function kl(e,t,n){const r=e.getProps();return yS(r,t,n!==void 0?n:r.custom,e)}const Ew=e=>Array.isArray(e);function Jge(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,rc(n))}function Qge(e){return Ew(e)?e[e.length-1]||0:e}function Zge(e,t){const n=kl(e,t);let{transitionEnd:r={},transition:a={},...o}=n||{};o={...o,...r};for(const i in o){const l=Qge(o[i]);Jge(e,i,l)}}function exe(e){return!!(Es(e)&&e.add)}function Tw(e,t){const n=e.getValue("willChange");if(exe(n))return n.add(t);if(!n&&Na.WillChange){const r=new Na.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function a5(e){return e.props[Y3]}const txe=e=>e!==null;function sxe(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(txe),o=t&&n!=="loop"&&t%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const nxe={type:"spring",stiffness:500,damping:25,restSpeed:10},rxe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),axe={type:"keyframes",duration:.8},oxe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ixe=(e,{keyframes:t})=>t.length>2?axe:Lc.has(e)?e.startsWith("scale")?rxe(t[1]):nxe:oxe;function lxe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:o,repeatType:i,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const NS=(e,t,n,r={},a,o)=>i=>{const l=cS(r,e)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ur(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:a};lxe(l)||Object.assign(u,ixe(e,u)),u.duration&&(u.duration=Ur(u.duration)),u.repeatDelay&&(u.repeatDelay=Ur(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let m=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(ww(u),u.delay===0&&(m=!0)),(Na.instantAnimations||Na.skipAnimations)&&(m=!0,ww(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,m&&!o&&t.get()!==void 0){const p=sxe(u.keyframes,l);if(p!==void 0){It.update(()=>{u.onUpdate(p),u.onComplete()});return}}return l.isSync?new iS(u):new Dfe(u)};function cxe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function o5(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...l}=t;r&&(o=r);const c=[],d=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const m=e.getValue(u,e.latestValues[u]??null),p=l[u];if(p===void 0||d&&cxe(d,u))continue;const g={delay:n,...cS(o||{},u)},x=m.get();if(x!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===x&&!g.velocity)continue;let f=!1;if(window.MotionHandoffAnimation){const y=a5(e);if(y){const v=window.MotionHandoffAnimation(y,u,It);v!==null&&(g.startTime=v,f=!0)}}Tw(e,u),m.start(NS(u,m,p,e.shouldReduceMotion&&E3.has(u)?{type:!1}:g,e,f));const w=m.animation;w&&c.push(w)}return i&&Promise.all(c).then(()=>{It.update(()=>{i&&Zge(e,i)})}),c}function i5(e,t,n,r=0,a=1){const o=Array.from(e).sort((d,u)=>d.sortNodePosition(u)).indexOf(t),i=e.size,l=(i-1)*r;return typeof n=="function"?n(o,i):a===1?o*r:l-o*r}function Pw(e,t,n={}){const r=kl(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const o=r?()=>Promise.all(o5(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:m}=a;return dxe(e,t,c,d,u,m,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[o,i]:[i,o];return c().then(()=>d())}else return Promise.all([o(),i(n.delay)])}function dxe(e,t,n=0,r=0,a=0,o=1,i){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Pw(c,t,{...i,delay:n+(typeof r=="function"?0:r)+i5(e.variantChildren,c,r,a,o)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function uxe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(o=>Pw(e,o,n));r=Promise.all(a)}else if(typeof t=="string")r=Pw(e,t,n);else{const a=typeof t=="function"?kl(e,t,n.custom):t;r=Promise.all(o5(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function l5(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const hxe=fS.length;function c5(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?c5(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<hxe;n++){const r=fS[n],a=e.props[r];(Cu(a)||a===!1)&&(t[r]=a)}return t}const mxe=[...pS].reverse(),pxe=pS.length;function fxe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>uxe(e,n,r)))}function gxe(e){let t=fxe(e),n=FP(),r=!0;const a=c=>(d,u)=>{const m=kl(e,u,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:g,...x}=m;d={...d,...x,...g}}return d};function o(c){t=c(e)}function i(c){const{props:d}=e,u=c5(e.parent)||{},m=[],p=new Set;let g={},x=1/0;for(let w=0;w<pxe;w++){const y=mxe[w],v=n[y],j=d[y]!==void 0?d[y]:u[y],N=Cu(j),b=y===c?v.isActive:null;b===!1&&(x=w);let E=j===u[y]&&j!==d[y]&&N;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...g},!v.isActive&&b===null||!j&&!v.prevProp||Hg(j)||typeof j=="boolean")continue;const S=xxe(v.prevProp,j);let P=S||y===c&&v.isActive&&!E&&N||w>x&&N,A=!1;const L=Array.isArray(j)?j:[j];let R=L.reduce(a(y),{});b===!1&&(R={});const{prevResolvedValues:I={}}=v,V={...I,...R},O=D=>{P=!0,p.has(D)&&(A=!0,p.delete(D)),v.needsAnimating[D]=!0;const M=e.getValue(D);M&&(M.liveStyle=!1)};for(const D in V){const M=R[D],_=I[D];if(g.hasOwnProperty(D))continue;let H=!1;Ew(M)&&Ew(_)?H=!l5(M,_):H=M!==_,H?M!=null?O(D):p.add(D):M!==void 0&&p.has(D)?O(D):v.protectedKeys[D]=!0}v.prevProp=j,v.prevResolvedValues=R,v.isActive&&(g={...g,...R}),r&&e.blockInitialAnimation&&(P=!1);const k=E&&S;P&&(!k||A)&&m.push(...L.map(D=>{const M={type:y};if(typeof D=="string"&&r&&!k&&e.manuallyAnimateOnMount&&e.parent){const{parent:_}=e,H=kl(_,D);if(_.enteringChildren&&H){const{delayChildren:$}=H.transition||{};M.delay=i5(_.enteringChildren,e,$)}}return{animation:D,options:M}}))}if(p.size){const w={};if(typeof d.initial!="boolean"){const y=kl(e,Array.isArray(d.initial)?d.initial[0]:d.initial);y&&y.transition&&(w.transition=y.transition)}p.forEach(y=>{const v=e.getBaseTarget(y),j=e.getValue(y);j&&(j.liveStyle=!0),w[y]=v??null}),m.push({animation:w})}let f=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(m):Promise.resolve()}function l(c,d){if(n[c].isActive===d)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,d)),n[c].isActive=d;const u=i(c);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:i,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=FP(),r=!0}}}function xxe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!l5(t,e):!1}function ko(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FP(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class Do{constructor(t){this.isMounted=!1,this.node=t}update(){}}class vxe extends Do{constructor(t){super(t),t.animationState||(t.animationState=gxe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Hg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let yxe=0;class jxe extends Do{constructor(){super(...arguments),this.id=yxe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const wxe={animation:{Feature:vxe},exit:{Feature:jxe}};function Tu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Nh(e){return{point:{x:e.pageX,y:e.pageY}}}const Nxe=e=>t=>hS(t)&&e(t,Nh(t));function Ad(e,t,n,r){return Tu(e,t,Nxe(n),r)}const d5=1e-4,bxe=1-d5,Sxe=1+d5,u5=.01,Cxe=0-u5,Exe=0+u5;function Ls(e){return e.max-e.min}function Txe(e,t,n){return Math.abs(e-t)<=n}function OP(e,t,n,r=.5){e.origin=r,e.originPoint=Vt(t.min,t.max,e.origin),e.scale=Ls(n)/Ls(t),e.translate=Vt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=bxe&&e.scale<=Sxe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Cxe&&e.translate<=Exe||isNaN(e.translate))&&(e.translate=0)}function Dd(e,t,n,r){OP(e.x,t.x,n.x,r?r.originX:void 0),OP(e.y,t.y,n.y,r?r.originY:void 0)}function IP(e,t,n){e.min=n.min+t.min,e.max=e.min+Ls(t)}function Pxe(e,t,n){IP(e.x,t.x,n.x),IP(e.y,t.y,n.y)}function LP(e,t,n){e.min=t.min-n.min,e.max=e.min+Ls(t)}function kd(e,t,n){LP(e.x,t.x,n.x),LP(e.y,t.y,n.y)}function kn(e){return[e("x"),e("y")]}const h5=({current:e})=>e?e.ownerDocument.defaultView:null,$P=(e,t)=>Math.abs(e-t);function Axe(e,t){const n=$P(e.x,t.x),r=$P(e.y,t.y);return Math.sqrt(n**2+r**2)}class m5{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=$v(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=Axe(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:f}=p,{timestamp:w}=gs;this.history.push({...f,timestamp:w});const{onStart:y,onMove:v}=this.handlers;g||(y&&y(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Lv(g,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:x,onSessionEnd:f,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=$v(p.type==="pointercancel"?this.lastMoveEventInfo:Lv(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(p,y),f&&f(p,y)},!hS(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=a||window;const l=Nh(t),c=Lv(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=gs;this.history=[{...d,timestamp:u}];const{onSessionStart:m}=n;m&&m(t,$v(c,this.history)),this.removeListeners=yh(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yo(this.updatePoint)}}function Lv(e,t){return t?{point:t(e.point)}:e}function _P(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $v({point:e},t){return{point:e,delta:_P(e,p5(t)),offset:_P(e,Dxe(t)),velocity:kxe(t,.1)}}function Dxe(e){return e[0]}function p5(e){return e[e.length-1]}function kxe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=p5(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Ur(t)));)n--;if(!r)return{x:0,y:0};const o=Br(a.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(a.x-r.x)/o,y:(a.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Mxe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Vt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Vt(n,e,r.max):Math.min(e,n)),e}function VP(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Rxe(e,{top:t,left:n,bottom:r,right:a}){return{x:VP(e.x,n,a),y:VP(e.y,t,r)}}function UP(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Fxe(e,t){return{x:UP(e.x,t.x),y:UP(e.y,t.y)}}function Oxe(e,t){let n=.5;const r=Ls(e),a=Ls(t);return a>r?n=Nu(t.min,t.max-r,e.min):r>a&&(n=Nu(e.min,e.max-a,t.min)),wa(0,1,n)}function Ixe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Aw=.35;function Lxe(e=Aw){return e===!1?e=0:e===!0&&(e=Aw),{x:BP(e,"left","right"),y:BP(e,"top","bottom")}}function BP(e,t,n){return{min:HP(e,t),max:HP(e,n)}}function HP(e,t){return typeof e=="number"?e:e[t]||0}const $xe=new WeakMap;class _xe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Nh(m).point)},i=(m,p)=>{const{drag:g,dragPropagation:x,onDragStart:f}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zfe(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Hr.test(v)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[y];N&&(v=Ls(N)*(parseFloat(v)/100))}}this.originPoint[y]=v}),f&&It.postRender(()=>f(m,p)),Tw(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:f,onDrag:w}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:y}=p;if(x&&this.currentDirection===null){this.currentDirection=Vxe(y),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",p.point,y),this.updateAxis("y",p.point,y),this.visualElement.render(),w&&w(m,p)},c=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>kn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new m5(t,{onSessionStart:o,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:h5(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!r)return;const{velocity:i}=a;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&It.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!gm(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=Mxe(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&ul(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Rxe(r.layoutBox,t):this.constraints=!1,this.elastic=Lxe(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Ixe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ul(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=Uge(r,a.root,this.visualElement.getTransformPagePoint());let i=Fxe(a.layout.layoutBox,o);if(n){const l=n($ge(i));this.hasMutatedConstraints=!!l,l&&(i=J3(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=kn(u=>{if(!gm(u,n,this.currentDirection))return;let m=c&&c[u]||{};i&&(m={min:0,max:0});const p=a?200:1e6,g=a?40:1e7,x={type:"inertia",velocity:r?t[u]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Tw(this.visualElement,t),r.start(NS(t,r,0,n,this.visualElement,!1))}stopAnimation(){kn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){kn(n=>{const{drag:r}=this.getProps();if(!gm(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(n);if(a&&a.layout){const{min:i,max:l}=a.layout.layoutBox[n];o.set(t[n]-Vt(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ul(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};kn(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();a[i]=Oxe({min:c,max:c},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kn(i=>{if(!gm(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:d}=this.constraints[i];l.set(Vt(c,d,a[i]))})}addListeners(){if(!this.visualElement.current)return;$xe.set(this.visualElement,this);const t=this.visualElement.current,n=Ad(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ul(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),It.read(r);const i=Tu(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(kn(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:i=Aw,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:o,dragElastic:i,dragMomentum:l}}}function gm(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Vxe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Uxe extends Do{constructor(t){super(t),this.removeGroupControls=Un,this.removeListeners=Un,this.controls=new _xe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Un}unmount(){this.removeGroupControls(),this.removeListeners()}}const qP=e=>(t,n)=>{e&&It.postRender(()=>e(t,n))};class Bxe extends Do{constructor(){super(...arguments),this.removePointerDownListener=Un}onPointerDown(t){this.session=new m5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:qP(t),onStart:qP(n),onMove:r,onEnd:(o,i)=>{delete this.session,a&&It.postRender(()=>a(o,i))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Km={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const sd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=WP(e,t.target.x),r=WP(e,t.target.y);return`${n}% ${r}%`}},Hxe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=jo.parse(e);if(a.length>5)return r;const o=jo.createTransformer(e),i=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;a[0+i]/=l,a[1+i]/=c;const d=Vt(l,c,.5);return typeof a[2+i]=="number"&&(a[2+i]/=d),typeof a[3+i]=="number"&&(a[3+i]/=d),o(a)}};let _v=!1;class qxe extends h.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:o}=t;hge(Wxe),o&&(n.group&&n.group.add(o),r&&r.register&&a&&r.register(o),_v&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Km.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:o}=this.props,{projection:i}=r;return i&&(i.isPresent=o,_v=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==o?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||It.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uS.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;_v=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function f5(e){const[t,n]=L3(),r=h.useContext(qb);return s.jsx(qxe,{...e,layoutGroup:r,switchLayoutGroup:h.useContext(K3),isPresent:t,safeToRemove:n})}const Wxe={borderRadius:{...sd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sd,borderTopRightRadius:sd,borderBottomLeftRadius:sd,borderBottomRightRadius:sd,boxShadow:Hxe};function zxe(e,t,n){const r=Es(e)?e:rc(e);return r.start(NS("",r,t,n)),r.animation}const Xxe=(e,t)=>e.depth-t.depth;class Yxe{constructor(){this.children=[],this.isDirty=!1}add(t){Xb(this.children,t),this.isDirty=!0}remove(t){Yb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Xxe),this.isDirty=!1,this.children.forEach(t)}}function Kxe(e,t){const n=Gs.now(),r=({timestamp:a})=>{const o=a-n;o>=t&&(yo(r),e(o-t))};return It.setup(r,!0),()=>yo(r)}const g5=["TopLeft","TopRight","BottomLeft","BottomRight"],Gxe=g5.length,zP=e=>typeof e=="string"?parseFloat(e):e,XP=e=>typeof e=="number"||Be.test(e);function Jxe(e,t,n,r,a,o){a?(e.opacity=Vt(0,n.opacity??1,Qxe(r)),e.opacityExit=Vt(t.opacity??1,0,Zxe(r))):o&&(e.opacity=Vt(t.opacity??1,n.opacity??1,r));for(let i=0;i<Gxe;i++){const l=`border${g5[i]}Radius`;let c=YP(t,l),d=YP(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||XP(c)===XP(d)?(e[l]=Math.max(Vt(zP(c),zP(d),r),0),(Hr.test(d)||Hr.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Vt(t.rotate||0,n.rotate||0,r))}function YP(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Qxe=x5(0,.5,n3),Zxe=x5(.5,.95,Un);function x5(e,t,n){return r=>r<e?0:r>t?1:n(Nu(e,t,r))}function KP(e,t){e.min=t.min,e.max=t.max}function Dn(e,t){KP(e.x,t.x),KP(e.y,t.y)}function GP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function JP(e,t,n,r,a){return e-=t,e=gf(e,1/n,r),a!==void 0&&(e=gf(e,1/a,r)),e}function eve(e,t=0,n=1,r=.5,a,o=e,i=e){if(Hr.test(t)&&(t=parseFloat(t),t=Vt(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=Vt(o.min,o.max,r);e===o&&(l-=t),e.min=JP(e.min,t,n,l,a),e.max=JP(e.max,t,n,l,a)}function QP(e,t,[n,r,a],o,i){eve(e,t[n],t[r],t[a],t.scale,o,i)}const tve=["x","scaleX","originX"],sve=["y","scaleY","originY"];function ZP(e,t,n,r){QP(e.x,t,tve,n?n.x:void 0,r?r.x:void 0),QP(e.y,t,sve,n?n.y:void 0,r?r.y:void 0)}function e2(e){return e.translate===0&&e.scale===1}function v5(e){return e2(e.x)&&e2(e.y)}function t2(e,t){return e.min===t.min&&e.max===t.max}function nve(e,t){return t2(e.x,t.x)&&t2(e.y,t.y)}function s2(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function y5(e,t){return s2(e.x,t.x)&&s2(e.y,t.y)}function n2(e){return Ls(e.x)/Ls(e.y)}function r2(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class rve{constructor(){this.members=[]}add(t){Xb(this.members,t),t.scheduleRender()}remove(t){if(Yb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ave(e,t,n){let r="";const a=e.x.translate/t.x,o=e.y.translate/t.y,i=n?.z||0;if((a||o||i)&&(r=`translate3d(${a}px, ${o}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:m,rotateY:p,skewX:g,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),u&&(r+=`rotate(${u}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Vv=["","X","Y","Z"],ove=1e3;let ive=0;function Uv(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function j5(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=a5(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",It,!(a||o))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&j5(r)}function w5({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(i={},l=t?.()){this.id=ive++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dve),this.nodes.forEach(pve),this.nodes.forEach(fve),this.nodes.forEach(uve)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Yxe)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Gb),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=I3(i)&&!Qfe(i),this.instance=i;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let u,m=0;const p=()=>this.root.updateBlockedByResize=!1;It.read(()=>{m=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,u&&u(),u=Kxe(p,250),Km.hasAnimatedSinceResize&&(Km.hasAnimatedSinceResize=!1,this.nodes.forEach(i2)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||jve,{onLayoutAnimationStart:f,onLayoutAnimationComplete:w}=d.getProps(),y=!this.targetLayout||!y5(this.targetLayout,g),v=!m&&p;if(this.options.layoutRoot||this.resumeFrom||v||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...cS(x,"layout"),onPlay:f,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(u,v)}else m||i2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gve),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&j5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(o2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mve),this.nodes.forEach(lve),this.nodes.forEach(cve)):this.nodes.forEach(o2),this.clearAllSnapshots();const l=Gs.now();gs.delta=wa(0,1e3/60,l-gs.timestamp),gs.timestamp=l,gs.isProcessing=!0,Av.update.process(gs),Av.preRender.process(gs),Av.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hve),this.sharedNodes.forEach(xve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ls(this.snapshot.measuredBox.x)&&!Ls(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!v5(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;i&&this.instance&&(l||Io(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),wve(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Gt();const l=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Nve))){const{scroll:d}=this.root;d&&(hl(l.x,d.offset.x),hl(l.y,d.offset.y))}return l}removeElementScroll(i){const l=Gt();if(Dn(l,i),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:m}=d;d!==this.root&&u&&m.layoutScroll&&(u.wasRoot&&Dn(l,i),hl(l.x,u.offset.x),hl(l.y,u.offset.y))}return l}applyTransform(i,l=!1){const c=Gt();Dn(c,i);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ml(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Io(u.latestValues)&&ml(c,u.latestValues)}return Io(this.latestValues)&&ml(c,this.latestValues),c}removeTransform(i){const l=Gt();Dn(l,i);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Io(d.latestValues))continue;bw(d.latestValues)&&d.updateSnapshot();const u=Gt(),m=d.measurePageBox();Dn(u,m),ZP(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Io(this.latestValues)&&ZP(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:m}=this.options;if(!(!this.layout||!(u||m))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),kd(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Pxe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dn(this.target,this.layout.layoutBox),Z3(this.target,this.targetDelta)):Dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),kd(this.relativeTargetOrigin,this.target,p.target),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||bw(this.parent.latestValues)||Q3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;Dn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;Vge(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Gt());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GP(this.prevProjectionDelta.x,this.projectionDelta.x),GP(this.prevProjectionDelta.y,this.projectionDelta.y)),Dd(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!r2(this.projectionDelta.x,this.prevProjectionDelta.x)||!r2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pl(),this.projectionDelta=pl(),this.projectionDeltaWithTransform=pl()}setAnimationOrigin(i,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=pl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Gt(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,f=g!==x,w=this.getStack(),y=!w||w.members.length<=1,v=!!(f&&!y&&this.options.crossfade===!0&&!this.path.some(yve));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const b=N/1e3;l2(m.x,i.x,b),l2(m.y,i.y,b),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kd(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vve(this.relativeTarget,this.relativeTargetOrigin,p,b),j&&nve(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Gt()),Dn(j,this.relativeTarget)),f&&(this.animationValues=u,Jxe(u,d,this.latestValues,b,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(yo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{Km.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rc(0)),this.currentAnimation=zxe(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ove),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=i;if(!(!l||!c||!d)){if(this!==i&&this.layout&&d&&N5(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Gt();const m=Ls(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+m;const p=Ls(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+p}Dn(l,c),ml(l,u),Dd(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new rve),this.sharedNodes.get(i).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&Uv("z",i,d,this.animationValues);for(let u=0;u<Vv.length;u++)Uv(`rotate${Vv[u]}`,i,d,this.animationValues),Uv(`skew${Vv[u]}`,i,d,this.animationValues);i.render();for(const u in d)i.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Ym(l?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Ym(l?.pointerEvents)||""),this.hasProjected&&!Io(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=ave(this.projectionDeltaWithTransform,this.treeScale,u);c&&(m=c(u,m)),i.transform=m;const{x:p,y:g}=this.projectionDelta;i.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?i.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:i.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in Eu){if(u[x]===void 0)continue;const{correct:f,applyTo:w,isCSSVariable:y}=Eu[x],v=m==="none"?u[x]:f(u[x],d);if(w){const j=w.length;for(let N=0;N<j;N++)i[w[N]]=v}else y?this.options.visualElement.renderState.vars[x]=v:i[x]=v}this.options.layoutId&&(i.pointerEvents=d===this?Ym(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(a2),this.root.sharedNodes.clear()}}}function lve(e){e.updateLayout()}function cve(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?kn(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Ls(m);m.min=n[u].min,m.max=m.min+p}):N5(a,t.layoutBox,n)&&kn(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Ls(n[u]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const i=pl();Dd(i,n,t.layoutBox);const l=pl();o?Dd(l,e.applyTransform(r,!0),t.measuredBox):Dd(l,n,t.layoutBox);const c=!v5(i);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:m,layout:p}=u;if(m&&p){const g=Gt();kd(g,t.layoutBox,m.layoutBox);const x=Gt();kd(x,n,p.layoutBox),y5(g,x)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function dve(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function uve(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function hve(e){e.clearSnapshot()}function a2(e){e.clearMeasurements()}function o2(e){e.isLayoutDirty=!1}function mve(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function i2(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pve(e){e.resolveTargetDelta()}function fve(e){e.calcProjection()}function gve(e){e.resetSkewAndRotation()}function xve(e){e.removeLeadSnapshot()}function l2(e,t,n){e.translate=Vt(t.translate,0,n),e.scale=Vt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function c2(e,t,n,r){e.min=Vt(t.min,n.min,r),e.max=Vt(t.max,n.max,r)}function vve(e,t,n,r){c2(e.x,t.x,n.x,r),c2(e.y,t.y,n.y,r)}function yve(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const jve={duration:.45,ease:[.4,0,.1,1]},d2=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),u2=d2("applewebkit/")&&!d2("chrome/")?Math.round:Un;function h2(e){e.min=u2(e.min),e.max=u2(e.max)}function wve(e){h2(e.x),h2(e.y)}function N5(e,t,n){return e==="position"||e==="preserve-aspect"&&!Txe(n2(t),n2(n),.2)}function Nve(e){return e!==e.root&&e.scroll?.wasRoot}const bve=w5({attachResizeListener:(e,t)=>Tu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bv={current:void 0},b5=w5({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Bv.current){const e=new bve({});e.mount(window),e.setOptions({layoutScroll:!0}),Bv.current=e}return Bv.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Sve={pan:{Feature:Bxe},drag:{Feature:Uxe,ProjectionNode:b5,MeasureLayout:f5}};function m2(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,o=r[a];o&&It.postRender(()=>o(t,Nh(t)))}class Cve extends Do{mount(){const{current:t}=this.node;t&&(this.unmount=Xfe(t,(n,r)=>(m2(this.node,r,"Start"),a=>m2(this.node,a,"End"))))}unmount(){}}class Eve extends Do{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yh(Tu(this.node.current,"focus",()=>this.onFocus()),Tu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function p2(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),o=r[a];o&&It.postRender(()=>o(t,Nh(t)))}class Tve extends Do{mount(){const{current:t}=this.node;t&&(this.unmount=Jfe(t,(n,r)=>(p2(this.node,r,"Start"),(a,{success:o})=>p2(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dw=new WeakMap,Hv=new WeakMap,Pve=e=>{const t=Dw.get(e.target);t&&t(e)},Ave=e=>{e.forEach(Pve)};function Dve({root:e,...t}){const n=e||document;Hv.has(n)||Hv.set(n,{});const r=Hv.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(Ave,{root:e,...t})),r[a]}function kve(e,t,n){const r=Dve(t);return Dw.set(e,n),r.observe(e),()=>{Dw.delete(e),r.unobserve(e)}}const Mve={some:0,all:1};class Rve extends Do{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:o}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:Mve[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),p=d?u:m;p&&p(c)};return kve(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Fve(t,n))&&this.startObserver()}unmount(){}}function Fve({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Ove={inView:{Feature:Rve},tap:{Feature:Tve},focus:{Feature:Eve},hover:{Feature:Cve}},Ive={layout:{ProjectionNode:b5,MeasureLayout:f5}},Lve={...wxe,...Ove,...Sve,...Ive},$ve=Lge(Lve,Gge),_ve=({notification:e})=>{const t=W_(i=>i.removeNotification),n=I_(),r={success:s.jsx(rs,{className:"h-5 w-5"}),error:s.jsx(en,{className:"h-5 w-5"}),warning:s.jsx(Ps,{className:"h-5 w-5"}),info:s.jsx(ds,{className:"h-5 w-5"})},a={success:"bg-green-50 text-green-900 border-green-200 dark:bg-green-900/20 dark:text-green-100 dark:border-green-800",error:"bg-red-50 text-red-900 border-red-200 dark:bg-red-900/20 dark:text-red-100 dark:border-red-800",warning:"bg-yellow-50 text-yellow-900 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-100 dark:border-yellow-800",info:"bg-blue-50 text-blue-900 border-blue-200 dark:bg-blue-900/20 dark:text-blue-100 dark:border-blue-800"},o={success:"text-green-600 dark:text-green-400",error:"text-red-600 dark:text-red-400",warning:"text-yellow-600 dark:text-yellow-400",info:"text-blue-600 dark:text-blue-400"};return s.jsxs($ve.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95,transition:{duration:.2}},transition:{duration:n.enabled?.3:0},className:ce("flex items-start gap-3 p-4 rounded-lg border shadow-lg backdrop-blur-sm",a[e.type],"min-w-[320px] max-w-[420px]"),children:[s.jsx("div",{className:ce("flex-shrink-0",o[e.type]),children:r[e.type]}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("h4",{className:"text-sm font-semibold",children:e.title}),e.message&&s.jsx("p",{className:"text-sm opacity-90",children:e.message}),e.action&&s.jsx(z,{variant:"link",size:"sm",onClick:e.action.onClick,className:"p-0 h-auto font-medium",children:e.action.label})]}),e.dismissible&&s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>t(e.id),className:"flex-shrink-0 h-auto p-1 hover:bg-black/10 dark:hover:bg-white/10",children:s.jsx(jt,{className:"h-4 w-4"})})]})},Vve=()=>{const e=W_(t=>t.notifications);return I_(),s.jsx("div",{className:"fixed top-4 right-4 z-[100] space-y-2","aria-live":"polite","aria-atomic":"false",children:s.jsx(age,{mode:"sync",children:e.map(t=>s.jsx(_ve,{notification:t},t.id))})})};let qv=!1,kw=[];const f2=(e,t=null)=>{kw.forEach(n=>{e?n.reject(e):n.resolve(t)}),kw=[]};let Wv=!1;const Uve=()=>{Pt.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",Pt.interceptors.request.use(e=>{const t=pn.getToken();return t&&(e.headers.Authorization=`Bearer ${t}`),e.headers["X-Requested-With"]="XMLHttpRequest",e},e=>Promise.reject(e)),Pt.interceptors.response.use(e=>e,async e=>{const t=e.config;if(!e.response||!t)return Promise.reject(e);const n=t.url?.includes("/auth/");return Wv?Promise.reject(e):e.response?.status===401&&!t._retry&&!n?qv?new Promise((r,a)=>{kw.push({resolve:r,reject:a})}).then(r=>(t.headers.Authorization=`Bearer ${r}`,Pt(t))).catch(r=>Promise.reject(r)):(t._retry=!0,qv=!0,new Promise((r,a)=>{pn.refreshToken().then(o=>{if(o.success&&o.data)pn.setToken(o.data.token),Pt.defaults.headers.common.Authorization=`Bearer ${o.data.token}`,t.headers.Authorization=`Bearer ${o.data.token}`,f2(null,o.data.token),r(Pt(t));else throw new Error("Token refresh failed")}).catch(o=>{f2(o,null),Wv=!0,localStorage.removeItem("integration_platform_token"),localStorage.removeItem("integration_platform_refresh_token"),localStorage.removeItem("integration_platform_user"),window.location.pathname!=="/login"?window.location.replace("/login"):Wv=!1,a(o)}).finally(()=>{qv=!1})})):Promise.reject(e)})},Bve=()=>{const e=Hb(t=>t.theme);return h.useEffect(()=>{e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),null},Hve=()=>null,qve=()=>(h.useEffect(()=>{const e=setTimeout(()=>{Uve()},100);return console.log("Application initialized",{version:"1.0.0",environment:"production"}),()=>clearTimeout(e)},[]),s.jsx(rpe,{children:s.jsx(npe,{children:s.jsxs(aM,{children:[s.jsx(Bve,{}),s.jsx(V8,{}),s.jsx(Vve,{}),s.jsxs(nW,{children:[s.jsx(Hve,{}),s.jsx(Wz,{children:s.jsx(zz,{children:s.jsxs(Kq,{children:[s.jsx(dt,{path:"/login",element:s.jsx(eK,{})}),s.jsx(dt,{element:s.jsx(Yz,{}),children:s.jsxs(dt,{path:"/",element:s.jsx(GY,{}),children:[s.jsx(dt,{index:!0,element:s.jsx(Ap,{to:"/dashboard",replace:!0})}),s.jsx(dt,{path:"dashboard",element:s.jsx(fK,{})}),s.jsx(dt,{path:"test",element:s.jsx(gK,{})}),s.jsx(dt,{path:"create-flow",element:s.jsx(xK,{})}),s.jsx(dt,{path:"create-direct-mapping-flow",element:s.jsx(zE,{})}),s.jsx(dt,{path:"create-orchestration-flow",element:s.jsx(Gne,{})}),s.jsx(dt,{path:"flows/:flowId/edit",element:s.jsx(zE,{})}),s.jsx(dt,{path:"communication-adapters",element:s.jsx(Tie,{})}),s.jsx(dt,{path:"communication-adapters/:id",element:s.jsx(vT,{})}),s.jsx(dt,{path:"create-communication-adapter",element:s.jsx(vT,{})}),s.jsx(dt,{path:"data-structures",element:s.jsx(qie,{})}),s.jsx(dt,{path:"data-structures/:id",element:s.jsx(PT,{})}),s.jsx(dt,{path:"create-data-structure",element:s.jsx(PT,{})}),s.jsx(dt,{path:"message-structures/:id",element:s.jsx(xv,{})}),s.jsx(dt,{path:"message-structures/:id/edit",element:s.jsx(xv,{})}),s.jsx(dt,{path:"create-message-structure",element:s.jsx(xv,{})}),s.jsx(dt,{path:"flow-structures/:id",element:s.jsx(vv,{})}),s.jsx(dt,{path:"flow-structures/:id/edit",element:s.jsx(vv,{})}),s.jsx(dt,{path:"create-flow-structure",element:s.jsx(vv,{})}),s.jsx(dt,{path:"business-components",element:s.jsx(Ule,{})}),s.jsx(dt,{path:"all-interfaces",element:s.jsx(epe,{})}),s.jsx(dt,{path:"interfaces",element:s.jsx(Ap,{to:"/all-interfaces",replace:!0})}),s.jsx(dt,{path:"interfaces/:flowId/details",element:s.jsx(Pde,{})}),s.jsx(dt,{path:"messages",element:s.jsx(nce,{})}),s.jsx(dt,{path:"adapter-monitoring",element:s.jsx(Ede,{})}),s.jsx(dt,{path:"admin",element:s.jsx(khe,{})}),s.jsx(dt,{path:"settings",element:s.jsx($he,{})}),s.jsx(dt,{path:"development-functions",element:s.jsx(Jme,{})}),s.jsx(dt,{path:"*",element:s.jsx(tpe,{})})]})})]})})})]})]})})}));PD(document.getElementById("root")).render(s.jsx(qve,{}));
